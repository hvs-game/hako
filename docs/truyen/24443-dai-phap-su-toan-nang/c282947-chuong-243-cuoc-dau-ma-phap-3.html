<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Đại Pháp Sư Toàn Năng - Chương 243: Cuộc đấu ma pháp (3) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Siêu tân tinh bùng nổ, lao đi nhanh như ánh sáng! Con người ôm giấc mơ vô tận giữa vũ trụ mênh mông. Shirone, đứa trẻ bị bỏ lại trong chuồng ngựa, quấn tã đơn sơ, Tự học, say mê sách đến mức sinh tử chẳng màng, Dẫu là con...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="wfpvrYE0XjoZNOQd3BNMljmjN2itpD4h6hHTwhlZ">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24443-dai-phap-su-toan-nang/c282947-chuong-243-cuoc-dau-ma-phap-3">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24443-cf3f3167-f7a1-4c54-8b01-64f5b4739bb8.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24443-dai-phap-su-toan-nang/c282904-chuong-242-cuoc-dau-ma-phap-2"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24443-dai-phap-su-toan-nang"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24443-dai-phap-su-toan-nang/c282969-chuong-244-ma-phap-giao-phong-4"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24443-dai-phap-su-toan-nang/c282947-chuong-243-cuoc-dau-ma-phap-3" style="background: url('https://i.hako.vn/ln/series/covers/s24443-cf3f3167-f7a1-4c54-8b01-64f5b4739bb8.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24443-dai-phap-su-toan-nang">Đại Pháp Sư Toàn Năng</a></h5>
                    <small><i class="fas fa-pen"></i>Kim Chi Woo / 김치우</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=" disabled "><a href="/truyen/24443-dai-phap-su-toan-nang">Tập 9</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24443-dai-phap-su-toan-nang/t35329-tap-04">Tập 10</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c280999-chuong-221-ky-uc-ve-galliant-1">
                                                                        Chương 221: Ký ức về Galliant (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281007-chuong-222-ky-uc-cua-galliant-2">
                                                                        Chương 222: Ký ức về Galliant (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281008-chuong-223-ky-uc-ve-galliant-3">
                                                                        Chương 223: Ký ức về Galliant (3) / Chờ ngày khai giảng (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281009-chuong-224-cho-ngay-khai-giang-2">
                                                                        Chương 224: Chờ ngày khai giảng (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281011-chuong-225-cho-ngay-khai-giang-3">
                                                                        Chương 225: Chờ ngày khai giảng (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281241-chuong-226-cho-ngay-khai-giang-4-shirone-dau-roi-1">
                                                                        Chương 226: Chờ ngày khai giảng (4) / Shirone đâu rồi? (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281243-chuong-227-shirone-dau-roi-2">
                                                                        Chương 227: Shirone đâu rồi? (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281246-chuong-228-shirone-dau-roi-3">
                                                                        Chương 228: Shirone đâu rồi? (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281247-chuong-229-shirone-dau-roi-4">
                                                                        Chương 229: Shirone đâu rồi? (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281248-chuong-230-shirone-dau-roi-5">
                                                                        Chương 230: Shirone đâu rồi? (5)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c281253-chuong-231-shirone-dau-roi-6-mo-phong-chien-dau-1">
                                                                        Chương 231: Shirone đâu rồi? (6) / Mô phỏng chiến đấu (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282071-chuong-232-mo-phong-chien-dau-2">
                                                                        Chương 232: Mô phỏng chiến đấu (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282075-chuong-233-mo-phong-chien-dau-3">
                                                                        Chương 233: Mô phỏng chiến đấu (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282198-chuong-234-mo-phong-chien-dau-4">
                                                                        Chương 234: Mô phỏng chiến đấu (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282212-chuong-235-mo-phong-chien-dau-5">
                                                                        Chương 235: Mô phỏng chiến đấu (5)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282237-chuong-236-mo-phong-chien-dau-6">
                                                                        Chương 236: Mô phỏng chiến đấu (6)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282337-chuong-237-mo-phong-chien-dau-7">
                                                                        Chương 237: Mô phỏng chiến đấu (7)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282347-chuong-238-mo-phong-chien-dau-8">
                                                                        Chương 238: Mô phỏng chiến đấu (8)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282355-chuong-239-mo-phong-chien-dau-9-diem-tran-1">
                                                                        Chương 239: Mô phỏng chiến đấu (9) / Điểm quyết định (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282363-chuong-240-diem-quyet-dinh-2">
                                                                        Chương 240: Điểm quyết định (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282375-chuong-241-diem-quyet-dinh-3-ma-thuat-doi-dau-1">
                                                                        Chương 241: Điểm quyết định (3) / Cuộc đấu ma pháp (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282904-chuong-242-cuoc-dau-ma-phap-2">
                                                                        Chương 242: Cuộc đấu ma pháp (2)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282947-chuong-243-cuoc-dau-ma-phap-3">
                                                                        Chương 243: Cuộc đấu ma pháp (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282969-chuong-244-ma-phap-giao-phong-4">
                                                                        Chương 244: Cuộc đấu ma pháp (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282998-chuong-246-cuoc-dau-ma-phap-6">
                                                                        Chương 245: Cuộc đấu ma pháp (5)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c282999-chuong-246-cuoc-dau-ma-phap-6">
                                                                        Chương 246: Cuộc đấu ma pháp (6)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283026-chuong-246-cuoc-dau-ma-phap-7">
                                                                        Chương 247: Cuộc đấu ma pháp (7)
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=""><a href="/truyen/24443-dai-phap-su-toan-nang/c283189-chuong-248-he-thong-van-hanh-1">Tập 11</a></li>
                                        
                                                            <li class=""><a href="/truyen/24443-dai-phap-su-toan-nang/c283743-chuong-272-moi-quan-he-huu-nghi-day-thu-dich-1">Tập 12</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 10</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 243: Cuộc đấu ma pháp (3)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24443-dai-phap-su-toan-nang/c282947-chuong-243-cuoc-dau-ma-phap-3#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,484 từ - Cập nhật: 
                        <time class="topic-time timeago" title="01-01-2026 00:03:29" datetime="2026-01-01T00:03:29+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 243: Cuộc đấu ma pháp (3)</p>
                    <p id="1"><strong>Cuộc đấu ma pháp (3)</strong></p><p id="2">“Tôi sẽ không để yên cho cậu đâu!”</p><p id="3">Sabina không còn dư sức để thi triển Gia Tốc, cứ thế lao thẳng tới. Dù sao thì đối phương cũng không còn trạng thái để duy trì Plasma nữa.</p><p id="4">Ngay khoảnh khắc đó, từ miệng Nade vang lên một câu nói gây chấn động.</p><p id="5">“Tôi thua rồi.”</p><p id="6">Trước lời tuyên bố đầu hàng đột ngột, Sabina đang định đánh vào cổ Nade vội vàng dừng bước.</p><p id="7">Cô rất muốn tự tay kết liễu hắn, nhưng sau khi đã tuyên bố đầu hàng mà còn tấn công thì sẽ bị xử thua ngay lập tức.</p><p id="8">Đến nước này, cô chẳng cảm thấy mình đã thắng, trong lòng lại dấy lên cảm giác khó chịu khó nói. Nhưng nghĩ rằng Nade đã dốc cạn toàn bộ sức lực trong lần va chạm cuối cùng thì cũng đành thôi.</p><p id="9">“Hừ, xem như cậu gặp may. Quỳ xuống và chính thức thừa nhận thất bại đi.”</p><p id="10">Nade lập tức giữ lời hứa. Vốn dĩ hắn đã quỳ sẵn, giờ chỉ cần cử động miệng là đủ.</p><p id="11">“Ừ. Tôi thua.”</p><p id="12">Sắc mặt Sabina sa sầm lại. Cô đặt ra luật này là để thưởng thức dáng vẻ thảm hại đắm chìm trong cảm giác bại trận. Nhưng từ Nade, cô không cảm nhận được thứ cảm xúc cay độc đó.</p><p id="13">“Này, cậu là đàn ông thật sao? Thua một con gái mà có thể ngoan ngoãn quỳ xuống như vậy à?”</p><p id="14">“Thua thì nói là thua thôi. Với lại nói thật là cũng nhục lắm chứ? Giờ dừng lại được chưa?”</p><p id="15">Nade cúi gằm đầu như một kẻ bại trận thực thụ rồi quay về phía bạn bè. Thà rằng hắn cười cợt phủ nhận kết quả thì có lẽ cô còn đỡ khó chịu hơn.</p><p id="16">Sade liếm môi, nhìn theo bóng Nade đang rời xa.</p><p id="17">‘Thử thêm chút nữa đi. Sabina cũng gần cạn rồi mà. Dù sao cũng làm tốt lắm, Nade.’</p><p id="18">Trận đấu kết thúc nhanh hơn dự đoán. Với học sinh lớp 4, ai cũng có ít nhất một ma pháp sở hữu sức phá hoại mạnh.</p><p id="19">Trong thực chiến hiếm khi có cơ hội niệm chú, nhưng trận đấu lần này vừa khớp về tương khắc, trình độ lại ngang nhau, nên có thể kết thúc gọn gàng bằng cuộc đối đầu sức mạnh thuần túy.</p><p id="20">Khi tới chỗ bạn bè, Nade nhắm chặt mắt, cúi đầu vì nỗi áy náy không sao kìm nén được.</p><p id="21">“Shirone, Iruki! Xin lỗi! Tớ thua rồi! Thật sự xin lỗi!”</p><p id="22">“Sao lại nói vậy? Đây là chiến đấu theo đội mà. Bản thân tớ cũng đâu dám chắc mình sẽ thắng. Không sao đâu, cậu đã cố hết sức rồi.”</p><p id="23">Iruki góp thêm một câu.</p><p id="24">“Với cậu thì làm được đến mức này là khá rồi. Ít nhất cũng tiến bộ hơn trước.”</p><p id="25">Thú thật, chẳng ai ngờ Nade có thể làm được tới mức này. Hồi giao đấu với Lucas của băng Hải tặc Vẹt, hắn còn bỏ cuộc giữa chừng, vậy mà dạo gần đây xem ra đã kiểm soát được bản thân phần nào.</p><p id="26">“Tớ về ký túc xá nghỉ trước nhé. Được chứ?”</p><p id="27">“Ừ. Cậu mệt rồi, về sớm nghỉ đi.”</p><p id="28">Đến Shirone cũng không ngăn cản được.</p><p id="29">Thế là Nade hòa vào dòng học sinh rời khỏi bãi thực tập. Nhưng nơi hắn hướng tới không phải ký túc xá mà là một công viên hẻo lánh. Chỉ khi xác nhận không có ai xung quanh, tâm tư bị kìm nén bấy lâu mới bộc phát.</p><p id="30">“Á! Chết tiệt! Đồ ngu!”</p><p id="31">Hắn muốn trở thành chỗ dựa cho Shirone. Nhưng Sabina thực sự quá mạnh, và nếu trận đấu còn tiếp diễn, cái giá mà hắn phải trả sẽ vượt xa sức tưởng tượng.</p><p id="32">Ít nhất lúc này, hắn vẫn cần cái vòng bảo hộ mang tên học viện.</p><p id="33">“Hô hô hô! Hóa ra cậu ở đây à? Làm ra vẻ bình thản, nhưng chắc xấu hổ đến chết rồi nhỉ?”</p><p id="34">Nade khẽ thở dài. Quay đầu lại, Sabina đã đứng phía sau hắn từ lúc nào.</p><p id="35">“Cậu vẫn còn chuyện gì với tôi sao? Trận đấu kết thúc rồi mà.”</p><p id="36">“Không, tôi thấy vẫn còn thiếu thiếu gì đó. Thú thật là tôi rất khó chịu. Không biết vì sao, nhưng tôi có cảm giác cậu vẫn chưa thật sự tâm phục khẩu phục.”</p><p id="37">“Tôi quỳ cả rồi, còn muốn tôi làm gì nữa?”</p><p id="38">“Tôi cũng không rõ. Hay là quỳ thêm một lần nữa ở đây đi?”</p><p id="39">Nade không còn tâm trạng đâu để chiều theo sự ngang ngược của Sabina. Hắn chỉ thấy có lỗi với Shirone, và chỉ càng khinh thường bản thân vì không giúp được bạn mình.</p><p id="40">“Tự cậu nghĩ sao thì nghĩ. Cậu muốn đồn rằng mình mạnh hơn tôi cũng được, tôi sẽ không nói gì. Chỉ cần để tôi yên. Tôi đi đây.”</p><p id="41">Ngay khoảnh khắc Nade quay người về phía ký túc xá, Sabina cất tiếng.</p><p id="42">“Tôi có tìm hiểu thử thì thấy, gia tộc West cũng khá nổi tiếng đấy chứ?”</p><p id="43">Bước chân Nade khựng lại.</p><p id="44">“Nghe nói đúng là nát đến mức không còn gì để nói. Gia chủ thì là thằng cờ bạc thất nghiệp, chủ mẫu thì bị giới thượng lưu tẩy chay? Không có gì trong tay mà lại thích phung phí, tiếng xấu lan xa lắm cơ mà……!”</p><p id="45">Ầm ầm!! Tiếng sấm vang lên.</p><p id="46">Sabina đột nhiên cảm thấy cổ họng bị bóp nghẹt, thế giới trước mắt quay cuồng. Khi tỉnh lại, cô đã bị nện vào một gốc cây trong khu rừng sâu.</p><p id="47">Nade siết chặt cổ Sabina, áp sát khuôn mặt mình vào cô.</p><p id="48">“Nói lại xem.”</p><p id="49">“Khụ! Khục!”</p><p id="50">Nhìn thẳng vào gương mặt Nade, Sabina sợ hãi đến tê liệt. Đó không phải biểu cảm mà con người có thể tạo ra. Không phải ác nhân, cũng chẳng phải kẻ giết người biến thái - mà đơn thuần là một con quái vật.</p><p id="51">‘Mình sẽ chết ở đây……’</p><p id="52">Không phải phỏng đoán, mà là chắc chắn. Nếu bị kẻ sát nhân bắt thì còn có thể hy vọng, chứ bị dã thú vồ lấy thì chẳng có con người ngu ngốc nào lại trông mong vào lòng từ bi.</p><p id="53">“Muốn sống không?”</p><p id="54">Sabina liều mạng gật đầu. Ý thức dần mờ đi, cô không kìm được mà tiểu tiện ra quần.</p><p id="55">“Tôi bẻ gãy cổ cậu nhé? Hay là rút cạn máu của cậu?”</p><p id="56">Sabina chẳng hiểu hắn đang nói gì. Như thể đầu và thân đã bị tách rời, đôi chân cô không còn nghe lời.</p><p id="57">“Ư… ư ử!”</p><p id="58">Nade méo mó gương mặt, tụ điện quang trong lòng bàn tay. Hắn định trực tiếp làm bốc hơi máu cô.</p><p id="59">Khoảnh khắc sức điện tập trung trong tay, một gương mặt hiện lên trong đầu hắn. Giọng nói của nàng dịu dàng xoa dịu con thú trong Nade.</p><p id="60">‘Nade, một lần sai lầm là đủ rồi, đúng không?’</p><p id="61">Đôi mắt Nade đỏ ngầu như sắp rỉ máu. Nhưng dần dần, trong con ngươi lại xuất hiện nét nhân tính. Hắn buông cổ Sabina ra rồi chậm rãi lùi lại.</p><p id="62">“Khụ! Khục!”</p><p id="63">Sabina khuỵu xuống, thở dốc dữ dội. Chẳng hiểu chuyện gì vừa xảy ra, nhưng phổi cô điên cuồng hút lấy không khí.</p><p id="64">“Ngươi thắng, ta thua. Hôm nay chỉ có vậy thôi. Hiểu chưa?”</p><p id="65">Sabina gật đầu. Dù Nade có ra lệnh gì, cô cũng định sẽ gật đầu vô điều kiện.</p><p id="66">Nhưng dường như thế là đủ với Nade, hắn rời khỏi khu rừng. Ngay trước lối ra, bước chân hắn chợt dừng lại. Hắn từ từ quay đầu, nhìn về phía cây đại thụ.</p><p id="67">‘Híc! Làm sao đây? Bị phát hiện rồi sao?’</p><p id="68">Pandora nấp sau thân cây, tim đập thình thịch. Cô định trả thù Sabina, nào ngờ lại vô tình chứng kiến cảnh tượng không nên thấy.</p><p id="69">Giọng Nade vang lên.</p><p id="70">“Pandora, thù đã được tôi báo rồi, cậu về đi.”</p><p id="71">Việc gọi thẳng tên là lời cảnh cáo đừng làm lớn chuyện. Dù bị thân cây che khuất không thể thấy rõ, Pandora vẫn che miệng, gật đầu.</p><p id="72">Nade rời khỏi công viên với tâm trạng thảm hại. Cuối cùng vẫn thành ra thế này. Giá mà trời đổ một cơn mưa cho hả hê, nhưng bầu trời cũng chỉ u ám như chính lòng hắn.</p><p id="73">“Iruki, tôi tuyệt đối sẽ không trở thành pháp sư.”</p><p id="74">___</p><p id="75">Cuối tuần diễn ra trận đấu thứ hai đã tới.</p><p id="76">Nhờ trận Nade đấu với Sabina quá hút khách, số người kéo tới còn đông hơn tuần trước. Đặc biệt, nếu Iruki thua thì trận thứ ba sẽ bị hủy, nên nhiều người dự đoán đây sẽ là một cuộc chiến khốc liệt hơn hẳn.</p><p id="77">Có lẽ vì vậy mà ngay cả các giáo viên từng nói không hứng thú với trò đánh nhau của học sinh cũng lúng túng cười, lảng vảng quanh khán đài.</p><p id="78">Trong lúc Etella, người làm trọng tài, kiểm tra các hạng mục, Shirone và nhóm Dante chờ ở bên rìa.</p><p id="79">Sắc mặt Sabina không tốt chút nào. Chấn thương tâm lý từ vụ bị hành hung trong rừng vẫn chưa nguôi. Không những thế, nó còn ngày càng nặng hơn, dạo này cô liên tục gặp ác mộng ban đêm.</p><p id="80">Khi giờ ra sân đến gần, Closer bắt đầu khởi động. Sau những động tác giãn cơ khó tin đối với một pháp sư, hắn vừa nhảy tại chỗ vừa quay sang Dante.</p><p id="81">“Để tôi kết thúc cho. Chẳng cần cậu phải ra tay đâu, đúng không?”</p><p id="82">Trong đấu đội, bên nào giành trước hai thắng thì kết thúc. Nhưng Dante biết rõ, một khi Olivia là người chủ trì thì chuyện đó sẽ không xảy ra.</p><p id="83">“Dù vậy, trận đấu cũng sẽ không bị hủy.”</p><p id="84">“Hả? Sao cơ?”</p><p id="85">“Sư phụ muốn giẫm nát Shirone. Người đã nộp đơn xin đặc phái viên lên hội đồng giáo viên rồi. Phía nhà trường cũng không muốn sự kiện thế này bị hủy đâu.”</p><p id="86">“Ra vậy. Nghĩa là dù tôi có thắng thì cậu và Shirone vẫn sẽ đấu?”</p><p id="87">“Nhưng thế cục sẽ khác. Nếu bọn tôi lấy được hai thắng, có thể khiến Shirone thảm hại hơn nữa. Có lẽ đó mới là kịch bản hay nhất.”</p><p id="88">“Khà khà. Được, tôi sẽ bày cho cậu một sân khấu hoàn hảo nhất.”</p><p id="89">Khi Etella ra hiệu tiến vào trung tâm, Iruki và Closer bước lên. Sau khi phổ biến luật lệ xong, Closer cúi xuống nhìn Iruki như phô trương vóc dáng cao lớn của mình.</p><p id="90">“Khi trúng Phản Ma Pháp, sống mũi sẽ có cảm giác nhói lên. Nhưng khi đấu với tôi thì không chỉ có Phản Ma Pháp đâu. Cậu từng bị gãy xương mũi chưa? Bị đấm bằng nắm đấm ấy.”</p><p id="91">Iruki không đáp lời.</p><p id="92">“Đau lắm đấy. Đau đến mức nước mắt tuôn như mưa. Từ giờ tôi sẽ đấm cho mũi cậu sập xuống như mũi orc. Dù có gào lên bảo dừng lại, tôi cũng sẽ tiếp tục đánh. Được chứ?”</p><p id="93">Khóe miệng Closer cong lên đầy tà ác.</p><p id="94">“Sao im lặng thế? Sợ à? Nhưng cũng hết cách rồi. Trận đấu đã bắt đầu, và cậu sẽ bị đánh cho thê thảm. Mười phút nữa thôi, cậu sẽ vừa hét vừa chảy máu mũi. Răng cũng gãy vài cái. Khuôn mặt xấu xí sẽ càng xấu xí hơn.”</p><p id="95">Etella chen vào.</p><p id="96">“Xin kiềm chế lời nói thừa trước khi đấu. Cả hai, hãy về vị trí được chỉ định.”</p><p id="97">Vung vẩy nắm đấm to trước mặt Iruki, Closer quay về chỗ, vừa đi vừa xây dựng chiến thuật dựa trên những thông tin đã nắm.</p><p id="98">Đặc trưng của Iruki là hỏa điểm bộc phát kiểu thoát ly, có khả năng khóa mục tiêu nhanh và không tồn tại tốc độ tiếp cận. Hơn nữa, là năng lực giả Servant giỏi về công thức chuỗi, nên gần như không thể đánh phủ đầu.</p><p id="99">Đứng cách Iruki 60 mét, Closer cử động ngón tay, xác định phương án ứng phó ban đầu. Thế mạnh của hắn cũng nằm ở phòng thủ chứ không phải tấn công, nên chỉ cần đi theo bài bản là đủ.</p><p id="100">“Bắt đầu trận đấu!”</p><p id="101">Ngay khi tín hiệu của Etella vang lên, xung quanh Closer liên tiếp xảy ra những vụ nổ. Che mặt bằng hai tay, trong mắt Closer ánh lên sự kinh ngạc. Vừa bắt đầu đã nổ. Dạng thoát ly thì càng xa, quy mô càng nhỏ. Vậy mà không hề di chuyển một bước, đòn tấn công vẫn bay trọn 60 mét, đó quả thực là công thức chuỗi cấp cao nhất.</p><p id="102">Shirone nở nụ cười chua chát. Dù đã cảm nhận từ kỳ thi Súng bắn tốc độ, nhưng uy lực của công thức chuỗi dùng Đối Số vẫn thật đáng sợ.</p><p id="103">Thực tế, điểm Súng bắn tốc độ của Iruki, ngoại trừ Shirone đã mở Chức năng bất tử, là cao nhất trong lịch sử học viện ma pháp.</p><p id="104">Các học sinh sững sờ trước cảnh thân hình đồ sộ của Closer bị nuốt chửng trong biển lửa. Dù tỷ lệ đồng bộ chỉ 50%, nếu trúng đòn liên tiếp thì vẫn có thể gặp nguy hiểm.</p><p id="105">Cuối cùng, khi vụ nổ tan đi, bóng dáng Closer hiện ra. Những bức tường đất bảo vệ toàn thân rơi lả tả, để lộ gương mặt hắn đang cười nhàn nhã.</p><p id="106">“Khà khà, chỉ có vậy thôi sao? Ngứa như bị muỗi đốt.”</p><p id="107">Hắn đã cường hóa cơ thể bằng kỹ năng bị động Địa Khởi, đồng thời triển khai Địa Giáp để bảo vệ bằng tường đất. Với mức đó, những vụ nổ bình thường thậm chí còn không truyền được chấn động.</p><p id="108">Thu hẹp khoảng cách bằng dịch chuyển tức thời, Closer ép trận đấu vào cận chiến, trái ngược với Iruki.</p><p id="109">“Nham Thạch Cuồng Quyển!”</p><p id="110">Closer vung tay như xúc đất, mặt đất chao đảo rồi bắt đầu cuộn tròn.</p><p id="111">Một tảng đá phình to đến đường kính 3 mét nghiền nát vị trí Iruki vừa đứng rồi lăn qua.</p><p id="112">Iruki dịch chuyển né tránh. Nhưng ngay khi hai chân chạm đất, mặt đất sụp xuống như thể đã được đào sẵn bẫy.</p><p id="113">“Khà khà! Kết thúc rồi!”</p><p id="114">Phong tỏa chuyển động của Iruki bằng Địa Chấn - biểu tượng của ma pháp hệ Thổ - Closer lập tức nối tiếp bằng ma pháp Phun Trào. Ma sát sinh ra từ việc nén chặt địa tầng gây ra vụ nổ dữ dội. Gần năm tấn đất đá phun trào từ cái hố nơi Iruki rơi xuống.</p><p id="115">Iruki che mặt bằng hai tay, bị hất tung lên. Trong đầu, phương trình kích nổ đang được triển khai với tốc độ chóng mặt.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24443-dai-phap-su-toan-nang/c282904-chuong-242-cuoc-dau-ma-phap-2" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24443-dai-phap-su-toan-nang" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24443-dai-phap-su-toan-nang/c282969-chuong-244-ma-phap-giao-phong-4" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'wfpvrYE0XjoZNOQd3BNMljmjN2itpD4h6hHTwhlZ';
        var comment_type = 'chapter';
        var comment_typeid = '282947';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'wfpvrYE0XjoZNOQd3BNMljmjN2itpD4h6hHTwhlZ';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24443');
    chapter_id = parseInt('282947');

    readingObject = {
        series_id: series_id,
        series_title: 'Đại Pháp Sư Toàn Năng',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="wfpvrYE0XjoZNOQd3BNMljmjN2itpD4h6hHTwhlZ" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
