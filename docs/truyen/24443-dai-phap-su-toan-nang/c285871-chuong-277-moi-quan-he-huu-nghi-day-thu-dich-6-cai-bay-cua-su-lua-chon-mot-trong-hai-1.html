<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Đại Pháp Sư Toàn Năng - Chương 277: Mối quan hệ hữu nghị đầy thù địch (6) / Cái bẫy của sự lựa chọn một trong hai (1) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Siêu tân tinh bùng nổ, lao đi nhanh như ánh sáng! Con người ôm giấc mơ vô tận giữa vũ trụ mênh mông. Shirone, đứa trẻ bị bỏ lại trong chuồng ngựa, quấn tã đơn sơ, Tự học, say mê sách đến mức sinh tử chẳng màng, Dẫu là con...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="7kmtFELgmfWWTngfYIcTjRXeI5W9lq7rv1ixfzHT">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24443-dai-phap-su-toan-nang/c285871-chuong-277-moi-quan-he-huu-nghi-day-thu-dich-6-cai-bay-cua-su-lua-chon-mot-trong-hai-1">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24443-cf3f3167-f7a1-4c54-8b01-64f5b4739bb8.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24443-dai-phap-su-toan-nang/c285866-chuong-276-moi-quan-he-huu-nghi-day-thu-dich-5"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24443-dai-phap-su-toan-nang"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24443-dai-phap-su-toan-nang/c285875-chuong-278-cai-bay-cua-su-lua-chon-mot-trong-hai-2"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24443-dai-phap-su-toan-nang/c285871-chuong-277-moi-quan-he-huu-nghi-day-thu-dich-6-cai-bay-cua-su-lua-chon-mot-trong-hai-1" style="background: url('https://i.hako.vn/ln/series/covers/s24443-cf3f3167-f7a1-4c54-8b01-64f5b4739bb8.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24443-dai-phap-su-toan-nang">Đại Pháp Sư Toàn Năng</a></h5>
                    <small><i class="fas fa-pen"></i>Kim Chi Woo / 김치우</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=" disabled "><a href="/truyen/24443-dai-phap-su-toan-nang">Tập 9</a></li>
                                        
                                                            <li class=""><a href="/truyen/24443-dai-phap-su-toan-nang/c280999-chuong-221-ky-uc-ve-galliant-1">Tập 10</a></li>
                                        
                                                            <li class=""><a href="/truyen/24443-dai-phap-su-toan-nang/c283189-chuong-248-he-thong-van-hanh-1">Tập 11</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24443-dai-phap-su-toan-nang/t35438-tap-12">Tập 12</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283743-chuong-272-moi-quan-he-huu-nghi-day-thu-dich-1">
                                                                        Chương 272: Mối quan hệ hữu nghị đầy thù địch (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283836-chuong-273-moi-quan-he-huu-nghi-day-thu-dich-2">
                                                                        Chương 273: Mối quan hệ hữu nghị đầy thù địch (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283842-chuong-274-moi-quan-he-huu-nghi-day-thu-dich-3">
                                                                        Chương 274: Mối quan hệ hữu nghị đầy thù địch (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283925-chuong-275-moi-quan-he-huu-nghi-day-thu-dich-4">
                                                                        Chương 275: Mối quan hệ hữu nghị đầy thù địch (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285866-chuong-276-moi-quan-he-huu-nghi-day-thu-dich-5">
                                                                        Chương 276: Mối quan hệ hữu nghị đầy thù địch (5)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285871-chuong-277-moi-quan-he-huu-nghi-day-thu-dich-6-cai-bay-cua-su-lua-chon-mot-trong-hai-1">
                                                                        Chương 277: Mối quan hệ hữu nghị đầy thù địch (6) / Cái bẫy của sự lựa chọn một trong hai (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285875-chuong-278-cai-bay-cua-su-lua-chon-mot-trong-hai-2">
                                                                        Chương 278: Cái bẫy của sự lựa chọn một trong hai (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285877-chuong-279-cai-bay-cua-su-lua-chon-mot-trong-hai-3">
                                                                        Chương 279: Cái bẫy của sự lựa chọn một trong hai (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285878-chuong-280-cai-bay-cua-su-lua-chon-mot-trong-hai-4">
                                                                        Chương 280: Cái bẫy của sự lựa chọn một trong hai (4) /Vũ hội đêm khuya (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285897-chuong-281-vu-hoi-dem-khuya-2">
                                                                        Chương 281: Vũ hội đêm khuya (2)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 12</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 277: Mối quan hệ hữu nghị đầy thù địch (6) / Cái bẫy của sự lựa chọn một trong hai (1)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24443-dai-phap-su-toan-nang/c285871-chuong-277-moi-quan-he-huu-nghi-day-thu-dich-6-cai-bay-cua-su-lua-chon-mot-trong-hai-1#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,076 từ - Cập nhật: 
                        <time class="topic-time timeago" title="05-01-2026 16:32:43" datetime="2026-01-05T16:32:43+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 277: Mối quan hệ hữu nghị đầy thù địch (6) / Cái bẫy của sự lựa chọn một trong hai (1)</p>
                    <p id="1"><strong>Mối quan hệ hữu nghị đầy thù địch (6)</strong></p><p id="2">“Được thôi. Nếu ngươi đã tò mò đến thế thì ta sẽ đặc biệt giới thiệu cho.”</p><p id="3">“Không, tôi cũng không thực sự...”</p><p id="4">Trước khi lời của Shirone kịp dứt, Zion đã đưa tay về phía nơi đặt thanh kiếm.</p><p id="5">“Đến đây, Armand.”</p><p id="6">Một tiếng vang thanh thúy của kim loại vang khắp căn phòng.</p><p id="7">Ngay khoảnh khắc Shirone xoay người về phía Armand, thanh kiếm tự động bay lên rồi lao vút vào tay Zion.</p><p id="8">Shirone, người vừa xoay mình theo quỹ đạo chuyển động của thanh kiếm, vội vàng khựng lại. Từ lúc nào không hay, lưỡi kiếm đã kề sát cổ cậu. Thanh kim loại lạnh lẽo rung động, phát ra những âm thanh cao tần văng vẳng bên vành tai.</p><p id="9">Uorin, người vừa bị cắt ngang thú vui riêng, liền tỏ thái độ gắt gỏng.</p><p id="10">“Anh! Tự nhiên anh làm cái gì vậy hả?”</p><p id="11">“Em im lặng đi.”</p><p id="12">Lần này, ngay cả Zion cũng không chịu nhượng bộ.</p><p id="13">Khi trừng mắt nhìn Shirone, đôi môi hắn tự dưng vặn vẹo. Hắn cảm thấy phát điên vì bực bội trước ánh mắt không chút sợ hãi của cậu, ngay cả trong tình huống lưỡi kiếm đã kề ngay cổ.</p><p id="14">“Sao thế? Tự nhiên lại im lặng rồi. Chẳng lẽ sợ ta sẽ giết ngươi thật sao?”</p><p id="15">Shirone tập trung cao độ vào sự rung động cảm nhận được dưới cằm.</p><p id="16">Cậu đã tiến vào trạng thái Linh Vực. Thông qua cảm giác đồng cảm, bản chất của Armand truyền đến cậu một cách quái dị đến rợn người.</p><p id="17">Thứ này thực sự là một thanh kiếm, hay là một sinh vật sống?</p><p id="18">“Sao không trả lời? Chẳng phải ngươi là ma pháp sư thiên tài sao?”</p><p id="19">Đó là một phát ngôn hèn hạ đối với kẻ vừa mới tập kích người khác.</p><p id="20">Tất nhiên, Shirone tự tin mình có thể triển khai dịch chuyển tức thời nhanh hơn tốc độ phản ứng của Zion. Thế nhưng cậu không dám chắc liệu có thể né được cả thanh ma kiếm đang bay lượn trên không trung hay không.</p><p id="21">Coi sự im lặng của Shirone là lời thừa nhận thất bại, Zion phá lên cười lớn rồi thu kiếm lại.</p><p id="22">“Ha ha ha! Quả nhiên là không được nhỉ? Dự đoán của ta đã đúng. Mấy thứ bài báo đăng trên tạp chí toàn là thổi phồng quá mức thôi. Chỉ là hạng học sinh mà tài năng xuất chúng nhất cái nỗi gì...”</p><p id="23">Uorin chống tay ngang hông, nói với vẻ mặt hậm hực.</p><p id="24">“Anh à, anh quá đáng quá rồi đấy.”</p><p id="25">Zion không thèm để tâm, ném mạnh thanh Armand đi.</p><p id="26">Thanh ma kiếm tỏa ra ánh sáng lạnh lẽo, bay về vị trí cũ một cách nhanh chóng và thầm lặng rồi đứng sừng sững ở đó.</p><p id="27">Đến lúc này Shirone mới nhận ra rằng ngay từ đầu vốn chẳng hề có bệ đỡ nào để giữ thanh kiếm cả.</p><p id="28">“Ngươi biết tại sao ta không giết ngươi không? Bởi vì ngươi không đáng để ta làm vậy. Ngay cả khi không phải là ta, thì ở vương thành này cũng có khối kẻ ghét ngươi. Chắc hẳn ngươi đã cảm nhận được rồi nhỉ? Vào sáng nay ấy.”</p><p id="29">Shirone không hiểu lời Zion nói. Nếu là buổi sáng thì cậu chỉ bận rộn với việc kiểm tra xác nhận huyết thống, ngoài ra không có gì đặc biệt cả.</p><p id="30">Nếu phải kể ra thì chắc là việc không liên lạc được với Reina?</p><p id="31">Thế nhưng nếu bên đó có chuyện gì xảy ra thì đáng lẽ tin đồn đã phải lan khắp vương thành rồi mới đúng.</p><p id="32">“Anh nói vậy là ý gì? Sáng nay đã xảy ra chuyện gì sao?”</p><p id="33">Lần này đến lượt Zion nghiêng đầu thắc mắc.</p><p id="34">Dù tính cách khó ưa nhưng hắn biết rõ hơn ai hết rằng Shirone không hề ngu ngốc.</p><p id="35">Kết quả là Reina, người đại diện pháp lý, đã chặn trước mọi thông tin truyền đến chỗ Shirone.</p><p id="36">‘Hừm, bên đó cũng không phải hạng xoàng đâu.’</p><p id="37">Hắn từng coi thường vì cô ta không phải gia chủ, nhưng hóa ra đó là một người phụ nữ thủ đoạn hơn mong đợi. Mà cũng đúng thôi, vì thế nên gia tộc Ogent mới cử cô ta đến.</p><p id="38">Dù sao thì rõ ràng cô ta cũng không muốn sự việc đêm qua bị lộ ra ngoài.</p><p id="39">Tuy là kẻ thù nhưng đó là một phán đoán xuất sắc.</p><p id="40">“Hừ, giờ mới thấy ngươi đúng là một tên thảm hại. Cuối cùng thì ngay cả đồng minh cũng không tin tưởng ngươi. Chắc ở cái vương thành này, chỉ có mỗi mình ngươi là không biết chuyện xảy ra đêm qua thôi.”</p><p id="41">Shirone cảm thấy nghẹn ứ, cậu vặn hỏi như muốn chất vấn.</p><p id="42">“Thế nên tôi mới hỏi là đã có chuyện gì xảy ra?”</p><p id="43">Theo lời Zion thì có nghĩa là Reina đã biết chuyện. Làm sao cô ấy có thể biết thứ mà chính cậu lại không biết?</p><p id="44">Chắc chắn không phải là thông báo loại bỏ khỏi kế hoạch. Thế nhưng cậu không thể cảm nhận được lý do gì khiến ngay cả Amy cũng không thể gửi tin tức đến.</p><p id="45">“Được rồi. Tôi sẽ đích thân đi hỏi.”</p><p id="46">Khi Shirone định bước ra cửa vì nghĩ rằng không thể nghe được gì từ Zion, Uorin nãy giờ vẫn đang lắng nghe liền lên tiếng.</p><p id="47">“Có lẽ anh đi cũng không gặp được đâu. Em nghe nói họ đã chuyển chỗ ở ngay trong đêm rồi.”</p><p id="48">Shirone vẫn cầm nắm cửa, quay lại nhìn Uorin.</p><p id="49">Đây cũng là lần đầu tiên cậu nghe thấy chuyện này. Rốt cuộc chuyện gì đang xảy ra xung quanh cậu vậy?</p><p id="50">“Chuyển đi rồi sao? Đi đâu?”</p><p id="51">“Chuyện đó thì em cũng không nghe nói. Người đại diện pháp lý của anh đã thêm vào điều khoản cấm tiết lộ thông tin vào sáng sớm nay. Chắc là nếu anh đến diện kiến tại sảnh diện kiến thì sẽ biết thôi.”</p><p id="52">Ý cô là hãy đến hỏi trực tiếp người nắm giữ quyền lực tối cao.</p><p id="53">Hơn nữa lại còn có điều khoản cấm tiết lộ thông tin. Tuy không phải là một phương thức ngoại giao có hiệu lực mạnh mẽ, nhưng đứng từ lập trường của Reina – người ở thế yếu hơn – thì đây có thể coi là một sự ứng phó đầy tính công kích.</p><p id="54">Lúc này, linh tính mách bảo tình hình có gì đó không ổn, Shirone không thèm ngoảnh đầu lại mà rời khỏi phòng trưng bày ngay lập tức.</p><p id="55">___</p><p id="56">Sự im lặng gượng gạo bao trùm phòng trưng bày sau khi Shirone rời đi.</p><p id="57">Zion lườm Uorin. Không biết cô có nhận ra bầu không khí căng thẳng đang xuyên thấu không gian hay không, nhưng cô chỉ mải mê tập trung vào việc uống trà. Dù có trôi qua một giờ đồng hồ như thế này đi nữa, cô cũng sẽ không nhướng lấy một sợi lông mày. Em gái hắn chính là hạng người như vậy.</p><p id="58">“Em rốt cuộc là đứng về phía ai hả?”</p><p id="59">“Tự nhiên anh nói gì vậy? Phía nào cơ?”</p><p id="60">Uorin hỏi ngược lại với khuôn mặt ngây thơ vô số tội.</p><p id="61">Cơn giận của Zion cuối cùng cũng bùng nổ.</p><p id="62">“Tại sao em lại đối xử tốt với Shirone? Tên đó là kẻ thù của anh! Là kẻ thù định nẫng tay trên ngôi vương của anh đấy! Nếu vậy thì đương nhiên em phải giúp đỡ anh chứ!”</p><p id="63">Trước yêu cầu lộ liễu đó, Uorin cảm thấy áp lực.</p><p id="64">“Chính anh mới là người bị làm sao ấy? Từ trước đến giờ chúng ta đâu có nói chuyện kiểu này. Chẳng lẽ anh đối xử tốt với em chỉ vì mong đợi điều đó sao? Vì em là con gái nhà Teraze?”</p><p id="65">“Không, không phải như vậy...”</p><p id="66">Mặt Zion nóng bừng lên.</p><p id="67">Người đời sẽ không biết được cảm giác nhục nhã thế nào khi phải nghe những lời này từ chính em gái mình.</p><p id="68">Thực tế, chỉ riêng sự tồn tại của cô đã là một sự giúp đỡ rồi.</p><p id="69">Chỉ cần đưa ra tấm danh thiếp là anh trai ruột của Uorin, bất cứ quý tộc nào cũng không tiếc lời ủng hộ. Nhờ vào hỏa lực mạnh mẽ đó mà hắn đã tiêu diệt được biết bao nhiêu đối thủ đáng gờm từ trước đến nay.</p><p id="70">Chắc hẳn Uorin cũng biết điều đó. Thế nhưng cô chưa bao giờ lên tiếng về chuyện ấy.</p><p id="71">Vì thế hắn mới yêu quý cô. Nhưng không ngờ điều đó lại trở thành một chiếc boomerang quay lại đâm sau lưng hắn thế này.</p><p id="72">‘Chậc! Định chơi kiểu này đấy hả?’</p><p id="73">Trong lòng đầy tủi thân, Zion quay lưng đi, thở phì phò đầy giận dỗi.</p><p id="74">Thấy bầu không khí như thể sẽ không bao giờ thèm nói chuyện lại nữa, Uorin thở dài một tiếng rồi vỗ về tấm lưng đang dỗi hờn của anh trai.</p><p id="75">“Aida, thật là. Em biết rồi. Chẳng lẽ em lại không có suy nghĩ gì sao? Chỉ là em thấy gượng gạo khi chúng ta nói về chuyện này thôi. Đây chính là lý do ưu tiên số một khiến các thành viên hoàng tộc chia rẽ đấy. Dù sao thì ở nơi này cũng chẳng có ai đe dọa được anh đâu. Anh sợ hãi điều gì đến thế chứ?”</p><p id="76">Zion bỗng nhiên nảy sinh nghi vấn.</p><p id="77">Rốt cuộc mình đang sợ hãi điều gì?</p><p id="78">Shirone chỉ là một đứa con hoang không nơi nương tựa, không nền tảng. Thứ duy nhất có thể đem ra khoe khoang chỉ là danh tiếng mỏng manh trong giới ma pháp sư. Năng lực của Đại Thiên Sứ? Nơi này là vương thành, nơi mà ngay cả Đại Ma Pháp Sư cũng đông như kiến cỏ.</p><p id="79">“Được rồi. Là ta hẹp hòi. Xin lỗi em.”</p><p id="80">Zion thay đổi thái độ ngay lập tức. Hắn cảm thấy vui vì em gái đã thấu hiểu lòng mình.</p><p id="81">Uorin nói thêm vài câu mà Zion thường muốn nghe rồi quay trở lại chỗ ngồi.</p><p id="82">Khác với một Zion đang cười đến mang tai, cô như thể đã kiệt sức, vừa rót trà vừa thở dài một hơi dài hướng lên trần nhà.</p><p id="83">‘Phù, đúng là đàn ông mà.’</p><p id="84">___</p><p id="85"><strong>Cái bẫy của sự lựa chọn một trong hai (1)</strong></p><p id="86">Shirone tìm đến bộ phận hành chính để xin diện kiến.</p><p id="87">Chỉ sau 10 phút, yêu cầu đã được chấp thuận. Tốc độ xử lý công việc nhanh đến mức cậu cứ ngỡ như đã có chỉ thị từ trước.</p><p id="88">Khi đến sảnh diện kiến, kỵ sĩ cận vệ đã mở cửa cho cậu. Orkamp trong trang phục chỉnh tề đang đợi sẵn.</p><p id="89">“Ta cũng đang định gọi con. Lại đây đi.”</p><p id="90">Shirone ngồi xuống vị trí đối diện với Orkamp.</p><p id="91">Cậu đang định cân nhắc nên bắt đầu từ đâu thì Orkamp đã trả lời trước khi cậu kịp đặt câu hỏi.</p><p id="92">“Chỗ ở của gia đình con đã được chuyển sang biệt quán. Ta sẽ bảo quản lý dẫn con đi.”</p><p id="93">Lời giải thích nhanh chóng nghe cứ như một lời bào chữa.</p><p id="94">Thế nhưng cậu tìm đến nhà vua không phải chỉ để biết chỗ ở. Thứ Shirone muốn biết là phần cốt lõi hơn thế.</p><p id="95">“Rốt cuộc điều mà con không biết là gì vậy ạ?”</p><p id="96">Orkamp thở dài một tiếng.</p><p id="97">Ngai vàng suy cho cùng là một vị trí không có đường lui. Reina có thể trốn chạy khỏi những câu hỏi hóc búa, nhưng ông thì không.</p><p id="98">“Từ tối qua đến rạng sáng nay đã có năm vụ mưu sát xảy ra. Ba vụ dùng độc, hai vụ dùng thích khách. Trong thức ăn đưa đến cho gia đình con đã phát hiện ra lượng độc tố đủ gây chết người. Vào lúc rạng sáng, cứ cách 1 giờ lại có một tên thích khách bị bắt tại căn hộ của hoàng tộc. Do chúng đã tự sát nên không thể tra ra kẻ chủ mưu, nhưng việc chúng nhắm vào con là sự thật mà ai cũng có thể nhận thấy.”</p><p id="99">Shirone cảm thấy như vừa bị một chiếc búa nện vào đầu.</p><p id="100">Mưu sát là việc do con người gây ra. Thế nhưng tính bất ngờ của nó quá lớn khiến cậu có cảm giác như vừa gặp phải một thiên tai.</p><p id="101">“Tại sao bọn họ lại muốn giết chúng tôi?”</p><p id="102">“Con nói vậy là ý gì? Chẳng lẽ con nghĩ rằng sẽ không có chuyện gì xảy ra sao?”</p><p id="103">Thú thật thì... đúng là như vậy.</p><p id="104">Tất nhiên không phải là cậu đang lơ là cảnh giác. Thế nhưng việc tin chắc rằng kẻ thù sẽ hành động chỉ sau 2 ngày tới vương thành lại là một vấn đề hoàn toàn khác.</p><p id="105">“Con không biết. Ám sát ứng cử viên Đại Vương Tử là một trọng tội. Nếu kẻ chủ mưu bị bại lộ, dù gia tộc có bị diệt vong cũng chưa đủ đền tội. Việc quyết định thực hiện một đại sự như thế chỉ trong vòng 2 ngày, liệu có hợp lý không ạ?”</p><p id="106">“Con nghĩ bọn chúng ngu ngốc sao? Không đâu, Shirone. Ngược lại, đây là một phán đoán hết sức hợp lý và thông minh. Chúng đâm thẳng vào điểm mù của suy nghĩ của con.”</p><p id="107">“Điểm mù trong... suy nghĩ sao?”</p><p id="108">“Thích khách được chia làm hai loại: Assassin (Ám sát giả) và Hitman (Sát thủ). Trong các châm ngôn của phái Ám sát chính tông có câu thế này: ‘Không phải con người giết chóc, mà là tình huống giết chóc’. Thanh kiếm thì chỉ cần né là xong. Nhưng tình huống thì không thể né tránh. Dù sao thì nếu buộc phải giết con, đêm qua chính là thời cơ vàng tốt nhất.”</p><p id="109">Shirone lập tức điều chỉnh lại những sai lầm trong suy nghĩ của mình.</p><p id="110">Cậu không hề quên đi sự nguy hiểm của việc mưu sát. Thế nhưng mặt khác, cậu cũng không thể phủ nhận rằng trong lòng mình luôn tồn tại ý nghĩ ‘Chẳng lẽ là ngay lúc này sao?’.</p><p id="111">“Ám Sát Giả không phải là những kẻ giỏi dùng kiếm, mà là những kẻ am tường trong việc dẫn dụ tình huống. Chính vì thế, ở vương thành này, một Ám Sát Giả còn đáng sợ hơn cả 100 hộ vệ. Chúng đâm vào điểm mù của suy nghĩ. Một khi đã mắc bẫy, con buộc phải dâng cổ ra dù đã biết rõ.”</p><p id="112">Lời của Orkamp rất đúng.</p><p id="113">Tại sao mình lại chủ quan như vậy?</p><p id="114">Không, đó không phải là mức độ của một sự nhầm lẫn. Con người ta không thể sống mà kiểm tra mọi ngóc ngách trong suy nghĩ của mình được. Dù có sửa đổi một suy nghĩ này, bọn chúng cũng sẽ tìm ra một điểm mù khác để xâm nhập vào.</p><p id="115">“Shirone, đừng cố gắng phân tích mọi thứ bằng đầu óc. Vương thành là nơi đầy rẫy thú dữ. Ở đây không có chỗ cho những kẻ hèn nhát vì sợ hãi cái giá của sự thất bại mà bỏ lỡ thời cơ hành động.”</p><p id="116">Orkamp đứng dậy đi về phía bàn làm việc. Ông rót một loại rượu mạnh vào ly pha lê rồi nói:</p><p id="117">“Reina đã phán đoán rất tốt. Dù sao thì sau 3 ngày nữa con cũng có thể trở thành người kế vị chính thức. Việc sa đà vào một cuộc chiến bùn lầy vô ích chỉ khiến chúng ta chịu thiệt thòi mà thôi. Vậy nên con cũng hãy cứ coi như không biết gì đi.”</p><p id="118">Shirone nắm chặt nắm đấm.</p><p id="119">Cậu thừa nhận phán đoán của Reina là đúng. Thế nhưng đó là tình huống mà ngay cả cha mẹ cậu cũng có thể đã mất mạng.</p><p id="120">“Chẳng lẽ con cứ phải đứng yên chịu trận sao? Chúng ta có thể dùng việc này làm cái cớ để phản công mà.”</p><p id="121">Orkamp nở một nụ cười cay đắng.</p><p id="122">“Vậy thì để ta hỏi nhé. Con nghĩ kẻ chủ mưu là ai?”</p><p id="123">“Chuyện đó đương nhiên là phe cánh Teraze...”</p><p id="124">Shirone khựng lại.</p><p id="125">Liệu có phải chỉ mình phe cánh Teraze nhắm vào cậu không? Đó cũng lại là một điểm mù trong suy nghĩ mà bấy lâu nay cậu chưa hề nhìn lại.</p><p id="126">“... Con không biết ạ.”</p><p id="127">“Đúng vậy, không thể biết được. Không quá lời khi nói rằng việc thay đổi ứng cử viên Đệ Nhất Vương Tử là việc làm di biến toàn bộ lợi ích của vương quốc. Ngay cả khi không phải phe cánh Teraze, bất cứ ai cũng có động cơ để loại bỏ con.”</p><p id="128">Shirone bắt đầu sàng lọc những kẻ nằm trong danh sách nghi vấn.</p><p id="129">Khuôn mặt của vô số người lướt qua tâm trí cậu. Thậm chí là cả Orkamp...</p><p id="130">“Tất cả mọi người đều mong con chết sao?”</p><p id="131">Orkamp cầm ly pha lê quay trở lại chỗ ngồi.</p><p id="132">“Nếu kẻ chủ mưu là Teraze, đó sẽ là một loại cảnh cáo. Nếu là phe trung lập, đó là để xem phản ứng. Bởi họ muốn có một nguồn tin chính xác để biết con là hạng người như thế nào.”</p><p id="133">“Cảnh cáo sao? Đó là lượng độc chết người đấy ạ. Nếu ăn vào là chết chắc rồi. Ngay cả Amy, người không hề có tội tình gì mà đi theo con, cũng đã suýt mất mạng.”</p><p id="134">Orkamp uống cạn ly rượu mạnh. Shirone đang bị kích động quá mức, nhưng có lẽ đó là điều bình thường.</p><p id="135">Đối với người bình thường, mưu sát là một khái niệm quá xa vời. Họ có thể bị cướp hoặc bị xe ngựa đâm phải, nhưng nếu phải sống mỗi ngày với ý nghĩ rằng một chuyên gia giết người đang nhắm vào mình, thì chưa đầy một tháng họ sẽ hóa điên mất thôi.</p><p id="136">Ông đã sống một cuộc đời như thế. Cả đời sống chung với thích khách, vẫn ăn cơm, vẫn đi vệ sinh, vẫn sinh con đẻ cái. Việc bản thân ông có thể quên sạch mọi thứ chỉ bằng một ngụm rượu mạnh, ngược lại, mới chính là điều bất bình thường.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24443-dai-phap-su-toan-nang/c285866-chuong-276-moi-quan-he-huu-nghi-day-thu-dich-5" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24443-dai-phap-su-toan-nang" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24443-dai-phap-su-toan-nang/c285875-chuong-278-cai-bay-cua-su-lua-chon-mot-trong-hai-2" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '7kmtFELgmfWWTngfYIcTjRXeI5W9lq7rv1ixfzHT';
        var comment_type = 'chapter';
        var comment_typeid = '285871';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '7kmtFELgmfWWTngfYIcTjRXeI5W9lq7rv1ixfzHT';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24443');
    chapter_id = parseInt('285871');

    readingObject = {
        series_id: series_id,
        series_title: 'Đại Pháp Sư Toàn Năng',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="7kmtFELgmfWWTngfYIcTjRXeI5W9lq7rv1ixfzHT" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
