<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Đại Pháp Sư Toàn Năng - Chương 283: Vũ hội đêm khuya (4) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Siêu tân tinh bùng nổ, lao đi nhanh như ánh sáng! Con người ôm giấc mơ vô tận giữa vũ trụ mênh mông. Shirone, đứa trẻ bị bỏ lại trong chuồng ngựa, quấn tã đơn sơ, Tự học, say mê sách đến mức sinh tử chẳng màng, Dẫu là con...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="5Oc1FTcIcAJNjrM5VwA3rIF4MbBOFtV5HxL5c4tG">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24443-dai-phap-su-toan-nang/c285913-chuong-283-vu-hoi-dem-khuya-4">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24443-cf3f3167-f7a1-4c54-8b01-64f5b4739bb8.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24443-dai-phap-su-toan-nang/c285906-chuong-282-vu-hoi-dem-khuya-3"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24443-dai-phap-su-toan-nang"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24443-dai-phap-su-toan-nang/c285950-chuong-284-vu-hoi-dem-khuya-5-loi-de-nghi-cua-teraze-1"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24443-dai-phap-su-toan-nang/c285913-chuong-283-vu-hoi-dem-khuya-4" style="background: url('https://i.hako.vn/ln/series/covers/s24443-cf3f3167-f7a1-4c54-8b01-64f5b4739bb8.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24443-dai-phap-su-toan-nang">Đại Pháp Sư Toàn Năng</a></h5>
                    <small><i class="fas fa-pen"></i>Kim Chi Woo / 김치우</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=" disabled "><a href="/truyen/24443-dai-phap-su-toan-nang">Tập 9</a></li>
                                        
                                                            <li class=""><a href="/truyen/24443-dai-phap-su-toan-nang/c280999-chuong-221-ky-uc-ve-galliant-1">Tập 10</a></li>
                                        
                                                            <li class=""><a href="/truyen/24443-dai-phap-su-toan-nang/c283189-chuong-248-he-thong-van-hanh-1">Tập 11</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24443-dai-phap-su-toan-nang/t35438-tap-12">Tập 12</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283743-chuong-272-moi-quan-he-huu-nghi-day-thu-dich-1">
                                                                        Chương 272: Mối quan hệ hữu nghị đầy thù địch (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283836-chuong-273-moi-quan-he-huu-nghi-day-thu-dich-2">
                                                                        Chương 273: Mối quan hệ hữu nghị đầy thù địch (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283842-chuong-274-moi-quan-he-huu-nghi-day-thu-dich-3">
                                                                        Chương 274: Mối quan hệ hữu nghị đầy thù địch (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c283925-chuong-275-moi-quan-he-huu-nghi-day-thu-dich-4">
                                                                        Chương 275: Mối quan hệ hữu nghị đầy thù địch (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285866-chuong-276-moi-quan-he-huu-nghi-day-thu-dich-5">
                                                                        Chương 276: Mối quan hệ hữu nghị đầy thù địch (5)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285871-chuong-277-moi-quan-he-huu-nghi-day-thu-dich-6-cai-bay-cua-su-lua-chon-mot-trong-hai-1">
                                                                        Chương 277: Mối quan hệ hữu nghị đầy thù địch (6) / Cái bẫy của sự lựa chọn một trong hai (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285875-chuong-278-cai-bay-cua-su-lua-chon-mot-trong-hai-2">
                                                                        Chương 278: Cái bẫy của sự lựa chọn một trong hai (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285877-chuong-279-cai-bay-cua-su-lua-chon-mot-trong-hai-3">
                                                                        Chương 279: Cái bẫy của sự lựa chọn một trong hai (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285878-chuong-280-cai-bay-cua-su-lua-chon-mot-trong-hai-4">
                                                                        Chương 280: Cái bẫy của sự lựa chọn một trong hai (4) /Vũ hội đêm khuya (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285897-chuong-281-vu-hoi-dem-khuya-2">
                                                                        Chương 281: Vũ hội đêm khuya (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285906-chuong-282-vu-hoi-dem-khuya-3">
                                                                        Chương 282: Vũ hội đêm khuya (3)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285913-chuong-283-vu-hoi-dem-khuya-4">
                                                                        Chương 283: Vũ hội đêm khuya (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285950-chuong-284-vu-hoi-dem-khuya-5-loi-de-nghi-cua-teraze-1">
                                                                        Chương 284: Vũ hội đêm khuya (5) / Lời đề nghị của Teraze (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24443-dai-phap-su-toan-nang/c285958-chuong-285-loi-de-nghi-cua-teraze-2">
                                                                        Chương 285: Lời đề nghị của Teraze (2)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 12</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 283: Vũ hội đêm khuya (4)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24443-dai-phap-su-toan-nang/c285913-chuong-283-vu-hoi-dem-khuya-4#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,864 từ - Cập nhật: 
                        <time class="topic-time timeago" title="05-01-2026 20:03:49" datetime="2026-01-05T20:03:49+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 283: Vũ hội đêm khuya (4)</p>
                    <p id="1"><strong>Vũ hội đêm khuya (4)</strong></p><p id="2">Amy cau mày còn dữ dội hơn cả Shirone.</p><p id="3">Dẫu biết đối với vương tộc, phô trương cũng là một đức tính, nhưng dường như Vương hậu không hề nghĩ rằng càng làm vậy, Shirone sẽ càng rơi vào tình thế nguy hiểm hơn sao.</p><p id="4">Shirone đang quan sát khuôn mặt của các quý tộc tập trung tại sảnh tiệc thì chạm mắt với một người đàn ông to lớn ở phía đối diện.</p><p id="5">Người đàn ông đó nở một nụ cười sảng khoái rồi băng chéo qua đại sảnh tiến về phía cậu.</p><p id="6">“Xin chào ngài Shirone! Tôi chào hỏi hơi muộn nhỉ. Tại đằng kia có món cừu hầm mà tôi cực kỳ thích. Ái chà, lại quên giới thiệu rồi. Tôi là Đội trưởng đội hộ vệ, Ritney Walker. Là tổng tư lệnh chịu trách nhiệm về trị an của vương thành.”</p><p id="7">Lần đầu tiên Shirone nở một nụ cười.</p><p id="8">Vì là người phụ trách trị an, cũng là nhân vật liên quan đến sự an toàn của cha mẹ cậu, nên tạo ấn tượng tốt cũng không có gì xấu. Hơn nữa, cậu cũng thích thái độ thẳng thắn không giống quý tộc của ông ta.</p><p id="9">“Xin chào. Rất vui được gặp ông.”</p><p id="10">“Khà khà! Đúng vậy! Gặp gỡ quan chức trị an thường xuyên thì chẳng có gì hay ho cả!”</p><p id="11">Đó là một người đàn ông đáng tin cậy. Dù gương mặt đã hằn lên những vết phong trần của 60 năm cuộc đời, nhưng cơ thể ông ta to lớn và săn chắc hơn bất kỳ ai trong sảnh tiệc.</p><p id="12">Khi Walker chìa tay ra, Shirone cũng nắm lấy.</p><p id="13">Ngay khoảnh khắc đó, ánh mắt Walker lóe lên, và một làn sóng ánh sáng tràn vào tâm trí Shirone.</p><p id="14">Trong giây lát, Shirone có cảm giác như tư duy của mình bị đình trệ.</p><p id="15">Một năng lực khống chế ở đẳng cấp hoàn toàn khác biệt so với những kỹ thuật nhãn thuật mà cậu từng trải nghiệm trước đây.</p><p id="16">Tuy nhiên, với tư cách là một ma pháp sư đã đạt đến cảnh giới Kim Cương Thể, cậu không dễ dàng để mất quyền chủ động.</p><p id="17">Walker hơi nghiêng đầu vẻ thắc mắc, rồi như nhận ra điều gì đó, ông ta mỉm cười và thu hồi nhãn thuật.</p><p id="18">Shirone nuốt một hơi thở dồn dập vào lồng ngực rồi nhìn Walker. Dù ký ức có chút mờ nhạt vì dòng suy nghĩ bị thổi bay, nhưng cậu không cảm thấy sự thù địch.</p><p id="19">“Quả nhiên là đáng nể. Ngài có thể chịu đựng được ‘Thanh Tẩy’.”</p><p id="20">“Thanh Tẩy? Đó là nhãn thuật sao?”</p><p id="21">“Đúng vậy. Đó là kỹ thuật truyền 'cuồng khí' vào đối phương. Nếu tiếp xúc lâu sẽ bị mất ý thức. Nhưng có vẻ nó không có tác dụng với ngài Shirone.”</p><p id="22">Shirone khẽ nheo mắt.</p><p id="23">“Ý ông là ông đã định làm tôi ngất xỉu sao?”</p><p id="24">“Ha ha! Làm gì có chuyện đó. Chỉ là để chứng minh cuồng khí là một sức mạnh to lớn đến nhường nào thôi. Nó mạnh đến mức nếu trúng phải 'Thanh Tẩy', người ta sẽ không thể suy nghĩ được gì cả. Nhờ vậy, nó sẽ quét sạch mọi ma pháp hệ tinh thần đang bám vào. Giống như dùng axit để tẩy đi những vết bẩn mà xà phòng không rửa sạch được vậy.”</p><p id="25">Cuồng khí là trạng thái tinh thần thuần khiết nhất mà con người có thể đạt tới. Do đó, bất kỳ suy nghĩ nào cũng buộc phải bị cuốn trôi trước cuồng khí.</p><p id="26">“Với tư cách là người phụ trách trị an vương thành, tôi có nghĩa vụ phải kiểm tra xem ngài Shirone có bị tẩy não hay không. Nếu ngài cảm thấy bị xúc phạm, tôi xin lỗi.”</p><p id="27">Shirone hiểu cho tâm tình của Walker.</p><p id="28">Nơi này không phải chiến trường mà là hậu phương của vương quốc. Những gì một người phụ trách trị an cần để tâm không chỉ là những mối đe dọa hữu hình.</p><p id="29">“Không sao đâu. Nếu bị tẩy não thì chính chủ cũng đâu biết được. Được ông xác nhận như vậy khiến tôi thấy an tâm hơn. Cảm giác giống như vừa đi tiêm phòng vậy.”</p><p id="30">Walker gãi đầu vẻ ngượng nghịu.</p><p id="31">“Thật ra kỹ thuật của tôi vẫn chưa xâm nhập hoàn toàn được. Nhưng nếu có thể chịu đựng được kỹ thuật mà tôi đã rèn luyện suốt hàng chục năm qua, thì chắc chắn không ai có thể tẩy não ngài Shirone đâu. Còn nếu dù vậy mà vẫn bị tẩy não thì... biết làm sao được? Đành chịu thôi.”</p><p id="32">Shirone phân vân không biết có nên cười ở đoạn này hay không. Cậu thấy lời của quan chức trị an có chút hơi thiếu trách nhiệm.</p><p id="33">Thấy vậy, Walker nháy mắt và bồi thêm:</p><p id="34">“Vương thành là một nơi khó hiểu. Giống như có hàng chục gia đình khác họ cùng sống trong một nhà vậy. Hãy luôn tự bảo vệ bản thân mình.”</p><p id="35">Phải mất một lúc Shirone mới hiểu được ẩn ý đó và gật đầu.</p><p id="36">“Vâng. Tôi sẽ ghi nhớ. Rất vui được gặp ông.”</p><p id="37">Walker cười vang rồi lại băng qua đại sảnh. Nhìn dáng vẻ ông ta càng quét đống cừu hầm khiến Shirone liên tưởng đến Rian, một nụ cười bất giác nở trên môi.</p><p id="38">Cuộc gặp gỡ giữa Shirone và Walker là sự kiện thu hút sự chú ý của vô số quý tộc. Và Zion cũng là một trong những người quan sát cảnh tượng đó.</p><p id="39">Sau khi xác nhận Walker đã rời đi, Zion tiến đến phía sau lưng Arius, giả vờ như đang chọn thức ăn và lên tiếng:</p><p id="40">“Có ổn không đấy? Hình như lúc nãy Walker đã thử dùng 'Thanh Tẩy'.”</p><p id="41">Arius cũng đang suy nghĩ về chuyện đó.</p><p id="42">Sáng nay tại phòng chờ, hắn đã lắp đặt một ‘Cánh cổng’ vào tinh thần của Shirone. Nếu 'Thanh Tẩy' thực sự có tác dụng, nó có thể gây ảnh hưởng.</p><p id="43">“Chắc chắn 'Thanh Tẩy' là thiên địch của ma pháp hệ tinh thần.”</p><p id="44">“Cái gì, vậy là thất bại rồi sao?”</p><p id="45">Arius nở một nụ cười thong dong.</p><p id="46">“Thông thường là vậy. Nhưng ‘Cánh cổng’ khác với tẩy não hay thôi miên. Nó không cần can thiệp quá sâu vào ý thức. Tôi đã lắp đặt nó ở tầng 11 để đề phòng trường hợp này xảy ra.”</p><p id="47">“Có chắc chắn không? Lỡ như nó bị phá vỡ thì sao?”</p><p id="48">“Không có chuyện đó đâu. Nếu 'Thanh Tẩy' xâm nhập đến tận lớp bề mặt, Shirone đã mất ý thức rồi. Việc làm ngất xỉu ứng cử viên Đệ nhất vương tử ngay tại sảnh tiệc đầy quý tộc sẽ khiến chuyện trở nên rắc rối lớn.”</p><p id="49">Tầng 11 trong tinh thần con người là nơi những suy nghĩ của người khác tràn vào hỗn loạn, nên dù tinh thần của Shirone có thuần khiết đến đâu, việc tìm ra ‘Cánh cổng’ cũng chẳng khác nào mò kim đáy bể.</p><p id="50">Tuy nhiên, hắn vẫn rùng mình khi Walker thử dùng 'Thanh Tẩy'. Dù đó chỉ là một phép kiểm tra nhanh của quan chức trị an, nhưng có thể coi là toàn bộ các tầng dưới Tầng 9 đều đã bị quét sạch.</p><p id="51">'Chắc chắn Walker không thực sự nghĩ rằng Shirone bị tẩy não. Rốt cuộc ông ta đang nghi ngờ điều gì?'</p><p id="52">Ritney Walker.</p><p id="53">Quan chức trị an hoàng cung, đồng thời là nhà lý luận kiếm thuật đã viết cuốn "Kiếm thuật cung đình Kazura (Sơ cấp)". Ông ta là một cao thủ từng giành chức vô địch tại giải kiếm thuật khu vực năm 18 tuổi và được tuyển chọn vào vương thành, thăng tiến không ngừng.</p><p id="54">Vị trí quan chức trị an không dành cho kẻ chỉ biết mạnh mẽ. Người đó phải nắm rõ mọi ngóc ngách của chính trị.</p><p id="55">Việc ông ta thử dùng 'Thanh Tẩy' ngay sau khi màn trình diễn Vô Niệm kết thúc là bằng chứng cho thấy ông ta đã dự đoán được sự hiện diện của những 'con ruồi' đang bám lấy năng lực của Đại Thiên Sứ.</p><p id="56">'Vậy thì mình cũng nằm trong tầm ngắm rồi. Tất nhiên mình không phải là hạng ruồi bọ đó.'</p><p id="57">Zion hỏi:</p><p id="58">“Dù sao thì giờ tính sao đây? Walker có vẻ đang nghi ngờ đấy. Đừng có để lại manh mối gì cho sau này đấy nhé?”</p><p id="59">“Ngài không cần lo lắng. Walker không phải chuyên gia ma pháp tinh thần, 'Thanh Tẩy' cũng chỉ là một nguyên lý đơn giản có phạm vi áp dụng rộng thôi. Chẳng phải người ta hay bảo thuốc chữa bách bệnh thì chẳng có loại nào hiệu quả thực sự sao? Nếu muốn, tôi có thể đi đường vòng bao nhiêu tùy thích. Cứ tiếp tục như vậy đi.”</p><p id="60">“Được. Ta hiểu rồi.”</p><p id="61">Zion gắp thức ăn vào đĩa rồi rời xa Arius.</p><p id="62">Sau khi Walker rời đi, các quý tộc không còn bắt chuyện với Shirone nữa. Vì chẳng hay ho gì nếu bị quan chức trị an bắt bẻ.</p><p id="63">Thấy Shirone đứng cô đơn, Amy nhanh nhạy tiến lại gần làm bạn tâm giao.</p><p id="64">“Shirone.”</p><p id="65">“Ừ. Bữa tiệc thế nào? Thú vị chứ?”</p><p id="66">Amy nhún vai.</p><p id="67">“Cũng tàm tạm.”</p><p id="68">“Tôi cũng tàm tạm. Mà nãy giờ cậu làm gì thế?”</p><p id="69">Amy chỉ vào mắt mình.</p><p id="70">“Tôi dùng Hồng Nhãn để quan sát.”</p><p id="71">“Quan sát? Cái gì cơ?”</p><p id="72">“Xem mọi người nhìn lén cậu bao nhiêu lần.”</p><p id="73">Shirone há hốc mồm ngơ ngác.</p><p id="74">Tất nhiên nếu là Ký ức tự thân thì khó nhưng không phải là không thể. Nhưng có cần thiết phải làm việc nặng nhọc đó không?</p><p id="75">“Cái đó thì thu thập được thông tin gì chứ?”</p><p id="76">Amy bĩu môi.</p><p id="77">“Tớ không biết. Tại không có việc gì làm nên thử thôi, mà đúng là chẳng có gì đặc biệt thật. Cậu là nhân vật chính của bữa tiệc nên mọi người nhìn lén là chuyện đương nhiên mà.”</p><p id="78">“Ha ha! Đúng thế. Đừng bảo là giờ cậu mới nhận ra điều đó nhé?”</p><p id="79">Shirone nói đùa nhưng Amy không cười.</p><p id="80">“Nhưng... tớ phát hiện ra một điểm kỳ lạ. Nếu tớ xác nhận đúng, thì có một nhóm người chưa từng nhìn cậu một lần nào kể từ khi bữa tiệc bắt đầu.”</p><p id="81">Amy hếch cằm chỉ về phía đối diện như bảo cậu hãy tự mình xác nhận. Nơi ánh mắt hướng tới là nhóm các ma pháp sư thuộc Bộ Ma pháp đang tụ tập.</p><p id="82">Ngay khoảnh khắc đó, một ma pháp sư trung niên đứng giữa nhóm quay lại nhìn Shirone. Cảm giác như cơ thể bị đóng băng trước ánh nhìn sắc lẹm như muốn mổ xẻ tâm hồn.</p><p id="83">“Đó là Bộ trưởng Bộ Ma pháp, Aimar Bosun.”</p><p id="84">“Người đó là...”</p><p id="85">Ma pháp sư cấp 4 được Red Line công nhận.</p><p id="86">Là một nhân tài xuất chúng về nhiều mặt, không có nguyên tố nào là không xử lý được, nghe nói ông ta đang giám sát toàn bộ công việc liên quan đến sản xuất lương thực của Vương quốc Kazura.</p><p id="87">Kazura, nơi có lực lượng ma pháp yếu hơn các nước khác, không có cấp 1 công nhận ngoại trừ Hội trưởng. Ở Thormia, chức vụ Bộ trưởng Bộ Ma pháp thường do một đại ma pháp sư cấp 3 đảm nhận.</p><p id="88">Nhưng dẫu vậy, đó cũng không phải là nhân vật mà Shirone có thể tùy tiện đánh giá.</p><p id="89">Bosun nhìn Shirone một hồi lâu như để giải tỏa sự tò mò bấy lâu nay. Sau đó ông ta khẽ cười, cầm cả đĩa thức ăn trên bàn tiến lại gần.</p><p id="90">“Xin chào. Tôi là Aimar Bosun.”</p><p id="91">Shirone và Amy cúi đầu chào.</p><p id="92">Gác lại khuynh hướng chính trị, một cấp 4 của Red Line chính là bậc tiền bối cao vời vợi. Dù xét về chức vụ trong vương thành thì Shirone cao hơn, nhưng việc tôn trọng tiền bối cũng là niềm tự hào của một ma pháp sư.</p><p id="93">“Thật ấn tượng, năng lực của Đại Thiên Sứ sao. Sau này nó sẽ trở thành sức mạnh to lớn cho Vương quốc Kazura. Tất nhiên là nếu ngài Shirone trở thành Đệ nhất vương tử.”</p><p id="94">Shirone giữ im lặng trong sự căng thẳng.</p><p id="95">Cùng là sự khiêu khích nhưng cảm giác khác hẳn với Zion. Từng lời từng chữ cứ như lưỡi dao đâm vào tinh thần.</p><p id="96">Bosun mời món ăn ông ta mang từ bàn đối diện sang.</p><p id="97">“Ngài dùng một ít chứ?”</p><p id="98">“Dạ không. Tôi...”</p><p id="99">Gương mặt Shirone tái nhợt khi nhìn thấy món ăn.</p><p id="100">Đó là loại chocolate Truffle phủ bột cacao, cùng loại với món tráng miệng tẩm độc liều chết từng xuất hiện trong bữa ăn của gia đình cậu.</p><p id="101">Sát khí trào dâng trong lòng Shirone. Chẳng lẽ Bosun chính là kẻ mưu sát?</p><p id="102">Không, điều đó không quan trọng. Nếu ông ta không phải là thủ phạm, thì hành động này lại càng độc ác hơn.</p><p id="103">Quan sát biểu cảm của Shirone, Bosun nghiêng đầu hỏi:</p><p id="104">“Ơ? Sao vậy? Ngài không thích chocolate à? Ngon lắm đấy.”</p><p id="105">Shirone chỉ muốn đấm vào quai hàm đang nhai chocolate của Bosun. Cậu đang kích động đến mức nảy sinh những suy nghĩ bạo lực như vậy.</p><p id="106">Dẫu vậy, Bosun vẫn thản nhiên. Dáng vẻ đó càng khiến Shirone điên tiết hơn.</p><p id="107">“Cái...!”</p><p id="108">Ngay khoảnh khắc âm thanh định thốt ra, Amy đã nắm lấy tay cậu.</p><p id="109">Đó là cái bẫy. Bất kỳ quý tộc nào trong vương thành cũng biết Truffle tươi có độc. Bosun chỉ đơn giản là muốn trêu chọc thần kinh của Shirone mà thôi.</p><p id="110">Shirone cũng sực tỉnh và kìm nén cơn giận.</p><p id="111">Thấy màn khiêu khích tâm đắc không có tác dụng, đúng như dự đoán, Bosun mất hứng và thu lại đĩa thức ăn.</p><p id="112">“Thật là một cuộc gặp gỡ thú vị. Vậy xin phép.”</p><p id="113">Sau khi Bosun rời đi, những ma pháp sư nãy giờ không thèm liếc nhìn lấy một cái bỗng quay sang cười nhạo Shirone.</p><p id="114">Mỗi người trong số họ đều là những ma pháp sư không thể xem thường. Shirone một lần nữa nhận ra mình đang đứng ở đâu.</p><p id="115">“Shirone, cậu ổn chứ? Tên đó cố tình khiêu khích đấy. Cậu nhịn tốt lắm.”</p><p id="116">“Ừ. Đúng là một kẻ rất xấu tính.”</p><p id="117">Đêm đã về khuya nhưng bữa tiệc vẫn chưa kết thúc.</p><p id="118">Các quý tộc có lẽ đã ngấm men say, họ nhảy những điệu khiêu vũ giao tiếp truyền thống của Kazura theo tiếng nhạc của nhạc công cung đình. Và đây chính là thời điểm để nhóm của Shirone hoạt động.</p><p id="119">Khi rượu đã vào và trò chuyện với phụ nữ, bất kỳ câu chuyện nào cũng có thể bị rò rỉ ra ngoài. Kế hoạch là sử dụng thính giác cực nhạy của Reina để nghe lén.</p><p id="120">Theo kế hoạch ban đầu, giờ này Shirone và Reina lẽ ra đã phải bước vào sàn khiêu vũ. Nhưng Amy quan sát thấy Reina chỉ đứng ở góc phòng, loay hoay nhìn sắc mặt mọi người.</p><p id="121">Có vẻ cô ấy vẫn còn đang xuống tinh thần vì chuyện hồi chiều.</p><p id="122">'Cô ấy có tính cách như vậy sao? Khác hẳn với vẻ bề ngoài nhỉ.'</p><p id="123">Cảm giác cô ấy là một người dịu dàng khiến Amy không ghét nổi, nhưng mặt khác, lồng ngực cô lại có chút nghẹn ngào.</p><p id="124">Dù sao thì cũng phải làm việc, Amy thở dài tiến về phía Reina. Rồi cô khéo léo đẩy lưng Reina về phía Shirone.</p><p id="125">Reina cũng giả vờ như không thể cưỡng lại mà bước về phía cậu. Nhưng đến đó cô vẫn còn ngập ngừng hồi lâu.</p><p id="126">Shirone mỉm cười và chìa tay ra. Vốn dĩ cậu cũng đang bận tâm về chuyện mình đã nổi giận hồi chiều.</p><p id="127">“Chúng ta bắt đầu nhé?”</p><p id="128">Thấy Shirone đối xử thoải mái, Reina cũng tìm lại được sự tinh nghịch.</p><p id="129">“Phải tốn bao nhiêu công sức nghe càm ràm mới học được điệu này, nếu không dùng đến thì phí lắm nhỉ?”</p><p id="130">Reina được Shirone dẫn dắt đi quanh sàn khiêu vũ. Vô số cặp đôi khác cũng đang nhảy cùng một điệu nhạc lướt qua bên cạnh họ.</p><p id="131">Một nhạc sĩ có thể nghe thấy nốt nhạc bị lệch ngay cả khi có hàng chục loại nhạc cụ đang cùng hòa tấu. Đối với Reina, giọng nói con người cũng giống như nhạc cụ vậy, vì thế vô số thông tin đã được thu thập.</p><p id="132">Chuyện phải đặt phòng biệt thự nghỉ hè ngay từ bây giờ. Chuyện phải đổi ngân hàng lập quỹ đen. Lời hẹn hò bí mật gặp nhau tại phòng vì canh gác đang nghiêm ngặt.</p><p id="133">Nếu có chuyện đại sự sắp xảy ra, chắc chắn nó sẽ lộ ra trong các cuộc trò chuyện bằng cách nào đó. Tuy nhiên, dựa trên những thông tin thu thập được cho đến hiện tại, cô vẫn chưa cảm nhận được bầu không khí đặc biệt nào.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24443-dai-phap-su-toan-nang/c285906-chuong-282-vu-hoi-dem-khuya-3" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24443-dai-phap-su-toan-nang" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24443-dai-phap-su-toan-nang/c285950-chuong-284-vu-hoi-dem-khuya-5-loi-de-nghi-cua-teraze-1" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '5Oc1FTcIcAJNjrM5VwA3rIF4MbBOFtV5HxL5c4tG';
        var comment_type = 'chapter';
        var comment_typeid = '285913';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '5Oc1FTcIcAJNjrM5VwA3rIF4MbBOFtV5HxL5c4tG';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24443');
    chapter_id = parseInt('285913');

    readingObject = {
        series_id: series_id,
        series_title: 'Đại Pháp Sư Toàn Năng',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="5Oc1FTcIcAJNjrM5VwA3rIF4MbBOFtV5HxL5c4tG" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
