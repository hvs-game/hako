<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Bạn Thuở Nhỏ Với Mối Quan Hệ Được Làm Tình Nếu Yêu Cầu (LN) - Chương 2: Bạn Thuở Nhỏ Ngồi Cạnh Bên - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="“Chuyện tiếp theo của lúc đó…… làm ở nhà Shunta nhé?” Watase Maria, một mỹ thiếu nữ nhận được sự yêu mến nồng nhiệt từ đám con trai, và Arima Shunta, một Otaku đang học năm nhất cao trung. Cả hai là bạn thuở nhỏ, đã chơi đùa cùng nhau...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="D2hcbEIMGrHmfoecmIuWc6nGgmQIgxL4DqTteST9">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c303784-chuong-2-ban-thuo-nho-ngoi-canh-ben">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24890-36c03d3d-64cd-46e3-b88d-eb06fcaa20b9.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=1778859ff87d0737e2b75c38e2919ee9">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c302980-chuong-1-ban-thuo-nho-cung-voi-khuc-dao-dau"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c303784-chuong-2-ban-thuo-nho-ngoi-canh-ben" style="background: url('https://i.hako.vn/ln/series/covers/s24890-36c03d3d-64cd-46e3-b88d-eb06fcaa20b9.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln">Bạn Thuở Nhỏ Với Mối Quan...</a></h5>
                    <small><i class="fas fa-pen"></i>Kagami Yuu</small>
                    <small><i class="fas fa-paint-brush"></i>Unasaka</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/t36349-vol-1">VOL 1 [ĐANG TIẾN HÀNH]</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c302978-minh-hoa">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Minh Hoạ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c302980-chuong-1-ban-thuo-nho-cung-voi-khuc-dao-dau">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1: Bạn Thuở Nhỏ Cùng Với Khúc Dạo Đầu
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c303784-chuong-2-ban-thuo-nho-ngoi-canh-ben">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 2: Bạn Thuở Nhỏ Ngồi Cạnh Bên
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">VOL 1 [ĐANG TIẾN HÀNH]</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 2: Bạn Thuở Nhỏ Ngồi Cạnh Bên</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c303784-chuong-2-ban-thuo-nho-ngoi-canh-ben#chapter-comments" style="text-decoration: underline">1 Bình luận</a> -
                        Độ dài: 3,152 từ - Cập nhật: 
                        <time class="topic-time timeago" title="04-02-2026 16:17:20" datetime="2026-02-04T16:17:20+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 2: Bạn Thuở Nhỏ Ngồi Cạnh Bên</p>
                    <p id="1">Tôi—Arima Shunta, đã trở thành học sinh cao trung.</p><p id="2">Dù đã vào cao trung, cũng chẳng có nghĩa là mọi thứ sẽ thay đổi ngay lập tức.</p><p id="3">Mấy cái như sự thay đổi, đâu phải cứ soi gương mỗi ngày là nhận ra được.</p><p id="4">Tuy nhiên, cũng có những thứ thay đổi rất dễ hiểu.</p><p id="5">Ví dụ như giờ đến trường.</p><p id="6">Trường sơ trung thì ở ngay gần nhà, nhưng trường cao trung thì xa hơn hẳn.</p><p id="7">Mỗi sáng, tôi bắt đầu ra khỏi nhà vào một giờ cố định.</p><p id="8">Cha mẹ tôi mỗi người quản lý một nhà hàng khác nhau, do thời gian mở cửa nên cả hai đều về nhà sau khi tôi đã đi học.</p><p id="9">Thế nên, tôi phải tự dậy mà không được ngủ nướng, tự chuẩn bị bữa sáng và chỉnh trang đầu tóc quần áo.</p><p id="10">Nếu không có cha mẹ thì tôi sẽ bê tha ngay, nên tôi quyết định hành động theo giờ giấc cố định.</p><p id="11">Tôi rời nhà, đi bộ khoảng ba mươi phút để đến trường.</p><p id="12">Tuy hơi xa, nhưng tôi thích đi bộ thong thả nên chẳng thành vấn đề.</p><p id="13">Đã tròn hai tháng kể từ khi vào cao trung, giờ đang là đầu hè.</p><p id="14">Từ hôm nay là ngày đổi trang phục, chuyển sang mặc áo ngắn tay mát mẻ.</p><p id="15">Đi bộ ba mươi phút giữa trời nóng bắt đầu thấy oải, nhưng nếu thấy phiền phức thì chuyển sang đi xe đạp là xong.</p><p id="16">Tôi đến trường và đi về phía tủ giày.</p><p id="17">“A, chào buổi sáng, Arima-kun.”</p><p id="18">“Chào buổi sáng, Kisaragi-san.”</p><p id="19">Đã có một người đứng ở tủ giày từ trước, là một nữ sinh.</p><p id="20">Mái tóc đen cắt bob, dáng người nhỏ nhắn, khuôn mặt trẻ con dễ thương.</p><p id="21">Cặp kính gọng đen to bản rất hợp với cô ấy.</p><p id="22">Cô là cô gái học cùng lớp cao trung với tôi, mối quan hệ hiện tại có thể gọi là [bạn nữ].</p><p id="23">“Arima-kun, cậu đã đọc cuốn sách mới ra hôm qua chưa?”</p><p id="24">“Tôi mới đọc một cuốn thôi. Chỉ mới đọc ‘Vừa livestream trong hầm ngục vừa trở thành trùm tầng’ thôi.”</p><p id="25">“A, tôi cũng đọc cuốn đó đầu tiên. Phần viết thêm so với bản Kakuyomu cũng nhiều, hay lắm.”</p><p id="26">“Kisaragi-san cũng đọc cả trên Kakuyomu nữa hả. Lượng đọc khủng thật. Tôi chỉ chạy theo sách xuất bản thôi đã bở hơi tai rồi.”</p><p id="27">Tôi và Kisaragi-san thân nhau nhờ có chung sở thích là đọc sách.</p><p id="28">Cả tôi và Kisaragi-san đều đặc biệt thích light novel, nên cứ có sách mới ra là chuyện trò rôm rả ngay.</p><p id="29">Cô thích light novel hướng nam giới nên gu cũng hợp.</p><p id="30">“Quả nhiên thể loại hầm ngục vẫn đang hot nhỉ. Vẫn còn nhiều hướng khai thác mới thú vị thật.”</p><p id="31">“Đúng thế, tôi cũng thích light novel hệ fantasy hơn mà.”</p><p id="32">Cả hai thay giày đi trong nhà, vừa đi vừa nói chuyện về sách mới.</p><p id="33">Ừm, cảm giác tốt thật.</p><p id="34">Thực ra đây là lần đầu tiên tôi có bạn là con gái, nhưng không ngờ lại dễ nói chuyện đến thế.</p><p id="35">Thú thật thì hoàn toàn khác với bạn là con trai... Không phải có ý đồ đen tối gì lạ lùng đâu, nhưng quả nhiên vẫn có cảm giác đặc biệt.</p><p id="36">Kisaragi-san tính tình cũng ôn hòa, tôi muốn giữ quan hệ bạn bè tốt đẹp lâu dài với cô nàng.</p><p id="37">“Phải rồi phải rồi, tớ cũng bất ngờ với cảnh đó lắm. Còn nữa, đoạn cuối thì— ủa, sao thế?”</p><p id="38">“À không, tôi đã nghĩ từ trước rồi, Arima-kun không xưng là ‘ore’ nhỉ.”</p><p id="39">“Hửm? À, tôi quen dùng ‘boku’ mất rồi.”</p><p id="40">Điểm đó thì từ nhỏ đến giờ chẳng thay đổi chút nào.</p><p id="41">“Con trai dùng ‘boku’ hiếm lắm. Ngay cả nhân vật chính trong light novel cũng thi thoảng mới có.”</p><p id="42">“Mà, hầu hết là ‘ore’ nhỉ. Kỳ lạ lắm sao?”</p><p id="43">“Tôi nghĩ hợp với Arima-kun lắm. Tôi cũng thích nhân vật chính dùng ‘boku’ nữa.”</p><p id="44">“............”</p><p id="45">“Sao vậy?”</p><p id="46">“A không, vì tôi dùng ‘boku’ từ lúc mới hiểu chuyện đến giờ rồi. Kiểu như chưa trưởng thành ấy mà.”</p><p id="47">“Tôi thấy hoàn toàn ổn mà. Dễ thương lắm— à không được nói thế với con trai nhỉ.”</p><p id="48">Kisaragi-san cười khúc khích.</p><p id="49">Phù, hình như lấp liếm được rồi.</p><p id="50">Được nói là thích làm tôi thót tim một cái.</p><p id="51">Không không, Kisaragi-san chỉ là bạn nữ thôi, không được hiểu lầm.</p><p id="52">Xung quanh tôi, ngay cả bạn nam cũng ít đứa nói chuyện được về light novel.</p><p id="53">Mối quan hệ với đồng chí quý giá như Kisaragi-san phải được giữ gìn cẩn thận.</p><p id="54">“Vậy thì, nói chuyện sau nhé, Arima-kun.”</p><p id="55">“Ừm.”</p><p id="56">Kisaragi-san bước về phía nhóm bạn của mình.</p><p id="57">Cả hai không nói chuyện nhiều trong lớp.</p><p id="58">Dù là bạn nhưng vẫn là nam nữ, nên bọn tôi tránh những hành động gây hiểu lầm.</p><p id="59">Ừm, một tình bạn nam nữ tuyệt vời chú trọng tính an toàn đang được vun đắp.</p><p id="60">“............!”</p><p id="61">Vừa ngồi xuống ghế, sống lưng tôi bỗng ớn lạnh.</p><p id="62">Cảm giác như có sát khí tỏa ra từ đâu đó... mà khoan, tôi làm gì có năng lực cảm nhận sát khí!</p><p id="63">Có phải nhân vật chính light novel đâu.</p><p id="64">Tôi nhìn quanh, nhưng không thấy ai đang hướng mắt về phía mình.</p><p id="65">Kisaragi-san đang cười nói vui vẻ với đám bạn gái.</p><p id="66">Trong lớp này có hai người tôi biết rõ, nhưng một người vẫn chưa đến lớp.</p><p id="67">Người còn lại thì—</p><p id="68">Gì chứ, người đó đến rồi.</p><p id="69">Bình thường toàn đến muộn hơn tôi, thế mà nay sớm thế.</p><p id="70">Nhưng người ấy cũng đang nói chuyện với bạn. Vậy thì không phải rồi.</p><p id="71">Thôi kệ, chắc là tưởng tượng...</p><p id="72">Tôi đang đọc cuốn light novel mang theo thì chuông reo, giáo viên chủ nhiệm bước vào.</p><p id="73">“Rồi, chào cả lớp. Hôm nay sẽ đổi chỗ ngồi nhé.”</p><p id="74">Giáo viên chủ nhiệm vừa bước lên bục giảng đã ngay lập tức vào việc.</p><p id="75">Ông thầy này tuy nóng vội, nhưng nói chuyện nhanh gọn thì cũng không tệ.</p><p id="76">“Hôm nay bắt đầu đổi trang phục, cả tâm hồn và thể xác đều nhẹ nhàng rồi, đúng lúc quá còn gì.”</p><p id="77">Thầy đặt ngay cái hộp đựng phiếu bốc thăm lên bàn giáo viên.</p><p id="78">Ông thầy này có quên điểm danh không đấy.</p><p id="79">“Đổi chỗ à.”</p><p id="80">Đã hai tháng từ khi nhập học, tôi cũng vừa mới quen với những người ngồi xung quanh.</p><p id="81">Ít nhất nếu được ngồi gần Kisaragi-san thì vui biết mấy.</p><p id="82">Nhưng vận may bốc thăm của tôi tệ lắm.</p><p id="83">Đừng nói là gần người thân thiết, thường toàn ngược lại thôi.</p><p id="84">Tạm thời tôi bê bàn ghế của mình, di chuyển xuống cuối lớp—</p><p id="85"><em>Núng nính.</em></p><p id="86">Cánh tay tôi chạm vào thứ gì đó mềm mại và to lớn.</p><p id="87">Tôi quay lại thì—</p><p id="88">“Aa, Shunta...”</p><p id="89">“............!”</p><p id="90">Người bốc thăm xong, di chuyển xuống cuối lớp và đến ngồi cạnh tôi— là Watase Maria.</p><p id="91">Xét theo nhiều nghĩa, cô nàng là một nữ sinh có sự hiện diện cực lớn.</p><p id="92">Khi tôi đặt bàn xuống và lùi người lại, có vẻ cánh tay đã chạm vào Maria.</p><p id="93">Chính xác hơn là chạm vào ngực Maria.</p><p id="94">Độ mềm mại khủng khiếp và kích thước đẫy đà đó— ặc, không phải lúc nghĩ chuyện đó.</p><p id="95">“Xin, xin lỗi, Mari— Watase-san.”</p><p id="96">“Ngực tớ bị bóp mạnh quá. Dữ dội thật.”</p><p id="97">“C, có bóp đâu! Cậu nói cái gì thế, Maria!”</p><p id="98">“Aa, từ gọi Watase-san đã quay lại gọi Maria rồi.”</p><p id="99">“............”</p><p id="100">C, con nhỏ này...</p><p id="101">“So với việc bị bóp ngực thì việc cậu gọi tớ là Watase-san làm tớ ngạc nhiên hơn đấy. Tớ không phải là Watase-san nhé.”</p><p id="102">“Watase-san là Watase-san chứ còn gì. Aa, thôi được rồi, Maria.”</p><p id="103">“Ừm, Maria Maria.”</p><p id="104">Maria lặp lại vô nghĩa rồi gật đầu lia lịa.</p><p id="105">Đến giờ này thì tôi thấy khó mà gọi tên thân mật một cách suồng sã— nhưng có vẻ đương sự thì không thấy thế.</p><p id="106">“...Maria, chỗ đó là chỗ cậu hả?”</p><p id="107">“Ừm, tụi mình là hàng xóm nhé.”</p><p id="108">Maria cũng ôm bàn ghế của mình, vừa đi đến bên cạnh tôi.</p><p id="109">Không ngờ tôi và Maria lại ngồi cạnh nhau ở ngay cuối lớp thế này.</p><p id="110">Maria sắp xếp chỗ ngồi xong thì.</p><p id="111">“Shunta, bao nhiêu?”</p><p id="112">“...1m63.”</p><p id="113">“Tớ cao hơn cậu đúng 10 centimet đấy.”</p><p id="114">“Hự, nhiều thế á?”</p><p id="115">Maria cao tận 1m73 sao.</p><p id="116">Cũng chẳng có quy định nào là con trai phải cao hơn con gái.</p><p id="117">Nhưng mà, tôi cứ có cảm giác như bị thua cuộc ấy.</p><p id="118">Maria từ xưa đã cao rồi, nhưng hồi năm hai, năm ba sơ trung lại cao vọt lên.</p><p id="119">“Hả~ nói thế mà cũng hiểu là đang nói về chiều cao sao?”</p><p id="120">Một bạn nữ đi ngang qua lẩm bẩm nhỏ.</p><p id="121">Đúng là câu “Bao nhiêu?” có thể diễn giải theo vô số cách.</p><p id="122">Chỉ là, những gì Maria nói, tôi nhìn mắt cô là hiểu, hay phải nói là tự nhiên sẽ hiểu.</p><p id="123">Đến tận bây giờ tôi vẫn hiểu được.</p><p id="124">“Tớ cao lên, tóc cũng dài ra nữa nhỉ.”</p><p id="125">“............”</p><p id="126">Tóc Maria hồi trung học là kiểu semi-long, giờ đã chạm đến lưng, có thể gọi là tóc dài.</p><p id="127">Ngay cả khi mặc đồng phục gồm áo sơ mi ngắn tay và vest màu be, vẫn có thể nhận ra vóc dáng lồi lõm rõ rệt.</p><p id="128">Nói cô nàng nổi bật nhất lớp cũng không ngoa.</p><p id="129">Thêm vào đó, xúc giác từ bộ ngực chạm vào tay lúc nãy—</p><p id="130">Cứ như chạm vào quả bóng nước khổng lồ vậy.</p><p id="131">Rõ ràng là lồi lõm như thế, sao nhìn vẫn mảnh mai được nhỉ.</p><p id="132">“Shunta thì chẳng lớn lên tí nào ha.”</p><p id="133">“Im đi.”</p><p id="134">Chiều cao của tôi so với hồi sơ trung chẳng khác mấy.</p><p id="135">Có vẻ từ “thời kỳ tăng trưởng” không có trong từ điển của tôi.</p><p id="136">“Nào.”</p><p id="137">“Hử?”</p><p id="138">Như các bạn thấy đấy, ở trường tôi khi đổi chỗ sẽ di chuyển cả bàn.</p><p id="139">Maria rõ ràng đã đặt bàn cách chỗ tôi vài chục centimet, thế mà lại cố tình kéo bàn sát lại đây.</p><p id="140">“Sao lại ghép bàn vào thế hả, Maria?”</p><p id="141">“Ơ, không được hả?”</p><p id="142">“............”</p><p id="143">Cô nàng nhìn chằm chằm vào mắt tôi.</p><p id="144">“Cũng đâu cần thiết phải ghép vào đâu?”</p><p id="145">“Tớ ấy, vào cao trung xong chả hiểu bài vở gì sất. Có Shunta ở đây thì dù có bị gọi trong giờ học cũng không sợ nữa.”</p><p id="146">“K, khoan đã. Maria, cậu đã không theo kịp bài vở rồi á?”</p><p id="147">“Ừm!”</p><p id="148">“...Trả lời dứt khoát ghê.”</p><p id="149">Mới nhập học có hai tháng thôi đấy?</p><p id="150">Học lực hồi ôn thi biến đi đâu hết rồi?</p><p id="151">“Nói trước nhé, tớ không chỉ đáp án cho cậu đâu đấy?”</p><p id="152">Nếu là nhờ xem bài giúp thì còn được, đằng này định nhờ chỉ đáp án luôn cơ.</p><p id="153">Không, ngay cả việc dạy học tôi cũng không hứng thú lắm.</p><p id="154">Trường cao trung Daido mà bọn tôi đang theo học là trường chuyên có tiếng ở khu vực này.</p><p id="155">Lẽ ra không thể có kẻ nào vừa nhập học xong đã muốn nhờ người khác chỉ bài...</p><p id="156">“Hả~ Đã cho cậu sờ ngực rồi, chí ít cũng phải chỉ đáp án cho tớ chứ không thì lỗ vốn.”</p><p id="157">“Đ, đã bảo không phải là bóp, chỉ là tay chạm vào thôi!”</p><p id="158">“Aa, tớ cứ tưởng là cố tình. Đang nghĩ Shunta trang bị được kỹ thuật cao siêu quá.”</p><p id="159">“Tớ không làm mấy trò như mấy lão dê xồm đấy đâu!”</p><p id="160">“Shunta có chạm vào tớ cũng không phải là dê xồm đâu? Chỉ là bạn thuở nhỏ dâm dê thôi.”</p><p id="161">“...Tóm lại là tớ không có ý đồ đen tối gì hết.”</p><p id="162">Tất nhiên, tôi cũng không phải là bạn thuở nhỏ dâm dê... chắc thế.</p><p id="163">“Ghép ghế vào quả nhiên vẫn kỳ lắm. Maria, tách ra chút đi.”</p><p id="164">Tôi vừa nói vừa liếc nhìn quanh lớp.</p><p id="165">Kisaragi-san có vẻ ngồi ở chỗ khá xa tôi, tận phía trên kia.</p><p id="166">Tôi vô thức buông lời châm chọc kịch liệt trong lòng, nhưng có vẻ Kisaragi-san không nhận ra.</p><p id="167">“............Hửm?”</p><p id="168">Nhận ra thì thấy Maria đang nhìn chằm chằm vào mặt tôi.</p><p id="169">Chẳng hiểu sao mắt cô nàng nheo lại.</p><p id="170">“Shunta, có vẻ thân với Kisaragi-chan nhỉ? Thân nhau đúng không? Tại sao?”</p><p id="171">“T, tại sao là sao.”</p><p id="172">Đằng ấy mới là người đang lấn tới đấy.</p><p id="173">Maria chắc gì đã thân thiết với Kisaragi-san mà gọi là “chan”, làm thân quá trớn rồi.</p><p id="174">Nhỏ này từ xưa cảm nhận về khoảng cách đã bị lỗi rồi mà...</p><p id="175">“Cùng lớp mà, đâu có lý do gì đặc biệt để thành bạn đâu.”</p><p id="176">“Trong lớp làm gì có đứa con gái nào khác mà Shunta thân thiết đâu. Tại sao chỉ mỗi Kisaragi-chan?”</p><p id="177">“Ngược lại, cậu nghĩ tớ có thể kết bạn với con gái dễ như bỡn à?”</p><p id="178">“Không nghĩ thế.”</p><p id="179">“...Kẻ u ám như tớ, có một người bạn nữ đã là nhiều rồi đấy.”</p><p id="180">Chỉ là tình cờ hợp sở thích với Kisaragi-san nên mới thành bạn được, thế thôi.</p><p id="181">“Hừm... Nè, Kisaragi-chan sống ở đâu?”</p><p id="182">“Hả? À— nghe nói sống ở phía Muromiya ấy.”</p><p id="183">Hồi trước có nói chuyện về việc gần nhà có hiệu sách không, tôi đã hỏi ga tàu gần nhất của Kisaragi-san.</p><p id="184">“Muromiya? Khá xa đấy. Đi tàu điện mất khoảng ba mươi phút còn gì.”</p><p id="185">“Thì đây là trường tư mà. Chắc cũng nhiều học sinh đi học từ xa đến.”</p><p id="186">Nói là vậy, nhưng đi tàu ba mươi phút đúng là hơi xa thật.</p><p id="187">Cũng là ba mươi phút, nhưng với đứa đi bộ thong thả đến trường như tôi thì cảm thấy có chút áy náy.</p><p id="188">“Nhưng mà, đến tận Muromiya thì là thành phố rồi. Ghen tị thật.”</p><p id="189">“Hự...! Chẳng lẽ Kisaragi-chan nghĩ tớ là dân nhà quê!?”</p><p id="190">“Cùng trong một tỉnh mà, làm gì có chuyện đó.”</p><p id="191">Nói thì nói thế, chỉ là ba mươi phút tàu điện, nhưng lại là tận ba mươi phút.</p><p id="192">Thị trấn tôi và Maria sống toàn ruộng lúa, rừng và núi, nhìn kiểu gì cũng là nhà quê.</p><p id="193">Xung quanh trường thì vẫn còn nhộn nhịp, nhưng chỉ cần đi bộ vài phút là biến mạo thành vùng quê đến ngỡ ngàng.</p><p id="194">“Nguy to, Kisaragi-chan là gái thành phố sao...! Aa, thua rồi!”</p><p id="195">“Thua?”</p><p id="196">Lại tự ý bắt đầu cuộc chiến từ lúc nào thế?</p><p id="197">“Nhưng mà khoan đã, Shunta.”</p><p id="198">“Tớ đâu có lái câu chuyện đi đâu đâu.”</p><p id="199">Chỉ là Maria đột nhiên bắt đầu nói về Kisaragi-san thôi.</p><p id="200">“Bạn nữ suy cho cùng cũng là bạn bè. Chẳng khác gì bạn là con trai đâu nhé?”</p><p id="201">“Thì, thì đúng là thế.”</p><p id="202">Cùng là bạn, nhưng chỉ cần là khác giới thôi cũng có cảm giác đặc biệt rồi.</p><p id="203">Tôi đang cố không để ý đến điều đó, nên đừng có nói mấy lời thừa thãi.</p><p id="204">“Bỏ ngay cái vọng tưởng từ bạn nữ thành bạn gái đi. Bỏ đi.”</p><p id="205">“Maria, cậu đang yêu cầu gì ở tớ thế?”</p><p id="206">Đã bảo là tớ không có ý đồ đen tối rồi mà.</p><p id="207">“Nghe cho rõ đây, Arima Shunta-kun. Watase Maria-san sẽ chỉ cho cậu một điều hay ho nhé.”</p><p id="208">“Gì cơ, cái kiểu nhân vật đó?”</p><p id="209">Maria từ xưa đã là một kẻ kỳ quặc, lên cao trung lại càng được tôi luyện thêm.</p><p id="210">“Shunta ấy, từ giờ có thể sẽ có bạn nữ hay bạn gái. Nhưng, bạn thuở nhỏ sẽ quyết không bao giờ tăng thêm đâu.”</p><p id="211">“...Cái đó thì đúng.”</p><p id="212">Tụi tôi đã là học sinh cao trung.</p><p id="213">Từ giờ dù có bao nhiêu người thân thiết đi nữa, những người đó cũng không thể gọi là bạn thuở nhỏ được.</p><p id="214">“Tớ là một trong những người bạn thuở nhỏ quý giá đó. Chẳng phải nên trân trọng sao?”</p><p id="215">“Dù cậu có bảo trân trọng...”</p><p id="216">Đó là điều cậu muốn nói à?</p><p id="217">Tôi và Maria từ tiểu học đến hiện tại năm nhất cao trung, lúc nào cũng học cùng trường.</p><p id="218">Hồi nhỏ, hai đứa hay chơi cùng nhau.</p><p id="219">Đến khoảng học sinh sơ trung, không ngày nào là không gặp mặt.</p><p id="220">Chỉ là— từ khoảng năm hai sơ trung, chúng tôi trở nên xa cách.</p><p id="221">Nguyên nhân có lẽ là [vụ việc đó].</p><p id="222">Vụ việc mà tôi đã lỡ đưa ra một yêu cầu động trời với Maria—</p><p id="223">Cái áo ngực thể thao đó, chấn động đến mức giờ vẫn còn hiện về trong mơ.</p><p id="224">Chỉ là cái áo ngực thôi mà... trai tân à!</p><p id="225">Không, đúng là trai tân thật, nhưng cái quang cảnh nhìn trực tiếp thấy áo ngực con gái đó, từ năm hai sơ trung đến năm nhất cao trung vẫn không thể quên được, tác động mạnh đến thế đấy.</p><p id="226">Chẳng biết từ lúc nào, [bạn thuở nhỏ] đã trông như [thiếu nữ]—</p><p id="227">Ngày qua ngày tôi giữ khoảng cách với Maria.</p><p id="228">“............”</p><p id="229">Vào thời điểm năm hai sơ trung đó, ngực Maria cực nhỏ, kích cỡ đúng kiểu học sinh sơ trung.</p><p id="230">Từ đó mới có hai năm, giờ lên năm nhất cao trung— ực.</p><p id="231">“Aa, Shunta... đang nhìn ngực tớ. Sờ thôi vẫn chưa thỏa mãn à?”</p><p id="232">“Đủ rồi! À không, tớ không nhìn!”</p><p id="233">“Không nhìn? Đã thành bộ ngực to thế này rồi mà? Cậu thấy khó ở trong người à?”</p><p id="234">“Bộ cậu nghĩ tớ cứ khỏe mạnh tuyệt đối là sẽ nhìn chằm chằm ngực con gái à?”</p><p id="235">“Nếu là ngực bình thường thì có khi không nhìn, nhưng của tớ to lắm đấy?”</p><p id="236">Maria, từ bên ngoài bộ đồng phục, nâng ngực mình lên cho tôi xem.</p><p id="237">Xuyên qua lớp đồng phục, lại còn đang mặc áo ngực, thế mà trông vẫn mềm oặt và nặng trĩu thế kia sao— ơ mà xúc động cái gì thế hả tôi ơi.</p><p id="238"><img src="https://i.hako.vn/ln/chapters/illusts/303784/1b595394-7268-48ae-a24e-7eab2a97a79c.jpg" alt="125e339e-eac5-4cca-b986-9c86b692f663.jpg"></p><p id="239">“K, không phải vấn đề kích cỡ đâu.”</p><p id="240">“Hừm......”</p><p id="241">Bất chợt, Maria ghé môi sát tai tôi.</p><p id="242">Chỉ riêng giọng nói thầm thì của Maria thôi cũng đủ làm tim đập thình thịch rồi.</p><p id="243">“Nếu muốn nhìn ngực... thì tớ cho cậu nhìn nhé?”</p><p id="244">“C, cậu đang nói cái gì thế?”</p><p id="245">“Chuyện đó, không thể nào đâu. Vì là bạn thuở nhỏ nên được nhìn ngực các kiểu...”</p><p id="246">“Biến điều không thể xảy ra thành sự thật chính là tớ đây.”</p><p id="247">Maria dang rộng hai tay với vẻ mặt ngây ngất chẳng hiểu vì sao.</p><p id="248">“Vì tớ là [Miracle Maria] mà.”</p><p id="249">“............”</p><p id="250">Miracle Maria.</p><p id="251">Đây không phải lần đầu nghe thấy, nhưng cái tên nghe mấp mé ranh giới thật...</p><p id="252">“Shunta... Muốn thử trải nghiệm như phép màu không?”</p><p id="253">“Câu thoại nghe sặc mùi mờ ám quá.”</p><p id="254">“Thiệt tình, cứ thành thật đi có phải tốt hơn không? Nhé, Shunta.”</p><p id="255">Maria đỏ mặt, liếc nhìn về phía này.</p><p id="256">“Làm tiếp chuyện hồi năm hai sơ trung… tại nhà cậu nhé?”</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c302980-chuong-1-ban-thuo-nho-cung-voi-khuc-dao-dau" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(1)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">1 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3191232"
    class="ln-comment-item mt-3 clear"
    data-comment="3191232" 
    data-parent="3191232" 
    data-type="chapter" 
    data-typeid="303784">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u217516-71ad82f9-2b7c-4215-84af-f56ebdcf28eb.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/217516">T Đ Anh</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        T cũng muốn thử 🐧🐧
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24890-ban-thuo-nho-voi-moi-quan-he-duoc-lam-tinh-neu-yeu-cau-ln/c303784-chuong-2-ban-thuo-nho-ngoi-canh-ben?comment_id=3191232#ln-comment-3191232"
                            class="text-slate-500">
                            <time class="timeago" title="04-02-2026 16:30:06"
                                datetime="2026-02-04T16:30:06+07:00">
                                04-02-2026 16:30:06
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'D2hcbEIMGrHmfoecmIuWc6nGgmQIgxL4DqTteST9';
        var comment_type = 'chapter';
        var comment_typeid = '303784';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'D2hcbEIMGrHmfoecmIuWc6nGgmQIgxL4DqTteST9';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24890');
    chapter_id = parseInt('303784');

    readingObject = {
        series_id: series_id,
        series_title: 'Bạn Thuở Nhỏ Với Mối Quan Hệ Được Làm Tình Nếu Yêu Cầu (LN)',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="D2hcbEIMGrHmfoecmIuWc6nGgmQIgxL4DqTteST9" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c8a36565ccddc67',t:'MTc3MDIwODU3MQ=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
