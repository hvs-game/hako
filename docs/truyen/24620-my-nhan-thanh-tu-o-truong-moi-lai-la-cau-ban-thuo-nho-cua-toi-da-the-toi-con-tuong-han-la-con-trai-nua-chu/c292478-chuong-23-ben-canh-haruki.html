<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Mỹ nhân thanh tú ở trường mới lại là cậu bạn thuở nhỏ của tôi. Đã thế tôi còn tưởng hắn là con trai nữa chứ! - Chương 23: Bên cạnh Haruki - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Ai còn nhỏ cũng từng nghĩ mình và người bạn thân sẽ mãi mãi bên cạnh nhau. Nhưng biến cố đã ập đến khiến đôi bạn Hayato và Haruki xa cách. Nhiều năm sau, họ đã gặp lại nhau nhưng Haruki đã thay đổi về mặt ngoại hình đến nỗi...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="6frccnBS5shZsDpiiBihXpooDnrsEPBqZt4zak7c">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292478-chuong-23-ben-canh-haruki">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24620-e8519c26-5e3d-4631-b1b8-283401913734.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292477-chuong-22-cung-se-chia"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292482-chuong-24-cuoc-song-co-doc"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292478-chuong-23-ben-canh-haruki" style="background: url('https://i.hako.vn/ln/series/covers/s24620-e8519c26-5e3d-4631-b1b8-283401913734.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu">Mỹ nhân thanh tú ở trường...</a></h5>
                    <small><i class="fas fa-pen"></i>Hibariyu</small>
                    <small><i class="fas fa-paint-brush"></i>Shisho</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290003-vol-1">Minh họa LN</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/t35692-wn-vol-1">WN - Vol 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290002-prologue">
                                                                        Prologue
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290004-chuong-01-co-ban-nikaido-ngoi-canh-toi">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 01: Nikaido-san ngồi cạnh tôi
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290005-chuong-02-co-ban-gat-gong">
                                                                        Chương 02: Cô bạn gắt gỏng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290008-chuong-03-vi-vay-nen-day-la-bi-mat-do-nhe">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 03: Vì vậy nên... Đây là bí mật đó nhé!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290217-chuong-04-cuoc-chayjd-dua">
                                                                        Chương 04: Cuộc chạy đua
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290218-chuong-05mung-cau-tro-lai-va-hen-gap-lai">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 05:&quot;Mừng cậu trở lại&quot; và &quot;Hẹn gặp lại&quot;
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290219-chuong-06-mua-he-nam-ay-van-chua-ket-thuc">
                                                                        Chương 06: Mùa hè năm ấy vẫn chưa kết thúc
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290469-chuong-07-thoi-gian-buoi-sang-la-rat-quy-gia">
                                                                        Chương 07: Thời gian buổi sáng là rất quý giá
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290470-chuong-08-nhi-hoa-va-nhuy-hoa">
                                                                        Chương 08: Nhị hoa và nhụy hoa
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290735-chuong-9-nay-nhe">
                                                                        Chương 9: Này nhé...!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290737-chuong-10-cung-hua-nao">
                                                                        Chương 10: Cùng hứa nào
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290941-chuong-11-nay-anh-hai">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 11: Này, anh hai!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c290944-chuong-12-trai-nghiem-moi-la">
                                                                        Chương 12: Trải nghiệm mới lạ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c291221-chuong-13-to-chiu-thua">
                                                                        Chương 13: Tớ chịu thua
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c291223-chuong-14-qua-nhien-to-khong-thich-no">
                                                                        Chương 14: Quả nhiên tớ không thích nó
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c291224-chuong-15-ten-ngoc-hayato">
                                                                        Chương 15: Tên ngốc Hayato
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c291473-chuong-16-neu-nhu-co-no-thi">
                                                                        Chương 16: Nếu như có nó thì...
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c291478-chuong-17-loi-hua-bat-ngo">
                                                                        Chương 17: Lời hứa bất ngờ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c291997-chuong-18-thay-chua-to-da-bao-roi-ma">
                                                                        Chương 18: Thấy chưa, tớ đã bảo rồi mà?
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292000-chuong-19-cua-hang-tien-loi-ban-dem">
                                                                        Chương 19: Cửa hàng tiện lợi ban đêm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292003-chuong-20-con-mot">
                                                                        Chương 20: Con một
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292475-chuong-22-doi-khi-giao-tiep-cung-chi-can-anh-mat">
                                                                        Chương 21: Đôi khi giao tiếp cũng chỉ cần ánh mắt
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292477-chuong-22-cung-se-chia">
                                                                        Chương 22: Cùng sẻ chia
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292478-chuong-23-ben-canh-haruki">
                                                                        Chương 23: Bên cạnh Haruki
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292482-chuong-24-cuoc-song-co-doc">
                                                                        Chương 24: Cuộc sống cô độc
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292483-chuong-25-tai-sao-vay">
                                                                        Chương 25: Tại sao vậy?
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">WN - Vol 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 23: Bên cạnh Haruki</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292478-chuong-23-ben-canh-haruki#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 1,611 từ - Cập nhật: 
                        <time class="topic-time timeago" title="18-01-2026 19:01:12" datetime="2026-01-18T19:01:12+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSe3y_bpPb6ADsKAgPWE3o3Jgzzftw8NKkp93_5vUayXLaQICg/viewform" target="_blank">
                        <img src="https://i2.hako.vip/vault/2025final_1.webp" style="width: 700px; height: auto">
                    </a>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 23: Bên cạnh Haruki</p>
                    <p id="1">Ngôi trường cấp 3 đã bước vào buổi chiều tà, tiếng hò hét từ sân vận động vọng lại trong giờ thể dục, nhìn ra ngoài cửa sổ là lại thấycái nắng đầu hè chói chang.  </p><p id="2">Trong tiết cổ văn buồn chán, khi cơn buồn ngủ bắt đầu xâm chiếm và khiến đầu óc lơ mơ, Hayato cũng đang gà gật. Đúng lúc đó, một mẩu giấy gấp gọn đột nhiên bay đến trước mặt cậu. </p><p id="3">"Hửm...?" </p><p id="4">Hayato chỉ nghĩ đến duy nhất một cái tên hay làm cái trò này. Quả nhiên, khi liếc nhìn sang chỗ ngồi bên cạnh, cậu thấy Haruki đang mỉm cười tinh nghịch. Nhìn ánh mắt liếc qua liếc lại của cô, có vẻ cô đang thúc giục cậu đọc ngay nội dung bên trong. </p><p id="5">『Sau giờ học tập trung tại nhà tớ! Hime-chan sẽ đến đấy, cứu tớ với!』 </p><p id="6">Hayato đọc xong, nghiêng đầu thắc mắc.  </p><p id="7">(Cái quái gì thế này...?) </p><p id="8">Việc đến nhà Haruki thì không vấn đề gì. Cậu vẫn thỉnh thoảng ghé qua, đó là chuyện thường ngày.  </p><p id="9">Chuyện Himeko đến đó cậu cũng hiểu, vì con bé và Haruki vốn là bạn thanh mai trúc mã, tối qua hai người họ còn nói chuyện rất rôm rả nữa. Nhưng cụm từ "Cứu tớ với!" cuối cùng thì thật khó hiểu. </p><p id="10">Khi cậu nhìn Haruki để hỏi cho rõ, cô chỉ làm vẻ mặt khổ sở rồi chắp tay cầu xin. Thấy thế không thể hiểu nổi, Hayato bèn viết câu trả lời vào mẩu giấy, cẩn thận ném lại sao cho không bị ai phát hiện. </p><p id="11">『Cứ bảo "cứu" như vậy thì ai mà hiểu được. Cậu cãi nhau với Himeko à?』 </p><p id="12">Vừa đọc xong, Haruki lập tức viết rồi ném trả, và Hayato cũng nhanh chóng đáp lại. Giữa tiết học chiều đầy uể oải, hai người họ cứ lặp đi lặp lại việc trao đổi bí mật như thế. </p><p id="13">『Thật ra là Hime-chan phát hiện ra tớ không có lấy một chiếc váy nào ngoài đồng phục cả, thế là con bé nổi trận lôi đình mắng tớ một trận tơi bời.』  </p><p id="14">『Chuyện đó nghe đúng kiểu Haruki thật, nhưng có vấn đề gì sao?』  </p><p id="15">『Hime-chan nói sẽ qua nhà tớ để kiểm tra mọi thứ, cậu nghĩ tớ có thể trò chuyện kiểu "con gái con lứa" mấy chuyện nữ tính được không?』  </p><p id="16">『Chuyện đó... đúng là không thể. Thà nói về mấy mẹo nhóm than khi đi BBQ thì cậu nghe còn có vẻ hăng hái hơn.』  </p><p id="17">『Đấy thấy chưa? Mà khoan, mẹo đó là gì thế, tớ cũng muốn đi BBQ! À, nhưng cái đó phải ra vùng nông thôn rộng rãi mới làm được nhỉ?』  </p><p id="18">『Hừm, cái mẹo đó là xếp than đứng lên thành hình trụ để không khí dễ lưu thông ấy mà.』  </p><p id="19">『Hế! Phải rồi, thịt nướng ở Tsukinose giờ vẫn toàn thịt lợn rừng với thịt nai thôi à?』 </p><p id="20">『Tùy vào thứ gì dính bẫy đặt ở ruộng thôi, nhưng thường là lợn rừng. Ngoài ra còn có lửng nữa』 </p><p id="21">Chẳng biết chủ đề ban đầu đã bay đi đâu mất, câu chuyện càng lúc càng lạc đề nhưng cả hai lại vô cùng hào hứng. Với Hayato và Haruki, những câu chuyện không đầu không cuối thế này lại luôn khiến họ cảm thấy vui vẻ. </p><p id="22">Tuy nhiên, vì quá mải mê mà sự cảnh giác với xung quanh cũng dần lơi lỏng. </p><p id="23">"Nikaidou, từ nãy đến giờ Kirishima có chuyện gì à?"  </p><p id="24">"Ơ?"  </p><p id="25">"Hả!?" </p><p id="26">Tiếng của giáo viên vang lên khiến cả hai giật mình bừng tỉnh, vai run bắn lên vì hoảng hốt. Nhìn quanh, dường như các bạn cùng lớp cũng đang đổ dồn sự chú ý vào họ.  </p><p id="27">Một vài người còn nhận ra có ‘điều gì đó’ đang diễn ra giữa Hayato và Haruki. Sự tò mò lan rộng. </p><p id="28">Hai người nhìn nhau trong tích tắc, rồi Haruki lập tức bày ra bộ mặt cực kỳ hối lỗi, giơ tay phát biểu:  </p><p id="29">"Thưa thầy... nãy giờ bạn Kirishima cứ bồn chồn mãi... Em cứ ngỡ là... bạn ấy đang rất muốn đi vệ sinh ạ..."[note87265]</p><p id="30">"Gì hả Kirishima, muốn đi thì phải nói sớm chứ. Mau đi đi. Lần sau nhớ đi trước giờ học đấy nhé."  </p><p id="31">"Cái gì cơ!?" </p><p id="32">Cả lớp bùng nổ trong tiếng cười. Một vài nam sinh còn cười thầm: "Nhịn đến mức đó cơ à", "Thật là xấu hổ quá đi mất".  </p><p id="33">Nikaidou Haruki là một nữ sinh ưu tú, thanh tú khả ái, văn võ song toàn nên rất được lòng mọi người. Chẳng ai mảy may nghi ngờ lời nói của cô cả. </p><p id="34">(Cái con nhỏ này, dám dùng mình làm phao cứu sinh à!?) </p><p id="35">Khi Hayato đỏ mặt vì xấu hổ nhìn sang, Haruki nháy mắt tinh nghịch và thè đầu lưỡi hồng hồng ra trêu chọc.  </p><p id="36">(Xin lỗi nhé, Hayato)  </p><p id="37">(Hừ, ta sẽ ghi nợ cho nhà ngươi!) </p><p id="38">Không thể phủ nhận cái kịch bản ‘đang nhịn vệ sinh’ này, Hayato đành phải ôm khuôn mặt đỏ bừng trông chẳng khác nào một người đang đạt tới giới hạn của sự xấu hổ mà lầm lũi đi thẳng ra phía nhà vệ sinh dưới những ánh mắt cười cợt của xung quanh. </p><p id="39">◇◇◇ </p><p id="40">Tiếng chuông báo kết thúc giờ học vang lên. Như một tín hiệu, toàn bộ ngôi trường bắt đầu xôn xao, những tiếng ồn ào náo nhiệt dần quay trở lại các lớp học.  </p><p id="41">Ai nấy đều được giải phóng khỏi những tiết học nhàm chán, bắt đầu bàn tán về kế hoạch sau giờ học hoặc gọi tên người mình muốn rủ đi cùng. </p><p id="42">"À, xin lỗi nhé. Hôm nay mình có hẹn với bạn rồi." </p><p id="43">Đó vốn dĩ là một lời từ chối hết sức bình thường. Thế nhưng, vì người thốt ra lời đó là Nikaidou Haruki, nên nó đã khiến không gian xung quanh trở nên chấn động. </p><p id="44">"Nikaidou-san có hẹn với bạn á...? Là ai thế?"  </p><p id="45">"Cảm giác cậu ấy chẳng bao giờ tụ tập với ai mà..."  </p><p id="46">"Chắc là người bạn thanh mai trúc mã cậu ấy nhắc tới sáng nay chăng?" </p><p id="47">Những tiếng xì xào vang lên khắp nơi.  </p><p id="48">(Người nổi tiếng cũng mệt thật đấy) </p><p id="49">Hayato đứng dậy, thu vào tầm mắt những lời bàn tán đó. Cậu dự định sẽ đi về nhà một mình để tránh gây chú ý, khác hướng với Haruki.  </p><p id="50">Giữa một nam sinh mới chuyển trường và một nữ sinh nổi tiếng, lẽ ra ngoài việc ngồi cạnh nhau thì không nên có thêm mối liên hệ nào khác, đó mới là lẽ thường tình. </p><p id="51">Nghĩ vậy, cậu đi tới sảnh vào để thay giày thì nghe thấy những tiếng xôn xao khác đang gây chú ý theo một nghĩa khác. </p><p id="52">"Con bé kia là ai thế, bộ đồng phục đó là của trường cấp 2 gần đây mà nhỉ?"  </p><p id="53">"Trông dễ thương phết đấy chứ!? Tớ cũng từng học trường đó mà sao không nhớ là có ai xinh thế này nhỉ?"  </p><p id="54">"Mà sao học sinh cấp 2 lại ở đây... Không lẽ là đợi bạn trai à!?"  </p><p id="55">"Cỡ đó mà đến tận nơi đón thì... để xem thằng bồ là đứa nào, tớ phải nhìn mặt cho bằng được!" </p><p id="56">Hayato cũng thắc mắc nhìn xem có chuyện gì, hóa ra lại là người quen. Nhân vật học sinh cấp 2 đó là em gái cậu, Himeko.  </p><p id="57">Con bé đang đứng dưới hàng nghìn ánh mắt tò mò của mọi người, đó một điều hiếm khi xảy ra ở vùng quê Tsukinose, và trông con bé có vẻ sắp khóc đến nơi, cứ ngơ ngác nhìn quanh đầy vẻ lúng túng. </p><p id="58">(Himeko, tại sao con bé chẳng thèm nghĩ đến việc mình sẽ bị chú ý chứ...?) </p><p id="59">Hayato nhìn bộ dạng thảm hại của em gái mình, cậu day day thái dương rồi thở dài.  </p><p id="60">Trong mắt Hayato, đó chỉ là một cô em gái có hành tung đáng ngờ vì đang lo lắng, nhưng trong mắt những người xung quanh, hình ảnh một cô bé bồn chồn, kiên nhẫn đợi người thương lại mang đến ấn tượng vô cùng tốt đẹp. </p><p id="61">Rồi ‘con vật nhỏ’ đang run rẩy ấy, ngay khi tìm thấy mục tiêu, đã lao tới với tốc độ của một chú cún con nhìn thấy chủ đang vẫy đuôi hết mình. </p><p id="62">"Haru-chan!"  </p><p id="63">"Hime-chan!?" </p><p id="64">Himeko lao đến chỗ Haruki, chẳng cần quan tâm đến tình cảnh của cô lúc đó mà thô bạo nắm lấy cánh tay kéo đi, giục giã đòi về sớm.  </p><p id="65">Với Himeko, con bé chỉ muốn rời khỏi nơi này càng nhanh càng tốt, nhưng trong mắt mọi người, đó lại thành hình ảnh một cô bé cực kỳ thân thiết đang kéo tay Nikaidou Haruki đi. </p><p id="66">Hơn nữa, vì đến tận trường cấp 3 nên Himeko đã trang điểm và làm tóc rất chỉn chu dù đang mặc đồng phục. Hai người đứng cạnh nhau trông không hề kém cạnh, khiến những tiếng xì xào kiểu: "Ai thế? Level cao vậy?", "Nghe bảo là bạn thanh mai trúc mã mới gặp lại" càng rộ lên, làm cho không khí càng thêm phần ngột ngạt. </p><p id="67">"..." </p><p id="68">Hayato nhìn theo bóng lưng hai người họ biến mất trong tiếng xì xào, rồi một lúc sau mới bắt đầu cất bước hướng về nhà Haruki.  </p><p id="69">Không hiểu sao, lồng ngực cậu cảm thấy có chút xốn xang. Gương mặt cậu hiện lên một vẻ gì đó không mấy hài lòng. Trên bầu trời, những đám mây tơ bắt đầu che phủ đi cái nắng đầu hè vẫn đang rực cháy trên cao. </p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note87265"><a href="#anchor-note87265" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87265" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">ôi cái discord mess</span></div><span class="note-content_real long-text">ôi cái discord mess</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292477-chuong-22-cung-se-chia" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24620-my-nhan-thanh-tu-o-truong-moi-lai-la-cau-ban-thuo-nho-cua-toi-da-the-toi-con-tuong-han-la-con-trai-nua-chu/c292482-chuong-24-cuoc-song-co-doc" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '6frccnBS5shZsDpiiBihXpooDnrsEPBqZt4zak7c';
        var comment_type = 'chapter';
        var comment_typeid = '292478';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '6frccnBS5shZsDpiiBihXpooDnrsEPBqZt4zak7c';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24620');
    chapter_id = parseInt('292478');

    readingObject = {
        series_id: series_id,
        series_title: 'Mỹ nhân thanh tú ở trường mới lại là cậu bạn thuở nhỏ của tôi. Đã thế tôi còn tưởng hắn là con trai nữa chứ!',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="6frccnBS5shZsDpiiBihXpooDnrsEPBqZt4zak7c" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
