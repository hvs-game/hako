<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Ta Đâu Phải Phù Thủy - Chương 28: Đỏ thẫm như máu - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Những ngọn thương trải khắp đồng hoang, dựng lên như rừng, đoàn kỵ sĩ vinh quang xếp hàng tiến bước, vô số lá cờ đen tung bay trong gió. “Tiến lên! Cho đến tận cùng của thế giới!” Mây giông tan rã, tinh quang rơi xuống, đoàn kỵ sĩ hắc...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="wB3KXOMvtpjc7dzDNmQYginkaO8ZRIn6xB2qYlVm">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/23638-ta-dau-phai-phu-thuy/c295913-chuong-28-do-tham-nhu-mau">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s23638-67dcc16f-d94f-433d-8103-b00b7b271ddb.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/23638-ta-dau-phai-phu-thuy/c292107-chuong-27-ma-thu-cua-day-tisilan"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/23638-ta-dau-phai-phu-thuy"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/23638-ta-dau-phai-phu-thuy/c267983-chuyen-hai-trinh-khong-ngay-tro-ve-1"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/23638-ta-dau-phai-phu-thuy/c295913-chuong-28-do-tham-nhu-mau" style="background: url('https://i.hako.vn/ln/series/covers/s23638-67dcc16f-d94f-433d-8103-b00b7b271ddb.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/23638-ta-dau-phai-phu-thuy">Ta Đâu Phải Phù Thủy</a></h5>
                    <small><i class="fas fa-pen"></i>青空乐章</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/23638-ta-dau-phai-phu-thuy/t33682-vol-1-1-137">Dạ Tinh Tú (1-137)</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c241233-chuong-1-niem-vui-cua-su-tai-sinh">
                                                                        Chương 1: Niềm vui của sự tái sinh
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c241486-chuong-2-the-gioi-sieu-pham">
                                                                        Chương 2: Thế giới siêu phàm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c242947-chuong-3-di-san-cua-phu-thuy">
                                                                        Chương 3: Di sản của Phù thủy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c244280-chuong-4-phu-thuy-canh-buom">
                                                                        Chương 4: Phù thủy Cánh bướm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c245834-chuong-5-thieu-nien-bi-thuong">
                                                                        Chương 5: Thiếu niên bị thương
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c249815-chuong-6-tinh-hinh-hien-tai">
                                                                        Chương 6: Tình hình hiện tại
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c251457-chuong-7-cau-tra-loi-cuoi-cung">
                                                                        Chương 7: Câu trả lời cuối cùng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c253619-chuong-8-rung-phong-do">
                                                                        Chương 8: Rừng phong đỏ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c254858-chuong-9-thu-nghe-su-gio-am">
                                                                        Chương 9: Thụ Nghệ Sư Gió ấm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c255648-chuong-10-ngoi-nha-nho-trong-rung">
                                                                        Chương 10: Ngôi nhà nhỏ trong rừng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c258847-chuong-11-cau-thieu-nien-tro-ve">
                                                                        Chương 11: Cậu thiếu niên trở về
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c260885-chuong-12-giong-loai-moi">
                                                                        Chương 12: Giống loài mới
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c263547-chuong-13-doi-huyet-long">
                                                                        Chương 13: Dơi Huyết Long
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c264941-chuong-14-ba-mon-qua">
                                                                        Chương 14: Ba món quà
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c267766-chuong-15-tam-biet">
                                                                        Chương 15: Tạm biệt
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c270172-chuong-16-anh-sang-hoang-hon">
                                                                        Chương 16: Ánh sáng hoàng hôn
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c271100-chuong-17-lang-nui-tai-tho">
                                                                        Chương 17: Làng Núi Tai Thỏ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c272754-chuong-18-ngan-hoan-cu-xa">
                                                                        Chương 18: Ngân Hoàn Cự Xà
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c273213-chuong-19-vi-cuu-tinh-toc-bac">
                                                                        Chương 19: Vị cứu tinh tóc bạc
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c273872-chuong-20-tram-sat-cu-xa">
                                                                        Chương 20: Trảm sát cự xà
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c277725-chuong-21-thu-phuc-nhan-tam">
                                                                        Chương 21: Thu phục nhân tâm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c280102-chuong-22-phu-thuy-ao-anh">
                                                                        Chương 22: Phù thủy Ảo ảnh
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c280338-chuong-23-bua-toi-hu-ao">
                                                                        Chương 23: Bữa tối hư ảo
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c283027-chuong-24-tu-choi-lich-su">
                                                                        Chương 24: Từ chối lịch sự
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c287784-chuong-25-chuoi-ac-ma">
                                                                        Chương 25: Chuỗi Ác Ma
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c288524-chuong-26-khuc-dao-dau-cua-da-hoi">
                                                                        Chương 26: Khúc dạo đầu của dạ hội
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c292107-chuong-27-ma-thu-cua-day-tisilan">
                                                                        Chương 27: Ma thú của dãy Tisilan
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/23638-ta-dau-phai-phu-thuy/c295913-chuong-28-do-tham-nhu-mau">
                                                                        Chương 28: Đỏ thẫm như máu
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=" disabled "><a href="/truyen/23638-ta-dau-phai-phu-thuy">Emenas (138 - 418)</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/23638-ta-dau-phai-phu-thuy">Ánh Sao và Hoa Hồng (419 - 618)</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/23638-ta-dau-phai-phu-thuy">Vùng đất Phương Đông (619 - 765)</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/23638-ta-dau-phai-phu-thuy">Chiến tranh Hoa Hồng (766 - 1146)</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/23638-ta-dau-phai-phu-thuy">Sự trở về của Rồng (1147 - 1270)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23638-ta-dau-phai-phu-thuy/c267983-chuyen-hai-trinh-khong-ngay-tro-ve-1">Tiền truyện - Hành trình không trở về</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Dạ Tinh Tú (1-137)</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 28: Đỏ thẫm như máu</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/23638-ta-dau-phai-phu-thuy/c295913-chuong-28-do-tham-nhu-mau#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,591 từ - Cập nhật: 
                        <time class="topic-time timeago" title="23-01-2026 01:49:30" datetime="2026-01-23T01:49:30+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 28: Đỏ thẫm như máu</p>
                    <p id="1">Sau khi kết liễu xong con Nòng Nọc Âm Chú, ánh mắt thiếu nữ khẽ lay động, rồi lạnh lùng chuyển hướng về phía hai con ma thú siêu phàm còn lại.</p><p id="2">Một trong số đó là con rùa đá khổng lồ cõng trên lưng những cột đá màu đỏ sẫm. Bên trong những cột đá ấy dường như có dòng dung nham đang cuộn chảy, khiến phần gốc tỏa ra ánh sáng đỏ thẫm.</p><p id="3">Lúc này, con Rùa Đá Dung Nham kia đang sợ hãi nằm rạp xuống đất, đến thở mạnh cũng không dám. Nó dúi hẳn đầu xuống mặt đất, tuyệt nhiên nằm im thin thít, không dám nhúc nhích dù chỉ một chút.</p><p id="4">Kẻ còn lại có ngoại hình khá giống con người, đích thị là một loài yêu tinh rừng rậm bẩm sinh. Nàng ta có đôi cánh bướm sau lưng, vóc dáng nhỏ nhắn chỉ cao bằng nửa người thường. Cả cơ thể nàng tỏa ra ánh sáng màu xanh nhạt, được bao bọc bởi những luồng gió mát lành, mái tóc xanh biếc như ánh đom đóm liên tục rắc xuống những hạt bụi sáng lung linh.</p><p id="5">Nàng Tiên Nữ Dây Leo thuộc Chuỗi Tự Nhiên cấp 5 này chính là con ma thú hiền lành nhất trong số đó. Trí tuệ của nàng ta chỉ tương đương một đứa trẻ mười hai tuổi, lúc này đang nhìn Lorraine bằng ánh mắt đầy vẻ sùng bái.</p><p id="6">Yêu tinh là loài sinh vật kỳ lạ, không cha không mẹ, tất cả đều là nữ giới và hầu như đều được sinh ra từ vòng tay của những cánh rừng nguyên sinh. Tuy số lượng thưa thớt, nhưng ai nấy đều là bậc thầy ẩn mình và sở hữu tiềm năng vô hạn. Chỉ cần khu rừng không bị hủy hoại, sức mạnh của họ sẽ cứ thế lớn dần theo năm tháng, cho đến ngày lột xác trở thành Nữ Vương Yêu Tinh.</p><p id="7">Trong đôi mắt của nàng yêu tinh, Lorraine chẳng khác nào một Nữ Vương Yêu Tinh bằng xương bằng thịt. Chính thứ khí chất thuần khiết đến mức không vương chút bụi trần toát ra từ người thiếu nữ ấy đã cuốn hút nàng ta một cách mê mẩn.</p><p id="8">Nếu không phải vì thiếu nữ chưa ra hiệu cho phép, có lẽ lúc này nàng ta đã sớm lao đến ôm chầm lấy rồi.</p><p id="9">……</p><p id="10">Sau trận chiến ấy, toàn bộ ma thú trong dãy núi Tisilan đều đồng loạt cúi đầu thần phục. Chẳng còn kẻ nào to gan dám động đến một sợi lông của lũ thỏ trong núi nữa.</p><p id="11">Không chỉ vậy, sau này hễ có ma thú mới nào di cư đến, đều sẽ được các bậc tiền bối tại đây dạy dỗ và phổ biến quy chế: Cấm tấn công thỏ, cấm giẫm nát hay trộm cắp hoa màu, cấm phá hoại đường xá. Thậm chí, nếu thấy thỏ gặp khó khăn, bắt buộc phải lao đến mà giúp đỡ.</p><p id="12">Dưới sự chỉ đạo của Lorraine, hàng loạt ngọn đồi đã được khai phá. Đầu tiên, cây rừng trên núi được đốn hạ, đất đai được san ủi cải tạo để kiến thiết thành những thửa ruộng bậc thang. Tiếp đó, cô điều động những con ma thú có khả năng điều khiển dòng nước đến, phun nước tưới liên tục từ đỉnh xuống chân đồi, giúp đất đai trở nên tơi xốp và màu mỡ hơn.</p><p id="13">Thấy sức người không đủ để cày cấy, cô liền gọi vài con Tê Giác Đá Rêu tới. Những con tê giác khổng lồ này chỉ cần hạ thấp chiếc sừng độc nhất trên trán xuống là đã có ngay một chiếc lưỡi cày tự nhiên, vô cùng tiện lợi.</p><p id="14">Mỗi khi xong việc, lũ thỏ lại chuẩn bị rất nhiều củ cải để chiêu đãi đám tê giác. Mấy gã to xác này khoái khẩu món đó lắm, nên dần dà cũng đâm ra nghiện kiểu hợp tác này. Đơn giản là vì chúng đỡ tốn bao nhiêu thời gian lặn lội kiếm ăn, hơn nữa việc cày ruộng đối với đám tê giác chẳng khác nào đi dạo vài vòng, chẳng tốn chút hơi sức nào.</p><p id="15">Không chỉ dừng lại ở ruộng lúa, để làm phong phú thêm nguồn lương thực, Lorraine còn cho khai khẩn thêm nhiều vườn cây ăn quả giữa các sườn núi. Tất cả đều là những giống cây cấp Đồng Đỏ đã được cô cải tạo kỹ lưỡng. Đây đã là giới hạn cao nhất mà thực vật có thể đạt tới khi không phụ thuộc vào Mana. Bởi lẽ, các loại cây trồng từ cấp Bạch Ngân trở lên bắt buộc phải có môi trường dồi dào Mana mới có thể sinh trưởng được.</p><p id="16">Các loại cây ăn quả vô cùng phong phú, bao gồm: đào, cam quýt, mận, chanh, ổi, sung, ô liu, cùng nhiều loại khác nữa.</p><p id="17">Về phần cây dây leo, cô cũng cho trồng thêm một số loại như dưa hấu, nho, cà chua…</p><p id="18">Sau quá trình tinh chỉnh không ngừng nghỉ của Lorraine, chất lượng của những loại trái cây này đều cao đến mức đáng sợ, thậm chí còn mang theo một vài thuộc tính siêu phàm nhất định.</p><p id="19">Để ngăn ngừa dã thú đến trộm, cô đã đặc biệt thành lập các đội tuần tra chuyên nghiệp, ngày ngày đi tuần cả trong lẫn ngoài vườn cây, canh phòng nghiêm ngặt không cho bất kỳ loài vật lạ nào bén mảng tới ăn vụng.</p><p id="20">Đồng thời, những loại trái cây này còn đóng vai trò như vật ngang giá để giao thương. Chúng được dùng để đổi lấy các vật phẩm khác từ lũ ma thú trong rừng, hoặc dùng để chi trả tiền công lao động.</p><p id="21">Mấy loại quả này so với thịt còn ngon hơn nhiều. Chúng không đơn thuần chỉ là thức ăn để lấp đầy cái bụng, mà còn là linh dược giúp gia tăng đáng kể thực lực của bản thân.</p><p id="22">【Đào – Đặc biệt】(Cấp Đồng Đỏ): Ngọt ngào, mọng nước, là món khoái khẩu của muôn loài. Có tác dụng an thần tuyệt vời, giúp người ăn chìm vào giấc ngủ say sưa ngay cả giữa ban ngày.</p><p id="23">【Chanh – Đặc biệt】(Cấp Đồng Đỏ): Vị chua thanh sảng khoái, có khả năng giúp đầu óc tỉnh táo minh mẫn và kích thích nguồn sức mạnh tiềm ẩn trong cơ thể.</p><p id="24">【Dưa Hấu – Đặc biệt】(Cấp Đồng Đỏ): Vị ngọt thanh mát lành, có khả năng xoa dịu tâm trạng, giúp người ăn lấy lại sự bình tĩnh và thư thái.</p><p id="25">……</p><p id="26">Ngoài ra, cô cũng cho trồng thêm các loại cây khác như bông, lanh, tre trúc… Tuy nhiên, chúng chỉ là những giống cây bình thường chứ không phải thực vật siêu phàm.</p><p id="27">Khi mùa gặt đến, đám Sẻ Trảm Thủ trong rừng liền bay tới giúp thu hoạch lúa mì và lúa nước.</p><p id="28">Từng đàn Sẻ Trảm Thủ với đôi cánh màu xanh biếc lao xuống từ bầu trời tựa như những chiếc máy bay ném bom bổ nhào. Lông cánh của chúng cứng cáp và sắc bén như lưỡi liềm, lướt nhanh qua ruộng đồng, gặt phăng từng đợt sóng lúa vàng óng.</p><p id="29">Sau khi lũ thỏ thu gom xong lương thực, những hạt gạo hay bông lúa còn vương vãi trên ruộng sẽ trở thành thức ăn của đám Sẻ Trảm Thủ.</p><p id="30">Sau hơn sáu tháng trời tất bật ngược xuôi, nền nông nghiệp tại dãy núi Tisilan cuối cùng cũng đã đi vào quỹ đạo ổn định. Đến lúc này, Lorraine mới có thể tạm thời buông tay khỏi công việc đồng áng để bắt đầu thực hiện những dự định khác.</p><p id="31">Dạo gần đây, cô cảm thấy bản thân càng ngày càng buồn ngủ. Dù mỗi ngày đã ngủ li bì đến tận 15 tiếng, nhưng những cơn buồn ngủ vẫn cứ liên tục ập đến như sóng trào, không cách nào cưỡng lại được.</p><p id="32">Trong tháng này, cô bắt đầu mở lớp dạy văn hóa cho một số học trò thuộc tộc Thố Nhân. Để đẩy nhanh tiến độ xây dựng nền giáo dục cơ bản, cô ưu tiên tuyển chọn những chú thỏ thông minh, tư duy linh hoạt, không rập khuôn để truyền thụ kiến thức trước.</p><p id="33">Bên cạnh đó, cô còn đặc biệt chú trọng đến một môn học quan trọng, đó là Giáo dục Tư tưởng và Đạo đức.</p><p id="34">Bất kỳ một tổ chức nào, dù quy mô lớn hay nhỏ, đều buộc phải có tư tưởng cốt lõi và hệ thống lý luận của riêng mình. Đó chính là kim chỉ nam cho mọi hành động và mục tiêu phấn đấu.</p><p id="35">Điều này có ý nghĩa vô cùng quan trọng, trong đó, việc xây dựng Tam quan đúng đắn chính là mắt xích then chốt nhất.</p><p id="36">Mọi kiến thức khác cô đều có thể để họ tự học thông qua bảo thạch truyền thừa. Duy chỉ có những bài học về tư tưởng này là cô kiên quyết phải đích thân đứng lớp. Mục đích của cô không gì khác hơn là muốn tôi rèn, bơm vào huyết quản của cái chủng tộc vốn quen thói tự ti và yếu hèn này một ý chí và tư duy sắt đá.</p><p id="37">Thực ra, bản tính của loài thỏ vốn rất cần cù, siêng năng. Điểm yếu chí mạng duy nhất của chúng là lá gan quá bé và tính tình nhu nhược. Trừ phi bị dồn vào bước đường cùng, còn không chúng sẽ luôn tìm cách trốn tránh hiện thực được lúc nào hay lúc ấy.</p><p id="38">Ngôi làng mà Lorraine ra tay cứu giúp khi trước thực ra chỉ là một ngoại lệ hiếm hoi. Sở dĩ được như vậy là nhờ vào những trải nghiệm phong phú thời trẻ của vị trưởng thôn già. Chính quá khứ bôn ba ấy đã giúp ông thoát khỏi cái tính cách nhu nhược, trốn tránh đặc trưng của đồng loại.</p><p id="39">Dưới sự dẫn dắt của ông, dân làng nơi đây cũng trở nên dũng cảm hơn hẳn so với những nơi khác. Trong khi đó, những ngôi làng còn lại thì hoàn toàn không có được khí phách ấy, vẫn cứ mãi yếu hèn.</p><p id="40">Mục tiêu trước mắt là phải đào tạo cho bằng được một thế hệ giáo viên nòng cốt. Sau đó, những người thầy này sẽ tỏa đi khắp các thôn làng để mở trường lớp, từng bước kiến tạo nên một hệ thống giáo dục nền tảng vững chắc.</p><p id="41">“Có ai còn nhớ bài giảng hôm kia không? Về việc Đế quốc Chân Hồng, đế quốc đầu tiên của loài người đã được dựng lên như thế nào ấy?”</p><p id="42">“Em biết… thưa cô.”</p><p id="43">“Tốt lắm, em hãy trả lời đi.” Lorraine ra hiệu cho cô học trò nhỏ đứng dậy để phát biểu.</p><p id="44">Một cô bé nhỏ tuổi đứng dậy. Cô bé bắt đầu trả lời câu hỏi, giọng nói vẫn còn pha chút run rẩy vì hồi hộp.</p><p id="45">……</p><p id="46">Vào thời kỳ đầu của Kỷ nguyên thứ Nhất tại thế giới Yvaal, địa vị của loài người không hề cao, thậm chí có thể nói là vô cùng thấp kém.</p><p id="47">Tây Đại Lục khi ấy nằm dưới ách thống trị của 5 cường quốc, bao gồm ba vương quốc Tinh Linh, Đế quốc Cuồng Nha của Thú Nhân và Vương quốc Thạch Phủ của lũ Oga ăn thịt người.</p><p id="48">Ba tộc Ngân Tinh Linh, Mộc Tinh Linh và Băng Tinh Linh lần lượt xây dựng nên ba vương quốc hùng mạnh bao quanh Cây Thế Giới.</p><p id="49">Trong khi đó, khu vực phía nam dãy núi Ai Thán cùng những bình nguyên rộng lớn gần trung tâm đại lục đều bị Đế quốc Cuồng Nha chiếm cứ. Còn lại, vùng cao nguyên và núi non hiểm trở phía bắc lại là lãnh địa của lũ Oga ăn thịt người.</p><p id="50">Về mặt thể chất, Thú Nhân và lũ Oga ăn thịt người vốn sinh ra đã sở hữu sức mạnh vượt xa nhân loại. Chẳng những vậy, trong hàng ngũ của chúng còn có không ít cường giả thuộc Chuỗi Nguyên Sơ và Chuỗi Chiến Tranh.</p><p id="51">Vào những năm được mùa thì còn đỡ, nhưng hễ đến năm mất mùa là bọn chúng sẽ lại tràn xuống tấn công các khu định cư của loài người, bắt người sống về làm thức ăn. Có thể nói, đó là một thời đại vô cùng đẫm máu và tàn khốc.</p><p id="52">Thể chất con người vốn dĩ thua xa đám Thú Nhân và lũ Oga ăn thịt người kia. Đã vậy, số lượng cường giả lại quá hiếm hoi, dẫn đến việc các truyền thừa thường xuyên bị thất truyền, tài nguyên thì nghèo nàn kiệt quệ.</p><p id="53">Họ hoàn toàn không có đủ sức để chống trả trước những cuộc xâm lăng của các chủng tộc khác, chỉ biết sống lay lắt, cầm cự qua ngày.</p><p id="54">Mãi cho đến khi ác ma giáng lâm, cục diện này mới bắt đầu thay đổi.</p><p id="55">Vào thời khắc ấy, vì khát vọng sinh tồn, loài người đã liều lĩnh đánh cắp sức mạnh từ chính tay ác ma. Từ đó, những Siêu Phàm Giả đầu tiên thuộc Chuỗi Ác Ma của nhân loại đã ra đời.</p><p id="56">Họ tự xưng là Huyết Tộc, nhưng trong mắt các chủng tộc khác, họ chỉ là lũ quái vật bị chế giễu với cái tên Ma Cà Rồng.</p><p id="57">Ma lực thuộc Chuỗi Ác Ma vốn dĩ không được thiết kế cho con người, vì thế nó xung đột dữ dội với cơ thể phàm trần.</p><p id="58">Thậm chí, để thi triển kỹ năng, họ buộc phải đốt cháy chính máu tươi trong cơ thể mình. Mỗi lần vận dụng thứ sức mạnh siêu phàm ấy là một lần chịu đựng đau đớn tột cùng, chẳng khác nào phải trải qua một cuộc tra tấn tàn khốc. Đó thực sự là một sự giày vò khủng khiếp về mặt tinh thần.</p><p id="59">Gánh chịu sự tàn phá khủng khiếp trên cả thể xác lẫn linh hồn, những con người thuộc Chuỗi Ác Ma thuở sơ khai ấy hiếm ai sống qua được tuổi 30. Kết cục chờ đợi họ, nếu không phải là cái chết, thì sẽ là phát điên.</p><p id="60">Thế nhưng, bất chấp vô vàn khiếm khuyết chết người đó, vẫn có vô số người dấn thân vào con đường tu luyện thứ sức mạnh này.</p><p id="61">Bởi lẽ, họ đâu còn sự lựa chọn nào khác. Nếu không có sức mạnh để phản kháng, e rằng ngay cả cái mốc 30 tuổi kia, họ cũng chẳng thể nào sống sót mà chạm tới được.</p><p id="62">Giữa việc ngoan ngoãn để mặc cho các chủng tộc khác bày mình lên bàn tiệc, hay là chấp nhận khạc máu, chiến đấu đến hơi thở cuối cùng rồi chết, nhân loại chỉ còn cách lựa chọn con đường thứ hai.</p><p id="63">Chính sự tồn tại của những con người ấy cuối cùng cũng đã mang lại cho nhân loại sức mạnh để đương đầu với các chủng tộc khác.</p><p id="64">Từ đây, những mảnh đời lưu lạc dần quy tụ lại bên nhau. Giữa vòng xoáy của sự điên loạn và những cuộc chém giết triền miên, họ đã dựng nên vương quốc đầu tiên thuộc về loài người, Đế quốc Chân Hồng.</p><p id="65">Đỏ thẫm như máu, hướng về cái chết mà sinh ra.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/23638-ta-dau-phai-phu-thuy/c292107-chuong-27-ma-thu-cua-day-tisilan" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/23638-ta-dau-phai-phu-thuy" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/23638-ta-dau-phai-phu-thuy/c267983-chuyen-hai-trinh-khong-ngay-tro-ve-1" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'wB3KXOMvtpjc7dzDNmQYginkaO8ZRIn6xB2qYlVm';
        var comment_type = 'chapter';
        var comment_typeid = '295913';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'wB3KXOMvtpjc7dzDNmQYginkaO8ZRIn6xB2qYlVm';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('23638');
    chapter_id = parseInt('295913');

    readingObject = {
        series_id: series_id,
        series_title: 'Ta Đâu Phải Phù Thủy',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="wB3KXOMvtpjc7dzDNmQYginkaO8ZRIn6xB2qYlVm" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
