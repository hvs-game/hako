<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Yuusha Party wo Oidasareta Kiyoubinbou: Party Jijou de Fuyojitsushi wo Yatteita Kenshi, Bannou e to Itaru - Chương 112 (Ngoại truyện Luna) - Ánh trăng soi sáng màn đêm ① - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="“Orn Doula, hôm nay sẽ là ngày cuối cùng của cậu trong tổ đội này.” Vào một ngày nọ, Orn, người thuộc tổ đội Anh hùng bất ngờ được thủ lĩnh thông báo rằng “Cậu còn quá yếu đuối nên vậy hãy rời nhóm đi”. Các thành viên khác cũng...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="J8UGq2nlqe7mkiKHFQo9uT37cz1OSEQYXe3Mm2p7">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266073-chuong-112-ngoai-truyen-luna-anh-trang-roi-sang-man-dem">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s20802-38a6c658-62d1-4850-9036-6ce26e2965c0.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266011-chuong-111-mot-tuan-sau"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c267140-chuong-113-ngoai-truyen-luna-anh-trang-soi-sang-man-dem"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266073-chuong-112-ngoai-truyen-luna-anh-trang-roi-sang-man-dem" style="background: url('https://i.hako.vn/ln/series/covers/s20802-38a6c658-62d1-4850-9036-6ce26e2965c0.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful">Yuusha Party wo Oidasaret...</a></h5>
                    <small><i class="fas fa-pen"></i>Itsuki Togami</small>
                    <small><i class="fas fa-paint-brush"></i>Kisaragi Yuri</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c170941-minh-hoa-vol-1">Minh họa</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful">Light Novel - Vol 1</a></li>
                                        
                                                            <li class=""><a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c158378-chuong-01">Web Novel (1-50) - Đã xong</a></li>
                                        
                                                            <li class=""><a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c165680-chuong-51-dinh-huong-dao-tao">Web Novel (51-100) - Đã xong</a></li>
                                        
                                                            <li class="current"><a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/t29567-web-novel-101-150-dang-tien-hanh">Web Novel (101 - 150) - Đang tiến hành</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c171796-chuong-101-dien-bien-bat-ngo">
                                                                        Chương 101 - Diễn biến bất ngờ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c172010-chuong-102-hop-nhat-ma-kiem">
                                                                        Chương 102 - Hợp nhất Ma kiếm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c172830-chuong-103-ngoai-truyen-luna-nu-hoang-tinh-linh">
                                                                        Chương 103- (Ngoại truyện Luna) - Nữ hoàng tinh linh
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c173444-chuong-104-ngoai-truyen-haruto-thien-phu-vuong">
                                                                        Chương 104 - (Ngoại truyện Haruto)-Thiên phú Vương
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c173944-chuong-105-ngoai-truyen-luna-cong-chua-phuong-dong">
                                                                        Chương 105 - (Ngoại truyện Luna) - Công chúa phương Đông
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c261912-chuong-106-ngoai-truyen-luna-dang-so-that">
                                                                        Chương 106 - (Ngoại truyện Luna) - Đáng sợ thật
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c262156-chuong-107-ngoai-truyen-luna-ma-phap-tinh-linh">
                                                                        Chương 107 - (Ngoại truyện Luna) Ma pháp tinh linh
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c262229-chuong-108-thien-phu-vuong-doi-dau-dung-si">
                                                                        Chương 108 - Thiên phú Vương đối đầu Dũng sĩ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c263262-chuong-109-ngoai-truyen-fuuka-nguyen-kiem">
                                                                        Chương 109 (Ngoại truyện Fuuka) - Nguyền Kiếm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c264369-chuong-110-ngoai-truyen-oliver-cuoc-tro-chuyen-keo-dai-10-nam">
                                                                        Chương 110 (Ngoại truyện Oliver) - Cuộc trò chuyện kéo dài 10 năm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266011-chuong-111-mot-tuan-sau">
                                                                        Chương 111 - Một tuần sau
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266073-chuong-112-ngoai-truyen-luna-anh-trang-roi-sang-man-dem">
                                                                        Chương 112 (Ngoại truyện Luna) - Ánh trăng soi sáng màn đêm ①
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c267140-chuong-113-ngoai-truyen-luna-anh-trang-soi-sang-man-dem">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 113 (Ngoại truyện Luna) - Ánh trăng soi sáng màn đêm ②
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c284010-chuong-114-vuot-len-chinh-minh">
                                                                        Chương 114 - Vượt lên chính mình
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c284442-chuong-115-tu-bay-gio-to-doi-10-se-la">
                                                                        Chương 115 - Từ bây giờ, tổ đội 10 sẽ là...
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel (101 - 150) - Đang tiến hành</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 112 (Ngoại truyện Luna) - Ánh trăng soi sáng màn đêm ①</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266073-chuong-112-ngoai-truyen-luna-anh-trang-roi-sang-man-dem#chapter-comments" style="text-decoration: underline">2 Bình luận</a> -
                        Độ dài: 1,977 từ - Cập nhật: 
                        <time class="topic-time timeago" title="30-11-2025 14:22:36" datetime="2025-11-30T14:22:36+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 112 (Ngoại truyện Luna) - Ánh trăng soi sáng màn đêm ①</p>
                    <p id="1">&lt;Cô có sao không Luna?&gt;</p><p id="2">Tôi đang cần mẫn phát triển loại ma pháp phức tạp mới thì một Tiểu Linh - Tinh Linh - luôn ở bên tôi cất giọng hỏi.</p><p id="3">&lt;Ừm, tôi ổn mà. Cảm ơn cậu nhé.&gt;</p><p id="4">&lt;Vậy thì tốt rồi. Nhưng cô định ở đây đến bao giờ nữa? Sylph bảo rằng nơi đây quá ngột ngạt và những kẻ tiếp chuyện với cô có vẻ kỳ lạ. Cô phải rời khỏi đây càng sớm càng tốt.&gt;</p><p id="5">Tinh Linh rất hiếm khi chủ động bắt chuyện. Cô ấy chủ yếu chỉ dõi theo tôi và thỉnh thoảng mới ra tay giúp đỡ. Vậy mà, sau khi tôi được đưa đến đây mười ngày, Tinh Linh cũng đã bắt đầu cảm thấy khó chịu.</p><p id="6">&lt;Cậu nói đúng Tiểu Linh ạ. Nhưng tôi không thể rời khỏi đây được. Tôi phải tuân thủ theo quy định của pháp luật.&gt;</p><p id="7">&lt;Vậy sao. Cô sẽ phải ở đây cho đến khi nào?&gt;</p><p id="8">&lt;Tôi không biết. Nhưng chắc chắn là trong khoảng thời gian tớim&gt;</p><p id="9">&lt;Ừm.&gt;</p><p id="10">Tiểu Linh ừm một tiếng rồi lại im lặng.</p><p id="11">Mười ngày đã trôi qua kể từ khi Oliver-san và Philly-san tàn phá thành phố, cùng lúc ấy, một Làn sóng Ma thú đã tràn đến thành phố.</p><p id="12">Hiện tại, tôi đang bị giam tại Trại giam Tội phạm Tutril. </p><p id="13">Dù được gọi là Trại giam Tội phạm, nơi này lại có tường ngăn cách nhà vệ sinh và nhà tắm, có sẵn cả quần áo để thay đổi. Hình như nơi này chuyên được dùng để giam giữ quý tộc nên điều kiện sinh hoạt cũng không đến nỗi tệ.</p><p id="14">Thật lòng mà nói, tôi rất biết ơn họ vì điều này. Tôi không mang tước hiệu quý tộc nên tôi vẫn luôn tự hỏi tại sao mình lại được đưa đến đây, nhưng vì đã được ở đây rồi nên tôi nhất định sẽ tận dụng nơi này một cách thoải mái hết sức có thể.</p><p id="15">◇</p><p id="16">Mười ngày trước, sau khi gục xuống sau trận chiến với Thủy Long, tôi đã theo dõi cuộc chiến giữa Orn-san và Oliver-san.</p><p id="17">Lúc đầu, tôi đã nhìn thấy luồng ma lực vàng kim đâm xuyên bụng Orn-san và nghĩ đến viễn cảnh tồi tệ nhất, nhưng may mắn thay là điều đó đã không xảy ra.</p><p id="18">Orn-san, sau khi hồi phục vết thương trong thoáng chốc, phải lãnh thêm một đòn nữa nhưng rồi lại lật ngược tình thế và áp đảo Oliver-san.</p><p id="19">Tôi đã rất kinh ngạc trước sức mạnh khủng khiếp của Orn-san. Điều khiến tôi bất ngờ nhất là hàng loạt loại ma pháp được thi triển mà không có lấy một pháp trận nào.</p><p id="20">Ma pháp thường là các hiện tượng liên quan đến sự xuất hiện của pháp trận - là thuật ngữ tổng thể để chỉ ra những hiệu ứng khác nhau xảy ra bởi sự luân chuyển ma lực thông qua pháp trận. Nói cách khác, pháp trận luôn phải xuất hiện mỗi khi thi triển ma pháp.</p><p id="21">Vậy mà, thứ ma pháp đen kịt của Orn-san lại chẳng hề có lấy một pháp trận.</p><p id="22">Cách duy nhất để giải thích các hiện tượng liên quan đến ma pháp mà không có pháp trận là các Thiên phú. Tuy nhiên, Thiên phú của Orn-san [Hội tụ Ma lực] không thể dùng để giải đáp cho các hiện tượng đó.</p><p id="23">Lẽ nào Thiên phú của Orn-san không phải là [Hội tụ Ma lực]? Không, "Thiên Lôi Trảm" mà cậu ấy đã tung ra trong trận chung kết Giải đấu Võ thuật đích thị là nhờ [Hội tụ Ma lực].</p><p id="24">Nếu đó là sự thật thì chúng là những điều mà tôi chưa từng biết đến, vừa không phải là ma pháp, vừa không phải là Thiên phú.</p><p id="25">Có lẽ Titania biết. Tôi sẽ hỏi bà ấy trong dịp thăm tiếp theo của bà. Cho đến lúc đó, tôi phải cân nhắc thêm nhiều chuyện khác bên cạnh việc phát triển ma pháp.</p><p id="26">Dù sao thì tôi cũng chẳng phải làm việc gì mà.</p><p id="27">Sau trận chiến giữa Orn-san với Oliver-san và Làn sóng Ma vật, tôi đã bị binh lính áp giải đi.</p><p id="28">Kể từ hôm đó, tôi bị họ thẩm vấn và dành cả ngày dài để ở trong căn phòng này.</p><p id="29">Tôi hiện đang chờ lệnh phán quyết của toà án.</p><p id="30">Theo một viên chức quân sự cấp cao, có khả năng là tôi sẽ được ân xá vì những đóng góp trong việc bảo vệ khu vực phía cổng Tây trong vụ việc vừa rồi. Tuy nhiên, vì bị tình nghi có liên quan đến vụ bắt cóc trẻ em và buôn người bởi thương hội nhà tôi, khả năng được toà án ân xá là rất thấp.</p><p id="31">Bắt cóc trẻ em là hành vi đặc biệt nghiêm trọng, có thể bị kết án tử hình trong một số trường hợp nhất định. Thế nên, thật tốt biết bao khi khả năng tôi phải chịu mức án này đã được loại bỏ.</p><p id="32">"Căn phòng này tốt thật đấy, nhưng không dùng được ma pháp tính ra cũng phiền thật đấy". Tôi thở dài.</p><p id="33">Dù được sống trong điều kiện tốt đến mấy, ham muốn ích kỷ bên trong loài người dường như sẽ chẳng thể nào nguôi ngoai nổi.</p><p id="34">Quá trình phát triển một loại ma pháp có thể chia ra làm hai phần, đó là tạo và thử pháp trận. "Tạo" tức là lập công thức cơ bản của pháp trận từ đầu, còn "Thử" là quá trình chỉnh sửa và hoàn thiện pháp trận để nó có thể thi triển và hoạt động mà không gặp vấn đề.</p><p id="35">"Thử" đòi hỏi người ta phải thi triển ma pháp. Khi ma pháp ấy sắp hoàn thiện, người ta cần thi triển nó nhiều lần một cách nhanh chóng để có thể tùy chỉnh. Thi triển ma pháp quá nhiều có thể gây đau đầu nên người ta thường "thử" bằng ma cụ tích hợp pháp trận.</p><p id="36">Nhưng tôi hiện đang bị giam trong trại nên không có ma thạch để kích hoạt các loại ma cụ.</p><p id="37">Không có ma thạch thì lựa chọn duy nhất là dựng pháp trận trong đầu, nhưng kể cả khi tôi có thể dựng được, tôi cũng không thể nạp ma lực vào nó nên việc "thử" là bất khả thi với điều kiện hiện tại.</p><p id="38">Lý do tôi không thể nạp ma lực là vì món ma cụ đang ôm lấy cổ tay trái tôi. Mọi người bị giam giữ trong trại này đều phải đeo nó, nhằm ngăn chặn họ nạp ma lực. Nếu không có chiếc vòng, những người có khả năng sử dụng ma pháp mạnh sẽ phá tường rồi trốn thoát nên đây là biện pháp tối cần thiết.</p><p id="39">Ngoài ra, viên ma thạch đính trên món ma cụ dạng vòng tay này được tích hợp với cấu trúc cực kỳ phức tạp, nên cũng không thể gỡ ra được.</p><p id="40">Phàn nàn cũng chả mang lại lợi lộc gì. Bây giờ, cứ tập trung "tạo" các công thức bước đầu của các ma pháp phức tạp có thuộc tính đã. Chỉ riêng việc này cũng đã tốn rất nhiều thời gian rồi. Nếu còn dư dả thời gian thì lúc đó nghĩ ngợi linh tinh cũng chẳng muộn.</p><p id="41">◇</p><p id="42">Tôi đang cặm cụi vẽ pháp trận mình phát triển lên giấy thì chợt nghe thấy tiếng bước chân, khả năng cao là của cai ngục, vọng đến.</p><p id="43">(... Mang bữa tối đến lúc này là quá sớm.)</p><p id="44">Từ ánh đèn cam chiếu xuyên qua cửa sổ âm tường phía trên phòng, tôi biết rằng ngoài trời lúc này đã tối.</p><p id="45">Cai ngục đến trước cửa phòng rồi vặn khoá và mở ra. Bởi nếu có mang bữa ăn đến thì họ cũng chỉ đẩy cái khay qua chiếc khe nhỏ gần cửa thôi. Tôi sắp bị đưa đi xét xử rồi sao?</p><p id="46">Cánh cửa mở toang hẳn ra, đứng ở đó là một vị cai ngục mặc quân phục với vẻ mặt nghiêm nghị.</p><p id="47">"Ra ngoài đi Luna Flockhart."</p><p id="48">Vị cai ngục nói bằng giọng điệu nghiêm nghị. Dù đã quen với giọng đó rồi nhưng vẻ mặt vô cảm kia vẫn khá đáng sợ đối với tôi.</p><p id="49">Mặc kệ mệnh lệnh ấy không phải là ý hay nên tôi ngoan ngoãn đứng dậy khỏi ghế và đi về phía cửa.</p><p id="50">"Đừng bỏ những tờ giấy đó lại. Cầm chúng theo đi."</p><p id="51">Cầm cả những tờ giấy theo sao? Hình như không phải đi xét xử thì phải...</p><p id="52">Dù vẫn còn băn khoăn trong lòng, tôi vẫn quay vào, xắp gọn xấp giấy lại, cầm trên tay rồi bước ra ngoài.</p><p id="53">"... Đi theo tôi."</p><p id="54">Vị cai ngục chỉ nói thế rồi quay lưng bước đi. Tôi khẩn trương theo sau ông ấy.</p><p id="55">Một lúc sau, chúng tôi đã có mặt ở hậu sảnh của toà nhà. Tôi sẽ được đưa đến một toà nhà khác sao?</p><p id="56">"Cô giơ tay trái lên đi."</p><p id="57">Tôi còn đang thắc mắc đủ đường thì vị cai ngục lại đưa ra một mệnh lệnh khác cho tôi. Tôi giơ tay trái lên trước ngực, ông ấy chạm vào món ma cụ dạng vòng tay rồi lấy lại nó. Xong xuôi, vị cai ngục trao cho tôi ma cụ lưu trữ hình kẹp tóc mà tôi đã giao nộp cho ông ấy trước khi tôi bị bắt giam hoàn toàn.</p><p id="58">Vẫn chưa hiểu rốt cuộc chuyện này là sao, tôi nhận lại nó từ tay ông ấy. Vị cai ngục nói:</p><p id="59">"Tôi không hề đụng đến bất cứ thứ gì được lưu trữ bên trong nó. Cô hãy kiểm tra nó sau và báo lại cho tôi biết nếu phát hiện sót thứ gì."</p><p id="60">Vị cai ngục giải thích một cách vội vã.</p><p id="61">"...?"</p><p id="62">Tôi nghiêng đầu bối rối. Vị cai ngục bèn nói thêm "Cô tự do rồi".</p><p id="63">(Tự do á? Tức là mình đã được thả rồi ư? Nhưng tại sao?)</p><p id="64">"Cô bối rối là chuyện dễ hiểu. Cô cứ ra ngoài kia là rõ ngay thôi."</p><p id="65">Tôi đứng như trời trồng ở đó nên vị cai ngục phải nói thêm.</p><p id="66">Tôi cất xấp giấy đi và cài lại món ma cụ hình kẹp tóc lên đầu. </p><p id="67">Tôi nắm lấy tay nắm cửa bằng bàn tay run rẩy của mình. Tôi rời khỏi đó - cũng là bước chân đầu tiên ra ngoài thế giới rộng lớn.</p><p id="68">◇</p><p id="69">Khi đã bước ra bên ngoài rồi, mặt trời đã bắt đầu lặn, còn mặt trăng thì đang dần hiện rõ trên nền trời chạng vạng.</p><p id="70">"A! Tinh Linh-san! Bên này, bên này nè!"</p><p id="71">Đang thẫn thờ nhìn lên trời, tôi chợt nghe thấy giọng bé gái từ một khoảng cách đây không xa. Đây là lần thứ hai tôi được gọi là "Tinh Linh-san" rồi.</p><p id="72">Nhìn về phía phát ra giọng nói, tôi bắt gặp Caroline đang vẫy tay chào tôi. Cạnh em ấy là Sophia và Logan, và sau lưng ba em ấy là chiếc xe ngựa có sơn hình chú thỏ ngồi dưới mặt trăng - đó chính là biểu tượng của Bang hội "Thỏ Bạc Đêm Sao".</p><p id="73">(Sao mấy em ấy lại ở đây? Cứ như thể đã biết mình sẽ ra trại vậy...)</p><p id="74">Tôi lại càng trở nên bối rối kể từ khi được trả tự do. Đang đứng ngẩn người ra đó, tôi chợt nghe thấy tiếng cửa mở phát ra từ phía sau và một giọng nói gọi tên tôi.</p><p id="75">"Luna."</p><p id="76">Giọng nói này, không thể nhầm đi đâu được.</p><p id="77">Quay người lại, tôi thấy Orn-san đang đứng ở đó.</p><p id="78">"Orn-san?"</p><p id="79">"Lâu rồi không gặp. Cậu hẳn là đang bối rối lắm, nhưng ta cứ lên xe trước đã nhé?</p><p id="80">◇</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266011-chuong-111-mot-tuan-sau" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c267140-chuong-113-ngoai-truyen-luna-anh-trang-soi-sang-man-dem" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(2)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">2 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3122974"
    class="ln-comment-item mt-3 clear"
    data-comment="3122974" 
    data-parent="3122974" 
    data-type="chapter" 
    data-typeid="266073">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u54467-e65c56ef-6e2f-414d-a03b-b64568c6d1cb.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/54467">Lucia-chan</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        :&gt;
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266073-chuong-112-ngoai-truyen-luna-anh-trang-roi-sang-man-dem?comment_id=3122974#ln-comment-3122974"
                            class="text-slate-500">
                            <time class="timeago" title="13-12-2025 01:27:32"
                                datetime="2025-12-13T01:27:32+07:00">
                                13-12-2025 01:27:32
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3107801"
    class="ln-comment-item mt-3 clear"
    data-comment="3107801" 
    data-parent="3107801" 
    data-type="chapter" 
    data-typeid="266073">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.docln.net/lightnovel/users/ua59847-8b2d8858-60d5-48e3-a160-a341333957fd.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/59847">Bệnh nhân tiểu đường P</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Adu
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/20802-the-jack-of-all-trades-kicked-out-of-the-heros-party-the-swordsman-who-became-a-support-mage-due-to-party-circumstances-becomes-all-powerful/c266073-chuong-112-ngoai-truyen-luna-anh-trang-roi-sang-man-dem?comment_id=3107801#ln-comment-3107801"
                            class="text-slate-500">
                            <time class="timeago" title="30-11-2025 08:20:18"
                                datetime="2025-11-30T08:20:18+07:00">
                                30-11-2025 08:20:18
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'J8UGq2nlqe7mkiKHFQo9uT37cz1OSEQYXe3Mm2p7';
        var comment_type = 'chapter';
        var comment_typeid = '266073';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'J8UGq2nlqe7mkiKHFQo9uT37cz1OSEQYXe3Mm2p7';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('20802');
    chapter_id = parseInt('266073');

    readingObject = {
        series_id: series_id,
        series_title: 'Yuusha Party wo Oidasareta Kiyoubinbou: Party Jijou de Fuyojitsushi wo Yatteita Kenshi, Bannou e to Itaru',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="J8UGq2nlqe7mkiKHFQo9uT37cz1OSEQYXe3Mm2p7" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
