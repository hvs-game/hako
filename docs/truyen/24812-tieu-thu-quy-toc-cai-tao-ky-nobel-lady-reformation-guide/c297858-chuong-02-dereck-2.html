<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Tiểu thư quý tộc cải tạo ký - Nobel Lady Reformation Guide - Chương 02 : Dereck (2) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Để miêu tả những tiểu thư quý tộc trẻ tuổi, họ hoặc là cực kỳ thô lỗ, hoặc là chẳng có chút nếp nhăn nào trong đầu, nhưng mà ngay cả khi đã nghe những lời đồn đại như vậy, vẫn có một chàng trai trẻ sẵn sàng đi chứng...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="j1vdOk17gQ41y61EUIAm7jq5DbyWH4fRE018P0zO">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297858-chuong-02-dereck-2">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24812-c103f459-f5b6-4c89-b85e-4951915fff04.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297857-chuong-01-dereck-1"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297859-chuong-03-dereck-3"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297858-chuong-02-dereck-2" style="background: url('https://i.hako.vn/ln/series/covers/s24812-c103f459-f5b6-4c89-b85e-4951915fff04.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide">Tiểu thư quý tộc cải tạo...</a></h5>
                    <small><i class="fas fa-pen"></i>Corita (코리타)</small>
                    <small><i class="fas fa-paint-brush"></i>Shin Hee-bin (신희빈) / Team Pink Shark</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/t36070-tap-01">Tập 01</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297857-chuong-01-dereck-1">
                                                                        Chương 01 : Dereck (1)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297858-chuong-02-dereck-2">
                                                                        Chương 02 : Dereck (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297859-chuong-03-dereck-3">
                                                                        Chương 03 : Dereck (3)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 01</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 02 : Dereck (2)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297858-chuong-02-dereck-2#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,874 từ - Cập nhật: 
                        <time class="topic-time timeago" title="27-01-2026 10:27:16" datetime="2026-01-27T10:27:16+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 02 : Dereck (2)</p>
                    <p id="1">Ebelstein là một thành phố có một ngàn bộ mặt.</p><p id="2">Đó là điều mà đám thi nhân lãng mạn trong quán rượu thường lảm nhảm khi đã say mềm.</p><p id="3">Nhưng cũng không thể xem đó chỉ là lời nói nhảm của những tên tửu quỷ. Một thành phố có quy mô như thế này, nơi sinh sống của hàng trăm nghìn con người, là điều hiếm thấy ngay cả khi phải so sánh với phần còn lại của toàn bộ lục địa.</p><p id="4">Khi bị mắc kẹt trong những khu ổ chuột xám xịt, ngột ngạt, người ta rất dễ cảm thấy thành phố này chẳng khác gì một nhà tù khổng lồ. Nhưng chỉ cần bước ra ngoài và dạo quanh, bạn sẽ bắt đầu nghĩ rằng có lẽ đám say rượu kia cũng không hoàn toàn sai.</p><p id="5">Dereck rời khỏi khu ổ chuột, băng qua khu thương mại rồi tiến về phía bến cảng nhộn nhịp. Nhìn khung cảnh sôi động nơi đó, cậu có cảm giác như đang đứng trước một thành phố hoàn toàn khác, chẳng liên quan gì đến những con hẻm mục nát và im lìm trước kia.</p><p id="6">Tiếng hò hét của phu khuân vác, tiếng gỗ kẽo kẹt của những con tàu đong đưa theo sóng, hoạt động tấp nập từ sáng sớm của những người đang khiêng các thùng cá và hàng hóa — tất cả hòa lại thành một bầu không khí sống động, cách xa sự tĩnh lặng chết chóc của khu ổ chuột hàng dặm.</p><p id="7">Đi xuyên qua khu bến cảng, Dereck leo lên những bậc thang dẫn sâu hơn vào thành phố, đi ngang qua những tòa nhà nguy nga, cuối cùng tiến vào khu ngõ hẻm nơi lính đánh thuê tụ tập.</p><p id="8">Trong làn sương ẩm ướt của buổi sáng, những tên lính đánh thuê thô kệch, những kẻ sẵn sàng giết người chỉ vì vài đồng bạc, lang thang khắp các con phố. Số lượng vũ khí trên người họ tạo nên một bầu không khí đe dọa, đủ để xua đuổi bất kỳ công dân lương thiện nào. </p><p id="9">Dù là một đại đô thị phát triển, Ebelstein vẫn có mặt hoang dã của riêng mình.</p><p id="10">Người thầy thứ hai của Dereck là một góa phụ tên Katia Flameheart.</p><p id="11">Bà từng là nữ chủ nhân của gia tộc Flameheart, một gia tộc nam tước đã sa sút sau khi tham gia vào cuộc nổi loạn chống lại đế quốc. Nay đã về già, những nếp nhăn bắt đầu hằn lên trán bà, và mái tóc cũng điểm những sợi bạc.</p><p id="12">Những nữ quý tộc sa cơ thường có một kết cục rất bi thảm khi không thể thích nghi với sự thay đổi đột ngột của cuộc sống. Dù xinh đẹp, nhưng thân phận cao quý đã bảo vệ họ đã mất đi, và số phận của họ không cần nghĩ cũng biết.</p><p id="13">Tuy nhiên, những người có ý chí mạnh mẽ vẫn tìm được cách sinh tồn. </p><p id="14">Họ có thể trở thành giáo viên, dạy dân thường đọc viết, hoặc học cách buôn bán. Nếu may mắn, họ sẽ được làm gia sư cho các gia tộc quý tộc danh tiếng. Từng sống trong giới quý tộc, họ là lựa chọn lý tưởng để dạy dỗ các tiểu thư quý tộc về lễ nghi.</p><p id="15">Katia là một trường hợp khác thường trong số những người “may mắn” ấy. Bà không cầm bút, cũng không cúi đầu trước các gia tộc khác.</p><p id="16">Là một pháp sư cấp ba, bà chọn sống như một lính đánh thuê, săn giết quái vật để lấy tiền thưởng. Thay vì những chiếc váy lộng lẫy, bà khoác lên mình chiếc áo choàng sờn cũ của thợ săn; thay vì bút lông, bà mang theo dao găm, bươn chải trong thế giới thô bạo của lính đánh thuê. </p><p id="17">Thân hình nhỏ nhắn ấy hoàn toàn không tương xứng với khả năng sinh tồn của bà trong môi trường khắc nghiệt này.</p><p id="18">“Này, cậu nhóc, cậu biết dùng ma pháp đúng không?”</p><p id="19">Đó là những gì bà đã nói khi tình cờ gặp Dereck lần đầu tiên, vào lúc cậu đang yên lặng nhai bánh yến mạch khô ở một góc của quán rượu. Khi ấy, Dereck đã lăn lộn trong thế giới lính đánh thuê khoảng bốn năm.</p><p id="20">Mái tóc trắng vẫn phủ bụi, đôi mắt đỏ sắc bén ngước lên nhìn Katia. Luồng ma lực mỏng manh lưu chuyển trong mắt cậu khác hẳn với các quý tộc.</p><p id="21">Katia nheo mắt, tò mò quan sát Dereck.</p><p id="22">“…Bà đang nói với tôi sao?”</p><p id="23">“Đúng vậy.”</p><p id="24">Dereck nhìn Katia, người vừa bất ngờ bắt chuyện với mình.</p><p id="25">Có vài lý do khiến Dereck bước chân vào thế giới lính đánh thuê.</p><p id="26">Thứ nhất, cậu cần sống sót. Dù xuất thân thấp hèn đến đâu, chỉ cần dám liều mạng, cậu vẫn có thể kiếm được việc làm ở đây. Những công việc như bắt chuột trong những nhà kho cũ hay tiêu diệt quái vật nhỏ ngoài thành đều nằm trong khả năng của Dereck, người đã thuần thục những ma pháp cấp một mà mình đã học.</p><p id="27">Thứ hai, cậu cần gặp gỡ một giáo viên khác. Lão già ăn xin dạy cậu nền tảng ma pháp đã chết. Một số ma pháp có thể tự học, nhưng nếu có một người thầy giỏi thì hiệu quả sẽ tốt hơn nhiều.</p><p id="28">Ngay cả trong giới lính đánh thuê, đôi lúc cũng xuất hiện những người biết dùng ma pháp. Những kẻ đã rơi vào hoàn cảnh tuyệt vọng, buộc phải sống nhờ vào tiền nhiệm vụ, có mặt ở khắp nơi.</p><p id="29">Dereck hy vọng có thể học hỏi từ những người như vậy, nhưng phần lớn pháp sư lính đánh thuê đều không mấy rộng lượng. Kế hoạch gặp được một người tử tế trong vòng một năm của cậu đã kéo dài thành bốn năm.</p><p id="30">Cậu bé giờ đã bắt đầu trông giống thiếu niên, nhưng trong mắt những lính đánh thuê dày dạn kinh nghiệm, cậu vẫn chỉ là một đứa trẻ. Bị đám côn đồ đánh đập, rồi dùng chút ma pháp ít ỏi của mình để phản kháng, Dereck đã dần hình thành trong tim mình một sự ngoan cường dai dẳng.</p><p id="31">“Giờ cậu bao nhiêu tuổi rồi?”</p><p id="32">Katia dường như hiểu được quá khứ hiển hiện trên gương mặt Dereck, giọng bà bình thản.</p><p id="33">Bà là người từng lăn lộn đủ lâu trong thế giới lính đánh thuê, vậy nên việc giúp đỡ người khác là điều không tưởng. Bà đã thấy quá nhiều kẻ đáng thương và thường chọn cách làm ngơ. Ai cũng có câu chuyện riêng của mình.</p><p id="34">Nhưng điểm khác biệt lớn nhất giữa Dereck và những kẻ khốn khổ khác chính là tuổi tác.</p><p id="35">Dereck còn quá trẻ.</p><p id="36">Bà nhớ đến đứa con trai đã mất, cậu bé từng vô tư chạy nhảy trong sân biệt thự. Nếu còn sống, nó cũng chừng tuổi Dereck bây giờ. Nhìn một đứa trẻ phải chật vật kiếm sống bằng chút ma pháp ít ỏi khiến lòng bà nhói lên, hơn là khâm phục.</p><p id="37">Dù nghĩ rằng bản năng ấy đã lùi vào quá khứ, Katia vẫn không thể thoát khỏi thiên tính của một người mẹ. Dù đã mất con, bà vẫn là mẹ cho đến chết.</p><p id="38">“Ma pháp cũng giống như mọi lĩnh vực khác. Lý thuyết và thực hành lá hoàn toàn khác nhau. Và cả hai đều rất quan trọng.”</p><p id="39">Thỉnh thoảng, Katia gặp Dereck trong quán rượu và đánh giá ma pháp của cậu. Ban đầu Dereck còn hơi dè dặt, nhưng chẳng bao lâu cậu đã như một miếng bọt biển tham lam hấp thụ những kiến thức chính thống mà lão già ăn xin không thể dạy mình.</p><p id="40">“Cậu phải hiểu rõ cấp bậc của mình thì mới tiến bộ được.”</p><p id="41">Có nhiều cách để phân loại ma pháp sư, nhưng phổ biến nhất là hệ thống phân cấp của giới quý tộc. Katia, theo chuẩn đó, là một pháp sư cấp ba.</p><p id="42">Khác với những gì lão già ăn xin đã từng nói, ngay cả những pháp sư xuất thân từ quý tộc cũng rất khó đạt cấp ba. Thỉnh thoảng cũng có những thiên tài đạt được đẳng cấp đó trước lễ trưởng thành, nhưng những người như vậy là vô cùng hiếm. </p><p id="43">Phần lớn các pháp sư quý tộc đều phải chờ đến khi tóc bạc da nhăn mới có thể chạm tới ngưỡng cửa đó.</p><p id="44">Nếu ngay cả quý tộc còn thấy khó, thì với thường dân đó chính là không thể. Không phải tự nhiên mà pháp sư cấp ba được gọi là “pháp sư cao cấp”.</p><p id="45">Nói cách khác, gặp được một người thầy như Katia là một may mắn to lớn cho. Dereck.</p><p id="46">“Cậu có thể làm được những gì với ma pháp trong thực chiến?”</p><p id="47">“Không có gì nhiều. Chỉ là thắp sáng những chỗ tối hay xác định phương hướng.”</p><p id="48">“Không quá nhiều nếu so với chuẩn của pháp sư cấp một, nhưng với độ tuổi của cậu thì rất đáng nể.”</p><p id="49">Quán rượu ồn ào không phải nơi lý tưởng để dạy học, nhưng cả hai thầy trò đều quen với sự hỗn loạn.</p><p id="50">“Tuy nhiên, chỉ thế thì cậu sẽ không chạm nổi ngưỡng cấp hai. Cậu không cần phải tinh thông tất cả ma pháp cấp hai, chỉ cần học những thứ căn bản thôi cũng đã đủ để đảm bảo tương lai. Ít nhất hãy nhắm tới mục tiêu đó.”</p><p id="51">“Tôi sẽ cố.”</p><p id="52">Katia không có tham vọng lớn. Bà chỉ định cho cậu chút thiện ý của một người mẹ, rồi rời đi.</p><p id="53">Một đứa trẻ dân thường không có huyết thống quý tộc thì không thể hoàn toàn nắm vững ma pháp cấp hai. Nhưng chỉ cần biết căn bản, cuộc đời cậu đã khác. Đó là lòng tốt nhỏ bé của bà.</p><p id="54">Trong một khoảng thời gian, Katia mang Dereck theo, dạy cậu nhiều loại phép thuật và những kỹ năng sinh tồn.</p><p id="55">*****</p><p id="56">Tổ hợp giữa một thiên tài ma pháp đến từ khu ổ chuột và một nữ quý tộc sa cơ là điều hiếm thấy, ngay cả trong giới lính đánh thuê. Đôi lúc có kẻ tò mò, nhưng thật sự thì mối quan hệ giữa Katia và Dereck không thân thiết như vẻ ngoài.</p><p id="57">Katia hiểu rõ rằng quá nhiều tình cảm sẽ sinh rắc rối. Dereck cũng hiểu điều đó và không muốn trở thành gánh nặng cho bà.</p><p id="58">“Cậu có kinh nghiệm thực chiến, nhưng vẫn cần nắm căn bản. Ma pháp chia làm năm nhánh, cậu biết chứ?”</p><p id="59">“Tấn công, biến hình, ảo thuật, triệu hồi và dò xét, đúng chứ?”</p><p id="60">“Đúng vậy. Xem ra lão già kia cũng có dạy cho cậu về nền tảng. Mỗi một nhánh đều có những phép thuật trải dài ở các cấp độ. Chỉ cần có thể thi triển thuần thục một ma pháp cấp hai, cậu sẽ chính thức trở thành một pháp sư cấp hai.”</p><p id="61">Tất nhiên, trong số những pháp sư cấp hai cũng tồn tại khoảng cách. Việc chỉ biết một ma pháp và nắm giữ nhiều ma pháp tạo ra sự khác biệt rất lớn trong khả năng của những ma pháp sư.</p><p id="62">Tuy nhiên, ý nghĩa tượng trưng của việc đó vẫn rất lớn. Chỉ cần thi triển được một ma pháp cấp hai, thân phận của cậu sẽ hoàn toàn thay đổi.</p><p id="63">Trong khi ma pháp cấp hơi khá phổ biến trong giới quý tộc, nó lại là một thành tựu hiếm thấy trong giới dân thường, một minh chứng cho tài năng và những sự nỗ lực.</p><p id="64">“Là pháp sư, tự nhiên cậu sẽ muốn tiến bộ. Hầu hết các pháp sư đều sẽ chọn đào sâu vào một lĩnh vực thay vì học dàn trải.”</p><p id="65">“Vậy các pháp sư thường chuyên môn hóa?”</p><p id="66">“Đúng vậy. Cậu phải nhanh chóng tìm ra thế mạnh của mình và biến nó thành vũ khí sắc bén nhất.”</p><p id="67">“Con muốn học hết.”</p><p id="68">Katia đặt cốc rượu xuống, nhìn Dereck bằng ánh mắt mệt mỏi.</p><p id="69">“Tham vọng quá mức sẽ cản trở sự tiến bộ. Hãy nhớ lấy lời ta.”</p><p id="70">“Vâng.”</p><p id="71">Katia là pháp sư ảo thuật cấp ba. Bà không biết gì nhiều về những phép thuật cấp ba, nhưng lại tinh thông rất nhiều phép thuật cấp hai.</p><p id="72">Bà không thể lập tức nâng cao sức mạnh của Dereck, nhưng có thể chỉ cho cậu con đường chính xác.</p><p id="73">“Từ cấp hai trở lên, cậu phải liên tục cảm nhận và điều khiển ma lực trong cơ thể.”</p><p id="74">“Con đã có cảm giác mơ hồ. Việc dùng ma pháp về bản chất chính là thao túng một nguồn năng lượng nằm sâu bên trong cơ thể.”</p><p id="75">“Đúng vậy. Kinh nghiệm thực chiến cậu sẽ giúp chúng ta rút ngắn quá trình học tập lại rất nhiều. Thử bắt chước dòng ma lực mà ta đang truyền cho cậu xem.”</p><p id="76">Katia đặt tay lên bàn gỗ, điều khiển ma lực. Dereck làm theo, tinh tế cảm nhận nguồn ma lực trong cơ thể mình.</p><p id="77">Dereck có lượng ma lực bẩm sinh rất lớn, thật phí phạm nếu cậu ta mục rữa trong ổ chuột. </p><p id="78">Tài năng của Dereck không dừng lại ở đó. Cậu đã học được nền tảng thông qua một lão ăn mày khoác lác ở khu ổ chuột và hiểu cách điều khiển ma lực thông qua những kinh nghiệm thực chiến đầy khắc nghiệt.</p><p id="79">‘Nếu cậu ta mang huyết thống quý tộc… cuộc đời của cậu ta đã hoàn toàn khác.’</p><p id="80">Katia đã từng chứng kiến quá nhiều pháp sư tầm thường dựa vào huyết thống để khoe khoang, vậy nên tiềm năng của Dereck khiến bà có những cảm xúc lẫn lộn, nhưng cũng chẳng có gì để suy nghĩ thêm.</p><p id="81">Dù sao, thế giới vốn đã bất công. Katia hiểu điều đó. Mềm lòng chỉ khiến cuộc sống của mình thêm khó khăn.</p><p id="82">Giữa lúc dạy dỗ, một chuyện bất ngờ đã xảy ra.</p><p id="83">— Vù!</p><p id="84">Ánh mắt Dereck lóe lên sự giác ngộ, ma lực bùng phát.</p><p id="85">Katia nhíu mày.</p><p id="86">— Vù! ẦM!</p><p id="87">Một vụ nổ khổng lồ vang vọng khắp quán rượu.</p><p id="88">“Cái quái—!”</p><p id="89">“Chuyện gì vậy?!”</p><p id="90">Đám lính đánh thuê nhanh chóng rút vũ khí, hoảng loạn nhìn quanh. Âm thanh như tòa nhà sụp đổ, làm rung chuyển cả quán.</p><p id="91">Họ đã sẵn sàng giao chiến, nhưng chẳng có gì bất thường. Bên ngoài vẫn yên bình, trong quán cũng không hề hư hại.</p><p id="92">“Cái quái gì thế này…? Rõ ràng là tôi đã nghe thấy tiếng nổ!”</p><p id="93">“Bên kia! Mau kiểm tra xung quanh đi!”</p><p id="94">Giữa hỗn loạn, Katia cúi nhìn Dereck.</p><p id="95">Dereck cũng ngước lên.</p><p id="96">“Sư phụ, con chỉ—”</p><p id="97">— Vù!</p><p id="98">Chưa kịp nói hết câu, Katia đã nắm chặt tay Dereck và kéo cậu cấp tốc rời khỏi quán rượu.</p><p id="99">*****</p><p id="100">Katia kéo Dereck vào một con hẻm vắng trong khu lính đánh thuê. Bước chân của bà nhanh đến mức Dereck phải gần như chạy theo.</p><p id="101">Bàn tay siết chặt, bà dẫn cậu đi thật xa khỏi quán rượu, rẽ qua nhiều góc ngoặt, tiến vào những con hẻm tối nồng mùi rác thải.</p><p id="102">Bầu không khí căng thẳng khiến Dereck không dám mở lời. Katia chưa bao giờ tỏ ra nghiêm túc đến vậy.</p><p id="103">Cuối cùng, họ dừng lại. Katia quỳ một chân xuống, nhìn thẳng vào mắt Dereck.</p><p id="104">“Dereck.”</p><p id="105">Biểu cảm của bà phức tạp. Dereck không hiểu vì sao bà nghiêm trọng đến vậy, chỉ cảm thấy một sự bất an dâng lên.</p><p id="106">Katia nhắm mắt trong chốc lát, sắp xếp suy nghĩ.</p><p id="107">Thời còn trẻ, bà là một tiểu thư quý tộc, và thậm chí còn trở thành nữ chủ nhân của gia tộc Flameheart. Giờ đây, bà chỉ là một lính đánh thuê lang bạt. Dù chỉ là quý tộc nhỏ, bà hiểu rất rõ quy tắc của thượng lưu. Và chính điều đó khiến gương mặt bà trầm xuống.</p><p id="108">“Hãy nghe kỹ, Dereck. Phép thuật mà cậu vừa dùng là một ảo thuật có tên là ‘Echo’. Nó tạo ra âm thanh trong phạm vi nhất định để gây nhiễu loạn và đánh lạc hướng kẻ địch.”</p><p id="109">“Con cũng đã hình dung đại khái tác dụng của nó.”</p><p id="110">“Ừ. Và nó… là một ma pháp ảo thuật cấp hai.”</p><p id="111">Pháp sư có nguồn gốc từ thường dân có tài luôn được quý tộc nể trọng vì nỗ lực và ý chí. Nhưng quý tộc cũng có giới hạn với lòng vị tha của mình.</p><p id="112">Đây là thời đại của quý tộc. Ma pháp là đặc quyền và niềm kiêu hãnh của họ. Vậy nên, có những ranh giới không nên bị vượt qua.</p><p id="113">“…”</p><p id="114">Thiên phú bẩ</p><p id="115">m sinh có thể là phước lành, nhưng tài năng quá xuất chúng, vượt quá thân phận của mình, lại có thể trở thành một tai họa.</p><p id="116">Katia nói một cách hoàn toàn nghiêm túc, vượt xa khỏi giới hạn mà thiên chức làm mẹ đã vạch ra cho bà.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297857-chuong-01-dereck-1" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297859-chuong-03-dereck-3" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'j1vdOk17gQ41y61EUIAm7jq5DbyWH4fRE018P0zO';
        var comment_type = 'chapter';
        var comment_typeid = '297858';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'j1vdOk17gQ41y61EUIAm7jq5DbyWH4fRE018P0zO';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24812');
    chapter_id = parseInt('297858');

    readingObject = {
        series_id: series_id,
        series_title: 'Tiểu thư quý tộc cải tạo ký - Nobel Lady Reformation Guide',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="j1vdOk17gQ41y61EUIAm7jq5DbyWH4fRE018P0zO" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c4598f2ec346717',t:'MTc2OTQ4OTA5Mw=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
