<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Tiểu thư quý tộc cải tạo ký - Nobel Lady Reformation Guide - Chương 05 : Duplain (2) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Để miêu tả những tiểu thư quý tộc trẻ tuổi, họ hoặc là cực kỳ thô lỗ, hoặc là chẳng có chút nếp nhăn nào trong đầu, nhưng mà ngay cả khi đã nghe những lời đồn đại như vậy, vẫn có một chàng trai trẻ sẵn sàng đi chứng...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="h2OwMdeghZkjE8Gxy7c8f9uxDOsDaP0HrV5wXtkS">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297900-chuong-05-duplain-2">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24812-c103f459-f5b6-4c89-b85e-4951915fff04.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297890-chuong-04-duplain-1"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297901-chuong-06-duplain-3"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297900-chuong-05-duplain-2" style="background: url('https://i.hako.vn/ln/series/covers/s24812-c103f459-f5b6-4c89-b85e-4951915fff04.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide">Tiểu thư quý tộc cải tạo...</a></h5>
                    <small><i class="fas fa-pen"></i>Corita (코리타)</small>
                    <small><i class="fas fa-paint-brush"></i>Shin Hee-bin (신희빈) / Team Pink Shark</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/t36070-tap-01">Tập 01</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297857-chuong-01-dereck-1">
                                                                        Chương 01 : Dereck (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297858-chuong-02-dereck-2">
                                                                        Chương 02 : Dereck (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297859-chuong-03-dereck-3">
                                                                        Chương 03 : Dereck (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297890-chuong-04-duplain-1">
                                                                        Chương 04 : Duplain (1)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297900-chuong-05-duplain-2">
                                                                        Chương 05 : Duplain (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297901-chuong-06-duplain-3">
                                                                        Chương 06 : Duplain (3)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 01</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 05 : Duplain (2)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297900-chuong-05-duplain-2#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,366 từ - Cập nhật: 
                        <time class="topic-time timeago" title="27-01-2026 14:21:27" datetime="2026-01-27T14:21:27+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 05 : Duplain (2)</p>
                    <p id="1">Những người lần đầu nhìn thấy Dereck trong thế giới lính đánh thuê đều mang trên mặt vẻ bối rối.</p><p id="2">Quá trẻ, đúng vậy. Nhưng trái ngược với vẻ ngoài non nớt ấy, cậu lại được trang bị đầy đủ và trông… quá tử tế.</p><p id="3">Trẻ tuổi hoặc tử tế.</p><p id="4">Ở thế giới này, chỉ cần sở hữu một trong hai đặc điểm đó thôi cũng đủ để bị đâm sau lưng rồi bỏ mặc cho chết. Thế mà trên gương mặt Dereck lại hiện rõ cả hai thứ đó.</p><p id="5">Làm sao một chàng thiếu niên vừa trẻ vừa có vẻ ngoài tử tế như thế lại có thể sống sót trong giới lính đánh thuê, đó là điều mà không ai hiểu được.</p><p id="6">Nhưng có một sự thật không thể chối cãi: Dereck đã sống như một lính đánh thuê từ thuở nhỏ, vậy mà trong ánh mắt cậu không hề có chút mệt mỏi hay chai sạn nào. Ý nghĩa của điều đó chỉ có thể được hiểu khi cùng Dereck bước vào chiến trường.</p><p id="7">— Bịch! Rầm!</p><p id="8">— Kiekk!</p><p id="9">Một con goblin trúng mũi tên ma thuật cấp một phun ra dòng máu đen rồi gục xuống giữa khu rừng.</p><p id="10">Trên con đường mòn hẹp xuyên qua rừng hướng về Ebelstain, tại rìa lãnh địa của Công tước Duplain.</p><p id="11">Tay phải cầm trường kiếm, Dereck vung một nhát kiếm chém toạc mõm của sinh vật xấu xí đang lao đến, máu bắn tung tóe lên mặt cậu.</p><p id="12">Ngay lúc đó, một con goblin cụt tay, toàn thân đẫm máu lao thẳng về phía cậu. Dereck lùi một bước để né tránh lưỡi rìu, chộp lấy mặt nó rồi dồn toàn bộ sức lực ấn nó xuống đất.</p><p id="13">— Fzzzzzt!</p><p id="14">— Kiekk!</p><p id="15">Trong tiếng thét kinh hoàng của con quái vật, Dereck nhanh chóng rút con dao găm từ bao đeo bên đùi và đâm thẳng vào cổ nó.</p><p id="16">Máu đỏ bắn tung, che kín tầm mắt, mùi kim loại tanh nồng lan khắp không khí, thế nhưng trên gương mặt Dereck không hề thoáng qua một tia cảm xúc nào.</p><p id="17">Không phải vì cậu lạnh lùng như một cỗ máy. Ngược lại, cậu vẫn giữ nguyên vẻ tử tế, chân thành như khi ở trong quán rượu. Chỉ có lớp máu phủ đầy người càng làm tăng thêm sự tương phản kỳ lạ. </p><p id="18">Chàng thiếu niên này không hề do dự khi tước đi mạng sống. Với cậu, đó là việc tự nhiên như ăn uống hay ngủ nghỉ.</p><p id="19">“Có ai bị thương không?”</p><p id="20">Sau khi lau sạch kiếm, Dereck nhẹ nhàng hỏi, dù toàn thân vẫn bê bết máu goblin. Xung quanh là những chi thể bị chặt rời vương vãi khắp nơi. Melvin, người đang bảo vệ cỗ xe, vô thức nuốt khan.</p><p id="21">Một lính đánh thuê dày dặn có thể chém giết quái vật không chớp mắt, chuyện đó chẳng có gì lạ.</p><p id="22">Nhưng một thiếu niên ở độ tuổi này, toàn thân nhuốm máu, lại bình thản hỏi như vậy với vẻ mặt mệt mỏi, thực sự khiến người ta rợn người. Trong một thời đại mà ma thuật là đặc quyền của giới quý tộc, người thiếu niên này là một trong số ít những pháp sư lớn lên từ đường phố.</p><p id="23">Đó là ý nghĩ mà bất kỳ ai cũng có thể cảm nhận được ngay — người phía trước mặt mình không phải một mầm cây xanh tươi được che chở và lớn lên trong nhà kính.</p><p id="24">*****</p><p id="25">“Đi cùng Dereck đúng là khiến mọi chuyện nhẹ nhàng hơn hẳn. Phát hiện kẻ địch bằng ma pháp dò tìm, rồi tiêu diệt từ xa — chẳng có chút khó khắn nào.”</p><p id="26">“Cảm ơn lời khen, nhưng anh cũng biết mà, chính anh mới là người đã xử lý đến tám mươi phần trăm số quái vật đó.”</p><p id="27">“Chậc… Cậu đúng là không biết đùa. Cậu nên học cách tận hưởng việc được khen đi.”</p><p id="28">Jayden tặc lưỡi, vỗ nhẹ lên vai Dereck.</p><p id="29">“……”</p><p id="30">Melvin, người đã có thái độ thô lỗ trong quán rượu, dường như trở nên trầm lặng hơn trên đường quay về. Đúng như Jayden dự đoán, nhiệm vụ mà bộ ba bí ẩn đến từ công quốc giao phó hóa ra lại cực kỳ đơn giản.</p><p id="31">Đến lúc hoàng hôn buông xuống, không còn thấy bóng dáng quái vật nào nữa, và họ có thể lên xe ngựa quay về Ebelstain.</p><p id="32">“Phải thừa nhận rằng khả năng của các ngươi rất đáng khen.”</p><p id="33">Melvin vẫn giữ vẻ mặt nghiêm nghị, nhưng cuối cùng cũng đưa ra một lời đánh giá cao. Jayden mỉm cười thỏa mãn, ngồi tựa vào xe ngựa và lau sạch máu trên thanh kiếm của mình.</p><p id="34">“Ngài quá lời rồi. Giờ mối lo của ngài đã được giải quyết, xin hãy thanh toán phần còn lại.”</p><p id="35">“Hiểu rồi.”</p><p id="36">Tiền đặt cọc là một đồng vàng, và khoản thanh toán cuối cùng là thêm hai đồng nữa.</p><p id="37">So với đại đa số những nhiệm vụ tiêu diệt chỉ trả vài đồng bạc, thì đây là một khoản thù lao đủ khiến người ta phải mỉm cười.</p><p id="38">Jayden cười toe toét, ném đồng vàng vào túi da của mình.</p><p id="39">“Làm tốt lắm, Dereck. Khi quay lại quán rượu, tôi sẽ chia phần của cậu cho cậu.”</p><p id="40">Dereck ngả người trên ghế, thờ ơ gật đầu rồi nhìn ra ngoài, nơi ánh hoàng hôn đang nhuộm đỏ bầu trời. Dù không quá mệt, nhưng sự tiêu hao do sử dụng ma pháp vẫn còn đọng lại trong cơ thể.</p><p id="41">Cậu khoanh tay, tựa lưng vào vách xe, cố gắng nghỉ ngơi.</p><p id="42">“Cậu có vẻ sử dụng khá đa dạng các loại ma pháp bậc một.”</p><p id="43">Lúc này, vị thanh tra vẫn trùm áo choàng lên tiếng với Dereck. Đây là lần đầu tiên cô chủ động bắt chuyện trong cả ngày. Giọng cô trong trẻo, mang theo nét trẻ trung, nhưng Dereck chỉ trả lời hờ hững, vẫn giữ tư thế ngả lưng.</p><p id="44">“Tôi học mỗi thứ một chút. Làm lính đánh thuê thì đa năng sẽ dễ sống sót hơn.”</p><p id="45">“Cậu nói mình mười sáu tuổi à? Không lớn hơn tôi là mấy. Thật ấn tượng đấy.”</p><p id="46">Dereck liếc sang một bên và nhận ra Melvin, ông lão, cùng cô hầu gái Delia đều vô thức nuốt khan.</p><p id="47">Họ có vẻ dè chừng vị thanh tra tập sự. Thái độ lúng túng ấy cho thấy họ không thoải mái với cách Dereck trò chuyện quá tự nhiên. Bản thân Dereck cũng thầm kinh ngạc. Hoá ra cô gái này lại cùng tuổi với cậu.</p><p id="48">Thành thật mà nói, với phong thái trưởng thành đến vậy, Dereck đã nghĩ cô ít nhất cũng đã đến tuổi trưởng thành.</p><p id="49">“Cậu học ma pháp bằng cách nào?”</p><p id="50">“Nhặt nhạnh vài quyển sách trên đường phố, tiến bộ trong lúc cố gắng sinh tồn.”</p><p id="51">“Cậu còn chưa làm lễ trưởng thành đúng không? Thế mà đã có thể sử dụng nhiều ma pháp bậc một như vậy. Thật đáng kinh ngạc.”</p><p id="52">Cách mà viên thanh tra đặt câu hỏi có phần kỳ lạ. Dereck cảm thấy không thoải mái, nhưng vẫn giả vờ thờ ơ.</p><p id="53">‘Chưa làm lễ trưởng thành sao…?’</p><p id="54">Dân thường hiếm khi tổ chức những nghi thức cầu kỳ như thế.</p><p id="55">“Tôi có thể sử dụng khoảng ba hoặc bốn ma pháp bậc một.”</p><p id="56">“Ba là ba, năm là năm… nói ‘khoảng ba hoặc bốn’ nghe hơi kỳ đấy.”</p><p id="57">Trong khi vẫn ngả lưng, Dereck nhìn thấy vị thanh tra mỉm cười nhàn nhạt dưới chiếc mũ trùm.</p><p id="58">“Cậu biết nhiều hơn thế, đúng không?”</p><p id="59">“……”</p><p id="60">“Không cần phải giấu. Tôi thực sự chỉ cảm thấy tò mò thôi. Ở độ tuổi này mà đạt tới mức đó thật sự là một thành tựu rất hiếm có.”</p><p id="61">Sư phụ của Dereck, Katia, từng nói rằng tài năng vượt trội dễ thu hút sự thù địch từ giới quý tộc.</p><p id="62">Mà vị thanh tra này rõ ràng có liên hệ với một trong những gia tộc ma pháp hàng đầu, gia đình Công không nên phô bày toàn bộ năng lực của mình.</p><p id="63">“Sở dĩ tôi nói mơ hồ là vì tôi không đi theo con đường học tập ma pháp chính quy — Trường phái Chính quy.”</p><p id="64">“Ồ?”</p><p id="65">“Tôi xuất thân từ Trường phái Hoang Dã. Trong khi Trường phái Chính Quy phân loại ma pháp và tiêu chuẩn rất chặt chẽ, thì Hoang Dã lại là một hệ phái khá tách biệt.”</p><p id="66">Dereck ngồi thẳng dậy, bắt đầu nói chuyện một cách nghiêm túc.</p><p id="67">Khi nhắc đến các hệ phái ma pháp, đôi mắt của cô gái trùm mũ ánh lên vẻ say mê.</p><p id="68">“Trường phái Hoang Dã sao?”</p><p id="69">“Đã rất lâu kể từ khi Trường phái Chính Quy của giới quý tộc trở thành chủ lưu, nhưng việc nghiên cứu các hệ phái phi chính thống vẫn tiếp tục.”</p><p id="70">Sư phụ ma pháp của Dereck, Katia, vốn cũng là pháp sư của Trường phái Chính Quy, nhưng bản thân Dereck lại thoát khỏi khuôn khổ đó.</p><p id="71">Khi phải chọn hệ phái sau khi học ma pháp từ ông lão, Dereck đã chọn Hoang Dã.</p><p id="72">“Trường phái Hoang Dã chú trọng vào việc sử dụng ma lực và ma pháp để sinh tồn ngay lập tức, không bị trói buộc bởi quy tắc hay tiêu chuẩn. Ma pháp của họ được dùng trên những con đường phiêu lưu đầy bất định, vậy nên họ là chuyên gia ứng biến ma lực theo tình huống.”</p><p id="73">“Tôi từng nghe nói về những pháp sư nhìn ma pháp theo hướng đó, nhưng đây là lần đầu tiên gặp một người như vậy.”</p><p id="74">“Đừng nói bất, tôi cũng đâu có dùng ma pháp cấp cao… Chỉ là nói về lý thuyết thôi. Như tôi đã nói, tôi chỉ là một pháp sư cấp một xuất thân từ thường dân.”</p><p id="75">Dereck cố tình hạ thấp bản thân, nhưng vị thanh tra vẫn tràn đầy tò mò.</p><p id="76">Cô dường như thực sự yêu thích ma pháp. Bản năng đó khiến cậu thấy bất ngờ.</p><p id="77">“Tất nhiên, ma pháp của Trường phái Chính Quy của quý tộc là hệ phái được nghiên cứu và phát triển hoàn thiện nhất. Việc các hệ phái khác vẫn bị coi là dị biệt cũng có lý do của nó.”</p><p id="78">“Nhưng chắc hẳn phải có lý do gì đó khiến cậu, Dereck, chọn con đường Hoang Dã, đúng không? Tôi có thể hỏi được chứ?”</p><p id="79">Vì sao cô lại hứng thú đến vậy? Không khí giống như một buổi thẩm vấn khiến Dereck thấy khó xử, nhưng vì đối phương đã trả một khoản tiền lớn, cậu cũng khó mà tỏ ra lạnh nhạt.</p><p id="80">Xét việc nhiệm vụ quá dễ so với thù lao nhận được, cậu quyết định sẽ coi như đây là một phần dịch vụ vậy.</p><p id="81">Nghĩ thế, Dereck bắt đầu ngưng tụ ma lực trong tay.</p><p id="82">“Vì cô có vẻ hiểu biết về ma pháp, tôi sẽ trả lời một cách đơn giản — bởi vì ma pháp rất hữu ích cho việc sinh tồn.”</p><p id="83">Khi mana tụ lại trong lòng bàn tay, một ngọn lửa nhỏ bùng lên.</p><p id="84">Ngọn lửa được hiện thực hóa bằng ma lực cháy lơ lửng trong không khí mà không cần nhiên liệu. Với người không hiểu ma pháp, đó là một cảnh tượng phi thường, nhưng với người có kiến thức căn bản, đây chỉ là cách sử dụng mana ở mức rất thấp.</p><p id="85">Melvin và cô hầu Delia đều không tỏ ra ngạc nhiên. Nếu làm việc trong phủ Công tước Duplain, hẳn họ đã thấy những thiên tài như vậy vô số lần.</p><p id="86">Nhưng cô gái được gọi là thanh tra thì lại mở to mắt nhìn ngọn lửa của Dereck.</p><p id="87">“Ồ?”</p><p id="88">Dù có lẽ đã chứng kiến loại ma pháp này không biết bao nhiêu lần trong gia tộc quý tộc của mình, cô vẫn nhìn ngọn lửa của Dereck như thể đó là điều gì đó lạ lẫm.</p><p id="89">“…Quy trình giải phóng ma lực có vẻ rất đơn giản, phải không?”</p><p id="90">‘Cô gái này… nhìn thấy được dòng chảy ma lực sao?’</p><p id="91">Dereck thầm kinh ngạc trước nhận xét ấy. Cô có thể cảm nhận được dòng chảy ma lực — nói cách khác, bản thân cô ít nhất cũng là một pháp sư một sao.</p><p id="92">“Đúng vậy. Trong Trường phái Chính Quy, quá trình sử dụng ma lực được chia thành bốn giai đoạn — nhận thức, trích xuất, thao tác và hiện thực hóa. Nhưng Trường phái Hoang Dã thì không phân chia rạch ròi như vậy. Tất cả được hợp nhất và phần lớn dựa vào cảm giác.”</p><p id="93">“…Cậu lúc nào cũng dùng ma pháp theo cách này sao?”</p><p id="94">“Đúng vậy. Nó có ưu điểm, nhưng dĩ nhiên cũng có nhược điểm. Nếu giải thích chi tiết thì sẽ rất dài…”</p><p id="95">Dereck không muốn nói thêm ở đây. Dù sao thì đây cũng chỉ là một cuộc gặp gỡ thoáng qua. Cậu cố giữ cho câu chuyện ngắn gọn, mong sớm được nghỉ ngơi.</p><p id="96">“Nói ngắn gọn thì, cứ hiểu rằng lĩnh vực ma pháp của tôi có chút khác biệt.” cậu nói.</p><p id="97">Sự khác nhau về tư duy giữa các học phái không thể dễ dàng được phân định rạch ròi chỉ bằng một nhát dao.</p><p id="98">Kết lại một cách đại khái như vậy, Dereck lại tựa lưng vào vách xe ngựa.</p><p id="99">Trong mắt giới quý tộc, cậu chỉ là một pháp sư cấp một. Với những người sống giữa các pháp sư cấp bốn hay cấp năm, một thiên tài cấp một từ hệ phái dị biệt sẽ chẳng đáng để tâm.</p><p id="100">Nghĩ vậy, Dereck nhắm chặt mắt, cố xua đi cảm giác mệt mỏi đang bám lấy mình, nhưng cậu không để ý rằng…</p><p id="101">Trong đôi mắt của cô gái đang nhìn cậu, có một ánh sáng kỳ lạ đang lấp lánh.</p><p id="102">*****</p><p id="103">Cậu nghĩ rằng mình sẽ không bao giờ gặp lại bộ ba tùy tùng kỳ lạ ấy nữa, nhưng chỉ một tuần sau, họ lại xuất hiện ở quán rượu.</p><p id="104">Yêu cầu lần này cũng tương tự. Quái vật lại xuất hiện ở vùng biên giới lãnh địa của Công tước.</p><p id="105">Họ là những người rất hào phóng. Đương nhiên, Jayden đáp lại bằng một nụ cười tươi rói. Tuy nhiên, vì điều kiện vẫn là phải có pháp sư đi cùng, Dereck không còn lựa chọn nào khác ngoài việc theo họ.</p><p id="106">Thế là họ đi săn quái vật, chia tay, rồi tuần sau lại quay lại với một yêu cầu khác… Cứ thế lặp đi lặp lại.</p><p id="107">Mỗi lần như vậy, họ lại đi đến một nơi mới trong lãnh địa của Công tước, và trên đường quay lại xe ngựa, họ thường trò chuyện đôi câu xã giao về tình hình thế giới hiện tại hay về ma pháp — chỉ là những câu chuyện vu vơ để tránh sự im lặng gượng gạo.</p><p id="108">Tuy nhiên, trong việc tiêu diệt quái vật, họ luôn cực kỳ nghiêm túc.</p><p id="109">Goblin, troll, kobold… là những kẻ thù nguy hiểm với người thiếu kinh nghiệm, nhưng với các lính đánh thuê dày dạn thì chỉ cần cẩn thận là đủ để xử lý.</p><p id="110">Sau nhiều chuyến đi qua lãnh địa của Công tước để dọn dẹp quái vật vùng biên, họ đã kiếm được một khoản tiền khổng lồ.</p><p id="111">Jayden ngày nào cũng vui vẻ huýt sáo, còn Dereck cũng tỏ ra hài lòng sau khi nhận phần của mình. Tiền bạc luôn là thứ có tiếng nói nhất.</p><p id="112">Họ được ăn thịt ngon, trang bị được bảo dưỡng cẩn thận, và sống khá dư dả.</p><p id="113">“Sau khi tận mắt chứng kiến năng lực săn quái của các anh, tôi có thể tin tưởng vào kinh nghiệm của các anh. Lần này, lãnh địa của Công tước sẽ trả mười lăm đồng vàng Aydel.”</p><p id="114">“Mười lăm đồng vàng? Tôi nghe không nhầm chứ?”</p><p id="115">Tiền Aydel, loại tiền được dùng phổ biến nhất ở Ebelstain, chỉ cần một đồng vàng cũng đủ mua căn phòng chất đầy bởi những chiếc bánh mì nóng hổi mới ra lò.</p><p id="116">Mười lăm đồng, không ngoa khi nói, thậm chí có thể dời toàn bộ quán rượu của Jayden đến một toà nhà hoàn toàn mới.</p><p id="117">“Hahaha, cảm tạ sự hào phóng của Công tước Duplain! Lần này lũ quái vật trở nên mạnh hơn à? Đừng lo! Đội lính đánh thuê Veldern trong hai tháng qua đã chứng minh chúng tôi làm việc gọn gàng thế nào rồi! Chỉ cần cho đủ thời gian chuẩn bị, chúng tôi thậm chí còn có thể mang về cho ngài cả đầu quỷ vương ở địa ngục! Hahaha!”</p><p id="118">Gương mặt Jayden rạng rỡ vì vui sướng. Hiếm khi thấy ông già đó phấn khích đến vậy, nhưng nghĩ tới số tiền sắp chảy vào túi, ngay cả Dereck cũng không khỏi nuốt khan.</p><p id="119">Cậu từng nghe nhiều câu chuyện về sự xa hoa của giới quý tộc, nhưng chưa bao giờ tưởng tượng nó lại vượt mức như thế này.</p><p id="120">“Yêu cầu lần này có hơi khác những lần trước. Nhưng như thường lệ, các anh vẫn cần đi cùng chúng tôi bằng xe ngựa.”</p><p id="121">“Đúng vậy, xe đã chuẩn bị xong rồi. Chúng ta đâu còn là người xa lạ nữa, phải không? Hahaha.”</p><p id="122">“Vậy thì, cho phép tôi chính thức giới thiệu bản thân.”</p><p id="123">“Haha! Chúng ta đã thân thiết thế này rồi, có cần phải trang trọng đến vậy không? Cứ thoải mái đi!”</p><p id="124">“Tôi là Delron, quản gia trưởng của gia tộc Duplain.”</p><p id="125">Nụ cười thân thiện và ấm áp của Jayden lập tức đông cứng lại. Melvin hóa ra chỉ là một cái tên giả.</p><p id="126">Dereck không phản ứng quá lớn. Cậu vốn đã nghi ngờ họ đang ngụy trang bằng một thân phận thấp hơn thật. Nhưng việc họ chủ động lộ thân phận vào lúc này có ý nghĩa gì?</p><p id="127">Chưa kịp sắp xếp suy nghĩ, người hầu gái đứng cạnh vị quản gia cũng cúi đầu.</p><p id="128">“Tôi là Katarina, người quản lý điền trang của công quốc.”</p><p id="129">Không phải gia nhân bình thường, mà là quản gia. Không phải hầu bếp hay tạp dịch, mà là quản lý điền trang.</p><p id="130">Quản gia trưởng là chức vụ cao thứ ba trong hàng ngũ người hầu của một đại gia tộc, còn quản lý điền trang đứng ngay sau đó.</p><p id="131">Họ là những người đứng đầu toàn bộ nhân sự, những người bình thường tuyệt đối không rời khỏi phủ. Chỉ cần vài tháng thu nhập của họ cũng đủ bằng cả mấy chục năm lao động của dân thường.</p><p id="132">Và cô gái từng giả làm thanh tra khẽ hạ mũ trùm, nở một nụ cười tao nhã rồi lên tiếng.</p><p id="133">“Aiselin Eleanore Duplain.”</p><p id="134">Đôi mắt cô dịu dàng nhưng kiên định, trong trẻo và thuần khiết. Ánh nhìn ấy hướng thẳng về phía Dereck.</p><p id="135">Cô gái nhìn cậu trực diện, toát lên một khí chất cao quý không thể diễn tả — vẫn y như mọi khi.</p><p id="136">“……”</p><p id="137">“Ôi chao.”</p><p id="138">Cô gái, thấy Dereck im lặng, khẽ nói thêm,</p><p id="139">“…Cậu không hề ngạc nhiên chút nào sao?”</p><p id="140">Lẽ ra cậu phải ngạc nhiên.</p><p id="141">Nhưng thực ra, Dereck đã sớm nghi ngờ thân phận thật sự của cô.</p><p id="142">Cậu biết, nhưng giả vờ như không biết về địa vị vượt xa thường nhân ấy. Với Dereck, điều duy nhất cậu nghĩ đến chỉ là hoàn thành nhiệm vụ và nhận lấy những đồng vàng lấp lánh.</p><p id="143">Vậy thì vì sao bây giờ họ lại chủ động lộ thân phận?</p><p id="144">Lý do rất rõ ràng.</p><p id="145">“Nếu cậu không phiền, cậu có thể theo chúng tôi đến gia tộc Duplain được không?”</p><p id="146">Gia tộc Duplain là một trong ba đại gia tộc danh giá nhất toàn bộ đế quốc. Vậy nên dù cho cô gái trước mặt nói với sự lễ độ và nhã nhặn tuyệt đối, nhưng Dereck vẫn hiểu rất rõ — cậu không có quyền từ chối.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297890-chuong-04-duplain-1" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24812-tieu-thu-quy-toc-cai-tao-ky-nobel-lady-reformation-guide/c297901-chuong-06-duplain-3" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'h2OwMdeghZkjE8Gxy7c8f9uxDOsDaP0HrV5wXtkS';
        var comment_type = 'chapter';
        var comment_typeid = '297900';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'h2OwMdeghZkjE8Gxy7c8f9uxDOsDaP0HrV5wXtkS';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24812');
    chapter_id = parseInt('297900');

    readingObject = {
        series_id: series_id,
        series_title: 'Tiểu thư quý tộc cải tạo ký - Nobel Lady Reformation Guide',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="h2OwMdeghZkjE8Gxy7c8f9uxDOsDaP0HrV5wXtkS" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c46d83d1867ffc4',t:'MTc2OTUwMjE3MQ=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
