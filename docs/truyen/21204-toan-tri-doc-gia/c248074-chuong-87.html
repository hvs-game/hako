<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Toàn Tri Độc Giả - Chương 87 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="“Tôi là người duy nhất biết được kết cục của thế giới này.” Một ngày nọ, thế giới của Kim Dokja sụp đổ. Không phải theo nghĩa bóng, mà theo đúng những gì đã xảy ra trong cuốn tiểu thuyết mà anh là độc giả duy nhất theo dõi đến...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="hHSAePOWUCXdLZpevj7nfYp48ZakwkY4uR1oScoJ">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/21204-toan-tri-doc-gia/c248074-chuong-87">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s21204-d72dfcb4-37f1-4dce-b357-082b563618f4.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/21204-toan-tri-doc-gia/c246942-chuong-86"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/21204-toan-tri-doc-gia"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/21204-toan-tri-doc-gia/c248997-chuong-88"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/21204-toan-tri-doc-gia/c248074-chuong-87" style="background: url('https://i.hako.vn/ln/series/covers/s21204-d72dfcb4-37f1-4dce-b357-082b563618f4.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/21204-toan-tri-doc-gia">Toàn Tri Độc Giả</a></h5>
                    <small><i class="fas fa-pen"></i>Sing Shong</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163126-mo-dau-ba-cach-song-sot-trong-the-gioi-do-nat">Mở đầu</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163127-chuong-01">Hồi 1 – Bắt đầu dịch vụ tính phí</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163136-chuong-07">Hồi 2 – Nhân vật chính</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163164-chuong-11">Hồi 3 – Hợp đồng</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163170-chuong-15">Hồi 4 – Đạo đức giả cũng là đạo đức</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163486-chuong-19">Hồi 5 – Cảnh Vệ Bóng Đêm</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c166297-chuong-23">Hồi 6 – Giờ Phán Quyết</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c167129-chuong-27">Hồi 7 – Địa chủ</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c168524-chuong-32">Hồi 8 – Phòng thủ khẩn cấp</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c170483-chuong-36">Hồi 9 - Mola toàn tri</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c175135-chuong-42">Hồi 10 - Trận chiến tương lai</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c184714-chuong-49">Hồi 11 - Đêm hội Giáo Đồ</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c193080-chuong-54">Hồi 12 - Góc nhìn thứ nhất của nhân vật chính</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c202672-chuong-59">Hồi 13 - Đại chiến vương vị</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c211824-chuong-64">Hồi 14 - Chủ nhân ngai vàng</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c219703-chuong-70">Hồi 15 - Thế giới không vua</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c229563-chuong-76">Hồi 16 - Kịch bản thứ năm</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c238574-chuong-81">Hồi 17 - Tài năng cấp SSS</a></li>
                                        
                                                            <li class="current"><a href="/truyen/21204-toan-tri-doc-gia/t34023-hoi-18-cuoc-chien-cua-doc-gia">Hồi 18 - Cuộc chiến của độc giả</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li  class="current" >
                                <a href="/truyen/21204-toan-tri-doc-gia/c248074-chuong-87">
                                                                        Chương 87
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c248997-chuong-88">
                                                                        Chương 88
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c250492-chuong-89">
                                                                        Chương 89
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c251846-chuong-90">
                                                                        Chương 90
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c253470-chuong-91">
                                                                        Chương 91
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c254505-chuong-92">Hồi 19 - Dị điểm</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c263455-chuong-97">Hồi 20 - Tai ương Hồng Thủy</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c274603-chuong-102">Hồi 21 - Những thứ không thể thay đổi</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Hồi 18 - Cuộc chiến của độc giả</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 87</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/21204-toan-tri-doc-gia/c248074-chuong-87#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,184 từ - Cập nhật: 
                        <time class="topic-time timeago" title="20-10-2025 22:27:14" datetime="2025-10-20T22:27:14+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 87</p>
                    <p id="1">Giọng của con Dokkaebi vang lên.</p><p id="2">Một đám Dokkaebi cấp thấp đang nhìn xuống như thể đang hóng xem cháy nhà. Bihyung cũng có mặt, huýt sáo khi bắt gặp ánh mắt tôi.</p><p id="3">Con Dokkaebi ở giữa từ từ mở miệng và nói với toàn bộ Seoul.</p><p id="4">[Các hóa thân của Seoul! Có tin xấu đây. Rất tiếc, vì vài kẻ nào đó, một tai ương đã thức tỉnh ở quận Gangdong.]</p><p id="5">Ánh mắt cười cợt của nó chạm mắt tôi. Thằng khốn này?</p><p id="6">[À, ta nghe rõ mấy tiếng thở dài rồi đấy. Có kẻ đã bỏ chạy khỏi Gangdong luôn rồi kìa. Haha, nhưng nghe hết đi đã. Bỏ trốn bây giờ thì sớm muộn cũng hối hận thôi. Vì tai ương này thực ra là một cơ hội dành cho các ngươi.]</p><p id="7">Giọng con Dokkaebi vang rền.</p><p id="8">[Chẳng phải các ngươi đã rất vất vả để thu thập xu sao? Ta biết hết cả. Cuộc sống của các ngươi sụp đổ chỉ sau một đêm và bây giờ những sinh vật kỳ dị lại cướp xu của các ngươi. Người hôm qua còn là bạn, hôm nay đã đâm lén sau lưng. Thật may là ta chẳng phải các ngươi. Ngay bây giờ, các vì sao trên trời có lẽ đang nói với các ngươi, “Ê, lắc cái mông giỏi hơn chút, ta sẽ thưởng cho 100 xu.”]</p><p id="9">[Một số chòm sao đang khúc khích cười.]</p><p id="10">Con Dokkaebi không cười.</p><p id="11">[Ta hiểu sự tuyệt vọng và căm ghét mà các ngươi đang mang. Thế giới đã bị hủy diệt, các ngươi chỉ muốn sống theo ý mình. Các ngươi rất can đảm nhưng lại cảm thấy bất lực khi nhận ra rằng thế giới này bị chia làm hai. Các ngươi thất vọng khi chòm sao vừa khó khăn lắm mới nhận được hóa ra lại kém xa chòm sao của kẻ thành công. Các ngươi phẫn nộ vì thế giới bất công. Tất cả, ta hiểu rất rõ.]</p><p id="12">[Một số chòm sao phản đối bài phát biểu của dokkaebi.]</p><p id="13">Quả nhiên, tên này không phải Dokkaebi hạng xoàng. Loại cấp thấp thường không dám bật mấy câu thế này. Nếu bị các chòm sao phản ánh là kênh bay màu ngay.</p><p id="14">Nhưng với kênh lớn thì khác. Kênh càng lớn, Dokkaebi càng rành luật chơi.</p><p id="15">Chúng hiểu rõ quy luật của câu chuyện. Nếu chỉ bị ám ảnh bởi số lượt đăng ký thì chúng chẳng thể kể được câu chuyện nào vĩ đại. Một người dẫn chuyện thực sự phải đối mặt với 'nhân vật' chứ không phải 'khán giả'.</p><p id="16">Tôi quan sát kỹ con Dokkaebi vẫn đang nói.</p><p id="17">[Ta đã chuẩn bị cho các ngươi một thứ. Dù xui xẻo, may mắn hay chăm chỉ, thì ai cũng có thể thành ‘nhân vật chính’ chỉ sau một đêm.]</p><p id="18">Cái sừng nhọn trên vương miện. Cái chân lộ ra dưới lớp mũ trắng trông chẳng khác nào một con quạ cụt một chân.</p><p id="19">Đợi một chút, chẳng lẽ tên khốn này là…Dokgak?</p><p id="20">Vào lúc này, một màn hình khổng lồ hiện lên trên không trung. Một thằng nhóc cả người đầy máu đang chạy trốn xuất hiện trên màn hình.</p><p id="21">[Nhìn cho kỹ nhé, các hóa thân của Seoul! Đứa trẻ mà các ngươi đang thấy trên màn hình chính là một vật phẩm cấp SSS đang lông nhông ngoài kia! Tên của hắn là Myung Ilsang. Cậu ta đã may mắn được Stream Tinh lựa chọn đưa đến một thế giới khác. Các ngươi có tưởng tượng nổi không? Đột ngột được triệu hồi tới dị giới, nhận được sức mạnh phi thường, cùng một nàng tiên tộc dễ thương trải qua một đêm nồng cháy, cứu rỗi thế giới và được tôn vinh như anh hùng! Đúng vậy, tên này chính là ‘tai ương’ mà các ngươi phải săn hôm nay.]</p><p id="22">Có gì đó không đúng.</p><p id="23">Ban đầu tôi còn không hiểu tại sao một con Dokkaebi cấp thấp lại thế chỗ của cấp trung. Thì ra là do quy mô kênh của nó lớn.</p><p id="24">[Ta biết các ngươi đang rủa thầm trong bụng rồi. Cấp SSS thì ai mà giết nổi? Haha, không cần phải lo lắng. Tên này hiện đang nhận hình phạt. Sức mạnh của hắn đã bị phong ấn. Hắn tuy mạnh, nhưng nếu đồng loạt tấn công thì chẳng khác nào một rương báu di động.]</p><p id="25">"...Tên này ghê thật." </p><p id="26">Han Sooyoung tặc lưỡi. Với đầu óc nhà văn, cô ta đã đoán ngay được ý đồ của con Dokkaebi.</p><p id="27">Nếu gọi ‘tai ương’ thì chẳng ai muốn bén mảng. Nhưng nếu gọi là ‘rương báu’ thì sao?</p><p id="28">[Cuộc đời các ngươi chưa thật sự sụp đổ đâu. Ngược lại, đây chính là vận may. Kịch bản phụ mà ta đưa ra lần này sẽ là một bước đệm tuyệt vời để xoay chuyển cuộc đời của các ngươi. Nào, cơ hội chỉ có trong một ngày! Hãy di chuyển ngay lập tức! Chỉ những người nhanh chân nhất mới có thể trở thành chủ nhân của vật phẩm cấp SSS!]</p><p id="29">Ngay khi nghe thấy điều này, các hóa thân rải rác khắp Seoul sẽ tập trung tại quận Gangdong.</p><p id="30">[Kịch bản phụ đã được cập nhật.]</p><p id="31">[Kịch bản phụ – Cuộc Săn Cấp SSS]</p><p id="32">Danh mục: Phụ</p><p id="33">Độ khó: B ~ ???</p><p id="34">Điều kiện: Loại bỏ Myung Ilsang cấp SSS.</p><p id="35">Giới hhạnthời gian: Không có</p><p id="36">Phần thưởng: 50,000 xu, ???</p><p id="37">Thất bại: Sự sụp đổ của Mái Vòm Seoul.</p><p id="38">Kịch bản tồi tệ nhất đã bắt đầu.</p><p id="39">Có lẽ vì chữ ‘Thất bại’ đỏ chói lóe trên trời mà cái phần thưởng siêu to khổng lồ kia trông cũng chẳng còn đáng giá bao nhiêu nữa.</p><p id="40">“Mau tìm hắn đi, không thì mọi người chết hết bây giờ!”</p><p id="41">“…Nhưng hắn có bị ảnh hưởng bởi xác suất không?”</p><p id="42">“Có chứ. Mấy chòm sao quan tâm thì sẽ bù lại phần nào.”</p><p id="43">Đó cũng là lý do lũ Dokkaebi ưa mấy kịch bản kịch tính. Càng nhiều chòm sao muốn xem thì càng có thể bù đắp cho xác suất. Tất nhiên, nếu lỡ xôi hỏng bỏng không thì bọn Dokkaebi phải chịu trách nhiệm. Nhưng tình huống lần này lại khác hẳn.</p><p id="44">[Nhiều chòm sao đang sáng mắt theo dõi.]</p><p id="45">Nếu mọi việc diễn ra theo kế hoạch của Dokgak, Seoul sẽ tiêu đời trước khi kịch bản thứ năm bắt đầu. Han Sooyoung ngay lập tức sử dụng toàn bộ ma lực của mình để triệu hồi các phân thân đi tìm kiếm.</p><p id="46">Năm phút trôi qua trước khi Han Sooyoung hét lên, </p><p id="47">"Tôi tìm thấy hắn rồi. Hắn ở cách đây 2km về phía tây bắc!"</p><p id="48">Tôi chạy dọc theo con đường cùng Han Sooyoung, và chẳng bao lâu sau liền nghe thấy những tiếng ồn ào.</p><p id="49">"Bên này! Hắn kia rồi!"</p><p id="50">"Thằng nhóc đó chạy hướng này!"</p><p id="51">Đám người đã tụ lại đông nghịt. Myung Ilsang vẫn cười tươi giữa vòng vây.</p><p id="52">“À… ừ. Tôi đây.”</p><p id="53">“Đồ khốn! Mày còn cười được hả?”</p><p id="54">“Tôi vui thật mà…”</p><p id="55">“Con mẹ nó… này! Giết nó đi!”</p><p id="56">Thật đáng ngạc nhiên khi thấy nhiều người có mặc cảm tự ti đến vậy. Myung Ilsang vừa né những thanh kiếm vung vẩy trong không khí vừa lên tiếng hỏi, </p><p id="57">“Các người ganh tị và muốn tôi gửi các người sang thế giới khác phải không?”</p><p id="58">"Cái gì, mày sẽ gửi tao đến đó?"</p><p id="59">"Dĩ nhiên. Tôi sẽ gửi anh đi. Sao, anh muốn đi thật hả?"</p><p id="60">“Nếu đi được thì dĩ nhiên tao muốn! Đi còn sướng hơn ở lại cái thế giới tệ hại này…”</p><p id="61">Myung Ilsang gật đầu và giơ cánh tay phải về phía đám đông.</p><p id="62">[Phong ấn thứ tám của quy hoàn giả 'Myung Ilsang' đã được giải trừ.]</p><p id="63">[Phong ấn thứ chín của quy hoàn giả 'Myung Ilsang' đã được giải trừ.]</p><p id="64">·····.</p><p id="65">"Vậy thì đi vui vẻ nhé. Mặc dù tôi không biết liệu ở đó có tốt hơn ở đây không."</p><p id="66">"Cái gì?"</p><p id="67">[Phong ấn thứ mười hai của Quy hoàn giả 'Myung Ilsang' đã được giải trừ.]</p><p id="68">[Phong ấn thứ mười ba của Quy hoàn giả 'Myung Ilsang' đã được giải trừ.]</p><p id="69">[Phong ấn thứ mười bốn của Quy hoàn giả 'Myung Ilsang' đã được giải trừ.]</p><p id="70">·····.</p><p id="71">Tôi chợt cảm thấy tuyệt vọng khi thấy những thông báo xuất hiện trên bầu trời. Đã quá muộn.</p><p id="72">"Bởi vì nơi đó, chính tay tôi đã hủy diệt nó rồi."</p><p id="73">[Nhân vật 'Myung Ilsang' đã kích hoạt 'Tiểu Hắc Diễm Pháo Lv. 3’!]</p><p id="74">Tôi tóm lấy Han Sooyoung và núp sau một tòa nhà.</p><p id="75">Một ánh chớp tím lật tung cả khu cao ốc. Có đến nửa tá tòa nhà cao tầng bị trúng đạn, cả một con phố đã biến mất. Những người chạy về phía hắn đã tan biến, cả tro xương cũng không còn.</p><p id="76">Đây là sức mạnh thực sự của một quy hoàn giả, thực thể duy nhất có khả năng trở thành tai ương.</p><p id="77">Han Sooyoung ngã quỵ bên cạnh tôi. </p><p id="78">"Điên thật… làm sao chúng ta đánh bại được thứ đó?"</p><p id="79">Nỗi sợ đến mức sởn gai ốc, khiến cả người run rẩy tràn ngập trong lòng tôi. Đó là sự sợ hãi thật sự, không phải đến từ kỹ năng, mà từ chính sinh vật kia.</p><p id="80">Tôi cố gắng mở miệng để níu lấy chút lý trí.</p><p id="81">"Chúng ta có thể thắng."</p><p id="82">“Đừng có nói vớ vẩn, quay về đi. Không đời nào giết được thằng đó.”</p><p id="83">“Không. Tôi sẽ bắt được hắn. Nếu tôi giết hắn ngay bây giờ thì tình hình sẽ tốt hơn.”</p><p id="84">[Nhân vật 'Han Sooyoung' đã sử dụng 'Phát Hiện Nói Dối Lv. 2'.]</p><p id="85">[Nhân vật Han Sooyoung đã xác nhận lời nói của bạn là thật.]</p><p id="86">Mắt Han Sooyoung mở to. </p><p id="87">"…Thật sao? Trước đó anh không thể giết hắn mà."</p><p id="88">"Cả đời chỉ chăm chăm vào đúng một chuyện thì sống kiểu gì hả?"</p><p id="89">Tôi chỉ nói một nửa sự thật. Thực ra, kế hoạch ban đầu là đánh bại Tai Ương Truy Vấn và xây dựng một câu chuyện thứ hai.</p><p id="90">Vấn đề là tiền đề của kế hoạch này chính là học được Phong Chi Đạo.</p><p id="91">"Còn ai muốn đến thế giới khác không? Giơ tay lên nào! Tôi sẽ gửi các người đi!"</p><p id="92">Mọi người la hét rồi tháo chạy. Myung Ilsang tiến lại gần.</p><p id="93">Lập tức, giọng Yoo Junghyuk vang lên từ một khung chat trong suốt.</p><p id="94">–Anh không đối đầu trực diện với hắn được đâu.</p><p id="95">–Tôi biết. Nhưng vẫn phải thử.</p><p id="96">–Tại sao lại để tình hình ra nông nỗi này?</p><p id="97">– Gì?</p><p id="98">–Anh có nhiều cơ hội mà. Anh có thể giết Lee Seolhwa. Hoặc nếu anh xử lý Antinus với Lycaon thì có khi đã chặn được tai họa.</p><p id="99">Tôi không còn lời bào chữa. Tôi không giết Lee Seolhwa vì liên quan đến Yoo Junghyuk, và tôi không giao chiến với Lycaon vì không tìm được khe hở.</p><p id="100">–Tôi không phải một hồi quy giả như cậu. Tôi phải cẩn thận để không thất bại. Nếu không tính toán đến cùng…</p><p id="101">–Cẩn thận? Đừng có tự mãn như vậy. Anh nghĩ mình là một chòm sao à? Biết trước tương lai không có nghĩa là anh có thể kiểm soát mọi thứ.</p><p id="102">Cảm giác như bị người ta đấm thẳng vào ngực vậy. Nực cười hơn là những lời của Yoo Junghyuk đã đúng.</p><p id="103">[Kỹ năng độc quyền, 'Bức Tường Thứ Tư' đang bật.]</p><p id="104">Đó là sự kiêu căng sinh ra từ việc biết trước tương lai. Tôi đã nghĩ rằng mình có thể xoay xở được ngay cả khi câu chuyện bị bóp méo. Có lẽ chính điều đó đã dẫn đến tình hình hiện tại.</p><p id="105">–Vậy thì đánh thử đi chứ?</p><p id="106">Tôi không thể trả lời.</p><p id="107">–Đừng có lấy việc không có tài năng ra làm cớ. Không có Phong Chi Đạo không có nghĩa là anh không thể thắng.</p><p id="108">–Tôi có thể thắng?</p><p id="109">Yoo Junghyuk im lặng một lúc. Ngay lúc tôi định phá vỡ sự im lặng, giọng của Yoo Junghyuk tiếp tục.</p><p id="110">–Thuộc tính của tôi là 'game thủ chuyên nghiệp'. Của anh là gì?</p><p id="111">–Gì cơ?</p><p id="112">–Tôi đang hỏi là anh giỏi cái gì?</p><p id="113">…Tôi giỏi cái gì sao? Có cái gì đó trong đầu gợn lên, như thể tôi đã bỏ lỡ một chuyện quan trọng. Nhưng giờ không còn thời gian để suy nghĩ.</p><p id="114">"Tìm thấy rồi nhé! Các người vẫn chưa đi à."</p><p id="115">Myung Ilsang huýt sáo khi lượn qua góc đường. Han Sooyoung chửi thầm một câu, còn tôi lùi lại.</p><p id="116">"…Ơ? Mấy người của Hiệp Hội Thợ Săn lúc nãy à?" </p><p id="117">Myung Ilsang cười. </p><p id="118">“Tuyệt, tôi rất muốn gặp các người đó. Có biết kế hoạch debut xịn xò của tôi bị mấy người làm cho hỏng bét rồi không?”</p><p id="119">"…"</p><p id="120">"Tôi chỉ muốn sống tốt thôi mà. Giết một vài hóa thân cấp S, đánh bại đám người xấu và yêu những chị gái xinh đẹp. Nhưng giờ thì sao? Thế mà lại biến thành phản diện mất rồi. Phải làm sao đây?”</p><p id="121">Tôi nắm chặt thanh kiếm của mình thay vì trả lời.</p><p id="122">[Tinh ấn 'Kiếm Ca Lv. 1' được kích hoạt.]</p><p id="123">[Thanh kiếm của bạn được bao bọc bởi những lời thơ của Trung Vũ Công.]</p><p id="124">「 Hôm nay ta đã chuẩn bị cho cái chết. Ta cầu nguyện với trời, cầu cho ta tiêu diệt được quân thù. 」</p><p id="125">Những lời của Trung Vũ Công được ghi lại trong nhật ký chiến tranh của ông. May là lần này ông ấy đã đứng về phía tôi.</p><p id="126">[Tinh ấn 'Kiếm Ca' được kích hoạt.]</p><p id="127">[Quyết tâm tử chiến đã cải thiện sức mạnh chiến đấu của bạn.]</p><p id="128">Tôi vắt kiệt toàn bộ ma lực của mình cùng một lúc.</p><p id="129">[Thanh Kiếm Đức Tin được kích hoạt!]</p><p id="130">Thanh Kiếm Đức Tin bùng nổ ma lực. Tôi xông thẳng về phía hắn. Tay Myung Ilsang khẽ chạm vào lưỡi kiếm.</p><p id="131">Cơn đau xé toạc khiến tôi nới lỏng chuôi kiếm. Chỉ một đòn nhưng tôi biết rõ. Chỉ số của Myung Ilsang đã vượt quá giới hạn của kịch bản này.</p><p id="132">"Gì, muốn đánh nhau à? Thật không? Mấy người vừa thấy tôi đánh thế nào rồi mà?”</p><p id="133">Tôi nhìn hắn mỉm cười toe toét, và nhớ lại 'Cách Sống Sót’. Thứ mà tôi giỏi nhất, chính là 'đọc'.</p><p id="134">[Kỹ năng độc quyền, ‘Góc Nhìn Của Độc Giả Toàn Tri’ giai đoạn 1 được kích hoạt!]</p><p id="135">Tôi bắt đầu đọc được những chuyển động của hắn.</p><p id="136">「 Vai phải. 」</p><p id="137">「 Đùi trái. 」</p><p id="138">Dù đọc được hướng tấn công nhưng tôi vẫn bị trúng đòn. Những nắm đấm được bao bọc bởi ánh sáng tím không thương tiếc trút xuống tôi.</p><p id="139">「 Bụng, bụng, bụng, bụng.」</p><p id="140">Máu trào ra từ miệng tôi, tầm nhìn của tôi rung chuyển. Tôi đã không bỏ cuộc. Tôi đã không ngừng suy nghĩ và tính toán.</p><p id="141">[Nhân vật 'Myung Ilsang' ngưỡng mộ tinh thần của bạn.]</p><p id="142">[Mức độ hiểu biết của bạn đối với nhân vật 'Myung Ilsang' đã tăng lên.]</p><p id="143">Chỉ riêng thông tin có trong 'Cách Sống Sót' không thể đánh bại hắn. Việc này khác với khi tôi săn Cảnh Vệ Bóng Đêm. Tôi không thể chiến đấu mặc dù đã tính toán hết mọi thứ.</p><p id="144">「Mạnh, yếu, thân, đầu…」</p><p id="145">Quá nhiều thông tin dồn dập cùng lúc khiến đầu tôi càng quay cuồng.</p><p id="146">Dù có mượn sức mạnh từ tinh ấn, nếu cứ tiếp tục thế này thì mọi thứ sẽ kết thúc trong nháy mắt. Tôi lau vệt máu rỉ ra từ khóe miệng rồi lùi lại.</p><p id="147">… Có nên dùng tới Can Bình Nghi không? Tôi cảm thấy cay đắng khi phương án cuối cùng của mình lại là mượn sức mạnh từ các chòm sao. Nếu triệu hồi được một chòm sao mạnh, có lẽ tôi sẽ thắng.</p><p id="148">Nhưng gánh nặng xác suất sau vụ trước vẫn còn đó, và hơn hết, tôi ghét phải nợ các chòm sao.</p><p id="149">Chết tiệt, tôi mà có thiên phú là ngon rồi. Không thì chôm đại thiên phú của người khác cũng được.</p><p id="150">…Ơ? Hả? Chôm sao? Một cơn choáng ù ù lướt qua trong đầu. Cho tới giờ, vũ khí chính của tôi là 'thông tin'. Nhưng có quá nhiều 'thông tin' dồn dập ập đến tới mức làm tôi quên mất một vài thứ.</p><p id="151">Thảm hại thật. Sao tôi lại quên mất kỹ năng này chứ? Đây chẳng phải điều đầu tiên tôi nên làm sao?</p><p id="152">[Kỹ năng độc quyền, ‘Thẻ Đánh Dấu’ được kích hoạt!]</p><p id="153">[‘Dấu Trang Nhân Vật’ được kích hoạt.]</p><p id="154">[Số Thẻ Đánh Dấu khả dụng: 3]</p><p id="155">[Hiển thị danh sách nhân vật có thể đánh dấu.]</p><p id="156">[Những nhân vật có thể đánh dấu]</p><p id="157">Ác Ma Hoang Tưởng Kim Namwoon (Mức độ hiểu biết 35).</p><p id="158">Thiết Kiếm Lee Hyunsung (Mức độ hiểu biết 75).</p><p id="159">Kẻ Kích Động Cheon Inho (Mức độ hiểu biết 20).</p><p id="160">Slot trống</p><p id="161">Ngoài slot bổ sung, không có gì thay đổi. Tôi chọn slot trống.</p><p id="162">[Danh sách những nhân vật có thể đánh dấu]</p><p id="163">Độc Sư Lee Seolhwa (Mức độ hiểu biết 10)</p><p id="164">Mỹ Nhân Vương Min Jiwon (Mức độ hiểu biết 25)</p><p id="165">Bạo Vương Jung Youngho (Mức độ hiểu biết 10)</p><p id="166">Ẩn Sĩ Vương Han Donghoon (Mức độ hiểu biết 30)</p><p id="167">Tiên Tri Anna Croft (Mức độ hiểu biết 1)</p><p id="168">Bậc Thầy Pháo Đài Vũ Trang Gong Pildu (Mức độ hiểu biết 30)</p><p id="169">…</p><p id="170">Đúng như dự đoán, Yoo Joonghyuk không có trong danh sách. Nhân vật chính thì vẫn là nhân vật chính thôi. Muốn mở khóa hắn chắc chắn phải có điều kiện gì đó đặc biệt.</p><p id="171">Thêm nữa, những người không phải nhân vật như Han Sooyoung, Yoo Sangah hay Lee Gilyoung cũng không có trong danh sách.</p><p id="172">Không sao. Họ không phải đối tượng mà tôi cần lúc này. Tôi lướt qua một lúc và cuối cùng đã tìm thấy người tôi muốn.</p><p id="173">Đây rồi, sao tôi lại quên mất gã cũng được tính là ‘nhân vật’ chứ. Tôi lập tức ghim vào Thẻ Đánh Dấu số bốn.</p><p id="174">[Cấp độ của Thẻ Đánh Dấu còn thấp nên thời gian sử dụng bị giới hạn.]</p><p id="175">[Thời gian sử dụng: 30 phút.]</p><p id="176">[Mức độ hiểu biết của bạn về nhân vật rất cao. Bạn có thể sử dụng một số kỹ năng của nhân vật.]</p><p id="177">Tôi chọn một kỹ năng. Ngay lập tức, một cơn cuồng phong bùng phát quanh người tôi. Trong lồng ngực, dũng khí của loài sói đang gầm thét dữ dội.</p><p id="178">Khỉ thật. Từ trước đến giờ tôi đã cố học cái quái gì vậy? Tôi đâu phải hồi quy giả, cũng chẳng phải quy hoàn giả.</p><p id="179">[Nhân vật 'Hoàng Tử Lycaon của Imyuntar' đã được ghim vào Thẻ Đánh Dấu số 4.]</p><p id="180">[Thẻ Đánh Dấu số bốn được kích hoạt.]</p><p id="181">Tôi là một 'độc giả'.</p><p id="182">[‘Phong Chi Đạo Lv. 8’ được kích hoạt.]</p><p id="183">Và đây mới là cách mà tôi chiến đấu.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/13694" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/13694/2dc2458a-7500-4983-b608-fedff1f93fba.jpg?t=1727447414" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/13694" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/13694/63e71121-cb31-4692-bc99-5980c02144fc.jpg?t=1727447414" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/21204-toan-tri-doc-gia/c246942-chuong-86" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/21204-toan-tri-doc-gia" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/21204-toan-tri-doc-gia/c248997-chuong-88" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'hHSAePOWUCXdLZpevj7nfYp48ZakwkY4uR1oScoJ';
        var comment_type = 'chapter';
        var comment_typeid = '248074';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'hHSAePOWUCXdLZpevj7nfYp48ZakwkY4uR1oScoJ';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('21204');
    chapter_id = parseInt('248074');

    readingObject = {
        series_id: series_id,
        series_title: 'Toàn Tri Độc Giả',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="hHSAePOWUCXdLZpevj7nfYp48ZakwkY4uR1oScoJ" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
