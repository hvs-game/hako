<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Toàn Tri Độc Giả - Chương 99 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="“Tôi là người duy nhất biết được kết cục của thế giới này.” Một ngày nọ, thế giới của Kim Dokja sụp đổ. Không phải theo nghĩa bóng, mà theo đúng những gì đã xảy ra trong cuốn tiểu thuyết mà anh là độc giả duy nhất theo dõi đến...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="jlziIreIiBQmIF6SbMJ5SrLTZGpOAEmFViO6tGvz">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/21204-toan-tri-doc-gia/c270723-chuong-99">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s21204-d72dfcb4-37f1-4dce-b357-082b563618f4.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/21204-toan-tri-doc-gia/c269389-chuong-98"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/21204-toan-tri-doc-gia"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/21204-toan-tri-doc-gia/c271915-chuong-100"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/21204-toan-tri-doc-gia/c270723-chuong-99" style="background: url('https://i.hako.vn/ln/series/covers/s21204-d72dfcb4-37f1-4dce-b357-082b563618f4.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/21204-toan-tri-doc-gia">Toàn Tri Độc Giả</a></h5>
                    <small><i class="fas fa-pen"></i>Sing Shong</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163126-mo-dau-ba-cach-song-sot-trong-the-gioi-do-nat">Mở đầu</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163127-chuong-01">Hồi 1 – Bắt đầu dịch vụ tính phí</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163136-chuong-07">Hồi 2 – Nhân vật chính</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163164-chuong-11">Hồi 3 – Hợp đồng</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163170-chuong-15">Hồi 4 – Đạo đức giả cũng là đạo đức</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c163486-chuong-19">Hồi 5 – Cảnh Vệ Bóng Đêm</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c166297-chuong-23">Hồi 6 – Giờ Phán Quyết</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c167129-chuong-27">Hồi 7 – Địa chủ</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c168524-chuong-32">Hồi 8 – Phòng thủ khẩn cấp</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c170483-chuong-36">Hồi 9 - Mola toàn tri</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c175135-chuong-42">Hồi 10 - Trận chiến tương lai</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c184714-chuong-49">Hồi 11 - Đêm hội Giáo Đồ</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c193080-chuong-54">Hồi 12 - Góc nhìn thứ nhất của nhân vật chính</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c202672-chuong-59">Hồi 13 - Đại chiến vương vị</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c211824-chuong-64">Hồi 14 - Chủ nhân ngai vàng</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c219703-chuong-70">Hồi 15 - Thế giới không vua</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c229563-chuong-76">Hồi 16 - Kịch bản thứ năm</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c238574-chuong-81">Hồi 17 - Tài năng cấp SSS</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c248074-chuong-87">Hồi 18 - Cuộc chiến của độc giả</a></li>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c254505-chuong-92">Hồi 19 - Dị điểm</a></li>
                                        
                                                            <li class="current"><a href="/truyen/21204-toan-tri-doc-gia/t34625-hoi-20-tai-uong-hong-thuy">Hồi 20 - Tai ương Hồng Thủy</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c263455-chuong-97">
                                                                        Chương 97
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c269389-chuong-98">
                                                                        Chương 98
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/21204-toan-tri-doc-gia/c270723-chuong-99">
                                                                        Chương 99
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c271915-chuong-100">
                                                                        Chương 100
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21204-toan-tri-doc-gia/c273231-chuong-101">
                                                                        Chương 101
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=""><a href="/truyen/21204-toan-tri-doc-gia/c274603-chuong-102">Hồi 21 - Những thứ không thể thay đổi</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Hồi 20 - Tai ương Hồng Thủy</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 99</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/21204-toan-tri-doc-gia/c270723-chuong-99#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,586 từ - Cập nhật: 
                        <time class="topic-time timeago" title="08-12-2025 00:09:48" datetime="2025-12-08T00:09:48+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 99</p>
                    <p id="1">Những luồng sáng rực rỡ bắn lên bầu trời và tỏa khắp Seoul.</p><p id="2">Có luồng bay về phía bắc, có luồng phóng sang phía tây. Nhưng phạm vi phân tán không lớn. Hầu hết các luồng sáng đều tập trung ở trung tâm Seoul. Đó là bằng chứng về nơi các hóa thân đang tụ tập để chuẩn bị cho kịch bản.</p><p id="3">“Cuối cùng cũng được ký hợp đồng! Tôi sắp có nhà tài trợ rồi!”</p><p id="4">Các hóa thân đang chờ đợi trong khu vực reo hò đầy phấn khích.</p><p id="5">Tôi không phải hóa thân duy nhất sống được đến thời điểm này mà vẫn chưa có nhà tài trợ. Chẳng mấy chốc, những vì sao nhỏ xuất hiện trên đầu từng người chưa có hợp đồng. Số lượng ngôi sao tượng trưng cho số chòm sao mong muốn đồng hành với họ.</p><p id="6">[Lựa Chọn Nhà Tài Trợ]</p><p id="7">– Hãy chọn một nhà tài trợ.</p><p id="8">– Nhà tài trợ của bạn sẽ là cố vấn đắc lực cho bạn sau này.</p><p id="9">Có lẽ bây giờ, tất cả những hóa thân chưa ký hợp đồng đều đang nhìn thấy cảnh tượng tương tự tôi. Dĩ nhiên, của tôi có lẽ hơi khác một chút.</p><p id="10">1. Tù Nhân Của Vòng Kim Cô.</p><p id="11">2. Hắc Hỏa Vực Long.</p><p id="12">3. Mưu Lược Gia Thần Bí.</p><p id="13">Đúng như dự đoán, có Tù Nhân Của Vòng Kim Cô và Mưu Lược Gia Thần Bí. Tôi cảm thấy có lỗi khi cứ mãi từ chối họ, nhưng không còn cách nào khác.</p><p id="14">…Tên Hắc Hỏa Vực Long này lại ở đây. Hắn đã có Han Sooyoung rồi sao còn cứ tìm đến tôi làm gì nhỉ?</p><p id="15">4. Tất Thư Nhất Sinh.</p><p id="16">5. Vệ Binh Chính Nghĩa Hói Đầu.</p><p id="17">6. Hưng Vũ Đại Vương.</p><p id="18">Các vĩ nhân của Bán đảo Triều Tiên cũng lần lượt góp mặt. Tất Thư Nhất Sinh có lẽ là Ryu Seongryong…</p><p id="19">Á, cả Samyeongdang cũng đến.</p><p id="20">Ngoài ra, còn có lão cáo già Kim Yushin. Ông ta nghĩ tôi sẽ thực sự chọn ông ta sao?</p><p id="21">Danh sách tiếp tục kéo dài.</p><p id="22">21. Cao y Đệ Nhất Kiếm.</p><p id="23">22. Thần Rượu và Hoan Lạc.</p><p id="24">Ai từng được gọi là kiếm sĩ mạnh nhất Goryeo đều có thể là ông số 21 kia. Sau đó là Dionysus… xem ra Olympus cũng đã nhảy vào tranh giành Kim Dokja. Tôi hơi bối rối khi danh sách nối dài không dứt, toàn những cái tên nằm ngoài dự đoán.</p><p id="25">48. Hắc Quang Dẫn Lộ.</p><p id="26">49. Thiên Thư Giả.</p><p id="27">50. Chủ Tể Báo Phục Và Tận Thế.</p><p id="28">Tôi không nhớ rõ toàn bộ danh hiệu, nên chỉ hơi mơ hồ về Hắc Quang Dẫn Lộ và Chủ Tể Báo Phục Và Tận Thế.</p><p id="29">Nhưng cái tên Thiên Thư Giả thì tôi chắc chắn. Gã đó, hắn là một chòm sao mạnh mẽ của hệ thống chí thiện. Tổng lãnh thiên thần Metatron. Dựa trên thẩm quyền thiên giới, y còn đứng trên cả Uriel. Quái lạ thật, rốt cuộc là những hạng chòm sao nào đang quan sát tôi vậy? </p><p id="30">…Hàng trăm ngôi sao lấp lánh trên đỉnh đầu tôi tạo thành một cảnh tượng tráng lệ, như ánh sáng có thể xua tan mọi bóng tối. Một vài hóa thân nhìn chằm chằm về phía tôi với đôi mắt vô hồn.</p><p id="31">“Cái đó…”</p><p id="32">“Người kia… là ai thế?”</p><p id="33">Shin Yoosung ngơ ngác nhìn trên đầu tôi và lẩm bẩm, </p><p id="34">"Chú ơi, nhìn chú y như cây thông Noel í."</p><p id="35">[Các chòm sao yêu thích bán đảo Triều Tiên muốn bạn giữ lời hứa.]</p><p id="36">[Một số chòm sao muốn kiểm tra sự thành thật của bạn.]</p><p id="37">Rốt cuộc cũng đến rồi. Tôi hít một hơi thật sâu rồi gọi Bihyung.</p><p id="38">'Bihyung.'</p><p id="39">[Gì?]</p><p id="40">'Bây giờ là bao nhiêu rồi?'</p><p id="41">Tôi đã hứa với các chòm sao trong trận chiến với Dokgak. Nếu số lượt đăng ký kênh đạt 10,000 trước khi sự kiện Lựa Chọn Nhà Tài Trợ kết thúc, tôi sẽ chọn một nhà tài trợ.</p><p id="42">[9,812. Không, 14… 16.]</p><p id="43">Số lượng chòm sao tiếp tục tăng. Giọng Bihyung trở nên căng thẳng.</p><p id="44">[Quá trình lựa chọn nhà tài trợ còn ba phút.]</p><p id="45">Giờ kết quả sẽ được quyết định trong ba phút.</p><p id="46">[Chòm sao 'Vệ Binh Chính Nghĩa Hói Đầu' đang lo lắng nhìn bạn.]</p><p id="47">Tiếc là giờ có nhìn chăm chăm vào tôi thì cũng không có ích gì.</p><p id="48">[Quá trình lựa chọn nhà tài trợ còn hai phút.]</p><p id="49">[Chòm sao 'Vệ Binh Chính Nghĩa Hói Đầu' đã tài trợ cho bạn 200 xu.]</p><p id="50">[chòm sao 'Tất Thư Nhất Sinh' đã tài trợ cho bạn 300 xu.]</p><p id="51">[chòm sao 'Heungmu Đại Vương' đã tài trợ cho bạn 300 xu.]</p><p id="52">Cuộc thi tài trợ cuối cùng cũng bắt đầu. Nếu muốn nổi bật hơn người khác thì đây là lựa chọn hiển nhiên.</p><p id="53">[Một số chòm sao vĩ đại trên cấp giai thoại đang tặc lưỡi.]</p><p id="54">[Chòm sao 'Tù Nhân Của Vòng Kim Cô' đã tài trợ cho bạn 5,000 xu.]</p><p id="55">Đây chính là diễn biến mà tôi mong đợi. Ngon. Ném tiền cho tôi tiếp đi.</p><p id="56">[Chòm sao 'Thiên Thư Giả' đã tài trợ cho bạn 30,000 xu.]</p><p id="57">…Quả không hổ danh là Metatron. Đẳng cấp hoàn toàn khác biệt. Một vị đại thần quan của thiên đường phải như vậy chứ.</p><p id="58">[Chòm sao 'Tù Nhân Của Vòng Kim Cô' đang nhìn chòm sao 'Thiên Thư Giả'.]</p><p id="59">[Quá trình lựa chọn nhà tài trợ còn một phút.]</p><p id="60">Tôi hỏi Bihyung. </p><p id="61">'Giờ là bao nhiêu?'</p><p id="62">[9,973… 76, 77.]</p><p id="63">Cuối cùng cũng đến phần gay cấn rồi. </p><p id="64">[9,981… 84.]</p><p id="65">30 giây còn lại.</p><p id="66">[9,993.]</p><p id="67">20 giây.</p><p id="68">[9,998.]</p><p id="69">[Một vài chòm sao đang nín thở.]</p><p id="70">10 giây.</p><p id="71">[9,999…]</p><p id="72">5 giây, 4 giây, 3 giây…</p><p id="73">[Sự kiện ‘Lựa Chọn Nhà Tài Trợ’ đã kết thúc.]</p><p id="74">Sau đó tôi thở phào nhẹ nhõm. Tôi nhìn Bihyung đang nhoẻn miệng cười và bắt đầu nó.</p><p id="75">[Thật là đáng tiếc.]</p><p id="76">[Nhiều chòm sao cảm thấy điều này thật lố bịch!]</p><p id="77">Nhưng kêu gào cũng vô ích.</p><p id="78">[Số lượt đăng ký hiện tại: 9,999]</p><p id="79">Màn hình cạnh Bihyung hiện lên số liệu thực tế. </p><p id="80">Một số hiện thân há hốc miệng. Shin Yoosung hỏi, </p><p id="81">“Chú ơi… chú là ngôi sao Youtube ạ?”</p><p id="82">Có thể coi là vậy cũng được. Tôi bình thản nhìn lên bầu trời và giở giọng vô sỉ. </p><p id="83">"Tiếc quá đi. Nếu đạt đủ 10,000 chòm sao thì tôi đã chọn nhà tài trợ rồi."</p><p id="84">[Nhiều chòm sao tò mò muốn biết bạn sẽ chọn ai.]</p><p id="85">Sau đó Bihyung can thiệp.</p><p id="86">[Thông tin này không thể được tiết lộ nhằm bảo vệ quyền riêng tư của hóa thân.]</p><p id="87">Làm tốt lắm Bihyung.</p><p id="88">[Một số chòm sao đang phẫn nộ!]</p><p id="89">Bầu trời phía trên Yongsan bị bóp méo và sấm sét bắt đầu giáng xuống những người vô tội. Tia lửa lấp đầy không gian. Năng lực thao túng xác suất của dokkaebi cũng có thể chặn cơn thịnh nộ ấy. </p><p id="90">[Nào nào, các chòm sao. Xin hãy bình tĩnh. Thật không may, lời hứa đã không thành vì thiếu mất một lượt đăng ký…]</p><p id="91">Sau đó Bihyung liếc tôi và tiếp tục.</p><p id="92">[Để bù đắp, tôi sẽ tổ chức một sự kiện bồi thường.]</p><p id="93">Sấm sét tạm thời dừng lại.</p><p id="94">[Có lẽ các vị đang nghĩ thế này: “Chết tiệt, nếu cứ tiếp tục như thế này thì phải làm sao đây?”]</p><p id="95">[Nhiều chòm sao đang lắng nghe Dokkaebi Bihyung.]</p><p id="96">[Tôi hiểu suy nghĩ của các vị. Vì vậy! Tôi sẽ trừng phạt hóa thân không chọn ai trong sự kiện Lựa Chọn Nhà Tài Trợ lần thứ hai! Tuy nhiên, tôi sẽ chỉ làm điều này khi các chòm sao đều ủng hộ…]</p><p id="97">[Nhiều chòm sao ủng hộ lời của Dokkaebi Bihyung.]</p><p id="98">Bihyung gật đầu hài lòng. Shin Yoosung nhìn tôi với vẻ mặt bàng hoàng. </p><p id="99">“Có chuyện gì đang xảy ra vậy ạ?”</p><p id="100">“Đừng quá bối rối vì mấy trò này.”</p><p id="101">"Chú ơi, sao chú không chọn nhà tài trợ?"</p><p id="102">"Ừm, vẫn chưa phải lúc."</p><p id="103">Thú thật, lúc thấy Metatron tôi cũng hơi lung lay. Nhưng nếu tôi chọn ai ở đây, tất cả những gì tôi đã làm đều sẽ đổ sông đổ bể. Tôi không thể ở dưới trướng bất kỳ ai khác. Đây là cách duy nhất.</p><p id="104">"Cô Sangah. Đưa bọn trẻ đi trốn đi."</p><p id="105">“…Anh có kế hoạch gì sao?”</p><p id="106">“Tất nhiên. Đừng bước ra cho đến khi tôi ra hiệu.”</p><p id="107">[Một kịch bản tiền thưởng đã xuất hiện!]</p><p id="108">[Bạn đã trở thành mục tiêu của kịch bản tiền thưởng.]</p><p id="109">Đúng như dự đoán, kịch bản tiền thưởng bắt đầu rồi.</p><p id="110">[Kịch bản Tiền thưởng – Trừng Phạt]</p><p id="111">Danh mục: Tiền thưởng</p><p id="112">Độ khó: A</p><p id="113">Điều kiện: Giết hóa thân Kim Dokja một cách dã man. Cái chết càng tàn bạo, số xu nhận được càng nhiều.</p><p id="114">Giới hạn thời gian: 20 phút.</p><p id="115">Phần thưởng: 40,000 ~ ????? xu.</p><p id="116">Thất bại: ―</p><p id="117">Ai nhìn vào cũng tưởng tôi là tai ương thứ năm. 40,000 xu chỉ để giết một người.</p><p id="118">Shin Yoosung tái mặt khi nhận kịch bản.</p><p id="119">"…Chú?"</p><p id="120">Yoo Sangah nắm lấy tay Shin Yoosung và kéo ra sau, tránh xa tôi. Gần như ngay lập tức, các hóa thân trong khu vực phát hiện ra tôi và bắt đầu xông đến. Có dấu hiệu 'mục tiêu' lơ lửng trên đầu tôi.</p><p id="121">“Điên thật! 40.000 xu á?”</p><p id="122">“Ê, bắt thằng đó lại!”</p><p id="123">[Nhiều chòm sao đang tận hưởng diễn biến của kịch bản.]</p><p id="124">Đám chòm sao đang giận dữ vì tôi không chọn nhà tài trợ giờ lại cực kỳ khoái cảnh tôi bị săn đuổi như chuột. Mọi người đã quên mất 'sự kiện 10,000'. Phải, đây chính là bản chất của các chòm sao.</p><p id="125">Bihyung liếc tôi rồi truyền âm với vẻ mặt khó chịu.</p><p id="126">—Ta không nghĩ mọi chuyện lại thành ra vậy.</p><p id="127">‘Ta biết. Ta từng làm y chang hồi làm ở công ty game mà.’</p><p id="128">Cách duy nhất để xoa dịu người dùng đang giận là mở một sự kiện mới. Bihyung rùng mình lẩm bẩm.</p><p id="129">–Có ổn không thế? Nếu bị phát hiện… Lần này ta thực sự sẽ nhận được yêu cầu kiểm tra xác suất mất.</p><p id="130">Thực ra, kênh của Bihyung vốn dĩ không thể vượt quá 9.999 người xem. Ngay từ đầu, kênh #BI-7623 chỉ chứa được từng đó.</p><p id="131">Nếu có kẻ như Dokgak ở đây kích chuyện lên, tôi sẽ tiêu đời. May mắn là đám Dokkaebi cấp thấp vẫn sợ sau vụ lần trước nên không ai dám nhúng tay vào</p><p id="132">'Ta đã quyết định cược một phen'.</p><p id="133">Nhưng cách đó vẫn rất nguy hiểm. Chắc chắn sẽ có vài chòm sao thông minh nghi ngờ điều này. Dừng lại chính xác ở số 9,999 thì lại lộ quá. Vậy nên cần một sự kiện đủ rùm beng để đổi hướng chú ý của các chòm sao.</p><p id="134">Tinh vân ghét phiền phức nhưng lại rất dễ phân tâm bởi hoạt động giải trí. Vậy nên tôi đã lợi dụng luôn sự kiện Trừng Phạt lần này để đánh lạc hướng.</p><p id="135">Bihyung mở miệng và nói với mọi người.</p><p id="136">[Các chòm sao, xin lưu ý rằng hóa thân Kim Dokja có thể nhận hình phạt nếu được các vị tài trợ xu nhé.]</p><p id="137">Ngay khi nói xong, cơ thể tôi đột nhiên trở nên nặng nề.</p><p id="138">[Một chòm sao ích kỷ đã áp đặt hình phạt giảm tốc độ lên bạn.]</p><p id="139">[Bạn đã được tài trợ 500 xu.]</p><p id="140">Càng nhận được nhiều xu, tôi càng phải chịu nhiều hình phạt. Những hóa thân từng không bao giờ có thể theo kịp tôi, hiện đang ở ngay sau đuôi tôi.</p><p id="141">"Mọi người dường như đều bị mờ mắt vì xu rồi nhỉ?"</p><p id="142">Tôi cười nhẹ, rút Thanh Kiếm Đức Tin.</p><p id="143">"Ư aaaa!"</p><p id="144">[Một tinh vân thích thấy bạn chịu bất hạnh đã áp đặt hình phạt tấn công lên bạn.]</p><p id="145">[Bạn đã được tài trợ 500 xu.]</p><p id="146">Sức tấn công của tôi bị giảm một nửa và các hóa thân không chết. Thật lòng thì được vậy tôi cũng mừng. Tôi không muốn giết họ.</p><p id="147">[Một chòm sao muốn bạn chết đi đã áp đặt hình phạt phòng ngự lên bạn.]</p><p id="148">[Bạn đã được tài trợ 500 xu.]</p><p id="149">Tài trợ cái kiểu quỷ gì vậy trời. Một con dao găm từ đâu đó bay đến và ghim vào tay tôi, gây ra cơn đau khủng khiếp. Nếu không nhờ có Áo Choàng Không Gian Vô Tận thì tay tôi coi như đi đời rồi.</p><p id="150">[Một vài chòm sao cảm thấy tội nghiệp bạn.]</p><p id="151">Cũng có những chòm sao ủng hộ tôi. Cảm ơn lòng trắc ẩn của các vị nhé. Tôi nắm lấy cánh tay bị thương và chạy về phía tây nam của quận Yongsan.</p><p id="152">Nếu tôi đoán đúng, thiên thạch của Tai ương Hồng Thủy đang ở hướng đó. Và nó sắp nở rồi.</p><p id="153">[Bihyung, cái quái gì đây?]</p><p id="154">[Có gì đâu. Giải trí trước giờ vào trò chơi chính thôi.]</p><p id="155">Giọng của một Dokkaebi khác đột nhiên vang lên. Giọng Bihyung thì vang như MC sân khấu, còn tôi thì nặng như vác bao xi măng.</p><p id="156">Chỉ một chút nữa thôi…</p><p id="157">Một con sông cuối cùng cũng xuất hiện. </p><p id="158">"Giữ hắn lại!"</p><p id="159">Tôi cố gắng thoát khỏi nanh vuốt của đám người phía sau và lao xuống sông Hàn. Các hóa thân khác biết trong sông Hàn có thứ gì nên chẳng ai dám nhảy xuống theo tôi.</p><p id="160">"Thằng điên này!"</p><p id="161">Đám ngư long cấp 7 bơi đến như thể đã đợi từ lâu. Chúng muốn biến cơ thể yếu ớt của tôi thành thức ăn.</p><p id="162">[Nhiều chòm sao đang xem rất vui vẻ.]</p><p id="163">Nhìn những sinh vật ấy, tôi chợt nghĩ. Tôi là một tên bất tài. Dù có luyện tập chăm chỉ đến đâu, tôi cũng không thể đạt tới trình độ mình mong muốn. Tuy nhiên, tôi sẽ không cho phép bản thân vin vào đó để thừa nhận sự yếu đuối của mình .</p><p id="164">[Kỹ năng độc quyền, ‘Thẻ Đánh Dấu’ được kích hoạt!]</p><p id="165">Cách mà tôi có thể trở nên mạnh mẽ hơn khác với những người khác.</p><p id="166">[‘Dấu Trang Nhân Vật’ được kích hoạt.]</p><p id="167">[Số Thẻ Đánh Dấu khả dụng: 4]</p><p id="168">[Hiển thị danh sách nhân vật có thể đánh dấu.]</p><p id="169">"Tôi sẽ xóa Kẻ Kích Động Cheon Inho khỏi Thẻ Đánh Dấu số ba và ghim Thuần Thú Sư Shin Yoosung vào."</p><p id="170">[Thẻ Đánh Dấu số ba được kích hoạt.]</p><p id="171">Một luồng sáng rực rỡ bao phủ cơ thể tôi và mùi của đám quái vật thay đổi. Một số trở nên thân thiện, số khác vẫn đầy thù địch. Hóa ra thế giới này tinh vi hơn tôi tưởng. Suy cho cùng, cách ta ‘đọc’ thế giới phụ thuộc vào độ nhạy cảm của chính mình.</p><p id="172">[Cấp độ của Thẻ Đánh Dấu còn thấp nên thời gian sử dụng bị giới hạn.]</p><p id="173">[Thời gian sử dụng: 30 phút]</p><p id="174">[Mức độ hiểu biết của bạn về nhân vật rất cao. Bạn có thể sử dụng một số kỹ năng của nhân vật.]</p><p id="175">Một trong những con ngư long ở xa đã đồng bộ với tôi và mạch não trong đầu tôi đang chạy liên tục. </p><p id="176">[‘Giao Tiếp Đa Loài Cao Cấp’ Lv. 3 được kích hoạt.]</p><p id="177">[‘Thuần Hóa’ Lv. 9 được kích hoạt.]</p><p id="178">Máu chảy ra từ mũi tôi. Thì ra lũ trẻ luôn cảm thấy như thế này.</p><p id="179">Tôi từ từ mở miệng, </p><p id="180">"Đến đây nào, Nữ hoàng Mirabad."</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/21204-toan-tri-doc-gia/c269389-chuong-98" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/21204-toan-tri-doc-gia" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/21204-toan-tri-doc-gia/c271915-chuong-100" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'jlziIreIiBQmIF6SbMJ5SrLTZGpOAEmFViO6tGvz';
        var comment_type = 'chapter';
        var comment_typeid = '270723';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'jlziIreIiBQmIF6SbMJ5SrLTZGpOAEmFViO6tGvz';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('21204');
    chapter_id = parseInt('270723');

    readingObject = {
        series_id: series_id,
        series_title: 'Toàn Tri Độc Giả',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="jlziIreIiBQmIF6SbMJ5SrLTZGpOAEmFViO6tGvz" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
