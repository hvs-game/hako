<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Ojamajo Doremi 16-20 - Chương 02: MAHO-do chính thức khai chương - phần 5 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Bộ tiểu thuyết Light Novel này là &quot;phần tiếp theo&quot; của Ojamajo Doremi ,Lấy bối cảnh 3 năm sau các sự kiện của Dokkan , Ojamajo đã trưởng thành và hiện đang học cấp 3.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="cUBvaiTccPlykjTPl99yZ7VKIBLZqaIbIyvELhap">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24441-ojamajo-doremi-16-20/c281688-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-5">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24441-47680fc7-cf81-4221-b9bb-42a39e944152.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24441-ojamajo-doremi-16-20/c280995-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-4"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24441-ojamajo-doremi-16-20"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24441-ojamajo-doremi-16-20/c281688-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-5" style="background: url('https://i.hako.vn/ln/series/covers/s24441-47680fc7-cf81-4221-b9bb-42a39e944152.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24441-ojamajo-doremi-16-20">Ojamajo Doremi 16-20</a></h5>
                    <small><i class="fas fa-pen"></i>Midori Kuriyama, Yumi Kageyama</small>
                    <small><i class="fas fa-paint-brush"></i>Yoshihiko Umakoshi</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24441-ojamajo-doremi-16-20/t35326-ojamajo-doremi-16">Ojamajo Doremi 16</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c280897-chuong-01-mua-xuan-no-ro">
                                                                        Chương 01: Mùa xuân nở rộ - phần 1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c280899-chuong-01-mua-xuan-no-ro-phan-2">
                                                                        Chương 01: Mùa xuân nở rộ - phần 2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c280901-chuong-01-mua-xuan-no-ro-phan-3">
                                                                        Chương 01: Mùa xuân nở rộ - phần 3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c280909-chuong-2-maho-do-chinh-thuc-khai-chuong-phan-1">
                                                                        Chương 2: MAHO-do chính thức khai chương - phần 1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c280923-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-2">
                                                                        Chương 02: MAHO-do chính thức khai chương - phần 2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c280962-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-3">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 02: MAHO-do chính thức khai chương - phần 3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c280995-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-4">
                                                                        Chương 02: MAHO-do chính thức khai chương - phần 4
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24441-ojamajo-doremi-16-20/c281688-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-5">
                                                                        Chương 02: MAHO-do chính thức khai chương - phần 5
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=" disabled "><a href="/truyen/24441-ojamajo-doremi-16-20">Ojamajo Doremi 16 ~ Naive</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Ojamajo Doremi 16</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 02: MAHO-do chính thức khai chương - phần 5</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24441-ojamajo-doremi-16-20/c281688-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-5#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,933 từ - Cập nhật: 
                        <time class="topic-time timeago" title="29-12-2025 23:12:07" datetime="2025-12-29T23:12:07+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 02: MAHO-do chính thức khai chương - phần 5</p>
                    <p id="1">——</p><p id="2">Giờ đây, với mục tiêu tìm kiếm Onpu-chan, ngay cả công việc bán thời gian không mấy thú vị ở MAHO-do cũng trở nên đáng giá. Thật sự rất tuyệt vời.</p><p id="3">Khi chúng tôi mở cửa lại cửa hàng, có rất nhiều khách hàng không biết về các mặt hàng ma thuật do chúng tôi đã vắng mặt ba năm. Vì vậy, doanh số bán hàng của chúng tôi không tăng nhiều như Majorika mong đợi.</p><p id="4">Tuy nhiên, ba tuần sau khi mở cửa trở lại, những khách hàng từng biết đến cửa hàng MAHO-do cũ đã quay lại vì hoài niệm. Chúng tôi cũng quảng bá cửa hàng cho các bạn học cũ từ trường Tiểu học Misora , cũng như các bạn học hiện tại, vì thế cửa hàng đã có thể trở nên nhộn nhịp hơn rất nhiều.</p><p id="5">Tin tức về tác dụng của những vật phẩm may mắn của chúng tôi, như mặt dây chuyền và vòng tay làm từ đất sét ma thuật, lan truyền rộng rãi nhờ truyền miệng, và các nữ sinh trung học từ ngoài thành phố Misora cũng đến xem.</p><p id="6">Hazuki-chan, người chỉ có thể giúp đỡ vào thứ Bảy và Chủ Nhật, và Ai-chan, người có thể đến sau buổi tập điền kinh, chịu trách nhiệm làm ra các vật phẩm từ đất sét ma thuật.</p><p id="7">Đó là vì họ rất khéo tay.</p><p id="8">Còn về phần tôi, một người vụng về, tôi thường đi thẳng đến MAHO-do sau giờ học mỗi ngày và cố gắng giúp đỡ Majorika  như 1 nhân viên bán hàng.</p><p id="9">Nhân tiện, mặc dù Ai-chan đã làm trò hề trong phần giới thiệu ở lễ nhập học, nhưng cô ấy đã được ghi nhận về những hoạt động của mình trong đội điền kinh, và trở thành một nhân vật nổi tiếng không chỉ trong lớp mà còn toàn trường.</p><p id="10">Ngoài ra, cô ấy còn lập kỷ lục mới trong tỉnh ở vòng loại 100m dành cho học sinh cấp 3 diễn ra vào cuối tháng Tư. Cô ấy thực sự xuất sắc.</p><p id="11">Mối quan hệ giữa cô ấy và giáo viên chủ nhiệm Yamaki-sensei cũng kỳ lạ đến mức buồn cười.</p><p id="12">Sáng hôm sau khi đội Giants đánh bại đội Tigers trong một trận đấu, thầy ấy đã lén lút đặt một mẩu báo có hình ảnh khổng lồ của đội Giants chiến thắng vào giá giày của Ai-chan. Đó là khởi đầu cho cuộc chiến tranh lạnh của họ.</p><p id="13">“Chỉ có Leon mới dám làm điều này thôi!”</p><p id="14">À, Leon là biệt danh mà Ai-chan và tôi đặt cho thầy Yamaki.</p><p id="15">Nghe hay quá phải không?</p><p id="16">Tuy nhiên, nó không xuất phát từ một bộ phim nổi tiếng nào cả. Nếu bạn bỏ chữ "chame" khỏi từ "chameleon", bạn sẽ có Leon.</p><p id="17">Cả lớp đều biết trò đùa đó, và chúng tôi thường gọi thầy ấy là Leon thay vì Yamaki-sensei.</p><p id="18">Còn về Leon, chúng tôi nói với thầy ấy rằng biệt danh đó  xuất phát từ một bộ phim, điều đó khiến thầy ấy rất vui. Chúng tôi suýt nữa thì bật cười không kiểm soát được.</p><p id="19">Vậy nên, từ giờ trở đi tôi sẽ gọi thầy Yamaki là Leon.</p><p id="20">Tôi hơi lạc đề một chút, nhưng hành động trẻ con của Leon đã chạm vào điểm yếu của Ai-chan.</p><p id="21">Trong trận đấu tối hôm đó, đội Tigers đã đánh bại đội Giants. Sáng hôm sau, Ai-chan mua một tờ báo thể thao có quan điểm thiên về đội Tigers, rồi để nó trên bàn của Leon trong phòng nhân viên.</p><p id="22">“Chỉ có Senoo mới dám làm thế này!”</p><p id="23">Điều đó cũng chạm đến điểm yếu của Leon, và vì vậy chiến tranh lạnh giữa họ vẫn tiếp diễn.</p><p id="24">Điều gì sẽ xảy ra khi hai đội gặp nhau lần nữa trên sân?</p><p id="25">Một số học sinh trong lớp đã tung tin đồn về một vụ thảm sát đẫm máu. Thật nực cười.</p><p id="26">Dù thế nào đi nữa, không thể phủ nhận rằng Ai-chan đang tận hưởng cuộc sống trung học theo cách riêng của mình.</p><p id="27">~~~~~</p><p id="28">Nhân tiện, kỳ nghỉ Tuần lễ Vàng rơi vào giữa tháng Năm, và một ngày sau buổi tập điền kinh, Ai-chan đến MAHO-do, ngồi xuống bàn với vẻ mặt chán nản và thở dài không ngừng.</p><p id="29">"Ai-chan, sao cậu thở dài vậy?," tôi nói với vẻ tò mò.</p><p id="30">“À, Doremi-chan… Xin lỗi, không có gì đâu.”</p><p id="31">Ai-chan lấy một ít đất sét thần kỳ và bắt đầu nặn những lá bùa may mắn.</p><p id="32">Tuy nhiên, cậu ấy lại thở dài một lần nữa.</p><p id="33">“Này Aiko! Nếu con làm bùa với tâm trạng buồn thì lá bùa sẽ không mang lại may mắn đâu! Về nhà nghỉ ngơi đi nếu tâm trạng con không tốt!”</p><p id="34">Majorika vừa mắng vừa tưới cây.</p><p id="35">“X-xin lỗi…”</p><p id="36">Ai-chan cúi đầu uể oải.</p><p id="37">“Majorika, bà không nên quát mắng người khác mà không biết lý do tại sao,” Lala nói ra điều mà tôi đang nghĩ.</p><p id="38">“Ai-chan, có chuyện gì xảy ra ở trường vậy?”</p><p id="39">“Chuyện đó không quan trọng lắm…”</p><p id="40">Nói xong, Ai-chan lấy một cuốn sổ tay học sinh từ trong túi xách dưới chân ra và đặt lên bàn.</p><p id="41">Trên bìa sổ có ghi dòng chữ “Creative Notebook” và “Yokokawa Nobuko”.</p><p id="42">“À, sổ tay của Nobuko-chan. Vậy, cuốn tiểu thuyết mới của cô ấy đã hoàn thành chưa?”</p><p id="43">Ai-chan gật đầu, nhưng vẻ mặt vẫn đầy lo lắng.</p><p id="44">“Cuốn sổ này có ý nghĩa gì vậy?” Lala hỏi khi lật từng trang sách.</p><p id="45">“Trước kỳ nghỉ Tuần lễ Vàng, cậu ấy đưa cho tớ và nhờ tớ đọc rồi đưa ra vài nhận xét.”</p><p id="46">“Hiểu rồi, giống như những gì chúng ta vẫn thường làm hồi tiểu học vậy.”</p><p id="47">“Chà… nó chẳng thú vị chút nào.”</p><p id="48">“Hả? Nhưng hồi trung học, cậu ấy và Maruyama Miho-chan là một bộ đôi “hoàn hảo”, và họ đã nhận được vô số lời khen ngợi từ các tạp chí truyện tranh shoujo, đúng không?” Tôi thốt lên, kinh ngạc.</p><p id="49">“Nobu-chan đã gửi bản sao những bộ tiểu thuyết gốc của cô ấy đến tận Osaka cho tớ, nhưng cuốn tiểu thuyết này thực sự không thú vị bằng .”</p><p id="50">Nói xong, Ai-chan đưa cuốn sổ cho tôi.</p><p id="51">“Dù sao thì Doremi-chan, cậu cũng nên đọc nó.”</p><p id="52">“Được rồi…”</p><p id="53">Tôi lấy cuốn sổ của Ai-chan.</p><p id="54"> Sáng hôm sau, tôi vừa đi vừa ngáp đến trường.</p><p id="55">Tôi đã đọc câu chuyện của Nobuko-chan mà Ai-chan đưa cho tôi, nhưng tôi đọc quá lâu nên cuối cùng không ngủ đủ giấc.</p><p id="56">Không phải vì câu chuyện quá hấp dẫn. Thực tế thì ngược lại.</p><p id="57">Như Ai-chan đã nói, nó hoàn toàn không thú vị. Tôi cứ đọc một chút rồi lại ngủ gật, và trước khi kịp nhận ra thì trời đã sáng rồi.</p><p id="58">“Fwaaahhh~”</p><p id="59">Tôi vừa ngáp vừa lau nước mắt.</p><p id="60">“Doremi-chan!”</p><p id="61">Ai-chan chạy đến từ phía sau.</p><p id="62">“Ai-chan, chào buổi sáng… Fwaaahhh~”</p><p id="63">Tôi lại ngáp một cái.</p><p id="64">“Đừng nói với tớ là cậu đã đọc truyện của Nobu-chan rồi đấy à?”</p><p id="65">“Pinpon.”</p><p id="66">Tôi lấy cuốn sổ của Nobuko-chan ra và trả lại cho Ai-chan.</p><p id="67">"Vậy, cậu nghĩ sao?"</p><p id="68">“Nó không có một chút thú vị nào. Cô ấy đã tụt một, không, hai bậc so với lúc còn hoạt động chung với Miho-chan.”</p><p id="69">“Tớ biết mà. Cái này còn tệ hơn cả những cái mà cậu ấy bắt chúng ta đọc trước khi hợp tác với Miho-chan, đúng không?”</p><p id="70">“Đúng vậy. Chú chó trung thành Doremi cũng xuất hiện trong câu chuyện này, nhưng có vẻ như nó chỉ là một phiên bản làm lại. Câu chuyện cần thêm chút mới mẻ, và những tình huống hài hước để kết thúc câu chuyện cũng hoàn toàn vắng mặt.”</p><p id="71">“Ừ, tớ cũng nghĩ vậy. Doremi-chan, tớ nên nói gì với Nobu-chan đây?”</p><p id="72">“Sẽ tốt cho Nobu-chan nếu chúng ta có thể nói thật.”</p><p id="73">“Ừm, chắc là… hơi ích kỷ một chút, nhưng tớ sẽ làm vậy.”</p><p id="74">Ai-chan khẽ thở dài rồi cất cuốn sổ vào cặp.</p><p id="75">~~~~~</p><p id="76">Hôm sau là thứ Bảy, và trời đã mưa từ sáng sớm.</p><p id="77">Tôi gập ô lại, ngước nhìn bầu trời u buồn khi rũ hết nước trong ô, rồi bước vào MAHO-do.</p><p id="78">“Chào buổi sáng, Doremi-chan.”</p><p id="79">Hazuki-chan đã ở đây rồi, đang uống trà với Majorika và Lala tại bàn.</p><p id="80">“Doremi, lại đây uống trà đi,” Majorika nói khi cho thêm lá trà mới vào ấm.</p><p id="81">"Cảm ơn."</p><p id="82">Tôi đặt chiếc ô vào giá đỡ rồi tiến về phía mọi người.</p><p id="83">“Hôm nay trời lạnh. Lại đây, uống cái này cho ấm lên nào.”</p><p id="84">Tôi nhận được một cốc trà sữa Royal Milk Tea từ Majorika, và ngay khi chuẩn bị nhấp một ngụm, chuông cửa ở lối vào reo lên inh ỏi.</p><p id="85">Tôi vô tình làm đổ trà.</p><p id="86">“Nóng bỏng—, nóng bỏng, nóng bỏng!”</p><p id="87">Ai-chan, người vừa bước vào cửa hàng, đã rất giật mình vì tiếng hét của tôi.</p><p id="88">“Ai-chan, đừng làm hết hồn thế này vào sáng sớm chứ. Giờ thì tớ làm đổ trà rồi.”</p><p id="89">“À, xin lỗi, xin lỗi. Tớ đang không vui nên đã trút giận lên cánh cửa.”</p><p id="90">"Chuyện gì đã xảy ra thế?"</p><p id="91">“Ừm, chuyện là…”</p><p id="92">"Dù sao thì, uống trà đi."</p><p id="93">Ai-chan gật đầu trước lời đề nghị của Lala.</p><p id="94">"Vậy cho em một tách."</p><p id="95">Tiến đến bàn, cậu ấy ngồi phịch xuống ghế.</p><p id="96">Majorika rót thêm một cốc mới, Ai-chan uống cạn một hơi, nhưng tâm trạng của cô ấy dường như không khá hơn.</p><p id="97">Một ý tưởng chợt nảy ra trong đầu tôi.</p><p id="98">“Đừng nói với tớ là cậu vừa cãi nhau với Nobuko-chan đấy nhé?”</p><p id="99">Ai-chan gật đầu không nói gì.</p><p id="100">~~~~~</p><p id="101">Trước khi đi tập luyện điền kinh, Ai-chan đã trả lại cuốn sổ cho Nobuko-chan khi cậu ấy đang dọn dẹp lớp học sau giờ học hôm qua. Sau đó, cô ấy thẳng thừng nói với Nobuko-chan rằng câu chuyện đó không thú vị.</p><p id="102">Nghe vậy, Nobuko-chan đã đáp lại một cách bất ngờ.</p><p id="103">“Tôi biết mà.”</p><p id="104">“Ý cậu là sao, cậu biết rồi à?” Ai-chan lập tức hỏi.</p><p id="105">“Uk, tớ biết chẳng thú vị chút nào,” Nobuko-chan đáp lại một cách thờ ơ, điều này khiến Ai-chan hơi khó chịu.</p><p id="106">“Vậy thì hãy viết lại cho đến khi nó trở nên thú vị hơn. Đó chẳng phải là điều hợp lý cần làm nếu cậu muốn mọi người đọc nó sao?”</p><p id="107">“Mình đang bị bí ý tưởng. Có lẽ mình nên ngừng viết truyện,” Nobuko-chan nói một cách uể oải, không trả lời câu hỏi của Ai-chan.</p><p id="108">Tuy nhiên, điều đó đã chạm đúng vào tâm lý của Ai-chan.</p><p id="109">“Cậu đang nói cái gì vậy?! Đừng có nói đến chuyện bỏ cuộc dễ dàng như thế!”</p><p id="110">Lúc này, Nobuko-chan mới là người hết kiên nhẫn.</p><p id="111">“Cậu không hiểu được nỗi khổ của một nhà văn đâu, Ai-chan!”</p><p id="112">“Đúng vậy, tớ không biết! Tớ cũng không ngờ cậu lại kém cỏi đến thế, Nobu-chan!”</p><p id="113">Sau đó, hai người rời đi.</p><p id="114">~~~~~</p><p id="115">“Tớ nghĩ mình đã nói quá, nhưng lúc đó thực sự quá bực bội…”</p><p id="116">Ai-chan khẽ đấm vào đầu mình.</p><p id="117">“Tớ hiểu cảm giác của cậu, Ai-chan. Cậu chỉ muốn Nobuko-chan tiếp tục viết thôi, đúng không? Đó là lý do cậu lại gay gắt đến như vậy.”</p><p id="118">Ai-chan gật đầu đồng ý.</p><p id="119">“Ừm…”</p><p id="120">Hazuki-chan, người vẫn luôn im lặng lắng nghe cuộc trò chuyện của chúng tôi, đã lên tiếng.</p><p id="121">"Sao vậy, Hazuki-chan!"</p><p id="122">“Tớ chỉ đang tự hỏi liệu sự sa sút phong độ của Nobuko-chan có liên quan gì đến mối quan hệ của cậu ấy với Maruyama Miho-chan không.”</p><p id="123">Quả là Hazuki-chan! Đó là một suy luận sắc bén.</p><p id="124">“Đúng vậy, hai người họ cũng cư xử khá là gượng gạo trong buổi họp mặt tháng trước,” tôi nói.</p><p id="125">“Ồ, vậy sao? Nhưng hồi lớp 5 và lớp 6, họ đã rất vui khi cùng nhau vẽ truyện tranh…” Ai-chan nói.</p><p id="126">“Họ thường xuyên đi chơi cùng nhau từ hồi cấp, và gửi tác phẩm của mình cho các công ty truyện tranh dưới bút danh 'Misora Komachi',” tôi nói.</p><p id="127">“Nhưng giờ họ đang học ở hai trường cấp 3 khác nhau, và họ thậm chí còn không nói chuyện với nhau một lời trong suốt buổi tiệc sau đó,” Hazuki-chan nói thêm.</p><p id="128">“Tớ hiểu rồi. Vậy sao con không đi hỏi cô bé Miho đó xem sao?” Majorika đề nghị.</p><p id="129">“Chị cũng nghĩ vậy,” Lala đồng ý.</p><p id="130">Vừa lúc Majorika và Lala đang nói chuyện, chuông cửa reo nhẹ và một cô gái nhỏ nhắn bước vào.</p><p id="131">C-Cái gì!? Chính là Maruyama Miho-chan.</p><p id="132">Đúng lúc chúng ta đang nói về cậu ấy!</p><p id="133">“À, Doremi-chan! Tớ cứ tưởng là các cậu đang điều hành MAHO-do chứ.”</p><p id="134">Trong giây lát, chúng tôi đều chết lặng.</p><p id="135">“Này mấy đứa, có khách đến kìa! Mau phục vụ đi!”</p><p id="136">Giọng nói của Majorika đã kéo chúng tôi trở lại thực tại, và chúng tôi vội vàng chạy đến chỗ Miho-chan.</p><p id="137">“À, Miho-chan, chào mừng!”</p><p id="138">“Một tấm áp phích quảng cáo cửa hàng được dán trên cột điện thoại gần đó, nên tớ đã đến xem…”</p><p id="139">“Ồ, mình hiểu rồi. Bọn tớ mới nói chuyện về Miho-chan, nên khi cậu vào thì chúng mình khá bất ngờ,” Ai-chan giải thích.</p><p id="140">“Thật vậy sao? Vậy lần này MAHO-do bán cái gì vậy?”</p><p id="141">“Những món đồ ma thuật. Mặt dây chuyền biến ước mơ thành hiện thực, trâm cài mang lại hạnh phúc, tất cả đều rất hiệu quả,” Hazuki-chan giải thích từng món đồ.</p><p id="142">Đột nhiên, Miho-chan xen vào.</p><p id="143">“Các cậu có vật phẩm ma thuật nào có thể mang lại bất hạnh cho người mình ghét không?”</p><p id="144">“—!”</p><p id="145">Chúng tôi nhìn nhau đầy kinh ngạc.</p><p id="146">“Bọn mình không bao giờ bán những thứ như vậy!”</p><p id="147">“Miho-chan, người mà cậu ghét… Có thể nào là… Yokokawa Nobuko-chan?”</p><p id="148">“—!”</p><p id="149">Lần này, chính Miho-chan mới là người bị sốc, mở to mắt. Tuy nhiên, cô ấy lập tức lấy lại bình tĩnh.</p><p id="150">“Mình chỉ đùa thôi. Có lẽ tớ nên mua một món đồ có thể biến giấc mơ thành hiện thực.”</p><p id="151">“Vậy sợi dây chuyền này có vẻ được đó. Nó có giá 380 yên.”</p><p id="152">Trong khi tôi nhận tiền từ Miho-chan và trả lại tiền thừa, Ai-chan gói mặt dây chuyền lại và đưa cho Miho-chan.</p><p id="153">“Cảm ơn quý khách đã ủng hộ,” Ai-chan nói với một nụ cười gượng gạo.</p><p id="154">Ngay lúc đó, Hazuki-chan hỏi một cách dứt khoát:</p><p id="155">“Này, Miho-chan. Tại sao cậu lại chọn học tại Học viện Aogaoka thay vì trường Trung học Misora?”</p><p id="156">“Vì Aogaoka có câu lạc bộ nghiên cứu manga. Họ cũng đào tạo ra những họa sĩ truyện tranh chuyên nghiệp.”</p><p id="157">“Ồ, tôi hiểu rồi. Vậy sao cậu không mời Nobuko-chan ?”</p><p id="158">Câu hỏi này dường như lại một lần nữa khiến Miho-chan phải suy nghĩ.</p><p id="159">“—!”</p><p id="160">Miho-chan tỏ ra kinh ngạc, nhưng lần này cô giữ bình tĩnh nữa mà thể hiện vẻ mặt không vui.</p><p id="161">“Hazuki-chan, tớ đã dừng hợp tác với Nobuko-chan rồi! Đừng nhắc đến tên cậu ấy trước mặt tớ nữa nhé!”</p><p id="162">“Miho-chan…?!”</p><p id="163">Hazuki-chan không thể hỏi thêm gì nữa và im lặng.</p><p id="164">"Tớ rất tiếc, nhưng tớ phải đi đây."</p><p id="165">Miho-chan lấy tiền thừa từ tay tôi, đang đứng ngây người, rồi bỏ đi như thể đang chạy trốn.</p><p id="166">“Miho-chan!”</p><p id="167">Trong cơn hoảng loạn, chúng tôi chạy ra ngoài đuổi theo cô ấy.</p><p id="168">Tuy nhiên, chúng tôi chỉ có thể đứng nhìn bóng lưng Miho-chan khuất dần trong màn mưa mờ ảo.</p><p id="169">Trở lại cửa hàng, chúng tôi vừa nhào nặn đất sét ma thuật vừa thảo luận.</p><p id="170">“Tớ không ngờ mối quan hệ của họ lại xấu đi nhiều như vậy,” tôi nói.</p><p id="171">"Có phải vì họ học ở hai trường trung học khác nhau không?" Hazuki-chan trầm ngâm.</p><p id="172">"Hiện tại chúng ta không thể nói gì thêm," Ai-chan nói.</p><p id="173">“Và họ đã từng rất thân thiết…”</p><p id="174">“Có cách nào giúp hồi sinh bộ đôi đó không?”</p><p id="175">“Trước tiên chúng ta cần tìm hiểu nguyên nhân dẫn đến cuộc cãi vã của họ. Hãy hỏi cả hai người xem sao.”</p><p id="176">“Cậu nói đúng. Doremi-chan, tớ vừa cãi nhau với Nobu-chan xong, cậu có thể đi nói chuyện với cậu ấy được không?” Ai-chan nói.</p><p id="177">“Được thôi,” tôi đồng ý.</p><p id="178">“Còn tớ và Ai-chan sẽ nói chuyện với Miho-chan,” Hazuki-chan kết luận.</p><p id="179">“Nếu chúng ta có thể dùng phép thuật, thì đã có thể dễ dàng tìm ra nguyên nhân, và việc giúp họ làm lành cũng nhanh hơn nhiều,” tôi tự nhủ.</p><p id="180">“Doremi-chan!”</p><p id="181">Hazuki-chan và Ai-chan lườm tôi.</p><p id="182">“Haha, tớ chỉ đùa thôi,” tôi cười và cố che giấu sự lỡ lời của mình.</p><p id="183">“Mấy đứa  không thể trở thành phù thủy, nhưng vẫn có thể trở thành phù thủy học việc,” Majorika  nói .</p><p id="184">“Những đóng góp mà mấy em đã làm cho thế giới phù thủy là rất nhiều, vì vậy chị nghĩ mấy em vẫn có thể trở thành phù thủy học việc nếu chúng ta yêu cầu Nữ hoàng,” Lala nói thêm.</p><p id="185">“Vậy, ta có nên đi hỏi Nữ hoàng không?…” Majorika đề nghị.</p><p id="186">Tôi muốn nói "Điều đó sẽ giúp ích rất nhiều...", nhưng tôi đã nuốt lời xuống.</p><p id="187">“Tụi con đã quyết định sống bằng chính nỗ lực của mình mà không cần phép thuật. Chắc chắn tụi con có thể tự mình làm được điều gì đó. Tụi con sẽ ổn thôi ngay cả khi không trở thành phù thủy,” tôi trả lời đầy quyết tâm.</p><p id="188">Hazuki-chan và Ai-chan gật đầu trước lời tôi nói.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24441-ojamajo-doremi-16-20/c280995-chuong-02-maho-do-chinh-thuc-khai-chuong-phan-4" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24441-ojamajo-doremi-16-20" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24441-ojamajo-doremi-16-20" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'cUBvaiTccPlykjTPl99yZ7VKIBLZqaIbIyvELhap';
        var comment_type = 'chapter';
        var comment_typeid = '281688';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'cUBvaiTccPlykjTPl99yZ7VKIBLZqaIbIyvELhap';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24441');
    chapter_id = parseInt('281688');

    readingObject = {
        series_id: series_id,
        series_title: 'Ojamajo Doremi 16-20',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="cUBvaiTccPlykjTPl99yZ7VKIBLZqaIbIyvELhap" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
