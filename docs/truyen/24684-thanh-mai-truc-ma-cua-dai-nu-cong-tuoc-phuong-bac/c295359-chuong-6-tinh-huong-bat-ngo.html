<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Thanh Mai Trúc Mã Của Nữ Đại Công Tước Phương Bắc - Chương 6: Tình Huống Bất Ngờ - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Tiểu thư đài các vốn là bạn thanh mai trúc mã của tôi dạo này cứ hay gắt gỏng. Nhưng mà, trêu chọc cô ấy thú vị lắm.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="RGmsWL1O7Put8Onz5cmw4FFAmVbZ8e3Fb5zzB6Ff">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295359-chuong-6-tinh-huong-bat-ngo">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24684-b2182685-87c0-4ade-af64-bb9d4031927e.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295031-chuong-5-tieu-thu-to-mo"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295359-chuong-6-tinh-huong-bat-ngo" style="background: url('https://i.hako.vn/ln/series/covers/s24684-b2182685-87c0-4ade-af64-bb9d4031927e.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac">Thanh Mai Trúc Mã Của Nữ...</a></h5>
                    <small><i class="fas fa-pen"></i>bamioneunjam</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/t35818-web-novel">Web Novel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c292060-loi-mo-dau">
                                                                        Lời Mở Đầu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c292062-chuong-1-day-la-dau-nay-la-ai">
                                                                        Chương 1: Đây Là Đâu? Này Là Ai?
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c292295-chuong-2-toi-tro-thanh-ban-cua-mot-nguoi-vo-cung-cao-quy">
                                                                        Chương 2: Tôi Trở Thành Bạn Của Một Người Vô Cùng Cao Quý
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c293131-chuong-3-cach-tu-duy-khac-biet-cua-tieu-thu">
                                                                        Chương 3: Cách Tư Duy Khác Biệt Của Tiểu Thư
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c293785-chuong-4-tieu-thu-khong-he-thanh-that">
                                                                        Chương 4: Tiểu Thư Không Hề Thành Thật
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295031-chuong-5-tieu-thu-to-mo">
                                                                        Chương 5: Tiểu Thư Tò Mò
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295359-chuong-6-tinh-huong-bat-ngo">
                                                                        Chương 6: Tình Huống Bất Ngờ
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 6: Tình Huống Bất Ngờ</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295359-chuong-6-tinh-huong-bat-ngo#chapter-comments" style="text-decoration: underline">1 Bình luận</a> -
                        Độ dài: 2,525 từ - Cập nhật: 
                        <time class="topic-time timeago" title="22-01-2026 16:25:03" datetime="2026-01-22T16:25:03+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 6: Tình Huống Bất Ngờ</p>
                    <p id="1">Tôi đã không lường trước được sự tò mò của một đứa trẻ ở lứa tuổi đó có thể đáng sợ đến mức nào. </p><p id="2">Edgar thầm hối hận về sai lầm của mình khi đuổi theo Ariel.</p><p id="3">“Ariel! Nguy hiểm lắm!”</p><p id="4">“Hừ, Ed, nếu cậu sợ thì cứ ở đó đi! Tớ sẽ tự đi xem rồi quay lại!”</p><p id="5">‘Cậu phải biết suy nghĩ chút đi chứ.’</p><p id="6">Nếu có chuyện gì xảy ra, anh sẽ chẳng còn mặt mũi nào mà nhìn phu nhân Helene. </p><p id="7">Ngay cả khi thú dữ xuất hiện, trong trường hợp xấu nhất, anh có thể giúp Ariel thoát thân trước rồi mới tự mình chạy trốn. Khả năng đó là có thể vì thể chất của anh chắc chắn vượt trội hơn cô bé.</p><p id="8">“Dù sao thì lũ thú dữ như sói hay lợn rừng cũng hoạt động về đêm thôi mà.”</p><p id="9">“Thế nghĩa là bây giờ an toàn, vậy thì ổn rồi! Mau đuổi theo tớ đi!”</p><p id="10">Điên rồ thật. </p><p id="11">Đây không còn là tích cực nữa, mà là lạc quan đến mức mù quáng.</p><p id="12">Lỡ thốt ra lời không nên nói, Edgar cắn môi và tăng tốc hết mức có thể. Điều an ủi duy nhất là dù khoảng cách có hơi xa, anh vẫn có thể nhanh chóng bắt kịp cô nhờ sự chênh lệch về sải chân.</p><p id="13">‘Cứ đà này, mình còn chẳng biết là sẽ đi bao xa nữa.’</p><p id="14">Mới lúc nãy thôi, họ còn có thể nhìn lại con đường vừa đi, nhưng khi càng dấn sâu vào núi, ngay cả việc đó cũng trở nên khó khăn. </p><p id="15">Tuy nhiên, cũng may là vì những con vật cô quan tâm hoạt động về đêm, nên khả năng chạm trán chúng giữa thanh thiên bạch nhật là rất thấp.</p><p id="16">Cuối cùng, bước chân vội vã của họ cũng bắt đầu chậm lại. </p><p id="17">Dù một cô bé mười tuổi có dồi dào năng lượng đến đâu, cô cũng không thể duy trì việc leo núi quá lâu. </p><p id="18">Hơn nữa, vì trang phục không phù hợp để leo trèo, chuyện kiệt sức là điều tất yếu.</p><p id="19">Hộc- Hộc-</p><p id="20">Ariel ngồi bệt xuống một gốc cây cụt, thở dốc. </p><p id="21">Có vẻ cô đã quá cố chấp để tỏ ra mạnh mẽ. </p><p id="22">Edgar cũng đang thở hổn hển, nhưng không đến mức như cô. Việc rèn luyện thường xuyên đã phát huy tác dụng vào những lúc thế này.</p><p id="23">‘Không biết quanh đây có nước không nhỉ.’</p><p id="24">Cơn khát tự nhiên ập đến khi họ chạy quanh núi và đổ mồ hôi đầm đìa. </p><p id="25">Bình thường anh sẽ mang theo túi da đựng nước, nhưng lịch trình hôm nay quyết định quá đột ngột khiến anh không kịp chuẩn bị. </p><p id="26">Anh vểnh tai nghe ngóng xem có tiếng nước chảy gần đó không, nhưng đáng tiếc là không có gì cả.</p><p id="27">“Ơ? Ed, nhìn đằng kia kìa!”</p><p id="28">“Lại gì nữa đây?”</p><p id="29">“Đằng kia kìa!”</p><p id="30">Trong khi anh còn đang cố điều hòa nhịp thở, vị tiểu thư liều lĩnh lại hào hứng chỉ tay về phía nào đó. </p><p id="31">Với giọng điệu có chút bực dọc, anh nhìn theo hướng tay cô. Đằng sau những tán cây rậm rạp, hiện ra thứ trông giống như một hang động.</p><p id="32">“Tớ mới chỉ thấy hang động trong sách thôi! Chúng ta vào xem đi!”</p><p id="33">“Sì... Được rồi, đi thôi.”</p><p id="34">Chẳng ích gì khi cố ngăn cản vị tiểu thư bướng bỉnh này; cô ấy sẽ chẳng thèm nghe đâu. </p><p id="35">Vì nó ngay trước mặt, vào đó nghỉ ngơi thoải mái chút cũng tốt. </p><p id="36">Với ý nghĩ đó, anh đứng dậy và bước đi thong thả.</p><p id="37">“Gì đây? Tớ cứ tưởng cậu sẽ chạy lên trước chứ.”</p><p id="38">“Thì, chúng ta đi cùng nhau mà, bỏ cậu lại một mình thì buồn lắm Ed.”</p><p id="39">“À, ừ…”</p><p id="40">Sự quan tâm sâu sắc của cô làm anh muốn rơi nước mắt. </p><p id="41">Sao lúc nãy cô không thể hiểu chuyện và biết điều như thế này nhỉ?</p><p id="42">‘Có lẽ đây là một chiến thuật tâm lý tinh vi.’</p><p id="43">Liệu cô có đang cố tình làm chuyện xấu rồi sau đó mới tỏ ra tử tế để khiến sự quan tâm dù là nhỏ nhất cũng trở nên đáng trân trọng gấp bội không? </p><p id="44">Sẽ có người nói thật nực cười khi nghĩ như vậy về một đứa trẻ mười tuổi, nhưng với người như cô, chuyện đó dường như hoàn toàn có thể.</p><p id="45">‘Không biết đó có phải một phần của môn đế quốc học mà nhà Đại công tước dạy không nữa.’</p><p id="46">Dù sao thì, anh cũng nên cảm ơn vì đã được nghỉ ngơi thoải mái dù chỉ trong chốc lát. </p><p id="47">Khi họ tiến gần đến hang động, một thứ gì đó lạnh ngắt bỗng rơi trúng đầu anh.</p><p id="48">Phân chim hay lá rụng? </p><p id="49">Khi anh đưa tay lên kiểm tra, anh thấy tóc mình chỗ đó đã ướt đẫm. </p><p id="50">Không thể nào.</p><p id="51">Xoạt—</p><p id="52">“Chết tiệt.”</p><p id="53">“Hả? Cậu vừa nói gì cơ?”</p><p id="54">“Không có gì, không có gì. Vào trú mưa trước đã.”</p><p id="55">“Được thôi!”</p><p id="56">Chỉ là một cơn mưa rào thoáng qua thôi sao? </p><p id="57">Những giọt mưa đột ngột trút xuống, cả hai nhanh chóng chạy tót vào trong hang.</p><p id="58">Tộp. Tộp.</p><p id="59">Vào đến hang, Edgar rũ nước trên quần áo. </p><p id="60">Nhờ những tán cây che chắn bớt, quần áo anh không quá ướt.</p><p id="61">‘Ít nhất thì cũng còn may.’</p><p id="62">Nếu quần áo sũng nước, anh khó lòng tránh khỏi tình trạng hạ thân nhiệt. </p><p id="63">Tuy nhiên, nỗi lo về việc bao giờ mưa mới tạnh vẫn còn đó. </p><p id="64">Dù thế nào đi nữa, họ cũng phải đợi mưa tạnh mới có thể trở về dinh thự. Nếu đây không phải mưa bóng mây mà kéo dài đến đêm thì...</p><p id="65">“E-Ed.”</p><p id="66">“Sao thế?”</p><p id="67">Giọng nói run rẩy của Ariel cắt ngang dòng suy nghĩ về những kịch bản xấu nhất của anh. </p><p id="68">Khi Edgar quay đầu lại, anh thấy Ariel đang đứng đó, vòng tay ôm lấy mình và run bần bật.</p><p id="69">“Tớ... l-lạnh quá…”</p><p id="70">“...!”</p><p id="71">Anh cứ ngỡ mình vẫn ổn vì không bị ướt nhiều, nhưng có vẻ Ariel không được may mắn như vậy. </p><p id="72">Dù thời tiết ở đây ôn hòa hơn các vùng phương Bắc khác, nhưng về cơ bản đây vẫn là vùng khí hậu lạnh. </p><p id="73">Mặc quần áo ướt ở một nơi như thế này chẳng khác nào tự sát.</p><p id="74">“Ariel, cởi áo khoác ngoài ra trước đi. Rồi mặc cái này vào.”</p><p id="75">“Còn c-cậu thì sao...?”</p><p id="76">“Cứ mặc vào đi đừng cãi nữa. Tớ sẽ quay mặt đi.”</p><p id="77">May mắn thay, chiếc áo khoác Edgar đang mặc khá dày. </p><p id="78">Để chắc chắn, anh rũ hết nước còn sót lại rồi đưa cho Ariel, sau đó quay lưng lại với cô. </p><p id="79">Dù cảm thấy cái lạnh thấu xương khi vừa cởi bỏ một lớp áo, anh cũng không còn lựa chọn nào khác.</p><p id="80">Sau khi cởi bỏ chiếc áo sũng nước và khoác lên mình chiếc áo của Edgar, Ariel bước đến một tảng đá bên trong hang.</p><p id="81">“Á...!”</p><p id="82">Một tiếng rên rỉ đau đớn khẽ thoát ra từ đôi môi cô. </p><p id="83">Khi Edgar hỏi có chuyện gì, cô thú nhận rằng mình đã bị trẹo chân.</p><p id="84">“Bị từ lúc nào thế? Sao cậu không nói gì?”</p><p id="85">“Thì... tớ nghĩ nếu nói thật, cậu sẽ bảo không được đi tiếp nữa…”</p><p id="86">“Hàaa.”</p><p id="87">Cô ấy hoàn toàn không biết lý lẽ là gì. </p><p id="88">Tính theo thời gian, chắc hẳn là lúc họ tạm dừng chân lúc nãy. </p><p id="89">Lúc đầu anh chỉ nghĩ cô bị hụt hơi, hóa ra là cô bị trẹo chân thật. </p><p id="90">Đúng là họa vô đơn chí.</p><p id="91">“Tớ xin lỗi, Ed... Cậu đang giận hả?”</p><p id="92">“Sao mà không giận cho được?”</p><p id="93">Trước giọng điệu gay gắt của anh, Ariel cúi gầm mặt buồn bã. </p><p id="94">Thấy vậy, Edgar lại thở dài và lắc đầu.</p><p id="95">‘Mình đang làm cái gì mà lại đi cáu với một đứa trẻ thế này?’</p><p id="96">Tất nhiên là anh giận. Nhưng điều đó bao gồm cả sự tự trách. </p><p id="97">Lẽ ra anh phải ngăn cô sớm hơn. Có lẽ trong tình huống đó, nếu anh dọa sẽ quay về, Ariel có thể đã giả vờ nhượng bộ mà đi theo. </p><p id="98">Sự chủ quan cho rằng mình có thể xử lý mọi tình huống đã gây ra mớ hỗn độn này.</p><p id="99">“Đợi mưa tạnh đã. Giá mà đốt được lửa thì tốt, nhưng chắc là không được rồi.”</p><p id="100">“Ừm!”</p><p id="101">Họ có thể nhóm lửa nếu tìm được củi không quá ướt, nhưng trong tình cảnh này, ngay cả việc chạy ra ngoài trời mưa cũng rất nguy hiểm. </p><p id="102">Nếu họ bị ướt sũng trong lúc cố gắng rồi lại không nhóm được lửa, tình hình sẽ chỉ tệ thêm. </p><p id="103">Để vượt qua tình cảnh này, anh cần giữ bình tĩnh. Suy cho cùng, anh là người duy nhất Ariel có thể dựa vào lúc này.</p><p id="104">‘Ít nhất thì cũng may là có cái hang này.’</p><p id="105">Cái hang mà Ariel tìm thấy đang đóng vai trò cực kỳ quan trọng. </p><p id="106">Nếu họ bị kẹt dưới mưa trong tình trạng trước đó, mọi chuyện còn nghiêm trọng hơn nhiều. </p><p id="107">Nhưng tại sao lại có một cái hang ở nơi như thế này? Edgar nhìn quanh nhưng không thấy gì bất thường. </p><p id="108">Có một mùi hôi lạ và những thứ trông giống như rác rưởi, nhưng không có gì đặc biệt đáng chú ý.</p><p id="109">Một lúc sau, Edgar bắt đầu cảm thấy cơ thể mình cũng run lên. </p><p id="110">Dù đã cố gắng không để lộ ra vì sợ Ariel lo lắng, nhưng đôi chân và bả vai anh vẫn rung bần bật một cách tự nhiên.</p><p id="111">Rắc. Rắc—rắc.</p><p id="112">Đúng lúc đó. </p><p id="113">Edgar vểnh tai trước một âm thanh lạ, nghe rất rõ dù trong tiếng mưa tầm tã. </p><p id="114">Nghe giống như tiếng cành cây bị bẻ gãy với số lượng lớn. Và nếu lắng nghe kỹ hơn, anh còn nghe thấy thứ giống như tiếng gầm gừ của thú vật.</p><p id="115">‘...Không thể nào.’</p><p id="116">Khi những mảnh ghép đột nhiên khớp lại trong đầu, Edgar sải bước tới chỗ Ariel và nắm lấy cổ tay cô.</p><p id="117">“Ed, có chuyện gì vậy?”</p><p id="118">“Chúng ta phải rời khỏi đây ngay. Đi theo tớ, Ariel.”</p><p id="119">“Đ-được.”</p><p id="120">Dù không hiểu tại sao, nhưng cô có thể nhận thấy qua nét mặt nghiêm trọng của anh rằng có gì đó không ổn, nên Ariel đi theo mà không phản đối. </p><p id="121">Và tại cửa hang nơi cả hai đang hướng tới...</p><p id="122">Khịt. Khịt.</p><p id="123">‘Đúng là không cái dại nào bằng cái dại nào.’</p><p id="124">Đúng như Edgar dự đoán, một con lợn rừng khổng lồ đang nhìn chằm chằm vào họ với đôi mắt hung dữ. </p><p id="125">Quả nhiên, đây chính là hang ổ của nó. </p><p id="126">Mùi hăng nồng lúc nãy và đống rác rưởi vương vãi trong góc hang chắc chắn là vì đây là nơi nó ăn uống.</p><p id="127">Tốt nhất là nó không lao vào, nhưng nhìn tình hình thì khó lòng thoát được. </p><p id="128">Hơi thở của con vật, vốn khá lớn cho đến tận lúc nãy, bỗng im bặt. </p><p id="129">Chắc hẳn nó coi họ là những kẻ xâm lược đã đột nhập vào lãnh địa yên bình của mình và đang tìm cơ hội tấn công.</p><p id="130">Khịt!</p><p id="131">“Ariel!”</p><p id="132">Khi con quái vật đang nín thở bỗng lao tới dữ dội, Edgar dùng lực kéo mạnh Ariel về phía mình. </p><p id="133">Vì không tính đến trọng tâm, cả hai lăn lộn trên nền rừng, nhưng không còn thời gian để lo lắng về điều đó nữa.</p><p id="134">‘Phải làm sao đây?’</p><p id="135">Anh có mang theo dao. </p><p id="136">Nhưng liệu anh có thể hạ gục con lợn rừng với kỹ năng hiện tại không? </p><p id="137">Ngay cả khi định chạy trốn, thật đáng nghi ngờ là họ có thể chạy nhanh đến mức nào với cái chân bị thương của Ariel.</p><p id="138">“Ariel, đợi một chút.”</p><p id="139">“Cậu định làm gì thế...?”</p><p id="140">“Không sao đâu. Đừng lo và cứ trú mưa đi.”</p><p id="141">May mắn thay, cơn mưa đã ngớt hơn so với lúc nãy. Cứ đà này, nếu họ trốn trong những tán cây rậm rạp, chắc có thể tránh được nó ở mức độ nào đó. </p><p id="142">Sau khi trấn an Ariel, Edgar cẩn thận nắm lấy con dao bên hông bằng tay phải. </p><p id="143">Nếu anh cử động trước, con lợn rừng tự nhiên sẽ chuyển ánh nhìn khỏi cô bé. Khi đó, nếu anh có thể bằng cách nào đó nắm bắt lấy dù chỉ một khoảnh khắc...</p><p id="144">Vút.</p><p id="145">Khi Edgar cố tình đứng dậy gây tiếng động lớn, con lợn rừng gầm gừ và đuổi theo anh. </p><p id="146">Thêm một chút nữa, chỉ một chút nữa thôi. </p><p id="147">Ngay cả khi con lợn đang lao tới ngày một gần, Edgar vẫn không thèm né tránh trong một hồi lâu. Cuối cùng, khi khoảnh khắc anh mong đợi đã tới, anh mở to mắt.</p><p id="148">Phập.</p><p id="149">Gừ gừ khịt!</p><p id="150">Anh nhắm vào mắt nó. </p><p id="151">Nếu đâm trượt vào lớp da dày, anh có thể chỉ làm nó nổi điên hơn thôi. Đây là cách duy nhất để ngăn nó đuổi theo ngay lập tức, hoặc ít nhất là để đe dọa nó. </p><p id="152">Khi con lợn đang quằn quại trong đau đớn vì con dao, Edgar để nguyên con dao ở đó mà không rút ra và chạy về phía Ariel.</p><p id="153">“Ariel!”</p><p id="154">Anh quỳ một gối xuống và yêu cầu cô leo lên lưng mình ngay lập tức. </p><p id="155">Ariel phản đối bảo chuyện đó thật nực cười, nhưng khi anh kiên quyết khẳng định và lặp lại yêu cầu đó, cô đành miễn cưỡng leo lên.</p><p id="156">“Hộc, hộc…”</p><p id="157">Sức lực của anh, vốn đã giảm sút vì run rẩy trong cái lạnh, giờ đã chạm đến giới hạn. </p><p id="158">Thành thật mà nói, việc cõng Ariel xuống núi ngay từ đầu đã là một hành động liều lĩnh. </p><p id="159">Dù anh có rèn luyện cơ thể đến đâu, thì vẫn có giới hạn cho những gì cơ thể đang tuổi lớn có thể chịu đựng được.</p><p id="160">‘Thì đã sao chứ?’</p><p id="161">Nhưng Edgar vẫn chạy. </p><p id="162">Anh suýt trượt chân trên thảm cỏ đẫm nước mưa nhưng vẫn cố đứng vững. </p><p id="163">Khi hơi thở đã nghẹn lại nơi cổ họng và tầm nhìn bắt đầu nhòe đi, anh cắn chặt môi, cố gắng duy trì ý thức vượt qua nỗi đau.</p><p id="164">“—Cậu chủ! Tiểu thư!”</p><p id="165">“Hai người có ở đó không? Làm ơn trả lời nếu nghe thấy chúng tôi!”</p><p id="166">Đúng lúc đó. </p><p id="167">Khi hy vọng chạm đến tai Edgar. </p><p id="168">Phía sau tầm nhìn nhòe nhoẹt, anh thấy một ánh sáng trắng. Và phía sau nó, hai người đàn ông vạm vỡ đang tuyệt vọng gọi tên họ.</p><p id="169">“Chúng tôi ở đây! Ở đằng này!”</p><p id="170">Tiếng kêu tuyệt vọng của Ariel xuyên qua màn mưa và truyền đến tai họ. </p><p id="171">Cuối cùng cũng phát hiện ra hai người, những người lính lao tới như những mũi tên.</p><p id="172">‘Ổn rồi.’</p><p id="173">Ý nghĩ duy nhất đó trở thành ngòi nổ khiến Edgar buông bỏ sợi dây căng thẳng mà anh đã cố gắng nắm giữ bấy lâu nay, và...</p><p id="174">Thịch.</p><p id="175">Với ký ức cuối cùng đó, Edgar mất ý thức.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295031-chuong-5-tieu-thu-to-mo" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(1)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">1 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3174624"
    class="ln-comment-item mt-3 clear"
    data-comment="3174624" 
    data-parent="3174624" 
    data-type="chapter" 
    data-typeid="295359">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.docln.net/lightnovel/users/ua111922-c2614ab6-2ecb-4e34-8973-e32472ebbd89.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/111922">main hentai</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Xin link raw với
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24684-thanh-mai-truc-ma-cua-dai-nu-cong-tuoc-phuong-bac/c295359-chuong-6-tinh-huong-bat-ngo?comment_id=3174624#ln-comment-3174624"
                            class="text-slate-500">
                            <time class="timeago" title="22-01-2026 16:31:20"
                                datetime="2026-01-22T16:31:20+07:00">
                                22-01-2026 16:31:20
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'RGmsWL1O7Put8Onz5cmw4FFAmVbZ8e3Fb5zzB6Ff';
        var comment_type = 'chapter';
        var comment_typeid = '295359';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'RGmsWL1O7Put8Onz5cmw4FFAmVbZ8e3Fb5zzB6Ff';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24684');
    chapter_id = parseInt('295359');

    readingObject = {
        series_id: series_id,
        series_title: 'Thanh Mai Trúc Mã Của Nữ Đại Công Tước Phương Bắc',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="RGmsWL1O7Put8Onz5cmw4FFAmVbZ8e3Fb5zzB6Ff" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
