<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc I Was Caught up in a Hero Summoning, but That World Is at Peace - 322 - Ngoại Truyện Valentine: ~~ Alice &amp; Fate ~~ - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Bỗng dưng xuất hiện ở thế giới khác, hình như tôi đã bị cuốn vô một đợt triệu hồi Anh hùng. Tất nhiên, tôi không phải là Anh hùng, mà là một người khác... và trong lúc thận trọng lẫn lo lắng về những tiến triển có phần rập khuôn...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="hkvoG1k7uwkrlKzc9JUbOt5FoaxRyKk1qqWWueRK">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s20324-716bc9c2-5f02-4826-9f1d-2cee14a4ca4b.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c161982-321-ngoai-truyen-valentine-lunamaria-noir"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162357-323-ngoai-truyen-valentine-lilia-sieglinde"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate" style="background: url('https://i.hako.vn/ln/series/covers/s20324-716bc9c2-5f02-4826-9f1d-2cee14a4ca4b.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace">I Was Caught up in a Hero...</a></h5>
                    <small><i class="fas fa-pen"></i>Toudai</small>
                    <small><i class="fas fa-paint-brush"></i>Ochau</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c155488-minh-hoa-vol-01">Minh họa các tập</a></li>
                                        
                                                            <li class="current"><a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/t28461-ngoai-truyen-canh-bao-spoil">Ngoại Truyện (cảnh báo spoil)</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c161556-320-ngoai-truyen-valentine-kuromueina-shallow-vernal">
                                                                        320 - Ngoại Truyện Valentine: ~~ Kuromueina &amp; Shallow Vernal ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c161982-321-ngoai-truyen-valentine-lunamaria-noir">
                                                                        321 - Ngoại Truyện Valentine: ~~ Lunamaria &amp; Noir ~~
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate">
                                                                        322 - Ngoại Truyện Valentine: ~~ Alice &amp; Fate ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162357-323-ngoai-truyen-valentine-lilia-sieglinde">
                                                                        323 - Ngoại Truyện Valentine: ~~ Lilia &amp; Sieglinde ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162863-324-ngoai-truyen-valentine-razelia-kaito">
                                                                        324 - Ngoại Truyện Valentine: ~~ Razelia &amp; Kaito ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c163034-325-ngoai-truyen-valentine-eden-kaito">
                                                                        325 - Ngoại Truyện Valentine: ~~ Eden &amp; Kaito ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c163544-326-ngoai-truyen-valentine-kusunoki-aoi-yuzuki-hina">
                                                                        326 - Ngoại Truyện Valentine: ~~ Kusunoki Aoi &amp; Yuzuki Hina ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c163930-327-ngoai-truyen-valentine-isis-lillywood">
                                                                        327 - Ngoại Truyện Valentine: ~~ Isis &amp; Lillywood ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c163934-328-ngoai-truyen-valentine-vier-neun">
                                                                        328 - Ngoại Truyện Valentine: ~~ Vier &amp; Neun ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c163937-329-ngoai-truyen-valentine-shea-megiddo">
                                                                        329 - Ngoại Truyện Valentine: ~~ Shea &amp; Megiddo ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c166415-330-ngoai-truyen-valentine-chronois-life">
                                                                        330 - Ngoại Truyện Valentine: ~~ Chronois &amp; Life ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c166953-331-ngoai-truyen-valentine-ein-eval">
                                                                        331 - Ngoại Truyện Valentine: ~~ Ein &amp; Eval ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c169173-332-ngoai-truyen-valentine-chris-laguna">
                                                                        332 - Ngoại Truyện Valentine: ~~ Chris &amp; Laguna ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c169664-333-ngoai-truyen-valentine-anima-eta-theta">
                                                                        333 - Ngoại Truyện Valentine: ~~ Anima, Eta &amp; Theta ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c180241-334-ngoai-truyen-valentine-chuc-mung-ngay-valentine-kuro">
                                                                        334 - Ngoại Truyện Valentine ~~ Chúc mừng ngày Valentine: Kuro ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c180242-335-ngoai-truyen-valentine-chuc-mung-ngay-valentine-isis">
                                                                        335 - Ngoại Truyện Valentine ~~ Chúc mừng ngày Valentine: Isis ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c180243-336-ngoai-truyen-valentine-chuc-mung-ngay-valentine-sieg">
                                                                        336 - Ngoại Truyện Valentine ~~ Chúc mừng ngày Valentine: Sieg ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c180244-337-ngoai-truyen-valentine-chuc-mung-ngay-valentine-lilia">
                                                                        337 - Ngoại Truyện Valentine ~~ Chúc mừng ngày Valentine: Lilia ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c180245-338-ngoai-truyen-valentine-chuc-mung-ngay-valentine-alice">
                                                                        338 - Ngoại Truyện Valentine ~~ Chúc mừng ngày Valentine: Alice ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c216362-405-ngoai-truyen-chuyen-ma-tinh-thien-ozma-khong-noi">
                                                                        405 - Ngoại Truyện ~~ Chuyện mà Tĩnh Thiên Ozma không nói ~~
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c248225-438-ngoai-truyen-tanabata-mong-uoc-nho-be-va-dang-yeu">
                                                                        438 - Ngoại Truyện: ~~ Tanabata: Mong ước nhỏ bé và đáng yêu ~~
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=""><a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c153559-269-khong-the-khong-thich-duoc">Web Novel - Chính Truyện (269 - 414)</a></li>
                                        
                                                            <li class=""><a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c217354-415-se-khong-de-dang-gi">Web Novel - Chính Truyện (415 - 500)</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Ngoại Truyện (cảnh báo spoil)</h2>
                    <h4 class="title-item text-base font-bold" align="center">322 - Ngoại Truyện Valentine: ~~ Alice &amp; Fate ~~</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate#chapter-comments" style="text-decoration: underline">4 Bình luận</a> -
                        Độ dài: 1,456 từ - Cập nhật: 
                        <time class="topic-time timeago" title="22-03-2025 19:50:06" datetime="2025-03-22T19:50:06+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">322 - Ngoại Truyện Valentine: ~~ Alice &amp; Fate ~~</p>
                    <p id="1"><em><strong>Solo-ing: Not Serenin, but Sereni</strong></em></p><p id="2">*****</p><p id="3">Ngày thứ 13 của Mộc Nguyệt… Ngày mai chính là ngày Valentine, và lẩn vào bên trong của một thành phố tương đối náo nhiệt là một cửa hàng tạp hóa cách một khoảng so với tuyến đường chính nào đó.</p><p id="4">[Thế nên là, Shall-tan nè! Dạy tui cách làm socola đi!]</p><p id="5">[... Ư-Ừm, tui cũng đang định làm nên cả hai cùng làm chung đi ha.]</p><p id="6">Dù cảm giác hơi hơi áp lực tí xíu do sự xuất hiện bất chợt của Fate, Alice vẫn đồng ý và dẫn cô ấy vào trong nhà bếp.</p><p id="7">Fate mượn một chiếc tạp dề từ Alice, sau đó nhìn vào mớ dụng cụ nấu ăn trên bàn và thầm lẩm bẩm.</p><p id="8">[Chúng ta sẽ làm thế phải không? Mua socola về và nung chảy nó trong nước nóng ấy.]</p><p id="9">[Không, đồ làm sẵn có hơi thô ấy… Thế nên là, tui có chuẩn bị một ít socola làm từ “hạt cacao” nè.]</p><p id="10">[... Làm socola từ hạt nghe tuyệt ghê.]</p><p id="11">[Không, nói chính xác thì, tui cũng định sẽ “tự làm hạt cacao” nữa… May mắn là môi trường đã ở mức hoàn hảo để tui có thể cho ra thành phẩm tốt nhất rồi.]</p><p id="12">[... B-Bồ đi xa đến thế luôn à?]</p><p id="13">[Tất nhiên rồi, dù sao cũng là quà cho Kaito-san mà. Kèm thêm sự trợ giúp từ Lilywood-san nữa thì socola sẽ là nhất của nhất phẩm luôn ấy.]</p><p id="14">Đúng vậy, Alice đã chuẩn bị cho ngày này tận hơn một năm trời. Để có thể tạo ra loại cacao cao cấp nhất ấy, cô đã nhờ đến Thiên Địa Vương Lilywood với điều kiện là cô phải chia  một phần socola đã hoàn thành kia cho Lilywood.</p><p id="15">Mớ hạt cacao thượng hạng kia đã được chính Lilywood và thuộc hạ của cô ấy trông coi và chăm sóc, và tất nhiên, không chỉ cacao mà tất cả những nguyên liệu khác đều được giám sát chất lượng vô cùng nghiêm ngặt.</p><p id="16">Alice cũng đã chu du khắp thế giới để tìm ra loại sữa tốt nhất, thậm chí đến cả dụng cụ nấu ăn đều do “chính tay cô ấy làm ra” để phòng tránh bất cứ thứ vị gì lạc vào trong socola.</p><p id="17">[... R-Ra vậy… Tui ngóng chờ thành phẩm lắm đó nghen.]</p><p id="18">[Vâng, giờ thì, Fate-san này… để coi… Tui sẽ cho cậu làm cái gì đó đơn giản thôi ha. Cho những nguyên liệu này vào tô rồi khuấy nó lên thật kỹ đi.]</p><p id="19">[Unnn, để đó cho tui!]</p><p id="20">Nhận tô socola và một vài thứ khác từ Alice, Fate bắt đầu khuấy chúng lên với vẻ mặt quyết tâm.</p><p id="21">Khuấy lên được một, hai, ba lần… Fate dừng tay và đưa lại cho Alice.</p><p id="22">[... Sao thế?]</p><p id="23">[... Shall-tan ơi… “Tui mệt”...] [note70451]</p><p id="24">[Nhanh vậy mẹ trẻ!? Cậu vừa mới khuấy nó được có ba lần thôi đó!]</p><p id="25">[Không, tui đã làm hết sức mình rồi, tui thực sự đã làm hết sức mình rồi đó… Thế nên là, đám nguyên liệu này chắc phải xong rồi chứ hả?]</p><p id="26">[Xong cái đầu cậu ấy! Mớ này đã được trộn lại đàng hoàng đâu!]</p><p id="27">Alice nhìn Fate đang phàn nàn rằng cô ấy mệt vì phải dùng cái muỗng to kia khuấy tận ba lần bằng vẻ mặt vô cùng hỏi chấm.</p><p id="28">Thế rồi, cô cô gắng thuyết phục Fate, người vẫn đang phàn nàn từ nãy đến giờ kia, tiếp tục công việc làm socola.</p><p id="29">***</p><p id="30">[... Haahhhh… Haahhhh… Cảm giác sau khi làm việc mệt nhọc đúng là sảng khoái ghê, phải không!?]</p><p id="31">[Không, tui làm gần hết luôn á bạn hiền. À mà, xin lỗi vì nói trong lúc cậu đang vui nhé, nhưng vẫn còn nhiều việc phải làm lắm, kiểu như tạo hình rồi trang trí chẳng hạn.]</p><p id="32">[Eeeeehhhh!? N-Nghe phiền phức quá vậy… Tui đánh giá thấp việc làm socola rồi.] [note70452]</p><p id="33">[Còn tui thì đánh giá thấp độ lười của Fate-san rồi đó…]</p><p id="34">Có vẻ như Fate đang phải đấu tranh với cơn lười trong mình sau khi nghe vẫn còn công việc phải làm rồi.</p><p id="35">Mặc dù chính cô ấy là người nhờ Alice dạy cho cách làm socola, nhưng nhìn cái sự làm biếng này thì đến cả người quen lâu năm như Alice cũng phải kinh ngạc.</p><p id="36">Trong lúc Fate miễn cưỡng đổ số socola lỏng kia vào khuôn và chờ cho nó đặc lại, Alice tiếp tục làm phần của mình.</p><p id="37">Sau khi di chuyển tay với tốc độ cực cao, những viên kẹo xinh xắn đã được hoàn thành để Alice trang trí cho socola.</p><p id="38">[... Hmmmm. Mình làm có hơi phức tạp quá không ta?]</p><p id="39">[Unnn? Oooohhh… Nhìn đẹp quá Shall-tan! Đó là Kai-chan và thú cưng của ảnh phải không!]</p><p id="40">[Ừm, là Bellfreed và Lindwurm đó. Màu kẹo thay đổi theo từng chỗ nên tui nghĩ tui đã làm khá tốt.]</p><p id="41">Dù miệng thì bảo là làm tốt, nhưng ai cũng biết thừa rằng tay nghề của Alice thì từ đỉnh của đỉnh nó còn không xứng, thế nên những viên kẹo mà cô ấy tạo ra đều sánh ngang với các tác phẩm nghệ thuật cả.</p><p id="42">[Trông tuyệt thật… khoan, nhân tiện cho tui hỏi, Shall-tan đang làm socola gì thế?]</p><p id="43">[Eh? Ahh, tui đang làm sachertorte. Đúng như tui dự tính từ trước, đưa cho Kaito-san cả cái bánh thì to quá nên tui đã thu nhỏ kích cỡ lại, nhưng mà…] [note70453]</p><p id="44">[O-Ooohhh… Nghe khó làm thật… Unnn? Từ từ khoan đã…]</p><p id="45">[Sao thế?]</p><p id="46">Đang khâm phục tài nghệ của Alice thì Fate bỗng thoắt im lặng, xem chừng đang suy nghĩ gì đó, khiến Alice nghiêng đầu khó hiểu.</p><p id="47">[Shall-tan này… Ví dụ thôi nha, cậu có thường đóng khuôn cho socola như những gì cậu vừa làm không?]</p><p id="48">[Eh? Vâng, mọi người hay làm khuôn kiểu thế mà…]</p><p id="49">[Ồ, thế thì, cậu làm cho tui socola mang “hình dạng của tui” được không?]</p><p id="50">[... Tui làm được, nhưng để chi?]</p><p id="51">[Cậu thấy đó, chẳng phải tặng cho Kai-chan loại socola đó thì cũng giống như đang mời anh ấy “xơi tui” sao!?]</p><p id="52">[... C-Chà, nếu Fate-san ổn với chuyện đó thì được thôi… Tui sẽ làm cho…]</p><p id="53">[Ngon lành cành đào!]</p><p id="54">Cùng với vẻ mặt phức tạp sau khi nghe yêu cầu từ Fate, Alice lấy phần socola đã đông cứng lại từ bao giờ ra.</p><p id="55">[... Vậy thì? Cậu muốn lấy hình dạng nào đây?]</p><p id="56">[“Khỏa thân”!] [note70454]</p><p id="57">[... Hả?]</p><p id="58">[Tui vừa nói rồi đó, tui muốn nó “khỏa thân”!] [note70455]</p><p id="59">[... À thì, không may là tui không biết gì nhiều về cơ thể không mảnh vải của Fate-san nên tui không nghĩ tui làm được đâu…]</p><p id="60">Alice lại một lần nữa phải ngớ người trước cái yêu cầu vô cùng ba chấm rằng hãy tạo hình socola mang hình dáng chính mình khỏa thân kia của Fate.</p><p id="61">Cô hiểu suy nghĩ của Fate, nhưng hồi giờ cô đã nhìn chằm chằm vào cơ thể lõa lồ của cô bạn mình bao giờ đâu. Cô hoàn toàn có thể tái tạo lại hoàn hảo từng đường chỉ của bộ đồ mà Fate đang mặc, nhưng mấy thứ chưa từng được chứng kiến bao giờ thì cô làm thế nào được… Hay đúng hơn là, cô chả hề có nhu cầu muốn thấy tí nào cả.</p><p id="62">[Ahh, không sao hết. Tui có thể làm “người mẫu” ngay tại đây luôn cũng được.]</p><p id="63">[Xì tốp!? Fate-san này, sao cậu cứ thế mà lột đồ ra như thể đó là chuyện hiển nhiên vậy!? Dừng lại!]</p><p id="64">[Ehhh~~ Nhưng nếu không làm thế thì sao cậu làm “Socola Nữ Thần Quyến Rũ” được chứ?]</p><p id="65">[Bỏ qua cái tên nghe thôi đã thấy đau đầu kia đi, cậu đang cố bắt tui phải làm cái quái quỷ gì thế hả? Tui phản đối! Kịch-liệt-phản-đối!!! Kể cả cậu có show bo đì của cậu ra thì tui cũng méo làm đâu!]</p><p id="66">[Buuu~~! Cậu keo kiệt quá đó Shall-tan à!]</p><p id="67">[Vấn đề có nằm ở chỗ keo kiệt đâu hảaaaaaaaaaaa!!!]</p><p id="68">[Thế thì, cậu cũng có thể “sờ” tui đó!]</p><p id="69">[Cậu có nói thế thì cũng chả có gì xảy ra đâu!? Thế mếu nào mà cái bản mặt cậu trông tự mãn thế kiaaaaaaaaaaaaa!!!]</p><p id="70">… Ngoài lề một tẹo, Alice với Fate mặc dù cũng vờn nhau sau đó, nhưng họ vẫn tiếp tục công việc chính của mình.</p><p id="71">*****</p><p id="72">&lt;Lời bạt&gt;</p><p id="73"><strong>Kimashita wa </strong>(???)</p><p id="74">&lt;Đôi lời từ trans&gt;</p><p id="75">Tình hình là mị lười không có hứng làm bom lắm nên chắc sẽ tạm thời tăng tiến độ lên nhé, cụ thể là mai với mốt 2 chap mỗi ngày.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note70451"><a href="#anchor-note70451" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note70451" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Sẻ: Á đù</span></div><span class="note-content_real long-text">Sẻ: Á đù</span></div>
                                                    <div style="margin-bottom: 20px;" id="note70452"><a href="#anchor-note70452" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note70452" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Sẻ: Fate bối rối kìa anh em, dễ thương quááááááá!!!!</span></div><span class="note-content_real long-text">Sẻ: Fate bối rối kìa anh em, dễ thương quááááááá!!!!</span></div>
                                                    <div style="margin-bottom: 20px;" id="note70453"><a href="#anchor-note70453" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note70453" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Sẻ: Bánh torte Sacher hay Sachertorte là một loại bánh ngọt socola đặc biệt, sáng chế bởi người Áo Franz Sacher vào năm 1832 cho Hoàng tử Wenzel von Metternich ở Vienna, Áo, nguồn: Wikipedia</span></div><span class="note-content_real long-text">Sẻ: Bánh torte Sacher hay Sachertorte là một loại bánh ngọt socola đặc biệt, sáng chế bởi người Áo Franz Sacher vào năm 1832 cho Hoàng tử Wenzel von Metternich ở Vienna, Áo, nguồn: Wikipedia</span></div>
                                                    <div style="margin-bottom: 20px;" id="note70454"><a href="#anchor-note70454" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note70454" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Sẻ: Á đù part 2</span></div><span class="note-content_real long-text">Sẻ: Á đù part 2</span></div>
                                                    <div style="margin-bottom: 20px;" id="note70455"><a href="#anchor-note70455" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note70455" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Sẻ: Á đù part 3</span></div><span class="note-content_real long-text">Sẻ: Á đù part 3</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c161982-321-ngoai-truyen-valentine-lunamaria-noir" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162357-323-ngoai-truyen-valentine-lilia-sieglinde" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(4)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">4 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-2817698"
    class="ln-comment-item mt-3 clear"
    data-comment="2817698" 
    data-parent="2817698" 
    data-type="chapter" 
    data-typeid="162231">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.docln.net/lightnovel/users/ua16121-a633b97d-be63-4118-8f1e-99542046b2cc.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/16121">Saito</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        tôi cũng muốn cái socola đó 😋<br>
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate?comment_id=2817698#ln-comment-2817698"
                            class="text-slate-500">
                            <time class="timeago" title="12-04-2025 12:37:20"
                                datetime="2025-04-12T12:37:20+07:00">
                                12-04-2025 12:37:20
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-2794492"
    class="ln-comment-item mt-3 clear"
    data-comment="2794492" 
    data-parent="2794492" 
    data-type="chapter" 
    data-typeid="162231">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u111799-9c0eacb6-77c5-479c-ad26-f88e6f2cb7dd.gif" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/111799">mak15699</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        giờ mà có vụ chuyển cảm giác vô socola cho anh kai ăn rồi cảm giác đc truyền tới bản thể chính :D segggggggggggggg
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate?comment_id=2794492#ln-comment-2794492"
                            class="text-slate-500">
                            <time class="timeago" title="23-03-2025 12:59:21"
                                datetime="2025-03-23T12:59:21+07:00">
                                23-03-2025 12:59:21
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

        <div class="ln-comment-reply">
            <div id="ln-comment-2941360"
    class="ln-comment-item mt-3 clear"
    data-comment="2941360" 
    data-parent="2794492" 
    data-type="chapter" 
    data-typeid="162231">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u94482-32740691-ee30-43b4-922d-594bf1350e73.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/94482">Hakumo</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        bro t k nghĩ cảm giác bị nhai sẽ sướng...
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate?comment_id=2794492&amp;reply_id=2941360#ln-comment-2941360"
                            class="text-slate-500">
                            <time class="timeago" title="19-07-2025 15:17:42"
                                datetime="2025-07-19T15:17:42+07:00">
                                19-07-2025 15:17:42
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>
    
                
    </div>
    </div>
<div class="ln-comment-group">
    <div id="ln-comment-2792469"
    class="ln-comment-item mt-3 clear"
    data-comment="2792469" 
    data-parent="2792469" 
    data-type="chapter" 
    data-typeid="162231">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u164982-9bc39b4a-5d54-4d66-9ad8-76c654613e4f.gif" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/164982">Chilamotreaderquaduong</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Socola này vị lạ lắm :)))
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/20324-i-was-caught-up-in-a-hero-summoning-but-that-world-is-at-peace/c162231-322-ngoai-truyen-valentine-alice-fate?comment_id=2792469#ln-comment-2792469"
                            class="text-slate-500">
                            <time class="timeago" title="22-03-2025 00:03:55"
                                datetime="2025-03-22T00:03:55+07:00">
                                22-03-2025 00:03:55
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'hkvoG1k7uwkrlKzc9JUbOt5FoaxRyKk1qqWWueRK';
        var comment_type = 'chapter';
        var comment_typeid = '162231';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'hkvoG1k7uwkrlKzc9JUbOt5FoaxRyKk1qqWWueRK';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('20324');
    chapter_id = parseInt('162231');

    readingObject = {
        series_id: series_id,
        series_title: 'I Was Caught up in a Hero Summoning, but That World Is at Peace',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="hkvoG1k7uwkrlKzc9JUbOt5FoaxRyKk1qqWWueRK" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
