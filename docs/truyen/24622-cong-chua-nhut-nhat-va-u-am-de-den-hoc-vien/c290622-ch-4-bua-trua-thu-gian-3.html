<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Công chúa nhút nhát và u ám đã đến học viện - Ch 4- Bữa trưa thư giãn 3 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Cho dù tôi có rơi vào một cuốn tiểu thuyết và trở thành trưởng nữ của hoàng thất, thì kẻ cô độc vẫn mãi là kẻ cô độc. Nhưng… tôi vẫn muốn đến học viện">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="ef8HWbuddm7MtmJVrpEVg5DXOSlDupcgGpGn0XvO">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290622-ch-4-bua-trua-thu-gian-3">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24622-03bc5250-1821-432a-be95-330418609c7a.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290621-ch-3-bua-trua-thu-gian-2"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290622-ch-4-bua-trua-thu-gian-3" style="background: url('https://i.hako.vn/ln/series/covers/s24622-03bc5250-1821-432a-be95-330418609c7a.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien">Công chúa nhút nhát và u...</a></h5>
                    <small><i class="fas fa-pen"></i>Izumi</small>
                    <small><i class="fas fa-paint-brush"></i>N/A</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/t35695-loi-mo-dau">Web Novel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290040-loi-mo-dau">
                                                                        Lời mở đầu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290196-ch-1-hoc-sinh-trao-doi-than-bi">
                                                                        Ch 1 - Học sinh trao đổi thần bí
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290197-ch-2-bua-trua-thu-gian">
                                                                        Ch 2 - Bữa trưa thư giãn
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290621-ch-3-bua-trua-thu-gian-2">
                                                                        Ch 3- Bữa trưa thư giãn 2
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290622-ch-4-bua-trua-thu-gian-3">
                                                                        Ch 4- Bữa trưa thư giãn 3
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=" disabled "><a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien">1-50</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel</h2>
                    <h4 class="title-item text-base font-bold" align="center">Ch 4- Bữa trưa thư giãn 3</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290622-ch-4-bua-trua-thu-gian-3#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,819 từ - Cập nhật: 
                        <time class="topic-time timeago" title="15-01-2026 16:14:26" datetime="2026-01-15T16:14:26+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSe3y_bpPb6ADsKAgPWE3o3Jgzzftw8NKkp93_5vUayXLaQICg/viewform" target="_blank">
                        <img src="https://i2.hako.vip/vault/2025final_1.webp" style="width: 700px; height: auto">
                    </a>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Ch 4- Bữa trưa thư giãn 3</p>
                    <p id="1">Bầu không khí nghiêm trọng tới mức tôi nghĩ rằng sắp có một cuộc chiến diễn ra.</p><p id="2">Ngay cả một người vô cảm như Anastasia cũng có thể cảm nhận sát khí toát ra từ Baek Ho-Yeon. Dù Anastasia nhìn chằm chằm vào Ho-yeon, không chịu yếu thế nhưng Ho-yeon lại tỏ ra khá thờ ơ khi nhìn cô.</p><p id="3">“....Cô là ai” </p><p id="4">Anastasia mở lời, phá vỡ cục diện vế tắc này. </p><p id="5">Ho-yeon đáp lại, nhưng lời nói của cô chằng để lộ bất kỳ mục đích gì.</p><p id="6">“Tôi là Baek Ho-yeon, rất hân hạnh được gặp”</p><p id="7">Đuôi cô ấy vểnh cao lên, như một lời đe dọa. Khuôn mặt lạnh lùng, xa cách đến mức chỉ cần nhìn từ xa thôi cũng thấy được sự bài xích.</p><p id="8">Ngay cả Anya, người vốn khá vô cảm với cảm xúc cũng dễ dàng thấy sự thù địch hiện ra trong thái độ ấy.</p><p id="9">Thế nhưng, ngay cả đối diện sự thù địch công khai ấy,dường như Anya đang cố gắng xoa dịu tình hình thông qua giao tiếp</p><p id="10">“....Ah, ừ… Tôi là Anastasia”</p><p id="11">Có vẻ như mọi nỗ lực của Anya đều công cốc khi Ho-yeon vẫn giữ im lặng. Ngay khi cả hai chuẩn bị bước vào một cuộc đối đầu cực kỳ căng thẳng thì…..</p><p id="12">“....Cô có biết cửa hàng ở đâu không”</p><p id="13">“.....Cửa hàng ư?”</p><p id="14">Câu hỏi khó hiểu này vẫn chưa tiết lộ ý đồ của cô ấy, nhưng tôi lại cảm thấy một luồng lạnh lẽo chạy dọc xương sống.</p><p id="15">Những sự kiện đầu tiên liên quan tới Anya đều xoay quanh cửa hàng. Giờ nếu như mọi thứ bung bét do sự xuất hiện của Ho-yeon thì phải đợi tận đến giữa câu chuyện thì tôi mới có cơ hội tạo mối quan hệ với Anya</p><p id="16">Quả nhiên,sau khi chỉ đường cho Ho-yeon vị trí của cửa hàng, thì Anya đi đến một nơi hoàn toàn khác.</p><p id="17">Tệ thật!</p><p id="18">Tôi đã nghĩ tới việc theo đuôi Anya để bắt chuyện nhưng hiện tại, cô ấy là con gái của Đại Công tước phương bắc còn tôi chỉ là một thường dân. Điều này chẳng khác gì tự sát. Ngay cả khi trong học viện, mọi học sinh đều bình đẳng thì vẫn có một ranh giới vô hình tồn tại.</p><p id="19">Ảnh hưởng của quý tộc có thể theo biểu đồ dọc này </p><p id="20">Quý tộc bảo vệ biên giới → Quý tộc ở kinh đô → Hoàng tộc</p><p id="21">Còn các thế lực thì theo biểu đồ ngang </p><p id="22">Đế quốc — Giáo hội —- các thế lực còn lại.[note87059]</p><p id="23">Bạn có thể thấy đấy, thường dân còn chẳng thuộc bất kỳ nhóm nào trong các biểu đồ trên. Vậy nên, nếu một thường dân như tôi dám tiếp cận Anya, ngay cả khi cô ấy tha thứ cho tôi thì những hầu cận của cô ấy chắc chắn sẽ không.</p><p id="24">Tôi cần phải nhanh chóng hơn. Tất nhiên, nếu tôi có thể tăng đủ thiện cảm với cô ấy sau này nhưng điều đó chẳng khác nào bỏ qua vài sự kiện ban đầu.</p><p id="25">Một viễn cảnh đen tôi lướt qua tâm trí tôi, nếu như Ho-yeon phá hỏng những sự kiện của các nữ chính khác thì sao ?</p><p id="26">Tôi phải làm gì đây ?</p><p id="27">Ngay khi suy nghĩ đấy lướt qua tâm trí, tôi cảm thấy cần phải theo dõi Ho-yeon. May mắn thay, không có điều gì xảy ra khi cô ấy đến cửa hàng. Cơ mà tôi vẫn cảm thấy bất an,các sự kiện trong tương lai liệu có bị phá hủy bởi cô ấy không ?</p><p id="28">Sau khi đi đến kết luận, tôi cần phải thúc đẩy các sự kiện diễn ra sớm hơn. Trước khi mọi thứ bị chệch hướng thì tôi sẽ xây dựng đủ thiện cảm với các nữ chính.</p><p id="29">Đó sẽ là kế hoạch hiện tại của tôi.</p><p id="30">Sau khi chọn lọc các nữ chính để bắt đầu, thì chỉ còn Cecilia, một bán tiên được các linh hồn yêu quý. Sở hữu ngoại hình như một tinh linh, cô ấy có một lượng fan trung thành, nhưng vẫn không thể sánh được với Anya.</p><p id="31">Sự kiện của cô ấy diễn ra khi linh hồn liên kết với cô ấy bắt đầu yếu dần. Dù đã thử mọi cách, sức mạnh của linh hồn ấy tiếp tục lụi tàn. Cecilia chìm trong sợ hãi rằng người bạn đồng hành với cô ấy từ thủa ấu thơ sẽ biến mất.</p><p id="32">Nhưng mà sau khi nhận được một trái cây Thế giới từ nhân vật chính. Sức mạnh của linh hồn liên kết đã hồi phục kỳ diệu, và chính trong sự kiện ấy, Cecelia đã rơi vào lưới tình với nhân vật chính</p><p id="33">Trong nguyên tác, linh hồn khế ước sẽ yếu đi ở đầu học kỳ 2. Nên việc tìm kiếm Trái cây Thế giới có thể để sau. </p><p id="34">Tuy nhiên, bởi vì chủng tộc của Cecelia có mối liên kết đặc biệt với cây Thế giới, nên tôi có thể kiếm được lượng lớn hảo cảm bằng cách tặng nó cho cô ấy.</p><p id="35">Những trái cây từ cây Thế giới sẽ không mục rữa trong một thời gian dài. Vậy nên khi Cecelia ấy sử dụng nó để khôi phục sức mạnh cho bạn đồng hành, cô ấy sẽ nhớ tới tôi.</p><p id="36">Ừm…ý tưởng này không tệ đâu.</p><p id="37">Tình cờ là trong học viện cũng có một Cây Thế Giới có sẵn một trái. Nếu nhớ không lầm thì vị trí là khu vườn ở góc học viện.</p><p id="38">—--</p><p id="39">Sau khi tránh né những ánh mắt theo dõi, tôi đến một khu vườn nhỏ nhưng lại có một cổ thụ ở đây.</p><p id="40">Trong thoáng chốc, tôi tự hỏi sao lại có nơi như thế này tồn tại trong Học viện. Những suy nghĩ vẩn vơ tan biến khi những luồng không khí trong lành tràn đầy trong lồng ngực.</p><p id="41">Dù tôi chưa từng để lộ ra, nhưng từ khi bước chân tới lục địa này, tôi nhận ra một thứ rất khác biệt. </p><p id="42">Không khí ở đây rất khác lạ. Nó rất ngột ngạt, dính dính và rất khó chịu. Chính xác hơn, do nguồn ma lực trong không khí.</p><p id="43">Không mất quá lâu để tôi xác định được nguyên nhân. Các dòng chảy ma lực dưới sâu lòng đất đáng nhẽ tuần hoàn đi khắp nơi lại bị chi phối bởi một nguồn ma lực méo mó.</p><p id="44">Con người trên lục địa này tôn thờ nguồn ma lực ấy, gọi nó là thánh lực. Nhưng trong mắt tôi, nó không khác gì một nguồn ma lực vặn vẹo và ô uế.</p><p id="45">Không chỉ các mạch ma lực bị kiểm soát, mà cả các thiên mạch cũng bị chi phối bởi thánh lực. [note87060]</p><p id="46">Con người ở trên lục địa này còn sử dụng một loại ma lực vặn vẹo khác “mana”, nguồn sức mạnh này vặn vẹo đến mức chỉ nhìn thôi cũng khiến tôi khó chịu.</p><p id="47">Trong nguyên tác, đám người nhân vật chính dễ dàng thích nghi với chúng nên có thể do dòng máu của mẹ mà tôi thấy khó chịu chăng ?</p><p id="48">Đó cũng là lúc tôi nhận ra, thế giới mà tôi đang sống không chỉ đơn giản là một tiểu thuyết.</p><p id="49">Dù sao thì, nhân loại trên lục địa này tự chia phe phái, gọi những phe khác là dị giáo, vô thần và mù quáng. Từ quan điểm của tôi, chúng không khác nhau là bao. </p><p id="50">Tất cả đều thật đáng kinh tởm. Thật nực cười khi chúng tranh cãi về việc ai là người cao quý hơn trong khi chúng thay đổi các quy luật của những vì sao, vì dùng nó cho mục đích của mình. Thật là….nực cười mà</p><p id="51">Ít nhất, khi ở rìa lục địa, cách mạch ma lực còn chảy một cách bình thường, tuy hơi chậm. Nhưng càng vào sâu bên trong, cái thứ gọi là thánh lực kia bóp nghẹt các dòng chảy. Nhưng nơi mà họ gọi là Tháp ma pháp hay các nhà thờ lại đang chiết xuất ma lực từ các dòng chảy và đồng thời làm ô uế chúng.</p><p id="52">“.....Haah”</p><p id="53">Chuyện này vốn không liên quan tới tôi. Sau khi tốt nghiệp, tôi sẽ rời khỏi lục địa này. Chẳng có lý do gì giữ chân tôi, tôi chỉ ở đây đều học hỏi vài thứ. Nên tôi không nên gây ra bất kỳ rắc rối nào, mà ngay cả khi tôi muốn làm gì đấy, điều này thật sự quá sức tôi.</p><p id="54">“...haah”</p><p id="55">Hít một hơi sâu trong bầu không khí trong lành này, cơn giận của tôi bắt đầu nguôi ngoai.</p><p id="56">Thật lòng thì khi biết học viện nằm sâu bên trong lục địa, tôi đã xem xét việc quay lại. </p><p id="57">Ngay cả khi ở rìa lục địa, không khí đã rất ngột ngạt rồi, tôi không thể tưởng tượng được khi tiến sâu vào bên trong, nó có thể tệ như nào nữa.</p><p id="58">Cơ mà sự tò mò và háo hức đã chiến thắng sự khó chịu. Tôi vẫn mong đời về những gì xảy ra trong học viện.</p><p id="59">Vậy là….đây là hậu quả à. </p><p id="60">Nhưng ít nhất thì khi nhìn thấy cái cây này làm tôi thoải mái hơn chút. Mỗi lần cảm thấy quá mức ngột ngạt, tôi luôn có thể tới đây.</p><p id="61">Bước đi nhẹ nhàng, tôi ngồi lên một chiếc ghế băng và lấy ra chiếc bánh mì nhân kem.</p><p id="62">*cắn* ừm… hương vị rất quen thuộc.</p><p id="63">Vị của nó giống hệt chiếc bánh tôi từng hay ăn ở quê nhà. Tôi hơi xúc động và bắt đầu ngâm nga vài giai điệu. Cơ mà vẫn còn chai sữa nên tôi tạm gác lại cảm xúc.</p><p id="64">Tôi vẫn chưa thể nào quen với việc sữa không được đựng trong hộp giấy. Cơ mà, đóng trong chai vẫn có những điểm thu hút riêng.</p><p id="65">Nắp của những chai sữa luôn được siết rất chặt, nên tôi phải loay hoay một lúc mới mở được. Cơ mà vị sữa tươi mát này cũng xứng đáng ấy chứ.</p><p id="66">Vì vài nguyên nhân mà sữa ở đây bị nhiễm chút mana, nên nó để lại chút dư vị kim loại ở đầu lưỡi. </p><p id="67">Nhưng khi kết hợp với bánh mì nhân kem, nó lại ngon miệng tới lạ. Có thể là do môi trường chăng ? Không khí đang rất trong lành, trái ngược với lúc tôi bước vào học viện. Cảm giác như tôi đang thở một bầu không khí nóng, ẩm và vẩn đục. So sánh với bây giờ như thể địa ngục và thiên đường vậy.</p><p id="68">Chính xác. Lý do mà tôi luôn tránh né mọi người, ngay cả khi ở nơi vắng người. Không phải là do tôi sợ tiếp xúc, mà do nguồn mana và thánh lực bao quanh làm tôi không dám lại gần.</p><p id="69">Chắc chắn không phải do tôi sợ nói chuyện với người khác. </p><p id="70">Hoàn toàn không phải vậy.</p><p id="71">-Ọt…Ọt-</p><p id="72">Cái tên khốn nạn nào làm phiền giây phút riêng tư của tôi vậy? Cường hóa các giác quan của mình, tôi thấy được một cậu trai đang cố gắng ẩn nấp trên cây.</p><p id="73">Ừm…nhiều câu hỏi đang lướt qua tâm trí. Ai? Tại sao? và Như thế nào? Trong khi suy nghĩ, tôi vẫn tiếp tục thưởng thức chiếc bánh mì kem ngon tuyệt này.</p><p id="74">Nhìn kỹ hơn thì tôi nhận ra đó là nhân vật chính. Trong khi tôi thắc mắc tại sao hắn ta lại leo cây thay vì đi tán các nữ chính thì một âm thanh đã cắt mạch suy nghĩ. </p><p id="75">-Ọt ọt-</p><p id="76">Tiếng dạ dày kêu lên vì đói quá to để tôi có thể mặc kệ được.</p><p id="77">Tôi thắc mắc liệu hắn có biết bản thân đã bị phát hiện không. Vì hắn ta cứ lo lắng nhìn tôi mãi. Điều này khá là thú vị, tôi đang có chút suy nghĩ định trêu chọc tên này, cơ mà lỡ hắn ngã thì sao? </p><p id="78">Thế nên tôi ra hiệu cho hắn ta leo xuống. </p><p id="79">Tôi tò mò, không biết tên này leo lên bằng cách nào, và rồi chính mắt tôi chứng kiến: Hắn ta khéo léo đặt chân xuống các cành cây và các khe nứt nhỏ, từng bước xuống mặt đất.</p><p id="80">Tôi muốn hỏi cậu ta làm gì trên đó vậy, nhưng có việc này cần làm trước. Tôi lấy một chiếc bánh ra khỏi túi và đưa cho cậu ta.</p><p id="81">Với vẻ mặt ngơ ngác, cậu ta nhìn tôi rồi lại nhìn chiếc bánh. Nếu đây là một bộ manga, thì phải có dấu hỏi chấm to đùng trên đầu cậu ta.</p><p id="82">Trong lòng tôi có chút ghen tị xen lẫn khó chịu với chủ nhân tương lai của dàn hậu cung đông đảo này, nên tôi ném chiếc bánh về phía hắn.</p><p id="83">Dù bất ngờ, nhưng cậu ta vẫn bắt được, cơ mà bản mặt ngơ ngác đấy vẫn chưa biến mất, khiến tôi không kìm được mà mở lời.</p><p id="84">“Bụng cậu réo to tới mức ta dưới này cũng có thể nghe được. Ăn đi, ta không có thói quen dùng bữa trước những kẻ đói khát”</p><p id="85">Có lẽ là nhờ bầu không khí trong trẻ hoặc cũng có thể do cậu ta là nhân vật chính. Tóm lại, vì một nguyên nhân nào đó, mà tôi không hề ngần ngại nói chuyện với cậu ta. </p><p id="86">Thật kỳ lạ với một kẻ cô độc, vụng về như tôi lại có thể thoải mái trò chuyện với một người hòa đồng. </p><p id="87">Nghĩ cho cùng thì, còn lúc nào khác tôi mới có cơ hội như này ?</p><p id="88">“..À, vâng. Cám ơn”</p><p id="89">Trong khi nhìn cậu ta cẩn thận gỡ lớp giấy bọc, cứ như thể hắn ta vừa làm gì đó sai trái vậy.</p><p id="90">Tôi chợt nảy ra một câu hỏi.</p><p id="91">Ừm….Tên gã này là gì ấy nhỉ?</p><p id="92">“Tôi vẫn chưa được biết tên của cậu. Xem như là cái giá cho chiếc bánh, cậu có thể cho tôi biết tên không?”</p><p id="93">Khi bố tôi dành hàng tháng trời để rèn giũa cách tôi nói chuyện, tôi đã từng oán trách ông. Thế nhưng cái cảm giác có thể nói chuyện thoải mái này lại khiến tôi rất dễ chịu.</p><p id="94">Cảm giác như tôi thật sự là một công chúa thực sự vậy. Dù tôi thật sự là một công chúa…..</p><p id="95">Dù sao thì, cái tên nhân vật chính này sẽ được đối xử như vị cứu tinh của lục địa, nhưng ngay lúc này, tôi lại ở thế trên cậu ta, điều này khiến trái tim tôi khẽ rung động.</p><p id="96">“......Tên tôi là Han Dogeon”</p><p id="97">“Han Dogeon, cậu đến từ Đông lục địa à?”</p><p id="98">Nếu tôi không nhầm, thì đáng nhẽ tên của nhân vật chính là James hay Chris gì đấy. Đại loại là một cái tên phương Tây. Thế tại sao tên của cậu ta lại đến từ quê nhà ?</p><p id="99">“Không…Tôi sinh ra ở Tây lục địa, nhưng cha mẹ tôi đều xuất thân từ đó”</p><p id="100">Ừm? Trong nguyên tác thật sự có thiết lập như vậy sao?</p><p id="101">Gia đình của nhân vật chính hầu như chẳng được nhắc tới trong nguyên tác nên tôi không thể biết rõ được. Quan trọng hơn thì thiết lập của nhân vật chính là một người từng đọc tác phẩm và bị xuyên không vào một người thường dân trong thế giới này. </p><p id="102">Đúng là một mớ hỗn độn mà. Tôi-người bị ném vào một tiểu thuyết nói về một người xuyên vào thế giới này……</p><p id="103">Tệ hơn, giới tính của tôi đã bị thay đổi.</p><p id="104">Vậy có nghĩa là cậu ta bị kéo từ “Hàn quốc trong tiểu thuyết” sang thế giới này, và tất cả đều nằm trong một cuốn tiểu thuyết khác sao ?</p><p id="105">Càng nghĩ, đầu tôi càng đau tới mức muốn nổi tung.</p><p id="106">Có lẽ cậu ta đang dùng cái tên gốc thay vì tên trong thế giới này ?</p><p id="107">Như các cụ vẫn nói “Rèn sắt khi vẫn còn đỏ”, tôi định hỏi cậu ta nhiều điều nữa, nhưng tiếng chuông vang lên, báo hiệu đã hết giờ ăn trưa.</p><p id="108">“Ừm….Đã hết giờ nghỉ trưa. Cậu có thể đi được rồi…..À, nhớ mà ăn chiếc bánh đó”</p><p id="109">Dựa vào những ký ức của tôi, vào muộn tiết thể dục chẳng có kết cục tốt đẹp gì cả. Những kẻ đến trễ luôn phải chịu kỷ luật: Chống đẩy hoặc chạy quanh sân. Và tôi chẳng muốn phải vận động trong bầu không khí ngột ngạt này chút nào cả.</p><p id="110">Nhân tiện thì, dường như cậu ta đang giấu thứ gì đó sau lưng kể từ khi tôi phát hiện cậu ta trốn trên cây.</p><p id="111">Tôi gạt bỏ suy nghĩ ấy và bước thẳng về phía nhà thể chất.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note87059"><a href="#anchor-note87059" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87059" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Biểu đồ dọc thì tầm quan trọng /ảnh hưởng sẽ tịnh tiến, còn biểu đồ ngang thì mọi phần tử nếu chung một hàng thì có vị thế như nhau</span></div><span class="note-content_real long-text">Biểu đồ dọc thì tầm quan trọng /ảnh hưởng sẽ tịnh tiến, còn biểu đồ ngang thì mọi phần tử nếu chung một hàng thì có vị thế như nhau</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87060"><a href="#anchor-note87060" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87060" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Thực sự là bộ này không đề cập quá nhiều về các nguồn sức mạnh nên tác giả không xây dựng chuẩn chỉ lắm về thiết lập thế giới. Nên đây sẽ là kiến giải của cá nhân tôi 
Các dòng ma lực - Earth Vein - sẽ được chiết xuất để tạo ra mana
Còn các thiên mạch sẽ được sử dụng để tạo ra thánh lực. 
Nếu sau này có sai sót thì note này sẽ được sửa</span></div><span class="note-content_real long-text">Thực sự là bộ này không đề cập quá nhiều về các nguồn sức mạnh nên tác giả không xây dựng chuẩn chỉ lắm về thiết lập thế giới. Nên đây sẽ là kiến giải của cá nhân tôi 
Các dòng ma lực - Earth Vein - sẽ được chiết xuất để tạo ra mana
Còn các thiên mạch sẽ được sử dụng để tạo ra thánh lực. 
Nếu sau này có sai sót thì note này sẽ được sửa</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien/c290621-ch-3-bua-trua-thu-gian-2" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24622-cong-chua-nhut-nhat-va-u-am-de-den-hoc-vien" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'ef8HWbuddm7MtmJVrpEVg5DXOSlDupcgGpGn0XvO';
        var comment_type = 'chapter';
        var comment_typeid = '290622';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'ef8HWbuddm7MtmJVrpEVg5DXOSlDupcgGpGn0XvO';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24622');
    chapter_id = parseInt('290622');

    readingObject = {
        series_id: series_id,
        series_title: 'Công chúa nhút nhát và u ám đã đến học viện',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="ef8HWbuddm7MtmJVrpEVg5DXOSlDupcgGpGn0XvO" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
