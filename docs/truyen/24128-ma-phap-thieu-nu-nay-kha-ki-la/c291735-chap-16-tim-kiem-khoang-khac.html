<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Ma Pháp Thiếu Nữ Này Khá Kì Lạ - Chap 16: Tìm Kiếm Khoảng Khắc. - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Một thế giới nơi tồn tại những hiện tượng siêu nhiên và các truyền thuyết kì lạ, một cậu bé tin rằng bản thân đã mất tất cả. Cho đến khi cô ấy xuất hiện, mang phép màu đến với cuộc sống vô vị của cậu dưới cái thân phận...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="rWYyCeCHltp8XsVzm2h9omY0xfUV9RSg39BVUZ0P">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291735-chap-16-tim-kiem-khoang-khac">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24128-038ce725-eff1-4417-b800-c00087ad05e6.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291619-chap-15-nguoi-duy-nhat"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291735-chap-16-tim-kiem-khoang-khac" style="background: url('https://i.hako.vn/ln/series/covers/s24128-038ce725-eff1-4417-b800-c00087ad05e6.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la">Ma Pháp Thiếu Nữ Này Khá...</a></h5>
                    <small><i class="fas fa-pen"></i>冷冬阳</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/t34700-volume-1">Volume 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c265626-chap-1-cam-giac-bat-an">
                                                                        Chap 1: Cảm Giác Bất An
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c266086-chap-2-ma-phap-thieu-nu">
                                                                        Chap 2: Ma Pháp Thiếu Nữ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c271740-chap-25-bo-sung">
                                                                        Chap 2.5: Bổ Sung
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c274322-chap-03-cai-chet-chua-phai-la-cham-het">
                                                                        Chap 3: Cái Chết Chưa Phải Là Chấm Hết.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c276853-chap-04-loi-keo-boi-loi-noi-va-hanh-dong">
                                                                        Chap 04: Lôi Kéo Bởi Lời Nói Và Hành Động
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c277445-chap-05-buom-buom">
                                                                        Chap 05: Bươm Bướm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c281423-chap-06-su-kien-bat-buoc">
                                                                        Chap 06: Sự Kiện Bắt buộc
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c282942-chap-07-tuyet-vong">
                                                                        Chap 07: Tuyệt Vọng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c286974-chap-08-mot-ngay-day-phuoc-lanh">
                                                                        Chap 08: Một Ngày Đầy Phước Lành
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c290272-chap-09-hai-ngay-cua-hoa-va-gio">
                                                                        Chap 09: Hai Ngày Của Hoa Và Gió
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c290630-chap-10-linh-thu">
                                                                        Chap 10: Linh Thú
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c290942-chap-11-quen-di">
                                                                        Chap 11: Lãng Quên
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c290991-chap-12-truy-vet-nguon-goc">
                                                                        Chap 12: Truy Vết Nguồn Gốc
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291157-chap-13manh-moi">
                                                                        Chap 13:Manh Mối
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291441-chap-14-sai-mot-li-di-mot-dam">
                                                                        Chap 14: Sai Một Li Đi Một Dặm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291619-chap-15-nguoi-duy-nhat">
                                                                        Chap 15: Người Duy Nhất
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291735-chap-16-tim-kiem-khoang-khac">
                                                                        Chap 16: Tìm Kiếm Khoảng Khắc.
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Volume 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chap 16: Tìm Kiếm Khoảng Khắc.</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291735-chap-16-tim-kiem-khoang-khac#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,759 từ - Cập nhật: 
                        <time class="topic-time timeago" title="17-01-2026 17:20:16" datetime="2026-01-17T17:20:16+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSe3y_bpPb6ADsKAgPWE3o3Jgzzftw8NKkp93_5vUayXLaQICg/viewform" target="_blank">
                        <img src="https://i2.hako.vip/vault/2025final_1.webp" style="width: 700px; height: auto">
                    </a>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chap 16: Tìm Kiếm Khoảng Khắc.</p>
                    <p id="1">Vài tiếng trước, Lý Tư đang ăn mì đang ăn mì tại tiệm mì ngay ngoài cổng trường Thanh Hà số 2.</p><p id="2">"Mấy cái thứ này dạo này hoạt động nhiều lên trông thấy. Bọn chúng chỉ là tép riu, nhưng số lượng của chúng đang tăng mạnh."</p><p id="3">Lý Tư thở dài, băng khoăng liệu có nên kêu gọi trợ giúp từ trụ sở lần nữa, mặc dù anh biết sẽ ít có cơ hội nhận được trả lời từ lãnh đạo.</p><p id="4">Sau cùng thì, không phải Tiểu thư Yang là gốc rễ của vụ việc lần này sao? Sự đồng thuận của cô với cục Điều Tra là một thông báo lãnh thổ.</p><p id="5">Bí mật là, Truyền thuyết đô thị của thành phố Thanh hà được phụ trách bởi Ma pháp thiếu nữ Yang, trong khi cục Điều Tra chỉ cần phái một điều tra viên nhỏ để công khai đảm bảo bình yên cho thành phố.</p><p id="6">Đây chắc chắn là một hợp đồng đôi bên có lợi cho cả Tiểu thư Yang và cục Điều Tra, nhưng người duy nhất chịu khổ là Lý Tư, điều tra viên.</p><p id="7">Anh phải báo cáo định kì và dọn dẹp những vụ việc nhỏ nhoi mà cô coi nhẹ. Mọi công việc dơ bẩn và hành xác đều thuộc về anh.</p><p id="8">Hơn nữa, trong điều khoản, anh không hề có đồng nghiệp. "Đồng nghiệp" duy nhất của anh là lũ lười biếng than vãn cả ngày trong cửa hàng tiện lợi.</p><p id="9">Nhưng đó không phải điều làm Lý Tư trầm cảm nhất. Thứ làm anh bực bội là vụ việc phù thuỷ lớn nhất này- anh bị dính vào hỗn loạn và có thể phải chết vì nó. Cái khỉ gì thế?</p><p id="10">Lý Tư thở một hơi dài, cảm giác như những vụ việc gần đây đã làm anh già đi chục tuổi. Chả trách sao hậu bối lại gọi anh là "ông chú."</p><p id="11">"Hmmm?"</p><p id="12">Điện thoại anh rung lên trong túi. Anh lôi nó ra, và chắc thôi, nhìn thấy tựa đề "Hoạt Động Tháng Qua Của Hứa Minh" đăng vào kho thông tin của anh.</p><p id="13">"Nhanh việc đấy ông bạn già."</p><p id="14">Sau một đêm không ngủ, Lý Tư cuối cùng cũng gnhe tin tốt.</p><p id="15">"Để xem tháng qua hậu bối làm gì nào. Một tháng trước, Hứa Minh, theo gợi ý đã tìm được dịch vụ Ma pháp Thiếu nữ của Yang. Ngày hôm sau, một học sinh xinh đẹp đã chuyển vào lớp của cậu...."</p><p id="16">----------------------------------------------------------------------------------------------</p><p id="17">Một tháng trước.</p><p id="18">Trên con phố nhộn nhịp, Hứa Minh đúng trước cổng bệnh viện, tay ôm tiền sử bệnh lý của mình. Sự náo nhiệt xung quanh làm cậu vô thức cúi đầu xuống.</p><p id="19">Lưu Thanh đâu rồi?</p><p id="20">Vài phút trước, cậu ta đã kêu cậu đợi ở đây cùng hồ sơ, mà giờ xung quanh lại chẳng thấy bóng dáng quen thuộc ấy.</p><p id="21">Liệu cậu có đến quá trễ và bị bỏ lại không?</p><p id="22">Hứa Minh ngồi xuống, suy tư vô định, quên mất rằng bản thân có điện thoại để liên lạc với người khác.</p><p id="23">Nhưng nó khong quan trọng nữa. Không có thứ gì cả.</p><p id="24">Ánh nhìn của cậu hướng xuống đất. Ở đó, một tờ quảng cáo mới tinh tươm nằm ở đó như muốn bị phát hiện. Mặt trước của nó lọt vào tầm nhìn của cậu.</p><p id="25">"Dịch vụ Ma pháp Thiếu Nữ mở cửa chào đón! Chúng tôi có thể giải quyết mọi vấn đề của bạn. Khách hàng mới sẽ nhận được quà từ phía chúng tôi!"</p><p id="26">Nó bao gồm một cô gái tóc trắng và một con gấu bay dễ thương theo kiểu chibi cho cả hai.</p><p id="27">"Loại lừa đảo mới à?"</p><p id="28">Hứa Minh lẩm bẩm trong vô cảm như vẫn với tới và nhặt tờ rơi lên.</p><p id="29">"Địa chỉ: Số 12 đường Tân Vạn. Khá gần."</p><p id="30">Vài phút sau, , tại số 12 đường Tân Vạn, cậu nhco1 đúng bàng hoàng trước một cửa tiệm ghi là Dịch vụ Ma pháp Thiếu Nữ.</p><p id="31">"Nó thật sự tên như này."</p><p id="32">Cậu bất ngờ trước suy nghĩ đặt tên thú vị của chủ tiệm nhưng vẫn có một chút kì vọng trước sự tráng trí lỗng lẫy trước cửa.</p><p id="33">Cậu bước lên trước. Một tấm bảng "Đang mở" treo trên cửa. Cậu nhẹ nhàng đẩy vào trong.</p><p id="34">Với tên chuông khẽ kêu, Hứa Minh đi vào Dịch vụ Ma pháp Thiếu Nữ- và tiến vào một tương lai mà cậu không lường trước được.</p><p id="35">Nội thất được trang trí theo phong cách nhà uống trà thời trung cổ, trên tường là vô số loại hoa mà cậu không nhận ra. Mùi hương của chúng làm cậu thư giãn như chưa bao giờ trước đó.</p><p id="36">Cậu đi xung quanh, nhung, tiếc thay, không thấy ai cả.</p><p id="37">Chẳng phải là có bảng "Đang mở" ở bên ngoài hay sao?</p><p id="38">Nghi ngờ dâng lên. Có lẽ chủ cửa hàng đang đi ra ngoài?</p><p id="39">Có lẽ, cậu đã đến không đúng lúc.</p><p id="40">Nên rời đi thôi. Buổi chiều vẫn còn lớp.</p><p id="41">Ngay lúc cậu định rời đi, một giọng nói nhẹ nhàng phát ra từ phía sau cậu.</p><p id="42">"Chào mừng, cậu có muốn ngồi xuống trước khi rời đi không?"</p><p id="43">Cậu nhìn lại, một cô gái tóc hạt dẻ cùng tuổi cậu, mặc một bộ váy trắng, đứng dịu dàng sau lưng.</p><p id="44">Không có ai ở đó một phút trước mà. Trí nhớ của cậu chuẩn xác- không lệch đi đâu được.</p><p id="45">Ảo giác?</p><p id="46">Vô thức, cậu vội lấy lọ thuốc, nhưng cô nói:</p><p id="47">"Tôi không phải là ảo giác. Và bỏ qua cử uống thuốc? Tình trạng sẽ tệ hơn đó."</p><p id="48">Cô ngồi trên sofa và ra hiệu cho cậu ngồi đối diện.</p><p id="49">Giọng của cô mang theo cảm giác mềm mại như ma thuật, làm trái tim hoản loạn của cậu dịu xuống. Ngăn bản thân tò mò, cậu ngồi xuống.</p><p id="50">"Cậu chắc phải bất ngờ vì sự xuất hiện của tôi."</p><p id="51">Cô vẫy tay giữa họ- một chiếc bàn gỗ xuất hiện từ hư không. Ngón tay của cô xoáy giữa không trung; một tách trà và hai cái ly bay từ tủ đựng gần đó, cử động, tự sắp xếp bản thân trước khi đổ vào trành xanh tươi mới.</p><p id="52">Hàm Hứa Minh chút thì chạm đất trước cảnh tượng như mơ này.</p><p id="53">"Ảo thuật?"</p><p id="54">Cậu từ tốn hỏi. Cô cười nhẹ.</p><p id="55">"Đây là ma thuật."</p><p id="56">Cậu đờ người, thì thầm:</p><p id="57">"Dịch vụ Ma pháp Thiếu nữ?"</p><p id="58">"Chính xác là những gì cậu nghĩ."</p><p id="59">Ánh nhìn nhân từ của cô nhìn vào cậu.</p><p id="60">"Lần đầu gặp mặt, Tôi là Yang, một ma pháp thiếu nữ điều hành nơi này, như cậu thấy đấy."</p><p id="61">"Nói ra ý định và yêu cầu của mình, và tôi sẽ thực hiện nó hết lòng."</p><p id="62">Yang nói. Chỉ khi đó Hứa Minh mới nhận ra: Ma pháp thiếu nữ, những thực thể siêu nhiên đó, là thật.</p><p id="63">vậy có nghĩa là điều ước của cậu có thể dễ dàng hoàn thành?</p><p id="64">Đầu cúi xuống. Nghĩ ngợi. Sợ hãi. nhưng lại không có lí do <em>để mà</em>.</p><p id="65">Cậu cũng chẳng quan trọng lắm.</p><p id="66">"Tôi muốn được chết."</p><p id="67">Ngẩng đầu. Mắt vô hồn, một vực thẳm sâu đến độ Yang chần chừ.</p><p id="68">"Trong một thế giới mà không ai quan tâm, liệu cô có giúp được không?"</p><p id="69">Ánh sáng vàng sượt qua mắt cô. Cô nhắm lại. Khi cô mở mắt ra, đôi mắt xanh của cô ánh lên như người thường.</p><p id="70">"Đó là yêu cầu của cậu sao? Tôi chấp thuận."</p><p id="71">Cươi tươi. Cậu không sẵn sàng trước sự chuẩn bị này.</p><p id="72">"Cái giá là gì?"</p><p id="73">Tò mò liệu chết có đặt hơn hoả táng hay không.</p><p id="74">"Giá? Tôi làm việc trước, thanh toán sau. Cậu sẽ biết khi thời gian điểm tới."</p><p id="75">Sự khó chịu hiếm thấy.</p><p id="76">"Nghe không giống của ma pháp thiếu nữ lắm, nghe giống phù thuỷ hơn."</p><p id="77">"Đùa thôi, tôi có tâm hơn phù thuỷ nhiều. Yêu cầu chấp thuận."</p><p id="78">Lời nói của cô cảm giác- khó tả. Một mối liên kết vô hình xuất hiện giữa họ. Cái "giao kèo"?</p><p id="79">"Bạn của cậu vẫn đang tìm cậu tại bệnh viện kìa, cần trợ giúp không?"</p><p id="80">Bạn?</p><p id="81">Hình ảnh tươi sáng và cao ráo của Lưu Thanh sượt qua tâm trí cậu. Một ánh sáng trắng- và cậu đã quay trở lại cổng của bệnh viện.</p><p id="82">Mọi thứ cứ mơ hồ. Chỉ còn mối liên kết mờ nhạt trong tim- và....</p><p id="83">Cậu nhìn xuống: Một huy hiệu nhỏ trong tay, chạm khắc với mặt trời tí hon.</p><p id="84">Món quà?</p><p id="85">"Hứa Minh! Mày vừa ở đâu vậy? Không trả lời luôn- tưởng bị bắt sang cam rồi."</p><p id="86">Một giọng nói lo lắng. Lưu Thanh thở gấp, tìm kiếm được một lúc.</p><p id="87">"Xin lỗi, làm mày lo rồi."</p><p id="88">Lưu Thanh mở miệng, nhưng cạn lời trước lời xin lỗi nhỏ nhoi kia. Bối rối:</p><p id="89">"Đó... không phải ý tao muốn nói. Ờm... trời nóng- đi nhanh thôi."</p><p id="90">Đổi chủ đề, Hứa Minh lặng lẽ gật đầu rồi đi theo.</p><p id="91">Mặt trời nắng gắt. Lưng Lưu Thanh đẫm mồ hôi.</p><p id="92">Sau đó, cậu biết là Lưu Thanh đã đôn đáo khắp bệnh viện, chút nữa là gọi cảnh sát rồi.</p><p id="93">Lưu Thanh thở dài, bước đi sau cậu.</p><p id="94">Sau khi cả hai rời đi, một bóng dàng kiều diễm đặt tách trà xuống.</p><p id="95">"York, mi nghĩ thế nào về cậu ta?"</p><p id="96">"Có mùi buồn bã."</p><p id="97">"Nhưng Yang- chấp thuận yêu cầu<em> đó</em> á? Cô liều mất sự công nhận là ma pháp thiếu nữ đó."</p><p id="98">Một nụ cười ẩn ý.</p><p id="99">"Sao có thể được? Cậu ấy muốn chết- nhưng không nói là <em>chết</em>[note87174] kiểu nào."</p><p id="100">"Chết mà không ai nhận ra? vậy để cái 'bản thân không ai nhận ra' đó chết. Sao, thấy ổn không?"</p><p id="101">Hôm sau, một học sinh chuyển trường vào lớp của Hứa Minh: Tô Tiểu Trạch, một cô gái dễ thương- hay bạn cùng lớp thì thầm vậy trước khi cô ngồi kế cậu.</p><p id="102">"Hứa Minh, ta lại gặp rồi."</p><p id="103">Cậu nhìn lên khuôn mặt quen thuộc-Yang?</p><p id="104">"Gọi tôi là Tô Tiểu Trạch. Bạn cùng bàn từ hôm này, rất vui được gặp cậu."</p><p id="105">Vui tươi, hoạt bát, dễ thương dễ gần- Hứa Minh chật vật liên kết cô với Yang yêu kiều kia.</p><p id="106">"Nói xấu một cô gái sao? Bị Nghìn cây kim trong miệng. Tô đang thực hiện yêu cầu của cậu. Để xoá bỏ sự hiện diện của cậu khỏi người khác. Tớ bắt đầu ở gần trước."</p><p id="107">Cậu hiểu được kế hoạch, cảm thấy vi diệu lần đầu tiên cho ma thuật- làm điều không thể.</p><p id="108">"Làm mọi người quên đi cậu không dễ. Lãng quên thật sự cần nhiều hơn là ma thuật."</p><p id="109">Bộ dạng bí hiểm rất buồn cươi; cậu nghĩ nó không hợp với tính cách hiện tại của cô.</p><p id="110">Cô tối gầm mặt trước lời phê bình, phản lại:</p><p id="111">"Vậy, Quý Ngài Mặt Xệ- vậy <em>cậu</em> không buồn cười trong mắt mọi người sao? Có bao giờ nghĩ đến điều đó không."</p><p id="112">Con gái đang giận thật sự mạnh mẽ- trong cả lời nói lẫn hành động.</p><p id="113">Họ trao đổi liên hồi. Cậu hỏi về ma pháp thiếu nữ; Tiểu Trạch giải thích với sự tránh né để không trả lời.</p><p id="114">Cô không ở đây để thoả mãn sự tò mò của cậu.</p><p id="115">Gần tan giờ, dưới ánh trắng, cô giải thích kế hoạch.</p><p id="116">"Tớ sẽ thi triển một phép chia cắt linh hồn. Theo thời gian, nó tách linh hồn khỏi cơ thể. Một 'cậu' sẽ thay thế cậu. Cậu sẽ tan biến, không ai nhận ra. 'Cậu' ấy sẽ tiếp tục sống."</p><p id="117">"Cậu ấy sẽ kế thừa kí ức , nhưng không lo- không phải cậu. Một cậu bé tui vươi.</p><p id="118">"Khách hàng, kế hoạch ổn không?"</p><p id="119">Thay thế?</p><p id="120">Mặt Lưu Thanh hiện lên. Nếu cậu không như thế này- cười tươi?</p><p id="121">Vậy ổn thôi.</p><p id="122">Ít nhất không ai khóc khi cậu ra đi.</p><p id="123">Hứa Minh nhận được "cái chết" của mình. Lưu Thanh nhận được "Hứa Minh" mới.</p><p id="124">Kế hoạch hoàn hảo.</p><p id="125">"Ừm."</p><p id="126">"Theo hướng dẫn của tớ, pháp trận đã hoàn thành. Tối đa là một tháng."</p><p id="127">"Mm."</p><p id="128">Cô nắm tay cậu- ấm áp và mềm mại, làm chàng trai chưa bao giờ chạm vào cô gái choáng váng.</p><p id="129">"Bây giờ làm bạn. Chúng ta sẽ ở cạnh nhau thường xuyên, nghi ngờ sẽ dâng cao nếu không."</p><p id="130">Cũng đúng. Cậu không đáp lại được- hay cậu muốn biết cô muốn dẫn cậu đâu.</p><p id="131">"Cảm ơn, Tiểu Trạch."</p><p id="132">"Gọi tên rồi? Hứa Minh"</p><p id="133">Và thế là sự bắt đầu giữa cuộc gặp gỡ giữa ma pháp thiếu nữ Yang và Hứa Minh- không đẹp đẽ, nhưng vẫn đáng nhớ.</p><p id="134">Có lẽ trong một tháng, cậu sẽ nhớ về nó.</p><p id="135">Cậu vượt mặt cô. Cô học tập cùng cậu ( không lợi dụng giáo viên). Cô trêu chọc cậu trước Lưu Thanh- người gặp cô trước kia.</p><p id="136">Như cô nói, cậu dần thay đổi: Trao đổi câu đùa của cô, bới móc toán học dở tệ, giờ ăn trưa với Lưu Thanh.</p><p id="137">Cậu không còn bản thân. Cậu bé "vui tươi" dần thay thế cậu.</p><p id="138">tốt, tương lai với họ: Không còn tên hèn nhát.</p><p id="139">Suy nghĩ tự nhiên.</p><p id="140">Đến giờ để "chết" . Nhưng cậu vẫn do dự.</p><p id="141">Cả tháng vui vẻ, kí ức- mồi câu chia rẽ quá khứ của cậu, khó để chọn.</p><p id="142">Tối hôm đó, cậu tìm thấy cô.</p><p id="143">"Yang, làm ma pháp nhanh hơn đi? Tớ có thể hối hận đó? Không thể để người lạ lo được- ngay cả 'tớ' kia nữa."</p><p id="144">Cô cười.</p><p id="145">Cậu khó hiểu, cậu tra hỏi- rồi cô nói:</p><p id="146">"Ma pháp đã xong từ lâu rồi."</p><p id="147">Không thể nào- cậu vẫn là bản thân.</p><p id="148">"Không nhận ra? Cậu không còn là cậu bé ũ rũ như trước. Sự thay đổi trong tháng này- <em>đó</em> là ma thuật."</p><p id="149">Cười tươi, cô chưa bao giờ muốn cậu chết. Từ ban đầu: loại bỏ phần "ũ rũ" .</p><p id="150">Cô đã thành công.</p><p id="151">"Ma thuật không phải gian lận. Nó là phép màu và tình yêu."</p><p id="152">Sự thật đầu tiên và duy nhất.</p><p id="153">Nhưng tại sao lại không có phép màu khi tuyệt vọng kéo đến? Khi cô nằm trong vũng máu?</p><p id="154">Cuối kì. Vô số gai đen xuất hiện.</p><p id="155">Hứa Minh quỳ xuống trước cô gái váy trắng vụn vỡ. Không biết phải làm gì. Cười phút trước- giờ nằm trong vũng máu.</p><p id="156">"Ngu ngốc, Yang. Chia sẻ sức mạnh với con người yếu đuối ngay giây phút quan trọng. Kiêu ngạo? hay yếu đuối đến mức ta có thể đánh bại được ngươi?"</p><p id="157">Khối đen dị hợm trôi lại gần.</p><p id="158"><em>Chia sẻ sức mạnh?</em></p><p id="159">Run rẩy, cậu chạm vào trán cô- mong chờ hơi ấm. Lạnh lẽo chiếm lấy cậu.</p><p id="160">Lỗi của mình? Nếu mình chết sớm hơn...</p><p id="161">Tội lỗi, buồn nôn. Nhưng ánh sáng còn lại làm cậu bình tĩnh.</p><p id="162">"Cô ta gửi gắm sức mạnh vào tim ngươi. Chả trách sao lại yếu như vậy. Nhân loại, ngươi là kẻ gây nên chuyện gì này."</p><p id="163">Móc mỉa. Cậu đang đờ đẫn vì sự mất mát.</p><p id="164">"Giết tôi đi."</p><p id="165">Khối đen dừng lại. Một yêu cầu?</p><p id="166">Nhìn lại lần đầu tiên. Hứng thú, nó tiến lại gần:</p><p id="167">"Nhóc, muốn lập giao kèo không? Mọi thứ ngươi muốn?"</p><p id="168">Mọi thứ?</p><p id="169">"Mang cô ấy trở lại."</p><p id="170">Đầu ngẩng lên. Mặt tỉnh táo. Mùi hương quen thuộc.</p><p id="171">"Dễ. Giao kèo- cô ta sống. Vô số cơ hội để cứu cô ta."</p><p id="172">Phù Thuỷ Tuyệt Vọng xuất hiện. Dơ tay- địa ngục phía trước.</p><p id="173">Nhưng <em>đây</em> đã là địa ngục.</p><p id="174">Cậu đón lấy tay cô ta. Những thứ vô nghĩa bây giờ hoá thành: Tuyệt vọng.</p><p id="175">Siết chặt huy hiệu.</p><p id="176"><em>Yang, cậu tạo ra phép màu cho tớ. Tớ sẽ mở con đường tuyệt vọng để cứu cậu.</em></p><p id="177">Trái tim ánh sáng héo đi, ánh đen chiếm lấy nó.</p><p id="178">"Người giao kèo của ta, điều ước đã được thực hiện. Giờ thì cho thấy sự tuyệt vọng sâu thẳm nhất của ngươi. Ta sẽ quan sát ngươi."</p><p id="179">Phù thuỷ cười điên dại- một "phước lành" khác.</p><p id="180">Lời nguyền vòng lặp bén rễ.</p><p id="181">Mắt mở to: Bóng tối thành đám đông, ban đêm thành ngày nắng. Đầu cúi xuống theo thói quen.</p><p id="182">Tờ rơi quen thuộc trong tầm mắt.</p><p id="183">"Dịch vụ Ma pháp Thiếu nữ mở cửa chào đón! Giải quyết mọi vấn đề. Khách hàng mới sẽ nhận quà!"</p><p id="184">Hứa Minh đã quay lại.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/74d7206e-decf-4f38-b5d6-003d26a41676.jpg?t=1768360276" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/f4744abe-bb28-4201-aa0c-be5b777efb2c.jpg?t=1768360276" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note87174"><a href="#anchor-note87174" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87174" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Cái chết truyền thông</span></div><span class="note-content_real long-text">Cái chết truyền thông</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c291619-chap-15-nguoi-duy-nhat" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'rWYyCeCHltp8XsVzm2h9omY0xfUV9RSg39BVUZ0P';
        var comment_type = 'chapter';
        var comment_typeid = '291735';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'rWYyCeCHltp8XsVzm2h9omY0xfUV9RSg39BVUZ0P';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24128');
    chapter_id = parseInt('291735');

    readingObject = {
        series_id: series_id,
        series_title: 'Ma Pháp Thiếu Nữ Này Khá Kì Lạ',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="rWYyCeCHltp8XsVzm2h9omY0xfUV9RSg39BVUZ0P" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
