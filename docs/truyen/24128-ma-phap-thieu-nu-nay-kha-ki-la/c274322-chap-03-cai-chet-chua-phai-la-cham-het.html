<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Ma Pháp Thiếu Nữ Này Khá Kì Lạ - Chap 3: Cái Chết Chưa Phải Là Chấm Hết. - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Một thế giới nơi tồn tại những hiện tượng siêu nhiên và các truyền thuyết kì lạ, một cậu bé tin rằng bản thân đã mất tất cả. Cho đến khi cô ấy xuất hiện, mang phép màu đến với cuộc sống vô vị của cậu dưới cái thân phận...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="sVmQwzQ4sTetCvUB5Mo1jR4MJ0tuzxquj8cIEJBm">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c274322-chap-03-cai-chet-chua-phai-la-cham-het">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24128-038ce725-eff1-4417-b800-c00087ad05e6.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c271740-chap-25-bo-sung"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c274322-chap-03-cai-chet-chua-phai-la-cham-het" style="background: url('https://i.hako.vn/ln/series/covers/s24128-038ce725-eff1-4417-b800-c00087ad05e6.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la">Ma Pháp Thiếu Nữ Này Khá...</a></h5>
                    <small><i class="fas fa-pen"></i>冷冬阳</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/t34700-volume-1">Volume 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c265626-chap-1-cam-giac-bat-an">
                                                                        Chap 1: Cảm Giác Bất An
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c266086-chap-2-ma-phap-thieu-nu">
                                                                        Chap 2: Ma Pháp Thiếu Nữ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c271740-chap-25-bo-sung">
                                                                        Chap 2.5: Bổ Sung
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c274322-chap-03-cai-chet-chua-phai-la-cham-het">
                                                                        Chap 3: Cái Chết Chưa Phải Là Chấm Hết.
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Volume 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chap 3: Cái Chết Chưa Phải Là Chấm Hết.</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c274322-chap-03-cai-chet-chua-phai-la-cham-het#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,292 từ - Cập nhật: 
                        <time class="topic-time timeago" title="16-12-2025 16:53:34" datetime="2025-12-16T16:53:34+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chap 3: Cái Chết Chưa Phải Là Chấm Hết.</p>
                    <p id="1">Đêm nay có thể gọi là đêm hỗn loạn nhất cuộc đời Xiang Ming.</p><p id="2">Nhừng gì đã xảy ra: Được bế kiểu công chúa trên trời bởi bạn cùng bàn ma pháp thiếu nữ trong khi né tránh sự truy đuổi của những sinh vật quái dị. ( Nếu đó còn được gọi là sinh vật.)</p><p id="3">"Toàn là 'Fan' cuồng nhiệt nhỉ."</p><p id="4">Tông giọng của Su Xiaozue nhẹ nhàng, nhưng gọi cái mớ đen thui đó là 'fan'.......</p><p id="5">Xiang Ming nhìn thẳng vào mặt cô. Một tia sáng vàng rọi qua gương mặt không tì vết của cô, và vết cắt khi nãy đã biến mất chung với nó.</p><p id="6">"Mặt của cậu-"</p><p id="7">"Ma thuật đó."</p><p id="8">Cô biết chính xác những gì cậu định hỏi.</p><p id="9">"Tớ đã bảo cậu rồi nhỉ? Tớ là ma pháp thiếu nữ."</p><p id="10">Xiang Ming bị á khẩu. và thú thật là, cậu không có thời gian để trêu chọc cô.</p><p id="11">'Fan' của họ có vẻ bắt đầu mất bình tĩnh. Một tia năng lượng màu đen bắn ra từ người nó, nhanh hơn và chính xác hơn đòn vau72 nãy.</p><p id="12">"Có ai đó lại chỏ mũi vào rồi."</p><p id="13">Trước khi Xiang Ming kịp cảnh báo cô, Su Xiaozue- như có con mắt thứ ba- đã biết rằng tia năng lượng kia lao đến cô.</p><p id="14">"Nhìn vào mắt tớ này."</p><p id="15">Cô nói vào khi đó. Xiang Ming không thời gian để suy nghĩ linh tinh; cậu ngay lập tức nhìn vào đôi mắt lục bảo của cô nàng.</p><p id="16">Nagy lập tức, cậu cảm thấy như cậu đã nhìn thấy một đại dương mênh mông.</p><p id="17">"Đẹp... đẹp quá."</p><p id="18">Lời khen tthốt ra từ miệng của cậu.</p><p id="19">Su Xiaozue chớp mắt vài cái. Những tia sáng trượ khỏi người cô và nhập thẳng vào Xiang Ming.</p><p id="20">"Cảm ơn vì lời khen nhé Xiang. Nhưng bây giờ- cậu cần trở lại với thế giới thực."</p><p id="21">Sự khó hiểu chiếm lấy tâm trí cậu. Sau đó cậu nhìn thấy đôi tay đang nắm lấy tay cậu để lên ngực cậu. Cô đã đẩy cậu xuống nhẹ nhàng.</p><p id="22">Cậu vô thức đưa tay ra với lên, nhưng vô số tia sáng và hạt ánh sao đã tụ lạu xung quanh cậu. Như những nàng tiên trong chuyện cổ tích, chúng làm dịu cơ thể lẫn tinh thần của cậu.</p><p id="23">Chúng là để hộ tống và bảo vệ cậu thoát ra ngoài.</p><p id="24">Nhìn khó tin là vậy, Xiang Ming có thể hiểu được ý muốn của chúng.</p><p id="25">Nhưng.... Liệu cô ấy có ổn không?</p><p id="26">Bao bọc trong ánh sáng, cậu lao quanh xuống. Ánh nhìn hướng lên trên.</p><p id="27">Vô số vòng ánh sáng bay khắp bầu trời. Ở giữa bọn chúng, hình dáng đẹp đẽ của cô gái nổi bật một cách lạ kì.</p><p id="28">Cô đối mặt với khối "Mây đen." Một cô gái đâu với một con quái vật, ở trên bầu trời cao- như sự đối đầu của ánh sáng và bóng tối từ những bộ phim vậy.</p><p id="29">Phân cảnh như phim ấy làm tim của Xiang Ming đập mạnh mẽ.</p><p id="30">Thằng con trai nào mà không muốn trải qua cảm giác của trận chiến cuối cùng cơ chứ? Nhìn ngầu vãi ấy!</p><p id="31">Trong khi đó, ngay tại trường Cấp 3 Thanh Hà số 2, người đàn ông mặc vest đen nhìn lên trời. Khung cảnh hùng vĩ ban nãy đập vào mắt anh.</p><p id="32">Không như sự thích thú của chàng trai kia, giọt mồ hôi đầy lạnh lẽo lướt qua trán anh.</p><p id="33">"Đúng là hợp phong cách của Tiểu Thư Yang, Độ hùng vĩ ngang tin đồn rồi."</p><p id="34">Anh nhìn về phía bầu trời rực rỡ do vòng ánh sáng kia. Ánh sáng ấy chạm đến cả mặt đất, thậm chí làm yêu đi cả những hình bóng màu đen xung quanh anh.</p><p id="35">"Không- Nói thật thì, nó nhìn còn lớn hơn những gì tin đồn nói nữa."</p><p id="36">Anh siết chặt tay lại, sẵn sàng sử dụng sự hỗ trợ bất ngờ này để quét sạch bóng đen xung quanh anh.</p><p id="37">Nhưng anh đã đánh giá thấp sự trợ giúp này.</p><p id="38">Ngay khi anh định tấn công, một mặt trời nhí nhảnh nháy mắt bỗng xuất hiện ở trên trời, đâm sầm vào mặt đất</p><p id="39">Cơn chấn động huỷ diệt các bóng đen ở gần. Ánh sáng vàng bao phủ toàn bộ khu vực</p><p id="40">Trước khi người đàn ông kịp phản ứng, ánh sáng dịu dàng đã che khuất tầm nhìn của anh.</p><p id="41">Khi nó tan biến dần, thông tin mới- đúng hơn là, một uỷ thác- xuất hiện trong tâm trí anh.</p><p id="42">"Cô thật sự làm khó tôi rồi, tiểu thư Yang à."</p><p id="43">Anh nhìn vào cậu trai vừa xuất hiện giữa vụ va chạm kia và nở một nụ cười khô khốc.</p><p id="44">Nhưng anh vẫn đến gần vị trí ấy.</p><p id="45">"Lâu rồi chưa gặp, hậu bối Xiang."</p><p id="46">Xiang Ming vẫn đang chăm chú vào ánh sáng đang mờ dần trên cơ thể của mình cho đến khi giọng nói của người đàn ông làm cậu hú hồn.</p><p id="47">Cậu nhìn lên- và nhìn thấy một khuôn mặt quen thuộc.</p><p id="48">Còn bất ngờ hơn nữa là gặp anh ở đây.</p><p id="49">"Tiền bối Li Si? SAo anh lại ở đây?"</p><p id="50">Xiang Ming hỏi lớn, rồi bỗng nâng cao cảnh giác. Cái bóng đen "Zhou-Keo-kiệt" kia đã để lại ấn tưỡng không tốt với cậu. Cậu vẫn chưa chắc người trước mặt mình là Li Si.</p><p id="51">Nhìn thấy sự lo lắng của cậu, Li Si trầm ngâm một hồi rồi trả lời:</p><p id="52">"Vậy là cậu cũng nhìn thấy mấy cái bóng đen kia rồi."</p><p id="53">Mặt của Xiang Ming tái lại, vô thức, cậu lùi lại vài bước.</p><p id="54">Li Si không bận tâm cho lắm; nụ cười khi nãy của anh vẫn không thay đổi.</p><p id="55">"Phản ứng đúng rồi đó hậu bối. Nhưng vì cậu đã thấy những cái bóng đen kia, cậu nên biết là sự phản kháng của con người trước mất thứ đó là vô ích với những thứ như vậy."</p><p id="56">Nụ cười của anh bỗng tắt. Mắt nhắm lại, biểu cảm đầy nghiêm túc:</p><p id="57">"Nếu anh là một cái bóng giả dạng làm Li Si, chú mày sẽ không nhận ra anh đâu. Ngược lại cũng vậy."</p><p id="58">Xiang Ming ngừng di chuyển. Cậu cân nhắc lời nói của Li Si, rồi kết hợp với nhận thức của cậu và những gì Su Xiaozue đã nhắc cậu.</p><p id="59">"Tôi sẽ tạm tin anh, tạm thời thôi nhé."</p><p id="60">Cậu quyết định chọn tin vào Li Si- Hầu hết là cậu không còn lựa chọn nào khác.</p><p id="61">Những bóng đen mà ánh sáng khi nãy thanh tẩy đã bắt đầu tụ lại và kết hợp. Tiếng thì thầm vô nghĩa của chúng đã reo lên tai cậu được một lúc.</p><p id="62">Nếu cậu tiếp tục câu kéo thời gian với Li Si, thì cậu cũng không rõ những thứ này sẽ làm những gì.</p><p id="63">"Vậy anh đoán là anh mày không thể làm chú mày thất vọng rồi."</p><p id="64">Một cơn gió thoảng quét qua mặt Xiang Ming. Li Si bỗng xuất hiện kế bên cậu, tung ra một cú đấm.</p><p id="65">Cái bóng nguyên dạng hình thành đằng sau cậu bị đánh trúng, tan biến ngay lập tức.</p><p id="66">"Cảnh giác không chỉ dành cho người thường đâu, hậu bối."</p><p id="67">Li Si thu hồi nắm đấm của mình. Đôi găng tay đen bóng sượt qua mắt Xiang Ming. Trong tức khắc đó, tâm trí Xiang Ming bỗng tối sầm lại.</p><p id="68">Khi tâm trí cậu trở lại, Li Si đã quan sát cậu với vẻ thích thú.</p><p id="69">"Tiền bối, ánh mắt của anh ghê quá."</p><p id="70">Xiang Ming than thở.</p><p id="71">"Không, không... anh mày chỉ bất ngờ thôi."</p><p id="72">Nụ cười của Li Si tươi rói hơn, nhìn rất biến thái.</p><p id="73">"Cậu có thể nhìn thấy ngay cả 'Trục Xuất'. Hèn gì Tiểu thư Yang nhờ tôi đưa cậu ra khỏi đây."</p><p id="74">Anh nói một cách bí ẩn, rồi ra hiệu cho Xiang Ming đi theo mình.</p><p id="75">Tiểu thư Yang? Su Xiaozue?</p><p id="76">Xiang Ming nhanh chóng theo chân anh nhưng nhận ra tông giọng của Li Si bỗng nghiêm nghị lại mỗi khi anh nhắc đến tên cô.</p><p id="77">Cậu nhìn lên trận chiến đang diễn ra ở trên trời và cảm thấy nhẹ nhõm.</p><p id="78">Trận chiến lớn như này- Bất cứ ai nhìn vào cũng thấy khâm phục.</p><p id="79">Li Si mở ra một con đường phía trước, mỗi lần có con nào đến gần anh thì sẽ bị anh dùng một đấm xử gọn. Nhìn dễ như farm creep.</p><p id="80">Nhìn thấy điều này, Xiang Ming nhớ lại rằng nếu khi nãy anh ta không thân thiện hơn một chút thì giờ cậu đã đo sàn rồi.</p><p id="81">Đó là lí do tại sao mà Li Si không quan tâm đến sự nghi ngờ của cậu.</p><p id="82">Trong lúc đang dọn dẹp các bóng đen, Li Si nhìn cậu trai đang lẩm bẩm kia và nhếch mép.</p><p id="83">"Có nhiều câu hỏi đúng không, Hậu bối? Như là 'anh mày là ai, chúng ta đang ở chốn nào, mấy cái bóng này là gì- anh mày có thể trả lời hết. Nhưng sau khi chúng ta thoát khỏi đây thì mày cũng phải trả lời vài câu hỏi của anh."</p><p id="84">"Có phải liên quan đến cô ấy không?"</p><p id="85">Xiang Ming không nghĩ là bản thân có thể khiến Li Si lại tòm mò đến vậy- ngoại trừ 'tiểu thư Yang" mà anh đang nhắc tới.</p><p id="86">Li Si cười rồi khẽ lắc đầu.</p><p id="87">"Cậu thật sự không biết nhiều về tiểu thư Yang. Cô ấy là nhân vật lớn đấy. Tôi không muốn gây thù chuốc oán đâu."</p><p id="88">Xiang Ming nhận thấy anh ta nói toàn sự thật, nghi ngờ lại dâng lên trong lòng cậu.</p><p id="89">"Vậy anh muốn cái gì từ tôi? tôi chỉ một học sinh sinh tầm thường thôi, không có cái gì giá trị cả."</p><p id="90">Cái gì cũng có cái giá của nó- Xiang Ming đã học được điều này từ bé.</p><p id="91">Li Si vẫy tat, dọn sạch tất cả bóng đen xung quanh họ, rồi quay mặt nhìn cậu đầy nghiêm nghị.</p><p id="92">"Hậu bối à, cậu hơi đánh giá thấp bản thân rồi. Bất cứ ai được chọn bởi tiểu thư Yang là 'tầm thường' đâu."</p><p id="93">Một vòng sáng phát nổ ngay trên trời, biến đêm thành ngày. Khuôn mặt của Li Si tan biến thành màn đêm.</p><p id="94">"Có bao giờ nghe qua truyền thuyết đô thị chưa?"</p><p id="95">Ánh sáng dần mờ đi. L:i Si quaylung7 đi, tiếp tục dọn dẹp những bóng đen kia,</p><p id="96">"Những thứ xuất hiện và sinh ra từ lời truyền miệng trong thành phố- những thực thể mà con người bình thường không thể hiểu được. Chúng được gọi là truyền thuyết đô thị."</p><p id="97">"Cậu nghe qua vài cái rồi nhỉ? Những câu truyện chỉ cồn tại qua tin đồn."</p><p id="98">Xiang Ming bỗng khựng lại. Vì một vài lí do nào đó, cậu ngay lập tức nhớ lại những gì bạn học của cậu đã nói ngày hôm đó.</p><p id="99">Bóng đen? Không bao giờ đó là chuyện trùng hợp được........</p><p id="100">Li Si không đợi cậu trả lời.</p><p id="101">"Những cái bóng này là một loại truyền thuyết đô thị. Cậu chắc hẵn đã nghe qua truyện người chết quay trở lại dưới hình dáng bóng đen."</p><p id="102">"Bời vì nỗi sợ của con người về cái chết, những cái bóng này là ở khắp nơi. Một số chúng thì khá hung dữ- nhưng hầu hết như cậu thấy đó, những cái bóng ở đây rất khát máu.</p><p id="103">Anh nhìn Xiang Ming một hồi lâu.</p><p id="104">"Như là.. chúng đang khao khát gì đó vậy."</p><p id="105">"Sự Sống hay Cái Chết?"</p><p id="106">"Heh lạc đề rồi. Nhưng anh mày đến Thanh Hà số 2 này là để điều tra tại sao chúng lại trở nên như này."</p><p id="107">"Điều tra?"</p><p id="108">Xiang Ming hỏi ngay đúng khoảng khắc.</p><p id="109">Xuyên qua vài lớp màn đen, họ cuối cùng cũng tiến gần đến cổng trường- một bước gần hơn với sự an toàn.</p><p id="110">"Đúng vậy, giới thiệu rõ ràng: Anh là Một Điều Tra Viên từ bộ phận Nghiên Cứu về Truyền thuyết Đô thị, hoạt động trong đội đặc nhiệm. Anh mày giám sát và điều tra truyền thuyết đô thị."</p><p id="111">"Công việc của anh mày khá là tối mật."</p><p id="112">Li Si đứng ngay cổng, đầy vui vẻ.</p><p id="113">"Vậy giờ anh sẽ xoá kí ức tôi sao?"</p><p id="114">Xiang Ming nuốt khan trong họng, cậu không ngờ rằng quyền lực của Li Si lại lớn đến vậy</p><p id="115">Mà nghĩ lại, không phải anh ta là Đặc Vụ Áo Đen* sao? Ngay cả ngoại trang cũng y hệt.</p><p id="116">"Theo luật thì, đúng vậy."</p><p id="117">Li Si nhìn về phía cậu, xem nó như một câu đùa.</p><p id="118">Rồi anh ta hướng về phía cánh cổng. Một màn chắn màu đen xuất hiện trước mắt họ.</p><p id="119">"Thắc mắc rằng tại sao mớ hỗ đốn này không ảnh hưởng đến bên ngoài không?"</p><p id="120">Không hẳn.</p><p id="121">Xiang Ming lắc đầu đầy miễn cưỡng, nhưng cơ thể cậu thì hoàn toàn ngược lại:</p><p id="122">"Tại sao?"</p><p id="123">"Truyền thuyết đô thị chỉ có thể được nhìn thấy dưới vài điều kiện đặc biệt. Cái màn chắn trước mặt chúng ta là một điều kiện đó. Cậu cũng có thể gọi nó với một cái tên thông dụng."</p><p id="124">"Một lãnh địa."</p><p id="125">Li Si đâm tay của mình thẳng vào màn chắn và cắt thẳng xuống. Một lỗ hổng lớn đủ cho một người đi qua bỗng xuất hiện.</p><p id="126">Con đường náo nhiệt ngay lập tức khiến tâm trí của Xiang Ming bình tĩnh lại.</p><p id="127">Bên kia màn chắn là thế giới thực.</p><p id="128">Chỉ cần bước qua bên kia, và cậu có thể kết thúc cái đêm quỷ quái này và trở lại với cuộc sống bình thường đúng không?</p><p id="129">Âm thanh thì thầm ban nãy bắt đầu tràn vào tai cậu một lần nữa.</p><p id="130">"Được rồi, thoát khỏi đây thôi."</p><p id="131">Li Si bước ra khỏi màn chắn và nhìn về phìa Xiang Ming.</p><p id="132">Nhưng cậu ta không hề di chuyển.</p><p id="133">"Hậu bối! Xiang Ming! Đưa tay ra đây!"</p><p id="134">Li Si lo lắng vì sự bất cản của bản thân trong khi cố gắng lôi Xiang Ming ra ngoài.</p><p id="135">Một người đi vào màn chắn với không một sức mạnh như vậy thì làm sao có thể thoát ra ngoài một cách dễ dàng như vậy được?</p><p id="136">Mọi thứ đều có cái giá của nó, đúng không?</p><p id="137">"Em vẫn có lớp thưa tiền bối."</p><p id="138">Biểu cảm của Xiang Ming bỗng trở nên vô cảm. Cậu đẩy tay Li Si ra chỗ khác. Màn chắn ngay lập tức bị đóng lại, chia cắt hai bọn họ.</p><p id="139">Li Si cố gắng mở nó như khi nãy, chỉ khi đó anh mới nhận ra anh đã đấm vào một bức tường.</p><p id="140">"Cái lãnh địa này đang mất cân bằng- Có phải do trận chiến gây nên không? Đợi một chú nhé Hậu bối!"</p><p id="141">Sau khi màn chắn đóng lại, Xiang Ming bỗng lấy lại ý thức của mình. Một tia sáng lẻ loi bay ra khỏi cơ thể cậu và biến mất.</p><p id="142">Lấy lại được ý thức, cậu nhìn về phái màn chắn kia. Cơn tuyệt vọng chiếm lấy tâm trí cậu.</p><p id="143">Những bóng đen bắt đầu bao vây lấy cậu.. Giờ phải làm sao đây? Cậu không mạnh như Li Si, và Su Xiaozue thì đang bận chiến đấu với thứ kia. Đây là cái kết của cậu sao?</p><p id="144">"Quay trở lại lớp đi."</p><p id="145">"Cậu đến từ lớp nào?"</p><p id="146">"Kì thi này chỉ có một lần trong đời thôi đấy."</p><p id="147">Trong khi những bóng đen dần tiến gần đến cậu, những tiếng thì thầm của chúng bắt đầu rõ hơn, cơ thể và tinh thần của cậu bắt đầu mờ dần.</p><p id="148">Sau đó- một giọng nói quen thuộc lọt vào tai cậu.</p><p id="149">Xiang Ming quay đầu nhìn về phía giọng nói kia đầy hi vọng.</p><p id="150">Liu Qing vẫy tay với cậu và hét lên:</p><p id="151">"Bên này! Xiang Ming, nhanh lên!"</p><p id="152">Xiang Ming vô thức chạy sang bên đó. Liu Qing cũng bị kéo vào vụ việc này sao? Cậu ta chắc chắn là đến đây để cứu Xiang Ming. Cậu phải nhanh chóng đến chỗ Liu Qing trước khi những cái bóng bắt kịp cậu.</p><p id="153">Cậu hoàn toàn tin vào Liu Qing trước mặt - Bạn từ thời thơ ấu cơ mà, cậu ta sẽ không bao giờ lừa Xiang Ming.</p><p id="154">Xiang lao đi, gần đến vị trí của Liu Qing.</p><p id="155">"Xiang Ming! ĐỪNG QUA ĐÓ, ĐÓ KHÔNG PHẢI LÀ LIU QING!"</p><p id="156">Đằng sau cậu, một lỗ thủng dẫn đến thế giới thực mở ra. người đàn ông mặc vest đen hét lên hoảng loạn.</p><p id="157">Nhưng Xiang Ming không hề nghe thấy. Đây là Liu Qing cơ mà, làm sao mà có thể là giả cơ chứ? Đây chắc chắn là <em>Liu Qing</em> thật.</p><p id="158">Không thể nào là giả.</p><p id="159">"ĐỪNG TIN NHỮNG GÌ NÓ NÓI! ANH DẶN MÀY RỒI!"</p><p id="160">Li Si lao ra vết cắt trên màn chắn đến chỗ cậu.</p><p id="161">Nhưng những bóng đen kia bao vây anh như những con thú dại, khiến anh mắc kẹt.</p><p id="162">Có thể là lời cảnh báo của li Si đã có tác dụng, hoặc có thể là do trên trời đã xuất hiện một mặt trời tươi rói bỗng xuất hiện.</p><p id="163">Một chút ý thức bỗng khiến Xiang Ming tỉnh lại. Cậu dừng lại và nhìn vế phía Li Si đang bị bao vây.</p><p id="164">"Liu Qing đó là giả á?"</p><p id="165">ngay khi cậu vừa nói xong, hai con dao đen đúa đâm xuyên lòng ngực cậu, máu chảy từ miệng của cậu.</p><p id="166">"làm sao tao không phải là Liu Qing được chứ?"</p><p id="167">"Liu Qing" đứng sau lưng cậu, siết chặt hai con dao cắm sâu trên ngực của Xiang Ming.</p><p id="168">Đau- Đau quá- Đau quá.</p><p id="169">Xiang Ming bỗng cảm thấy cơ thể nhẹ tênh, tầm nhìn của cậu mờ dần. Điều cuối cùng cậu thấy là Li Si đang tuyệt vọng đâm thẳng qua màn đêm về phía cậu.</p><p id="170">Cứu tôi, cứu với, có ai không.</p><p id="171">Ánh sáng dịu dàng bao phủ lấy Xiang Ming, nhưng nó không thể chạm vào cơ thể bị ô uế bởi cái chết của cậu.</p><p id="172">Bóng tối thay thế chỗ của ánh sáng. Đau đớn lấn át hi vọng. Cái chết dẫm đạp sự sống mong manh.</p><p id="173">Cậu sắp chết.</p><p id="174">Trong khoảng khắc cuối đời của cậu, cậu nhớ về hình ảnh của cô gái ấy.</p><p id="175">Sau đó cậu nhớ một thứ gì đó.</p><p id="176">Cậu vẫn chưa nhận được cây kem mà cô ấy hứa với cậu.</p><p id="177">Sau đó bóng tối chiếm lấy hoàn toàn ý thức của cậu.</p><p id="178">"Xiang Ming! Xiang Ming!"</p><p id="179">Sau một khoảng thời gian dài, một giọng nói quen thuộc làm cậu bật dậy. Vô thức, cậu nhảy bật khỏi ghế của mình và hô: "Có mặt!"</p><p id="180">Người đang đứng trên bục giảng mặt đầy cau có, sau đó dịu lại.</p><p id="181">"Em vừa ngủ ngon quá nhỉ- Chắc là em biết giải câu này đúng không... từ từ, em bị sao vậy? Mặt em nhìn tái nhợt và mệt mỏi quá. Sốc nhiệt sao? Nhanh, lớp trưởng- Đem em ấy đến phòng y tế!"</p><p id="182">Trong mùa hè khắc nghiệt này, khuôn mặt tái nhợt của cậu đầy khiếp đảm. Cậu vô thức nhìn mọi thứ xung quanh, một cảm giác vô thực lấp đầy tim cậu.</p><p id="183">Cho đến khi bàn tay của cô gái kia đặt lên vai cậu.</p><p id="184">"Cậu ổn chứ, Xiang Ming?"</p><p id="185">Cậu nhìn về phía Su Xiaozue, sau đó lơ đễnh- đổ gục vào tay của cô.</p><p id="186">Lớp học rơi vào hoảng loạn trước sự bất tỉnh của Xiang Ming.</p><p id="187">giữa trung tâm của mọi thứ, Su Xiaozue nhìn về phía cậu trai với biểu cảm phức tạp.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la/c271740-chap-25-bo-sung" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24128-ma-phap-thieu-nu-nay-kha-ki-la" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'sVmQwzQ4sTetCvUB5Mo1jR4MJ0tuzxquj8cIEJBm';
        var comment_type = 'chapter';
        var comment_typeid = '274322';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'sVmQwzQ4sTetCvUB5Mo1jR4MJ0tuzxquj8cIEJBm';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24128');
    chapter_id = parseInt('274322');

    readingObject = {
        series_id: series_id,
        series_title: 'Ma Pháp Thiếu Nữ Này Khá Kì Lạ',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="sVmQwzQ4sTetCvUB5Mo1jR4MJ0tuzxquj8cIEJBm" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
