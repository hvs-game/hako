<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Thanh Gươm Dẫn Lối - 5-3 Kiểu nhân vật sẽ chết trong tiểu thuyết trinh thám - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="“Tôi thì chẳng có tài cán gì ngoài việc vung kiếm, nên nếu xông vào mê cung một mình thì chắc chẳng bao giờ quay ra được nữa đâu. Haha.” Jir là kiếm sĩ chủ lực thuộc đội thám hiểm hạng S, trong lúc chinh phục mê cung độ khó...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="Op7eN08Dp5idojNfoZXMjh3ie6aBGjbUFoWvohY5">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/23822-thanh-guom-dan-loi/c285355-5-3-kieu-nhan-vat-se-chet-trong-tieu-thuyet-trinh-tham">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s23822-8ca3993e-f8a3-4d65-86ef-464be27f0fc2.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/23822-thanh-guom-dan-loi/c285354-5-2-oan-tu-ti-thi-bat-loi-cho-toi-qua-con-gi"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/23822-thanh-guom-dan-loi"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/23822-thanh-guom-dan-loi/c285355-5-3-kieu-nhan-vat-se-chet-trong-tieu-thuyet-trinh-tham" style="background: url('https://i.hako.vn/ln/series/covers/s23822-8ca3993e-f8a3-4d65-86ef-464be27f0fc2.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/23822-thanh-guom-dan-loi">Thanh Gươm Dẫn Lối</a></h5>
                    <small><i class="fas fa-pen"></i>Quiet / Toi8</small>
                    <small><i class="fas fa-paint-brush"></i>Murokouichi</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/23822-thanh-guom-dan-loi/t34031-tap-01">Vol 01</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c248279-minh-hoa">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Minh họa
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c248309-chuong-1-1-neu-cau-khong-che">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        1-1 Nếu cậu không chê
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c248438-chuong-1-2-toang-that-roi">
                                                                        1-2 Toang thật rồi
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c248450-1-3-khong-thay-gi-ca">
                                                                        1-3 Hoàn toàn Không thấy gì cả
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c249176-chuong-1-4-de-tro-nen-nhu-vay">
                                                                        1-4 Để trở nên như vậy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c251430-2-1-dung-co-ma-coi-thuong">
                                                                        2-1 Đừng có mà coi thường
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c251431-2-2-du-chi-la-mot-manh-xuong">
                                                                        2-2 Dù chỉ là một mảnh xương
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c251432-2-3-chua-den-nam-phut-dau">
                                                                        2-3 Chưa đến năm phút đâu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c251433-2-4-noi-chuyen-xuong-sa">
                                                                        2-4 Nói chuyện xuồng sã
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c251435-2-5-hay-coi-nhu-dang-tren-con-thuyen-lon-ma-yen-tam-thu-gian">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        2-5 hãy coi như đang trên con thuyền lớn mà yên tâm thư giãn
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c254049-3-1-da-hoc-duoc-nhieu-dieu">
                                                                        3-1 Đã học được nhiều điều
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c255677-3-2-cau-hoi-bi-tho-lo-do-nha">
                                                                        3-2 Cậu hơi bị thô lỗ đó nha
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c257449-3-3-nguoi-dong-doi-da-chet">
                                                                        3-3 Người đồng đội đã chết
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c261497-4-1-hay-la-hai-dua-chung-ta-song-o-day-luon-di">
                                                                        4-1 Hay là hai đứa chúng ta sống ở đây luôn đi
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c270058-4-2-co-khi-nao-han-bo-tron-roi-khong">
                                                                        4-2 Có khi nào hắn bỏ trốn rồi không?
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c270064-4-3-xin-hay-doi-xu-nhe-nhang-voi-toi">
                                                                        4-3 Xin hãy đối xử nhẹ nhàng với tôi!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c277737-5-1-vi-con-tre-trung-khoe-manh">
                                                                        5-1 Vì còn trẻ trung khỏe mạnh
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c285354-5-2-oan-tu-ti-thi-bat-loi-cho-toi-qua-con-gi">
                                                                        5-2 Oẳn tù tì thì bất lợi cho tôi quá còn gì
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/23822-thanh-guom-dan-loi/c285355-5-3-kieu-nhan-vat-se-chet-trong-tieu-thuyet-trinh-tham">
                                                                        5-3 Kiểu nhân vật sẽ chết trong tiểu thuyết trinh thám
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Vol 01</h2>
                    <h4 class="title-item text-base font-bold" align="center">5-3 Kiểu nhân vật sẽ chết trong tiểu thuyết trinh thám</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/23822-thanh-guom-dan-loi/c285355-5-3-kieu-nhan-vat-se-chet-trong-tieu-thuyet-trinh-tham#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,622 từ - Cập nhật: 
                        <time class="topic-time timeago" title="04-01-2026 23:11:31" datetime="2026-01-04T23:11:31+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">5-3 Kiểu nhân vật sẽ chết trong tiểu thuyết trinh thám</p>
                    <p id="1">“Tôi có thật sự cần thiết trong tổ đội này không？”</p><p id="2">“Hửm？” “Ể？”</p><p id="3">Cậu lỡ buột miệng lẩm bẩm, lập tức từ phía sau có hai giọng nói đồng thanh vang lên.</p><p id="4">“Cậu nói cái gì thế”</p><p id="5">“Đáng tin cậy lắm nha, lắm nhaa～”</p><p id="6">“Không, nhưng mà tôi thậm chí còn chẳng mấy khi rút kiếm ra khỏi vỏ……”</p><p id="7">Đã một tháng trôi qua kể từ đó.</p><p id="8">Cuộc phiêu lưu diễn ra cực kỳ suôn sẻ.</p><p id="9">Việc Yunis gia nhập tuyệt đối không chỉ đơn thuần là tăng thêm chiến lực.</p><p id="10">Thời gian đầu, vì chưa quen, cậu ta còn khiêm tốn nói kiểu “Vì chưa quen nên tôi chỉ đi theo thôi có được không nhỉ？” rồi ngoan ngoãn bắt nhịp với chuyến phiêu lưu của Jir và Lilyleah, nhưng chẳng bao lâu sau, cậu cũng đã nắm được bí quyết.</p><p id="11">Lúc này, xung quanh ba người luôn có một cơn mưa rả rích rơi xuống.</p><p id="12">Dĩ nhiên, đó không phải là nước nhỏ xuống từ trần hang, cũng chẳng phải là loại mưa làm ướt mặt đất. Đó là ma pháp của Yunis. Một ma pháp thượng cấp với niệm chú phức tạp bắt đầu từ câu—〈Cơn mưa hóa thành thanh âm của ánh sáng〉</p><p id="13">Kể từ khi sử dụng ma pháp này, đám ma thú tép tiu gần như không còn lộ diện nữa. Vì chỉ cần chạm vào cơn mưa đó thôi, ma thú sẽ tan chảy rồi biến mất.</p><p id="14">Giờ đây, mọi chuyện cảm giác gần như chẳng khác gì việc đi bộ trên một con đường bình thường.</p><p id="15">“Tài cán đã chỉ có mỗi biết vung kiếm, mà giờ đến vung kiếm cũng không làm thì tôi đúng là đồ vô dụng chính hiệu rồi”</p><p id="16">“Nói vậy thì, có khi tui cũng chẳng cần cái này đâu. Dù sao thì cũng có ai bị thương đâu. Thánh Vực Hóa thì chắc Yunis-kun cũng làm được thứ tương tự mà.”</p><p id="17">“Với lại ánh sáng với ánh sáng, bị trùng hình tượng nhân vật rồi,” Lilyleah nói thêm.</p><p id="18">“Nghĩ lại thì bí kiếm của mình cũng lấy tên liên quan đến mặt trăng, sao với trăng thì cũng hơi trùng hình tượng thật,” Jir vừa nghe vừa nghĩ.</p><p id="19">“……...Đừng có nói mấy lời đau lòng như vậy chứ.”</p><p id="20">Yunis nói, với giọng điệu như thể cậu mới là người buồn bã nhất.</p><p id="21">"ĐỪNG CÓ NÓI MẤY LỜI ĐAU LÒNG NHƯ THẾ CHỨ!!!!!"</p><p id="22">“Uoa”</p><p id="23">“Sao thế. Tự nhiên hét toáng lê.”</p><p id="24">“Xin lỗi. Tự nhiên thấy cô đơn quá……”</p><p id="25">“Ổn mà,” Yunis nói bằng giọng lí nhí yếu ớt.</p><p id="26">“Đúng là sức mạnh tôi có thì tính đa dụng cao nhất thật, với lại không hiểu sao mà cảm giác phương hướng của tôi lại đỡ tệ nhất, đó cũng là sự thật……”</p><p id="27">“À, ngã tư.”</p><p id="28">“Yunis-kun, tiếp theo đi hướng nào？”</p><p id="29">“Không biết.”</p><p id="30">“Dỗi rồi à.”</p><p id="31">“Đừng có dỗi mà～”</p><p id="32">Rốt cuộc, sau khi phán "Bên phải" bắt đầu tuôn một tràng:</p><p id="33">“Hai người làm ơn đừng có nói mấy chuyện như thế lần thứ hai nữa được không. Tôi ấy, nói gì thì nói, cũng là vì mong được gặp những người có năng lực dị biệt ngang đẳng cấp của mình như hai người, nên mới nhận lời thỉnh cầu từ giáo hội và liên minh ma pháp. Hơn nữa, việc được đi bộ ba người thế này giống như đi dã ngoại cùng bạn bè mà mình chưa từng được trải nghiệm, tôi thấy hạnh phúc muốn chết đi được đấy, trong lòng thì phấn khích lắm đấy biết không hả.”</p><p id="34">“……Xin lỗi. Đã làm cụt hứng rồi”</p><p id="35">“Yunis-kun dễ thương ghê～”</p><p id="36">“Đúng không,” Yunis khịt mũi nói.</p><p id="37">“Dã ngoại……dã ngoại à.”</p><p id="38">Trước lời nói đó của Yunis, Jir âm thầm gật đầu.</p><p id="39">Quả thật, tình hình hiện tại chẳng khác mấy so với điều đó.</p><p id="40">Nhờ có thánh thuật của Lilyleah, không cần phải lo lắng về việc cơ thể bị bẩn.</p><p id="41">Và nếu có ma pháp của Yunis, cái lạnh của mùa đông này cũng chẳng phải mối đe dọa lớn gì.</p><p id="42">Hơn nữa, dù độ khó của mê cung đúng là đã tăng lên sau khi mở phong ấn của ma pháp ngoại điển, nhưng vẫn ở mức độ mà một mình Jir cũng có thể xoay xở được phần nào, huống chi là với tổ đội đã có Yunis gia nhập thì lại càng không phải mối đe dọa lớn. </p><p id="43">Ngay cả trùm tầng mà họ đối mặt chỉ ba ngày trước cũng bị đánh bại chỉ với một nhát vung của thánh kiếm bản giản lược, và trận chiến kết thúc còn đến nhanh hơn cả lúc Yunis bắt đầu hỗ trợ hỏa lực.</p><p id="44">Ngoại trừ việc đồ ăn dở kinh khủng, và rõ ràng là họ đang đi lòng vòng quanh một chỗ (liên tục bắt gặp những dấu mốc do chính mình để lại!), thì đây là một chuyến phiêu lưu gần như không có gánh nặng gì đáng kể.</p><p id="45">Họ đã đi xuống được 50 tầng.</p><p id="46">Không rõ tầng thấp nhất sâu đến mức nào, nhưng cảm giác rằng việc hoàn toàn chinh phục mê cung chắc cũng không còn xa nữa.</p><p id="47">“Mọi người có từng đi dã ngoại chưa？”</p><p id="48">Yunis hỏi như vậy.</p><p id="49">“À, ý là có từng đi học ở trường không ấy nhỉ.”</p><p id="50">“Tui thì có nha～ Trường của giáo hội. Tốt nghiệp đàng hoàng luôn rùi đó.”</p><p id="51">“Tôi thì cũng coi như là có đi…… Nhưng chỉ là nơi mà người thông thái trong làng dạy đọc viết với tính toán thôi. Dã ngoại thì có cũng đi. Kiểu giống picnic ấy.”</p><p id="52"><em>‘</em><em>D</em><em>ù </em><em>k</em><em>hông phải là nơi gì xa lạ, </em><em>mà chỉ</em><em> là chỗ thường xuyên lui tới, nhưng khi c</em><em>huyến</em><em> đi dạo ấy được gắn cho một cái tên thì lạ thay, lòng lại rộn ràng hẳn lên—</em><em>'</em> Cậu vừa rảo bước vừa hồi tưởng lại những chuyện như thế.</p><p id="53">“Thích thật đấy. Tôi thì vào Đại Thư Viện từ khá sớm nên không có những cơ hội kiểu đó.”</p><p id="54">“Mấy chỗ như vậy thường vào sớm thế à？”</p><p id="55">“Không đâu. Tôi còn chưa từng thấy người nào cùng trang lứa ở đó nữa là. Thông thường để trở thành ma pháp sư thì hoặc là đi học ở học viện ma pháp, hoặc không thì làm đệ tử cho một ma pháp sư tự do mới là con đường phổ biến. Chứ cái kiểu đùng một cái nhảy bổ vào ngay nơi cốt lõi như tôi thì chắc là hiếm lắm. Mấy nơi như vậy vốn dĩ cũng tiềm ẩn nguy hiểm, nên thường là dành cho người ở trình độ thượng cấp. Trường hợp của tôi là vì có sư phụ có mối duyên sâu nặng với Đại Thư Viện.”</p><p id="56">“Ra là vậy,” Jir gật đầu.</p><p id="57"><em>‘</em><em>Chỉ cần bước ra khỏi lĩnh vực của mình một chút thôi là một thế giới mà bản thân chưa hề hay biết sẽ trải rộng ra đến vô tận</em><em>,</em><em>’</em> cậu nghĩ như thế.</p><p id="58">“Vậy thì đây là chuyến dã ngoại đầu tiên của Yunis-kun nhỉ. Vui ghê ha”</p><p id="59">“Đúng đúng. Nói thật là có khi tôi hét ầm lên bất cứ lúc nào cũng không chừng. Kiểu Uooooooo——— ấy”</p><p id="60">“Đừng có lơ là đấy...tôi muốn nói thế lắm nhưng mà,”</p><p id="61">“Mà chắc là chịu thôi,” Jill cũng đành buông xuôi.</p><p id="62">Cảm giác căng thẳng như hồi còn một mình khiêu chiến mê cung, ngay cả bản thân cậu cũng chẳng còn duy trì nổi.</p><p id="63">Huống hồ là Lilyleah và Yunis, những người vốn dĩ đã bắt đầu thám hiểm nơi này theo nhóm hai, ba người ngay từ đầu, bảo họ phải giữ được sự căng thẳng ấy thì cũng là chuyện bất khả thi.</p><p id="64">“Dù sao thì nơi đây cũng là mê cung có độ khó cao nhất mà……”</p><p id="65">“Cơ mà, biết sao được. Chúng ta, có lẽ đều thuộc cái kiểu ‘Phát triển hết vào một năng lực nhưng đổi lại thì tất cả những thứ khác đều nát bươm' ấy nhỉ? đúng không？”</p><p id="66">“Nói thẳng thừng quá đó.”</p><p id="67">“Không phủ định nổi.”</p><p id="68">“Mà cả ba đứa đều có thể áp dụng phần lớn năng lực đó vào chiến đấu, hơn nữa——Đây không phải là đánh giá thiên vị đâu, mà là phán đoán dựa trên thông tin khách quan——tất cả đều thuộc hàng đỉnh cao trong lĩnh vực của mình.”</p><p id="69">“Ối chà,” Yunis lên tiếng.</p><p id="70">“Không cần phản bác đâu. Cho dù ngoài kia có người còn xuất sắc hơn chúng ta đi nữa, thì ít nhất đó cũng chỉ là về khả năng. Trong phạm vi được biết đến, người được đánh giá là vượt trội hơn chúng ta nhiều nhất, chắc cũng chỉ có sư phụ của mỗi người thôi nhỉ？”</p><p id="71">“……Ừ thì”</p><p id="72">“Chị đây nghe xong mà lâng lâng tít hết cả mắt lên rồi nè."</p><p id="73">“Hơn nữa, năng lực của chúng ta lại phân bố rất rạch ròi. Tôi đã lặp lại điều này rồi, nhưng trong phạm vi có thể nghĩ đến có lẽ đây là đội hình mạnh nhất. Jir thì không có kính, Lilyleah thì rời khỏi sân nhà là giáo hội, còn tôi thì ánh sao không thể chạm tới nơi này—Ai cũng mang theo bất lợi. Nhưng dù vậy…. trong thời đại này, để tập hợp được đội hình tốt hơn thế này, chắc chỉ có khi sư phụ của mỗi người bắt tay nhau đi thám hiểm thôi.”</p><p id="74"><em>‘</em><em>Nghe </em><em>hơi</em><em> tự </em><em>kiêu đấy</em><em>,</em><em>’</em> Jir nghĩ thầm, nhưng cũng không châm chọc.</p><p id="75">Ít nhất là trong phạm vi thông tin mà họ có thể thu thập được ở thời điểm hiện tại, việc nghĩ như vậy cũng không hẳn là sai lầm gì quá lớn.</p><p id="76">“Nếu chúng ta cũng không thể chinh phục được, thì điều đó có nghĩa là sức mạnh của nhân loại vẫn chưa chạm tới đỉnh cao. Thế nên là, tình huống hiện tại ngược lại mới là điều tự nhiên. Chuyện ba người chúng ta mà lại bó tay chịu chết thì mới đáng sợ."</p><p id="77">“Mạnh miệng ghê nhỉ, Yunis-kun.”</p><p id="78">“Tôi vốn thuộc dạng khá là tự luyến mà.”</p><p id="79">“Khỏi cần nói cũng thấy.”</p><p id="80">"Cơ mà..."—đúng lúc đó.</p><p id="81">Như thể lại cảm thấy khó hiểu, Yunis lẩm bẩm.</p><p id="82">“Việc các tổ đội hạng S trước giờ đều dừng lại ở tầng thứ ba…… quả thật có hơi khó hiểu nhỉ.”</p><p id="83">“Ể？”</p><p id="84">Trước câu hỏi của Lilyleah, cậu nói:</p><p id="85">“Bọn họ thì, với tư cách là những chiến binh của thời đại đó, cũng phải nói là khá gần với đỉnh cao rồi chứ nhỉ? Ừ thì, có lẽ có những khía cạnh khác được coi trọng hơn ngoài sức mạnh thuần túy…… . Nhưng mà, tôi có cảm giác là nếu là cỡ này thì chỉ cần tốn thời gian một chút là tiến sâu hơn được mà nhỉ."</p><p id="86">Trước Yunis tự hỏi “Có phải do bản thân ru rú quá lâu trong Đại Thư Viện nên thước đo tiêu chuẩn đã bị lệch rồi hay không,” </p><p id="87">“—Là vì Trùm Tầng thứ ba quá mạnh.” </p><p id="88">Jir đáp lại.</p><p id="89">“Hả？”</p><p id="90">“Tôi cũng nghĩ giống Yunis. Mê cung này quả thật rất khắc nghiệt…… nhưng ba người chỉ dựa vào sức mạnh cũng đã có thể tiến đến tận đây. Nếu các S-rank đời trước có thể qua được tầng ba, chắc họ đã có thể tiến xa hơn nhiều.”</p><p id="91">“Nếu vậy thì có lẽ mê cung đã bị chinh phục từ lâu rồi.” Jir nói thêm.</p><p id="92">“Tầng ba mạnh đến vậy sao？”</p><p id="93">Trước câu hỏi của Lilyleah,</p><p id="94">“Không phải dạng vừa đâu. Dù có kính rồi mà lúc đó tôi tưởng rằng là mình chết chắc rồi. Nếu nói theo phân loại ma thú ngoại điển thì, có lẽ nó thuộc hàng thượng cấp.”</p><p id="95">“Hả, còn mạnh hơn cả Nightmare á？”</p><p id="96">"Không có cửa so sánh đâu. Thật sự là, mạnh một cách ngu ngốc——”</p><p id="97">“Kho, khoan đã！”</p><p id="98">Yunis lớn tiếng ngắt lời.</p><p id="99">“Gì vậy, sao thế？”</p><p id="100">“Khác với những gì tôi được nghe”</p><p id="101">Yunis nói bằng giọng hốt hoảng:</p><p id="102">“Theo lời Kraha—— Người hỗ trợ trong tổ đội cậu từng ở, thì nó tuy mạnh nhưng nếu hợp sức thì vẫn có thể đánh bại được.”</p><p id="103">“……À. Đó là trước khi nó biến hình thôi”</p><p id="104">“Biến hình?” Lilyleah nghiêng đầu khó hiểu.</p><p id="105">“Biến hình,” Jir gật đầu.</p><p id="106">“Ở giai đoạn đầu…… Nightmare nhỉ? Nó mạnh tầm đó, nhưng ác mộng thật sự là đoạn sau đó cơ. Khi tôi rơi xuống tầng dưới cùng nó, con đó, nó đã biến hình”</p><p id="107">“Nó mạnh một cách bất thường,” Jir kể lại.</p><p id="108">“Nếu không tăng〈Vị Giai〉nhờ giết Độc Long, thì tôi tuyệt đối không có cửa thắng.” 位階 (Ikai): Vị giai/Thứ bậc/Cấp bậc, thường dùng trong hệ thống phân cấp vị quan lại trong triều đình Nhật Bản ngày xưa (ví dụ: Chánh nhất vị, Tòng tam vị...).</p><p id="109">“À, lúc đó Jir-kun đã〈trải nghiệm〉rồi à.”</p><p id="110">“Tử chiến như thế mà không được tính là〈trải nghiệm〉thì. ……Mà nói vậy chứ, hình như dù đánh bại trùm tầng đó rồi cũng không được tính là 〈trải nghiệm〉”</p><p id="111">“Tiêu chuẩn của nó đúng là khó hiểu thật.”</p><p id="112">“Lilyleah cũng được vài lần rồi à？”</p><p id="113">“Cũng tàm tạm thôi. Không biết mức trung bình là bao nhiêu nên khó nói lắm.”</p><p id="114">“À, hiểu hiểu. Nhưng chẳng phải số người chưa từng được lần nào chiếm số đông hơn sao."</p><p id="115">“Tui cũng hay bị mấy đứa nhỏ nói kiểu ‘em cứ tưởng cái đó là nói xạo’ lắm. Dù có bảo là thật thì cũng nghe như nói dối, nên tui toàn bảo ‘đùa thôi’ luôn.”</p><p id="116">“Này, này”</p><p id="117">“Đùa thôi, đùa thôi. Tuy không tin nhưng tui vẫn dạy họ đàng hoàng mà……Yunis-kun？”</p><p id="118">“……Xin lỗi. Tôi mãi suy nghĩ.”</p><p id="119">Yunis đáp lại bằng giọng trầm tư.</p><p id="120">“Có gì khiến cậu bận tâm à？”</p><p id="121">"Ừm. ……Không lẽ, chuyện Jir đi ngược hướng, cũng có một phần là tại chuyện đó sao?"</p><p id="122">“À, đúng là vậy đó.”</p><p id="123">Jir gật đầu thật sâu, rồi nói:</p><p id="124">“Tôi vẫn biết là mê cung bình thường càng lặn sâu thì trùm tầng càng mạnh, nhưng vì tầng ba đã như vậy rồi, nên tôi cứ đinh ninh là ở đây có quy luật khác chăng, thế là cứ dây dưa mãi……"</p><p id="125">“Nhưng Jir-kun gần như toàn hạ chúng trong một đòn, vậy cậu phân biệt được sự khác nhau về sức mạnh sao？”</p><p id="126">"Dựa vào cảm giác tay thì cũng cảm nhận đạin khái được. Thi thoảng cũng có những đối thủ do tương khắc tốt quá nên không rõ lắm, nhưng mà..."</p><p id="127">“Hểee—,” Lilyleah thốt lên.</p><p id="128">Rồi một lần nữa, Yunis lại chìm vào im lặng.</p><p id="129">“Yunis？”</p><p id="130">“Yunis-kun, cậu đau bụng à？”</p><p id="131">“……Không, chỉ là tôi vẫn cảm thấy thiếu một chút bằng chứng xác thực. Có thể là tôi nghĩ quá nhiều thôi. Đừng để tâm nhé.”</p><p id="132">"A, đó là câu nói của kiểu nhân vật sẽ chết trong tiểu thuyết trinh thám đấy."</p><p id="133">“Hả, thật á.”</p><p id="134">“Thế thì nói luôn nhé,” Yunis bắt đầu do dự.</p><p id="135">Nhưng trước khi cậu kịp mở miệng——</p><p id="136">   </p><p id="137">"A."  "A." </p><p id="138">"Hử?"</p><p id="139">Lilyleah và Yunis đồng thanh thốt lên, còn Jir thì nghiêng đầu khó hiểu.</p><p id="140">   </p><p id="141">“Sao vậy？”</p><p id="142">“Có cửa xuất hiện rồi”</p><p id="143">“Phòng trùm tầng à？”</p><p id="144">“Nếu vậy thì——" Jir cuối cùng cũng đặt tay lên chuôi kiếm.</p><p id="145"><em>‘</em><em>Đến lượt mình rồi,</em><em>’</em> cậu nghĩ.</p><p id="146">   </p><p id="147">Nhưng——</p><p id="148">   </p><p id="149">“Không, xem ra lại đến lượt tôi rồi.”</p><p id="150">“Hả. Không phải chứ, tay nghề tôi cũng sắp cùn đến nơi rồi, không cho tôi ra tay thì——”</p><p id="151">“Không phải ý đó.”</p><p id="152">Lilyleah tiếp lời Yunis.</p><p id="153">   </p><p id="154">   </p><p id="155">“Ý là……Lại xuất hiện cánh cửa màu đen.”</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/23822-thanh-guom-dan-loi/c285354-5-2-oan-tu-ti-thi-bat-loi-cho-toi-qua-con-gi" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/23822-thanh-guom-dan-loi" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/23822-thanh-guom-dan-loi" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'Op7eN08Dp5idojNfoZXMjh3ie6aBGjbUFoWvohY5';
        var comment_type = 'chapter';
        var comment_typeid = '285355';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'Op7eN08Dp5idojNfoZXMjh3ie6aBGjbUFoWvohY5';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('23822');
    chapter_id = parseInt('285355');

    readingObject = {
        series_id: series_id,
        series_title: 'Thanh Gươm Dẫn Lối',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="Op7eN08Dp5idojNfoZXMjh3ie6aBGjbUFoWvohY5" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
