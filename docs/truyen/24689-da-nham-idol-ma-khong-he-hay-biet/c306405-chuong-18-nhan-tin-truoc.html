<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Đá Nhầm Idol Mà Không Hề Hay Biết - Chương 18: Nhắn Tin Trước - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Lý do tạm dừng hoạt động của Idol nhà tôi lại là... vì tôi sao?">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="KiGUrzQtvaEECmrUqOOdly00pT8GQg5wsnC9XHTX">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306405-chuong-18-nhan-tin-truoc">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24689-9c8b7649-7941-4962-9f5a-4760a4ff4407.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=c044c63e744fb1723a7d067aa1473af1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c305716-chuong-17-idol-nha-ben"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306406-chuong-19-giai-doan-phu-dinh"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306405-chuong-18-nhan-tin-truoc" style="background: url('https://i.hako.vn/ln/series/covers/s24689-9c8b7649-7941-4962-9f5a-4760a4ff4407.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet">Đá Nhầm Idol Mà Không Hề...</a></h5>
                    <small><i class="fas fa-pen"></i>gaeulipnida</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/t35834-web-novel">Web Novel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c292187-chuong-0-cai-ngay-toi-tro-thanh-ke-khon-nan-do">
                                                                        Chương 0: Cái Ngày Tôi Trở Thành Kẻ Khốn Nạn Đó
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c292193-chuong-1-cuoc-tai-ngo-guong-gao">
                                                                        Chương 1: Cuộc Tái Ngộ Gượng Gạo
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c292292-chuong-2-voicecord">
                                                                        Chương 2: Voicecord
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c292294-chuong-3-di-tim-bang-chung">
                                                                        Chương 3: Đi Tìm Bằng Chứng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c292834-chuong-4-trung-manh-trung-manh-lon-roi">
                                                                        Chương 4: Trúng Mánh! Trúng Mánh Lớn Rồi!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c292835-chuong-5-chon-bai-hat">
                                                                        Chương 5: Chọn Bài Hát
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c293709-chuong-07">
                                                                        Chương 6: Quá Đỗi Nhập Tâm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c294303-chuong-7-day-la-han-thu-mu-quang">
                                                                        Chương 7: Đây Là Hận Thù Mù Quáng!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c295351-chuong-8-cung-lam-thi-nghi-hoc-thoi">
                                                                        Chương 8: Cùng Lắm Thì Nghỉ Học Thôi!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c295946-chuong-9-oi-xxx">
                                                                        Chương 9: Ôi. XXX
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c296661-chuong-10-de-toi-lam-cho">
                                                                        Chương 10: ...Để Tôi Làm Cho
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c297572-chuong-11-sao-anh-lai-than-thien-the">
                                                                        Chương 11: Sao Anh Lại Thân Thiện Thế?
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c298510-chuong-12-hat-xi">
                                                                        Chương 12: Hắt Xì!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c302312-chuong-13-lan-dau-thay-idol-sao">
                                                                        Chương 13: Lần Đầu Thấy Idol Sao?
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c302314-chuong-14-cam-chi-dao-tu-phia-sau">
                                                                        Chương 14: Cấm Chỉ Đạo Từ Phía Sau!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c303401-chuong-15-chi-them-mot-chut-nua-thoi">
                                                                        Chương 15: Chỉ Thêm Một Chút Nữa Thôi
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c304546-chuong-16-ban-gai">
                                                                        Chương 16: Bạn Gái
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c305716-chuong-17-idol-nha-ben">
                                                                        Chương 17: Idol Nhà Bên
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306405-chuong-18-nhan-tin-truoc">
                                                                        Chương 18: Nhắn Tin Trước
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306406-chuong-19-giai-doan-phu-dinh">
                                                                        Chương 19: Giai Đoạn Phủ Định
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306407-chuong-20-dung-treu-toi-nua">
                                                                        Chương 20: Đừng Trêu Tôi Nữa
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 18: Nhắn Tin Trước</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306405-chuong-18-nhan-tin-truoc#chapter-comments" style="text-decoration: underline">1 Bình luận</a> -
                        Độ dài: 2,350 từ - Cập nhật: 
                        <time class="topic-time timeago" title="08-02-2026 23:40:46" datetime="2026-02-08T23:40:46+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 18: Nhắn Tin Trước</p>
                    <p id="1">[Các chị ơi.]</p><p id="2">Dạo gần đây tôi bận rộn đến mức chẳng còn tâm trí để trò chuyện với ai, nhưng lúc này tôi lại thấy mình đang nhắn tin cho các chị để thảo luận về những chuyện vừa xảy ra với anh Taemin.</p><p id="3">Rõ ràng là tôi không thể kể cho bạn bè ở trường đại học, còn đám bạn thân của tôi thì ai nấy đều đang bận rộn với cuộc sống riêng, thế nên sẽ thật kỳ cục nếu đột nhiên mang chuyện mình đi tỏ tình rồi bị từ chối ra kể.</p><p id="4">[Ồ, gì thế này? Này mấy đứa~ Idol của chúng ta đến rồi kìa~]</p><p id="5">[Thật á??? Luka, lâu lắm mới thấy mặt em nha!]</p><p id="6">Trước khi bắt đầu sự nghiệp streaming, tôi thường chơi game online với các chị này. Tôi mời họ vào một kênh đàm thoại rồi bắt đầu gõ phím.</p><p id="7">[Có vấn đề rồi...]</p><p id="8">Tôi còn chưa kịp gõ xong tin nhắn, họ đã phản hồi một cách bùng nổ.</p><p id="9">[Chuyện gì thế? Luka lại gặp anh nào nữa rồi à?]</p><p id="10">[Có phải là về cuộc sống bí mật của một idol không ahahahaha]</p><p id="11">[Này mấy bà trật tự tí xem nào, để Luka nói đã. Có chuyện gì thế em?]</p><p id="12">Nhìn xem. Đúng là một lũ ồn ào. </p><p id="13">Nhưng đó cũng là lý do tại sao tôi thích chơi với họ. </p><p id="14">Ngay cả khi tôi chơi game không giỏi, tôi vẫn thấy vui vẻ khi ở bên họ. </p><p id="15">Dù bây giờ tôi vẫn chơi game ngoài giờ stream, tôi vẫn thấy khoảng thời gian chơi cùng các chị từ hồi cấp ba là vui nhất.</p><p id="16">Mặc dù mối quan hệ của chúng tôi bắt đầu từ thế giới ảo, nhưng sau vài năm tương tác, đôi khi tôi cảm thấy thoải mái khi trò chuyện với họ hơn cả bạn bè ngoài đời. </p><p id="17">Hơn nữa, chính họ là người đã khuyến khích tôi bắt đầu stream. </p><p id="18">Hồi đó, tôi chưa bao giờ kỳ vọng nó sẽ phát triển đến quy mô như hiện tại...</p><p id="19">Dĩ nhiên, tất cả bọn họ đều đã xem các buổi stream thử giọng của tôi.</p><p id="20">[Chuyện hơi dài một chút có sao không ạ?]</p><p id="21">[Đã ổn định chỗ ngồi.]</p><p id="22">[Chèn meme ăn bỏng ngô]</p><p id="23">[À thôi, đừng có vòng vo, tóm tắt trong ba dòng thôi.]</p><p id="24">[Em đã kể cho các chị nghe về anh chàng đã từ chối em rồi đấy...]</p><p id="25">Tôi kể cho họ nghe chuyện mình đang làm bài tập nhóm với anh Taemin và việc hai đứa đã cùng nhau đi Trung tâm Trải nghiệm VR. Phản ứng của họ cũng dữ dội không kém.</p><p id="26">[Không đâu Luka. Kèo này 100% rồi. Cậu ta có tình cảm với em chắc luôn.]</p><p id="27">Thật vậy sao...? Có thực là vậy không...?</p><p id="28">[Hả? Không đời nào... Tình cảm gì chứ... Haiz..... Trông anh ấy giống như đang đùa giỡn thôi.]</p><p id="29">Mỗi tin nhắn của các chị đều khiến cảm xúc của tôi chao đảo. </p><p id="30">Người thì khẳng định anh ấy có hứng thú với tôi, kẻ lại bảo anh ấy chỉ là một tên tồi thích trêu đùa con gái.</p><p id="31">Tôi chưa kịp giải thích thêm gì, thì trong lúc họ đang tranh cãi qua lại, chị Hanbit, người lớn tuổi nhất nhóm, đã can thiệp để dàn xếp.</p><p id="32">[Thế tóm lại, vấn đề của em là gì, Luka?]</p><p id="33">Vấn đề của tôi... là...</p><p id="34">[Em chỉ muốn biết anh ấy đang nghĩ gì thôi.]</p><p id="35">[Nếu anh ấy thực sự có tình cảm, em có định gặp anh ấy lần nữa không?]</p><p id="36">Đó là một câu hỏi khó. </p><p id="37">Thú thực, tôi còn chưa nghĩ xa đến thế.</p><p id="38">[...Em không biết nữa.]</p><p id="39">Tôi thực sự không thể tưởng tượng nổi. </p><p id="40">Bởi vì lời từ chối của anh ấy quá phũ phàng, khiến tôi nghĩ rằng việc mơ tưởng về chuyện anh ấy thích mình là vô nghĩa.</p><p id="41">[Không đâu. Chị bảo này! Mấy gã như thế chắc chắn biết giá trị của mình mà, đúng không? Chẳng lẽ họ lại ngu đến mức không biết mình đẹp trai thế nào sao?]</p><p id="42">[Cũng đúng, nhưng mà...]</p><p id="43">Khi cuộc trò chuyện chuyển sang chủ đề ‘ngoại hình’, ánh mắt tôi vô thức liếc sang chiếc gương toàn thân đặt cạnh giường. </p><p id="44">Nếu đặt anh ấy và tôi lên bàn cân nhan sắc, anh ấy chắc chắn sẽ thắng áp đảo. </p><p id="45">Ít nhất thì đám con trai không hét lên phấn khích như thể thành viên câu lạc bộ fan idol khi nhìn thấy tôi.</p><p id="46">[Nhưng trước mắt cứ nên quan sát thêm một chút đã, đúng không? Khó mà nói trước được điều gì chỉ qua một lần gặp riêng.]</p><p id="47">[Đúng đúng, dù sao em vẫn sẽ gặp cậu ta suốt lúc làm bài tập nhóm mà. Cứ chờ xem thế nào đã.]</p><p id="48">[Luka ngốc quá, nếu em thực sự tò mò, sao không thử nhắn tin trước cho cậu ta xem sao? Như thế là biết ngay ý tứ của nhau thôi mà?]</p><p id="49">...Nhắn tin trước?</p><p id="50">Chỉ mới nghĩ đến thôi đã thấy chóng mặt rồi. </p><p id="51">Ngay cả việc nghĩ đến chuyện gửi tặng anh một tấm thẻ quà tặng để cảm ơn những gì anh đã làm cho tôi cũng khiến tôi vã mồ hôi hột. Vậy mà họ lại mong đợi tôi nhắn tin cho anh ấy mà không vì lý do gì ư...? </p><p id="52">Rào cản này quá cao. Không đời nào tôi vượt qua được.</p><p id="53">[Dù sao thì, nếu có tiến triển gì em sẽ báo cho các chị sau. Cảm ơn các chị nha~]</p><p id="54">Sau khi gửi tin nhắn kết thúc cuộc trò chuyện, tôi thở dài thườn thượt. </p><p id="55">Tôi bắt đầu câu chuyện này để giải tỏa bớt bực bội, nhưng cuối cùng nó chỉ làm tôi lo thêm.</p><p id="56">“Thật tình, mình nên làm gì đây...”</p><p id="57">Vừa mân mê chiếc điện thoại, vừa nhìn vào hồ sơ tin nhắn của anh Taemin, tôi bắt đầu chuẩn bị cho buổi stream.</p><p id="58">***</p><p id="59"><strong>[Chào mọi người~ Quân đoàn Pinky!! Philosopherdol Luka đây!! Oa~]</strong></p><p id="60"><strong>[Có lẽ một số bạn đã nhận thấy tên kênh của mình đã thay đổi. Cuối cùng mình đã chính thức trở thành thành viên của nhóm nhạc idol ảo CLOSER!]</strong></p><p id="61"><strong>[Avatar mới! Thiết lập stream mới! Nếu bạn muốn gặp gỡ Luka tái sinh dưới tư cách idol tân binh của YM, hãy tham gia buổi livestream tối nay lúc 10 giờ nhé!!!]</strong></p><p id="62"><strong>[Hẹn gặp lại sau~ Bye~]</strong></p><p id="63">10 giờ tối... Thời điểm hoàn hảo.</p><p id="64">Sau khi kiểm tra thông báo stream của Luka, tôi sắp xếp lại những việc cần làm trong đầu.</p><p id="65">“Taemin, dọn dẹp nốt rồi chuẩn bị đóng cửa nào em!”</p><p id="66">“Vâng ạ!”</p><p id="67">Reo hò thầm lặng trước lời của quản lý, tôi nhanh chóng nhét điện thoại vào túi rồi lao vào nhà vệ sinh. </p><p id="68">Bình thường tôi sẽ dọn dẹp qua loa cho xong chuyện để về nhà, nhưng hôm nay thì khác. </p><p id="69">Tôi tập trung làm thật nhanh để kịp về xem buổi stream của Luka.</p><p id="70">“Quản lý ơi! Em xong rồi ạ!”</p><p id="71">Hoàn thành việc dọn dẹp với quyết tâm của một anh lính đang cọ rửa doanh trại, tôi đứng ở quầy đợi kiểm tra.</p><p id="72">“Gì thế? Hôm nay có việc gấp à? Làm nhanh thế.”</p><p id="73">“Dạ... em có chút việc cần giải quyết ạ.”</p><p id="74">“Vậy sao? Để anh lo nốt phần đóng cửa cho. Về đi. Làm tốt lắm.”</p><p id="75">“Cảm ơn anh đã vất vả ạ!”</p><p id="76">May mắn là hôm nay quản lý có vẻ tâm trạng tốt nên cho tôi về sớm mà không gây khó dễ. </p><p id="77">Chứ nếu gặp lúc anh ấy cáu kỉnh, chắc chắn sẽ bới lông tìm vết bắt tôi dọn lại từ đầu.</p><p id="78">Hiện tại mới là 9:30 tối, nếu tắm rửa nhanh thì tôi vẫn kịp xem buổi stream của Doah. </p><p id="79">Khi tôi leo lên con dốc và rẽ vào khúc cua, tòa nhà chung cư quen thuộc hiện ra trước mắt.</p><p id="80">...Lạ thật. </p><p id="81">Tòa nhà bên cạnh mà trước đây tôi vẫn vô tình đi ngang qua, giờ đây bỗng cảm thấy thật mới mẻ và khác biệt. </p><p id="82">Nghĩ đến chuyện Luka stream từ nơi này mỗi ngày khiến tôi có một cảm giác kỳ lạ khi bước thẳng về căn phòng của mình.</p><p id="83"><strong>[21:50]</strong></p><p id="84">Buổi stream dự kiến bắt đầu lúc 10 giờ tối, nhưng có vẻ Luka đã bắt đầu sớm hơn khoảng 10 phút.</p><p id="85">[Luka ơi~]</p><p id="86">[Luka Luka!]</p><p id="87">[Ồ! Màn hình chờ mới xịn thế???]</p><p id="88">Đúng như những gì người xem nhắc đến, thực sự có một hình minh họa mới trên màn hình chờ của Luka. </p><p id="89">Một chiếc TV trông rất dễ thương được vẽ trên nền hồng nhạt. </p><p id="90">Trên màn hình TV có một dòng chữ trông như viết tay rất đáng yêu.</p><p id="91"><strong>[Đang biến thân thành Idol......]</strong></p><p id="92">Cái gì đây? </p><p id="93">Có phải công ty đã tặng cô ấy không? </p><p id="94">Tôi không rõ lai lịch của nó, nhưng nó thực sự rất dễ thương. </p><p id="95">Trong khi người xem đang chào hỏi nhau và chờ đợi Luka, ngay sau khi đồng hồ điểm đúng giờ, màn hình đột nhiên đen kịt như bị lỗi.</p><p id="96">Kênh chat tràn ngập dấu hỏi chấm. </p><p id="97">Nghĩ rằng có lẽ do máy mình bị lỗi, tôi kiểm tra lại máy tính, nhưng sau khi thấy phản ứng của những người khác, có vẻ không phải vậy. </p><p id="98">Mười giây trôi qua như thế.</p><p id="99">「Bất ngờ chưa? Kukukukuku.」</p><p id="100">Nghe thấy giọng nói trêu chọc đặc trưng của Luka, kênh chat bùng nổ. </p><p id="101">Các tin nhắn hiện lên từ việc bảo cô đừng làm thế nữa cho đến những lời mắng yêu.</p><p id="102">「À thôi nào~ Lúc nào mình làm bộ đắc ý thế này cũng có lý do cả mà. Mọi người thấy sao? Đã sẵn sàng để gặp gỡ một idol chưa?」</p><p id="103">Bình thường cô ấy sẽ không làm màu đến mức này... </p><p id="104">Nghĩa là cô ấy đã chuẩn bị một cái gì đó.</p><p id="105">「Ta-da!」</p><p id="106">Màn hình đang đóng băng lúc nãy bắt đầu chuyển động.</p><p id="107">[Oa! Cái gì thế này?]</p><p id="108">[Tuyệt quáaaaa!]</p><p id="109">[Luka dễ thương quá, Luka dễ thương quá, Luka dễ thương quá...]</p><p id="110">Đ-Đây... Đây chính là sức mạnh của đồng tiền!</p><p id="111">Không phải là tôi thấy avatar cũ của cô ấy xấu hay gì. </p><p id="112">Avatar trước đây cũng rất dễ thương, nhưng trông nó khá phổ thông. So với cái đó thì cái này... </p><p id="113">Tạm biệt mái tóc hồng bết dính chỉ có thể cử động một cách cứng nhắc. </p><p id="114">Mái tóc của cô ấy lúc này chuyển động vô cùng tự nhiên, như thể mô phỏng theo chuyển động của một người thật vậy.</p><p id="115">Không chỉ vậy, các biểu cảm trên khuôn mặt cũng không còn bị giới hạn như trước. </p><p id="116">Giờ đây cô ấy có thể cử động các cơ mặt một cách tự do vì hệ thống theo dõi khuôn mặt đang hoạt động theo thời gian thực. </p><p id="117">Luka chỉ có một câu nhận xét về avatar mới này.</p><p id="118">「...Tuyệt cú mèo luôn đúng không?!」</p><p id="119">Và tôi hoàn toàn đồng ý với cô ấy. </p><p id="120">Tôi đoán đây chính là kết quả khi một công ty sở hữu nguồn vốn khổng lồ nhúng tay vào. </p><p id="121">Logo YM, biểu tượng cho thương hiệu, được đặt ở góc trên bên trái màn hình.</p><p id="122">「Mọi người thấy sao? Trông mình đã giống idol hơn chút nào chưa?」</p><p id="123">[Có chứ!!]</p><p id="124">[Yêu bà nhiều, Luka!]</p><p id="125">[Oa... chất lượng đỉnh thật đấy...]</p><p id="126">Avatar của Luka rạng rỡ hẳn lên, có vẻ rất hài lòng với phản ứng của mọi người.</p><p id="127">「Lúc mới nhận được mình cũng bất ngờ lắm. Quản lý đã thử hết cái này đến cái kia, còn giúp mình thiết lập mọi thứ nữa.」</p><p id="128">Doah giải thích chi tiết những chuyện đã xảy ra trong thời gian cô là Luka.</p><p id="129">「Vậy nên, phần quan trọng bắt đầu từ đây! Lịch stream từ giờ đã được cố định rồi nhé!」</p><p id="130">「Mình phải stream vào những khung giờ mà công ty đã định, và mỗi tuần một lần, mình phải stream cùng các thành viên khác nữa!」</p><p id="131">「Tuần này, vì chúng mình có buổi showcase ra mắt, nên đã có lịch stream chung vào thứ Bảy này rồi!」</p><p id="132">Nghe thấy vậy, tôi nhanh chóng rút điện thoại ra ghi chú lại. </p><p id="133">Lịch trình của Luka về cơ bản cũng là lịch trình của tôi.</p><p id="134">「Mình vẫn còn thấy ngại với các thành viên khác lắm, không biết mình có làm tốt không nữa.」</p><p id="135">Nhân tiện, cô ấy chưa bao giờ hợp tác với ai trước đây. </p><p id="136">Khi kênh chat hỏi về chuyện đó, cô ấy nói rằng vốn dĩ các buổi stream cá nhân của cô không quá dài. Cô ấy không có thời gian để giao lưu với các streamer khác vì thời lượng stream quá ngắn.</p><p id="137">「Dù sao thì, các buổi stream chính thức của mình sẽ vào thứ Hai, thứ Tư và thứ Sáu trong vòng bốn tiếng cộng thêm một chút thời gian ngoài lề. Còn các buổi stream chung thì coi như là một ngày cuối tuần nhé!」</p><p id="138">Vì giờ đã có công ty quản lý, lẽ dĩ nhiên thời gian stream của cô ấy sẽ tăng lên, điều đó rất tốt, nhưng nó cũng khiến tôi lo lắng về một chuyện... </p><p id="139">Nghĩa là chúng tôi chỉ có thể đi quay phim cho bài tập nhóm vào những ngày không phải thứ Hai, thứ Tư, thứ Sáu và thứ Bảy. </p><p id="140">Gần như chỉ còn chưa đầy nửa tuần...</p><p id="141">À mà thôi kệ đi. Tôi sẽ bảo là tôi cũng bận.</p><p id="142">「Vậy hôm nay chúng ta cứ chơi gì đó nhẹ nhàng thôi nhé~ Mình sẽ chơi mấy trò quen thuộc của mình thôi~」</p><p id="143">Sau khi chơi vài trò nhịp điệu và FPS trong khoảng ba tiếng, Luka kết thúc buổi stream. </p><p id="144">Cảm thấy thỏa mãn vì đã lâu mới được xem một buổi stream chỉn chu, tôi vươn vai và thở phào nhẹ nhõm. </p><p id="145">Trong khi sự thật là giờ cô ấy đã có lịch trình cố định thật tuyệt...</p><p id="146"><strong>[Bạn có một tin nhắn mới. - Kim Doah]</strong></p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/74d7206e-decf-4f38-b5d6-003d26a41676.jpg?t=1768360276" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/f4744abe-bb28-4201-aa0c-be5b777efb2c.jpg?t=1768360276" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c305716-chuong-17-idol-nha-ben" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306406-chuong-19-giai-doan-phu-dinh" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(1)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">1 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3196987"
    class="ln-comment-item mt-3 clear"
    data-comment="3196987" 
    data-parent="3196987" 
    data-type="chapter" 
    data-typeid="306405">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u212535-cff8f480-faf2-4aea-96e1-1c23a02ba183.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/212535">L. Dragon</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Giờ cái nhóm tàn tạ lắm r.<br>
D thì stream hết nửa tuần.<br>
T thì xem stream.<br>
J thì có ng thân bị bệnh.<br>
M thì ko bt có chuyện j ko.<br>
Khéo cả đám học lại :v
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24689-da-nham-idol-ma-khong-he-hay-biet/c306405-chuong-18-nhan-tin-truoc?comment_id=3196987#ln-comment-3196987"
                            class="text-slate-500">
                            <time class="timeago" title="09-02-2026 00:39:50"
                                datetime="2026-02-09T00:39:50+07:00">
                                09-02-2026 00:39:50
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'KiGUrzQtvaEECmrUqOOdly00pT8GQg5wsnC9XHTX';
        var comment_type = 'chapter';
        var comment_typeid = '306405';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'KiGUrzQtvaEECmrUqOOdly00pT8GQg5wsnC9XHTX';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24689');
    chapter_id = parseInt('306405');

    readingObject = {
        series_id: series_id,
        series_title: 'Đá Nhầm Idol Mà Không Hề Hay Biết',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="KiGUrzQtvaEECmrUqOOdly00pT8GQg5wsnC9XHTX" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cadd1ee29ae6689',t:'MTc3MDU4MTk0Ng=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
