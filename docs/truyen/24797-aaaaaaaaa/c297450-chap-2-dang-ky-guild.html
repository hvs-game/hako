<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Live Dungeon! - Chap 2 - Đăng ký Guild - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Live Dungeon , một tựa game MMORPG đời cũ. Trước khi dịch vụ đóng cửa, Kyotani Tsutomu đã sử dụng năm chiếc laptop cùng lúc để cày cuốc đến khi phá đảo game, và rồi cậu bị mời gọi đến một thế giới khác. Tại thế giới mới này, Tsutomu...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="uYnd6QxoF5aUYMNdotrLF4DPZJmDU0swPaPIXrDh">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24797-aaaaaaaaa/c297450-chap-2-dang-ky-guild">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24797-7c81697b-2568-4a09-bc8d-41aaba43f2d4.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24797-aaaaaaaaa/c297446-chao-mung-den-voi-dungeon"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24797-aaaaaaaaa"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24797-aaaaaaaaa/c297450-chap-2-dang-ky-guild" style="background: url('https://i.hako.vn/ln/series/covers/s24797-7c81697b-2568-4a09-bc8d-41aaba43f2d4.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24797-aaaaaaaaa">Live Dungeon!</a></h5>
                    <small><i class="fas fa-pen"></i>dy冷凍</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24797-aaaaaaaaa/t36045-volume-1">Volume. 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24797-aaaaaaaaa/c297446-chao-mung-den-voi-dungeon">
                                                                        Chap 1 - Chào mừng đến với Dungeon
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24797-aaaaaaaaa/c297450-chap-2-dang-ky-guild">
                                                                        Chap 2 - Đăng ký Guild
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Volume. 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chap 2 - Đăng ký Guild</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24797-aaaaaaaaa/c297450-chap-2-dang-ky-guild#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,349 từ - Cập nhật: 
                        <time class="topic-time timeago" title="26-01-2026 00:27:11" datetime="2026-01-26T00:27:11+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed', 'true', { expires: 1 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chap 2 - Đăng ký Guild</p>
                    <p id="1">“Kuh!”</p><p id="2">Tsutomu ngã sấp mặt xuống sàn gỗ, phát ra một âm thanh như thể tiếng ếch bị dẫm bẹp. Những tiếng ồn ào của đám đông lọt vào tai cậu, cùng với đó là bộ quần áo thô sơ màu nâu nhạt không biết đã được mặc lên người từ lúc nào.</p><p id="3">Tsutomu sờ soạng khắp người, sau khi xác nhận tay chân vẫn còn nguyên vẹn, cậu mới thở phào nhẹ nhõm. Trong lúc đang kiểm tra xem cơ thể có gì bất thường không, cậu bị một người đàn ông đứng bên cạnh túm lấy cổ áo và lôi dậy một cách khá thô bạo.</p><p id="4">“Hừm, xem ra đây là lần đầu cậu chết rồi hồi sinh nhỉ. Tự đứng dậy được không?”</p><p id="5">“Dạ, được ạ.”</p><p id="6">Người đàn ông vừa dựng cậu dậy trông như một quân nhân, khoác trên mình bộ trang phục màu lam cao cấp, trên ngực cài huy hiệu hình ngôi sao vàng. Gương mặt anh ta toát lên vẻ nghiêm nghị. Tsutomu phải chống vào cây trượng đen mà mình đã đánh rơi để gượng đứng dậy.</p><p id="7">Tsutomu cao khoảng 1m70, một chiều cao trung bình, nhưng người đàn ông kia lại cao gần 1m90. Cảm giác của cậu lúc này y hệt như khi bị cảnh sát gọi lại hỏi thăm vậy.</p><p id="8">“Này cậu, Thẻ Trạng Thái đâu?”</p><p id="9">“Th... Thẻ Trạng Thái ạ?”</p><p id="10">“...Ra là kẻ đi chui sao.”</p><p id="11">Người đàn ông cao lớn nheo mắt nhìn xuống Tsutomu đầy ngờ vực, khiến cậu sợ hãi lùi lại vài bước. Thấy bộ dạng đó của Tsutomu, anh ta thở dài như thể đành chịu thôi.</p><p id="12">“Đây là Dungeon do Thần tạo ra. Bất cứ ai cũng có quyền bước vào... Nhưng mà cậu trông không giống trẻ mồ côi. Còn cây trượng kia nữa. Cậu kiếm nó ở đâu?”</p><p id="13">“À thì...”</p><p id="14">“...Có vẻ như ký ức của cậu đang bị hỗn loạn. Nhưng một kẻ không có Thẻ Trạng Thái như cậu mà cầm cây trượng đó lặn lội xuống Dungeon thì chắc chắn sẽ gây xôn xao dư luận. Đó hẳn không phải trang bị ban đầu của cậu. Tuy nhiên, tôi cũng không nghĩ có tên ngốc nào lại đánh rơi một cây trượng xịn xò như thế này ở ngoài thảo nguyên. Vậy nên, có lẽ nó rơi ra từ rương kho báu. Cậu có nhớ rương đó màu gì không?”</p><p id="15">“...À ừm. Nó cứ lấp lánh, kiểu như phản chiếu ánh mặt trời ấy ạ.”</p><p id="16">Bị hỏi dồn dập như đang thẩm vấn, Tsutomu trả lời đại khái dù chính cậu cũng chẳng hiểu rõ. Cây trượng đen mà Tsutomu đang cầm là vũ khí tối thượng được chế tạo từ vật phẩm hiếm rơi ra ở Lâu đài cổ tại tầng 90. Khi nghe Tsutomu mô tả đặc điểm của chiếc rương chứa vật phẩm hiếm đó, biểu cảm của người đàn ông bỗng trở nên sôi nổi.</p><p id="17">“Đó chính xác là... món quà từ Thượng Đế rồi! Cậu may mắn thật đấy!”</p><p id="18">Bị vỗ vai đôm đốp một cách bất ngờ, Tsutomu chỉ biết cười trừ, nhưng nhờ đó cậu cũng có cơ hội quan sát xung quanh. Những Long nhân với tay chân phủ đầy vảy đỏ. Những Thú nhân nhanh nhẹn cử động đôi tai và cái đuôi mang đặc điểm của nhiều loài động vật khác nhau. Ngay cả người đàn ông đang vui vẻ vỗ vai Tsutomu đây cũng có một đôi tai chó đen dựng đứng trên đầu, và cái đuôi đen phía sau thì đang lắc lư qua lại.</p><p id="19">Tất nhiên, cậu cũng thấy rất nhiều con người bình thường. Có kẻ đang tán tỉnh nhân viên tiếp tân, có kẻ đang bảo dưỡng vũ khí. Và những người đang tò mò quan sát Tsutomu xung quanh đây phần lớn cũng là con người.</p><p id="20">“Ấy, xin lỗi. Hình như tôi hơi quá khích. Vậy thì chúng ta đi thẩm định ngay thôi nào.”</p><p id="21">“Ah, vâng.”</p><p id="22">Dưới những ánh mắt tò mò pha lẫn ngờ vực, Tsutomu bước đi như thể được người đàn ông tộc Khuyển nhân dẫn giải. Trong lúc đó, cậu cố gắng quan sát cảnh vật xung quanh nhiều nhất có thể. Nhìn đâu cũng thấy đậm chất Fantasy. Những Elf tóc vàng tai dài. Những ông chú vạm vỡ nhưng chiều cao chỉ như học sinh tiểu học. Thậm chí có cả người mọc cánh chim.</p><p id="23">Và tòa kiến trúc này cũng có chút khác biệt. Bản thân nó là một tòa nhà gỗ bình thường. Tuy nhiên, ở nơi mà Tsutomu đoán là mình vừa bước ra, có một cánh cổng đen kịt như thể cắt xẻ không gian tại điểm đó.</p><p id="24">Khi Tsutomu đang nhìn nó, cánh cổng đen bất ngờ mở ra. Năm người mặc trang phục giống hệt Tsutomu bị tống ra ngoài, ngã dúi dụi xuống sàn. Sau đó, họ được những người có vẻ là nhân viên mặc đồ lam giống Tsutomu bắt chuyện, rồi cứ thế rời khỏi tòa nhà.</p><p id="25">Điều bắt mắt nhất giữa khung cảnh đậm chất giả tưởng này lại là sự hiện diện của những màn hình điện tử lơ lửng. Trên những màn hình nổi lên như hình chiếu ba chiều ấy, đang chiếu cảnh những nhóm người chiến đấu với lũ Goblin.</p><p id="26">“Đến nơi rồi. Vào đây.”</p><p id="27">Chưa kịp trả lời, cậu đã bị đẩy vào một phòng riêng. Ngồi sâu bên trong quầy là một người tộc Miêu nhân mặc đồng phục màu lam, đang chống cằm đầy chán chường. Khi ánh mắt lười biếng của cô ta chạm phải Tsutomu và người đàn ông Khuyển nhân, cô ta thốt lên đầy vẻ ngạc nhiên.</p><p id="28">“Chú cún ngoan hôm nay đến đây đúng là chuyện lạ à nha.”</p><p id="29">“Ta chẳng muốn nhìn thấy mặt cô chút nào đâu, nhưng trước mắt hãy thẩm định cái này đi. Chẳng biết Thần linh ngẫu hứng thế nào mà tên đi chui này lại vớ được món hời.”</p><p id="30">“...Đó là cây trượng hả? Cho tôi xem, cho tôi xem nào!”</p><p id="31">Cô gái Miêu nhân dựng đứng đôi tai mèo, nheo đôi mắt hình hạnh nhân lại, cầm lấy cây trượng Tsutomu đưa để xem xét. Cô ta lầm bầm gì đó rồi truyền ma lực vào cây trượng, ngay lập tức thốt lên kinh ngạc.</p><p id="32">“...Tôi nghĩ đây là vật phẩm có giá trị cao nhất mà tôi từng thẩm định từ trước tới nay.”</p><p id="33">“Hô.”</p><p id="34">“Cấp độ kỹ năng của tôi không đủ nên chỉ nhìn thấy mỗi hiệu ứng rút ngắn niệm chú thôi... Chắc chắn nó còn có hiệu ứng khác. Thêm vào đó là tỷ lệ dẫn truyền ma lực. Tỷ lệ khuếch đại cũng cao vượt trội ở mức tối đa. Chỉ riêng những thứ này thôi cũng đáng giá cả gia tài rồi. Mười viên Đại Ma Thạch chất lượng cao nhất... không! Chắc phải khuyến mãi thêm hai viên Hỏa Đại Ma Thạch nữa quá! À, đây là giá hiện tại nhé! Dùng Thẩm định sơ cấp cho cái này thì phí quá, cậu có muốn dùng Thẩm định có phí không?”</p><p id="35">“Tên này là kẻ đi chui đấy. Cô nghĩ cậu ta có tiền không?”</p><p id="36">“Cũng đúng ha... Nhưng nếu thẩm định cái này thì cấp độ kỹ năng của tôi có thể sẽ tăng lên, hừm hừm... Này cậu! Hay là trả sau nhé!? Giờ tôi chỉ lấy một viên Trung Ma Thạch chất lượng vừa thôi!”</p><p id="37">Cô gái Miêu nhân tóc trắng nhoài người qua quầy. Nghe đến Trung Ma Thạch, Tsutomu chẳng hình dung được giá trị nên theo phản xạ ngước nhìn người đàn ông Khuyển nhân. Anh ta đặt tay lên cằm ngẫm nghĩ một chút rồi cúi xuống nhìn thẳng vào mắt Tsutomu.</p><p id="38">“Con nhỏ này tuy đáng ghét nhưng tay nghề thẩm định đúng là số một ở Guild này. Với chứng chỉ thẩm định của cô ta thì giá một viên Trung Ma Thạch là rẻ như cho rồi.”</p><p id="39">“Có một câu hơi thừa đấy, nhưng mà, chốt đơn! Đúng vậy đó nha~? Bình thường một lần thẩm định của chị đây tốn tới một Đại Ma Thạch đấy nhé~?”</p><p id="40">“Tuy nhiên, nói là trả sau nhưng cô ta có thể bảo cậu đợi nửa ngày đấy. Nghĩa là cậu có thể sẽ buộc phải bán cây trượng này ngay tại đây.”</p><p id="41">“Nàyyy! Chú cún kia rốt cuộc phe ai thế hả! Tôi là nhân viên Guild! Chúng ta cùng là nhân viên Guild mà! Lợi ích của Guild phải là trên hết chứ!”</p><p id="42">Mặc kệ cô nàng Miêu nhân đang đập bàn phình má giận dỗi, người Khuyển nhân tiếp tục nói.</p><p id="43">“Cây trượng đó e là vật phẩm đỉnh cao nhất. Nếu cậu sử dụng được nó, cậu có thể vượt qua bức tường tầng 50, đạt được danh tiếng và của cải khổng lồ. Dù vậy cậu vẫn muốn bán nó sao?”</p><p id="44">“............”</p><p id="45">Tsutomu suy tính. Đây không phải là mơ mà là hiện thực. Cơn đau khủng khiếp chưa từng nếm trải từ hơi thở của con Cổ Long Rữa Nát kia vẫn còn ám ảnh. Và giờ đây, Khuyển nhân đang nhìn Tsutomu với vẻ mặt nghiêm túc. Tsutomu không thể nào quả quyết rằng đây là một giấc mơ được.</p><p id="46">Nếu không phải mơ mà là thực tại, thì cần một lựa chọn thực tế. Nếu sau này biết là mơ thì cũng chỉ là chuyện cười thôi. Tsutomu hít sâu một hơi rồi nhắm mắt lại. Vài giây sau. Cậu mở đôi mắt híp của mình ra, và với một cái đầu đã bình tĩnh lại, cậu nói:</p><p id="47">“Tôi bán.”</p><p id="48">Chế tạo nó vất vả lắm, nhưng hiện tại cậu chỉ có mỗi cây trượng này. Có trượng mà không có giáp trụ hay đạo cụ thì cũng chẳng có ý nghĩa gì. Tsutomu phán đoán rằng cậu cần cái quan trọng hơn trước mắt, đó là tiền.</p><p id="49">“...Vậy sao. Nếu đó là kết luận cậu đã suy nghĩ kỹ thì được thôi.”</p><p id="50">Người Khuyển nhân nhìn khuôn mặt quyết đoán của Tsutomu rồi đứng dậy, ra hiệu cho cô gái Miêu nhân tiến hành thẩm định. Cô nàng cầm lấy cây trượng như chỉ chờ có thế, cái đuôi trắng nuột nà lắc lư khi cô lui vào phía trong quầy.</p><p id="51">“Thẩm định sẽ mất vài tiếng. Trong lúc đó chúng ta đi làm Thẻ Trạng Thái đi. Dù không xuống Dungeon thì cũng cần nó để ký gửi G (Vàng) mà.”</p><p id="52">“Ah, vâng. Nhờ giúp đỡ.”</p><p id="53">Hai người rời khỏi phòng riêng và đi đến khu vực quầy tiếp tân đang đông nghịt đủ mọi chủng tộc. Khi lướt qua đám đông, Tsutomu cảm nhận được những cái liếc nhìn và sự soi mói từ xa. Có vẻ như cậu đang thu hút khá nhiều sự chú ý, Tsutomu liền thay đổi vẻ mặt ngơ ngác thành một biểu cảm nghiêm nghị hơn.</p><p id="54">Đến một góc quầy vắng người, người Khuyển nhân đặt tay lên mặt bàn và nhảy phắt sang phía đối diện. Thấy Tsutomu giật mình lùi lại, anh ta cười nhe răng.</p><p id="55">“Nào, một lần nữa chào mừng cậu. Chào mừng đến với quầy tiếp tân Guild của Dungeon do Thần quản lý. Bây giờ tôi sẽ làm Thẻ Trạng Thái cho cậu, được chứ?”</p><p id="56">“Vâng. Làm phiền anh.”</p><p id="57">“Phí làm thẻ là 10 vạn G... nhưng tôi sẽ ứng trước cho. Sau này trừ vào tiền bán trượng, được không?”</p><p id="58">“Vâng.”</p><p id="59">“Vậy thì xuất dịch thể lên cái thẻ này đi.”</p><p id="60">Người Khuyển nhân trượt một vật trông giống cái thớt trắng tinh lên mặt quầy, rồi bắt đầu lục lọi gì đó bên dưới.</p><p id="61">“Dịch thể...?”</p><p id="62">“Cơ bản là máu hoặc nước bọt.”</p><p id="63">“Ah, vâng.”</p><p id="64">Người Khuyển nhân lôi từ dưới quầy ra một vật nhọn như cây kim và đưa tới, nhưng Tsutomu đã gom nước bọt và nhỏ lên tấm Thẻ Trạng Thái đặt trên bàn. Ngay lập tức, tấm thẻ phát sáng trắng. Khi thứ ánh sáng dịu nhẹ không gây chói mắt ấy tắt đi, người Khuyển nhân dùng khăn tay lau nước bọt của Tsutomu rồi xem xét nó.</p><p id="65">“Kyoutani Tsutomu... Hô. LUK (May mắn) và MND (Tinh thần) bằng nhau sao. Chức nghiệp là Bạch Ma Đạo Sĩ. Nào, với Level 1 thì chỉ số này cũng khá đấy.”</p><p id="66">Tsutomu nhận lấy tấm thẻ được đánh giá như vậy và cầm chắc bằng cả hai tay để xem.</p><p id="67">---</p><p id="68">Kyoutani Tsutomu</p><p id="69">LV 1 </p><p id="70">STR: D- </p><p id="71">DEX: D- </p><p id="72">VIT: D- </p><p id="73">AGI: D- </p><p id="74">MND: D </p><p id="75">LUK: D</p><p id="76">Chức nghiệp: Bạch Ma Đạo Sĩ</p><p id="77">Kỹ năng: Heal</p><p id="78">---</p><p id="79">(Bạch Ma Đạo Sĩ sao. Vậy ra đây là tài khoản chính rồi.)</p><p id="80">Tsutomu vừa đặt thẻ lên quầy vừa suy nghĩ, có lẽ vì tài khoản chính là cái đã nhận vật phẩm “Lời mời của Thần” nên mới thành ra thế này.</p><p id="81">“Từ lần sau cậu phải gửi cái này ở quầy tiếp tân rồi mới được vào Dungeon. Dù là kẻ đi chui thì vẫn nhận được ân sủng của Thần, nhưng sẽ không được áp dụng quy tắc của Thần.”</p><p id="82">“Ơ, ân sủng của Thần? Quy tắc?”</p><p id="83">“Trong Dungeon dù có chết thì cũng sẽ sống lại ở cánh cổng đen kia. Chuyện đó chắc thân thể cậu đã tự trải nghiệm rồi. Đó là ân sủng của Thần. Tuy nhiên trang bị thì ngoại trừ món có giá trị cao nhất, những thứ khác sẽ bị Dungeon nuốt mất.”</p><p id="84">Người Khuyển nhân vừa giải thích vừa chỉ tay về phía nơi Tsutomu đập mặt xuống lúc nãy. Nghe đến đó, Tsutomu rùng mình nhớ lại cú thở của con Cổ Long Lở Loét, nhưng người Khuyển nhân vẫn tiếp tục nói mà không để tâm.</p><p id="85">“Quy tắc của Thần chỉ có một. ——Không được mang ác ý giết người.”</p><p id="86">“Kh... Không được ư?”</p><p id="87">“Tóm lại là không được giết người trong Dungeon. Nếu người giết người, kẻ sát nhân sẽ vĩnh viễn không được bước vào Dungeon này nữa. Bị Thần ruồng bỏ còn nặng nề hơn cả cái chết. Tuyệt đối không được làm vậy.”</p><p id="88">“V... Vâng.”</p><p id="89">Bị ghé sát mặt vào hăm dọa, Tsutomu co rúm người lại y như lúc đứng trước con Cổ Long.</p><p id="90">“Nhưng nếu không đăng ký Thẻ Trạng Thái, Thần sẽ không công nhận là con người. Sẽ bị đối xử như quái vật trong Dungeon, gọi là kẻ đi chui. Giết kẻ đi chui trong Dungeon thì quy tắc của Thần không được áp dụng.”</p><p id="91">“Nghĩa là...”</p><p id="92">“Nếu kẻ đi chui bị con người giết, hắn sẽ hóa thành hạt giống như quái vật, gần như không để lại bằng chứng. Có những tên ngu xuẩn thích thú với việc giết kẻ đi chui. Lần sau nhớ mang Thẻ Trạng Thái đến quầy tiếp tân. Làm vậy thì hầu như sẽ không bị giết đâu. Mà đen đủi nhất có bị giết thì cũng sẽ sống lại ở đằng kia thôi.”</p><p id="93">“...Tôi hiểu rồi.”</p><p id="94">Thấy Tsutomu nói vậy, người Khuyển nhân gật đầu “được” rồi cầm lấy thẻ của cậu.</p><p id="95">“Nghĩa vụ giải thích đến đây là hết. Cậu có muốn hỏi gì nữa không?”</p><p id="96">Thấy người Khuyển nhân vừa gãi mái tóc đen dài vừa nói thế, Tsutomu suy nghĩ một chút rồi giơ tay lên.</p><p id="97">“...Vậy, tôi hỏi vài câu được không?”</p><p id="98">“Gì nào?”</p><p id="99">“Đầu tiên là về quy tắc của Thần. Chỉ cần không giết người là không phạm luật đúng không ạ? Ví dụ như hành hạ, hay dụ quái vật cố tình tấn công người khác chẳng hạn.”</p><p id="100">“Hô. Trẻ thế này mà tâm địa cũng đen tối gớm nhỉ.”</p><p id="101">Tsutomu nhún vai kiểu “cũng thường thôi”, người Khuyển nhân khoanh tay “hừm” một tiếng.</p><p id="102">“Miễn là không cướp đi sinh mạng thì đáng tiếc là quy tắc của Thần không áp dụng. Ngoài ra những đòn tấn công không mang ác ý, ví dụ như ma pháp bắn nhầm chẳng hạn. Nếu chết vì lý do đó thì quy tắc của Thần cũng không áp dụng và vẫn được hồi sinh ở cổng đen kia. Còn về việc dụ quái vật...”</p><p id="103">“À, cái đó có bị áp dụng không?”</p><p id="104">Thấy người Khuyển nhân ngập ngừng khó nói, Tsutomu chặn đầu hỏi trước, anh ta lắc đầu nguầy nguậy.</p><p id="105">“Dụ quái vật không vi phạm quy tắc của Thần. Tuy nhiên, trừ khi có hoàn cảnh đặc biệt, hoặc đang giữ vật phẩm hiếm, hoặc là lũ ngu không biết suy nghĩ trước sau thì mới làm cái trò đổ vỏ đó thôi.”</p><p id="106">“...Chắc là do cái kia nhỉ?”</p><p id="107">“Ừm. Chính xác.”</p><p id="108">Khi Tsutomu chỉ tay vào những màn hình lơ lửng khắp tòa nhà, người Khuyển nhân lặng lẽ gật đầu.</p><p id="109">“Đó là thứ Thần dùng để chiếu hình ảnh các party trong Dungeon. Cơ bản thì những party đang chinh phục tầng sâu nhất hoặc đang chiến đấu kịch liệt với quái vật sẽ dễ được chiếu lên hơn. Chỉ riêng trong Guild này đã lắp đặt khoảng 50 cái rồi. Nếu hành vi chơi xấu bị ai đó nhìn thấy thì...”</p><p id="110">“Sẽ mất lòng tin nhỉ. Không ai muốn lại gần một party như thế. Hơn nữa còn sẽ bị trả thù nữa chứ.”</p><p id="111">“Đúng vậy. Thế nên ít nhất những kẻ thuộc các Clan tuyệt đối không làm trò đó. Nếu làm thì danh tiếng và sự yêu thích của Clan đó sẽ giảm sút, đương nhiên kẻ đó cũng sẽ bị đuổi khỏi Clan. Bất kỳ Clan nào cũng quán triệt việc giáo dục điều này.”</p><p id="112">“Ra là vậy... À, cho tôi hỏi thêm hai điều nữa được không?”</p><p id="113">“Gì nữa.”</p><p id="114">Tsutomu vừa để ý xung quanh vừa hạ thấp giọng nói.</p><p id="115">“Tôi muốn thuê hộ vệ, ở Guild có chế độ đó không? Nếu có thì tôi muốn thuê anh, nếu được.”</p><p id="116">“...Hoho. Đến Thẻ Trạng Thái còn không biết mà cậu lại biết rõ chuyện này quá nhỉ.”</p><p id="117">“Nhìn cái kia là biết mà.”</p><p id="118">Những người bước ra từ cổng đen và các nhân viên Guild mặc đồng phục lam. Tsutomu đã quan sát từ nãy giờ, hầu hết mọi người đều cùng nhân viên Guild đi ra ngoài hoặc cùng xếp hàng ở quầy tiếp tân.</p><p id="119">Người bước ra từ cổng đen thường ôm theo một món vũ khí hoặc áo giáp, mặc bộ đồ giống Tsutomu rồi bị tống ra. Và nhân viên Guild đi theo họ ra tận bên ngoài. Đi đến quầy tiếp tân thì còn hiểu được, nhưng đi theo ra tận ngoài thì Tsutomu thấy hơi lạ.</p><p id="120">Nhưng sau khi nghe chuyện săn kẻ đi chui, cậu hiểu rằng an ninh ở đây không tốt. Ở một nơi như thế này mà mặc bộ đồ phong phanh đi ra ngoài thì cậu có thể tưởng tượng ngay ra mình sẽ gặp chuyện chẳng lành.</p><p id="121">“Với lại nếu có thể thì... Hướng dẫn tân thủ, nói thế anh có hiểu không nhỉ? Nếu anh có thể chỉ dẫn cách chinh phục Dungeon hay dạy tôi mấy kiến thức thường thức về Dungeon thì tốt quá. À, chuyện là tôi mồ côi nên mấy cái thường thức này tôi mù tịt.”</p><p id="122">“Ừm, đúng là không có chế độ chính thức như vậy, nhưng nhân viên Guild có thể nhận ủy thác cá nhân. Tôi hiểu nội dung yêu cầu của cậu rồi. Ủy thác đó tôi xin nhận.”</p><p id="123">“Cảm ơn anh. Vậy câu cuối cùng.”</p><p id="124">“Ừm, vẫn còn câu hỏi nữa à, thú vị đấy. Đa số mọi chuyện tôi đều có thể trả lời.”</p><p id="125">Thấy người Khuyển nhân vỗ vào bộ ngực rắn chắc đầy tự tin kiểu “cứ nhào vô”, Tsutomu đặt câu hỏi cuối cùng.</p><p id="126">“Cho tôi biết tên của anh đi.”</p><p id="127">“...Tên tôi là Garm. Từ nay mong được giúp đỡ, Kyoutani Tsutomu-dono.”</p><p id="128">“Ah, gọi Tsutomu là được rồi.”</p><p id="129">Thấy Garm có vẻ bớt gay gắt hơn, Tsutomu càng nheo đôi mắt híp lại và nở một nụ cười.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/74d7206e-decf-4f38-b5d6-003d26a41676.jpg?t=1768360276" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/f4744abe-bb28-4201-aa0c-be5b777efb2c.jpg?t=1768360276" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24797-aaaaaaaaa/c297446-chao-mung-den-voi-dungeon" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24797-aaaaaaaaa" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24797-aaaaaaaaa" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'uYnd6QxoF5aUYMNdotrLF4DPZJmDU0swPaPIXrDh';
        var comment_type = 'chapter';
        var comment_typeid = '297450';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'uYnd6QxoF5aUYMNdotrLF4DPZJmDU0swPaPIXrDh';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24797');
    chapter_id = parseInt('297450');

    readingObject = {
        series_id: series_id,
        series_title: 'Live Dungeon!',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="uYnd6QxoF5aUYMNdotrLF4DPZJmDU0swPaPIXrDh" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c3a756548421116',t:'MTc2OTM3MjI5Mw=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
