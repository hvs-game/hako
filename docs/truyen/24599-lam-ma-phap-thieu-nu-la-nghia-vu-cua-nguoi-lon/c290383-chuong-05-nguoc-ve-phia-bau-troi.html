<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Làm ma pháp thiếu nữ là nghĩa vụ của người lớn - Chương 05: Ngước về phía bầu trời - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Một ma pháp thiếu nữ mà lại đi giải cứu ma pháp thiếu nữ khác đã ra mắt công chúng! Nhưng sự can thiệp của &quot;anh ấy&quot; hình như có hơi kích thích với những cô bé đơn phương chiến đấu kia thì phải. Tại một thế giới nơi ma...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="8367kfATOc46wGmBgW5oDM5B7D7V1lYyJRlydsYE">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24599-575fc8c3-bf77-45b0-b64e-5094c457c921.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290245-chuong-04-truong-hop-cua-ma-phap-thieu-nu-yeu-duoi-yuuki-sena"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290899-chuong-06-thien-thach-va-huy-diet"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi" style="background: url('https://i.hako.vn/ln/series/covers/s24599-575fc8c3-bf77-45b0-b64e-5094c457c921.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon">Làm ma pháp thiếu nữ là n...</a></h5>
                    <small><i class="fas fa-pen"></i>多部キャノン</small>
                    <small><i class="fas fa-paint-brush"></i>間明田</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/t35649-vol-1">Vol 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c289519-minh-hoa">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Minh họa
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c289521-chuong-01-quyet-dinh-cua-nguoi-lon">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 01: Quyết định của người lớn
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c289819-chuong-02-thao-luan-ve-ma-phap-thieu-nu-ts">
                                                                        Chương 02: Thảo luận về Ma pháp thiếu nữ TS
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c289952-chuong-03-nghia-vu-cua-nguoi-lon">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 03: Nghĩa vụ của người lớn
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290245-chuong-04-truong-hop-cua-ma-phap-thieu-nu-yeu-duoi-yuuki-sena">
                                                                        Chương 04: Trường hợp của Ma pháp thiếu nữ yếu đuối - Yuuki Sena
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 05: Ngước về phía bầu trời
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290899-chuong-06-thien-thach-va-huy-diet">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 06: Thiên thạch và huỷ diệt
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290911-chuong-07-tam-biet-toi-cu-don-chao-tuong-lai-moi">
                                                                        Chương 07: Tạm biệt tôi cũ, đón chào tương lai mới
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290945-chuong-08-thao-luan-ve-ma-phap-thieu-nu-ts-2">
                                                                        Chương 08: Thảo luận về Ma pháp thiếu nữ TS - 2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290953-chuong-09-thu-thach-cua-nguoi-lon">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 09: Thử thách của người lớn
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c291264-chuong-10-phuong-an-cua-nguoi-lon">
                                                                        Chương 10: Phương án của người lớn
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Vol 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 05: Ngước về phía bầu trời</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi#chapter-comments" style="text-decoration: underline">4 Bình luận</a> -
                        Độ dài: 2,244 từ - Cập nhật: 
                        <time class="topic-time timeago" title="16-01-2026 08:50:54" datetime="2026-01-16T08:50:54+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSe3y_bpPb6ADsKAgPWE3o3Jgzzftw8NKkp93_5vUayXLaQICg/viewform" target="_blank">
                        <img src="https://i2.hako.vip/vault/2025final_1.webp" style="width: 700px; height: auto">
                    </a>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 05: Ngước về phía bầu trời</p>
                    <p id="1">＜Hả?＞ <em>Ting</em> </p><p id="2">＜Cứu viện? Không phải là câu view đấy chứ?＞ <em>Ting</em></p><p id="3">Những bình luận thắc mắc của người xem hiện lên như nói thay cho sự bàng hoàng trong lòng tôi. </p><p id="4">Lũ hư thú dạng phân bào mới này, với những đòn tấn công nửa vời của tôi thì chẳng những không diệt được mà còn làm chúng tăng số lượng lên.</p><p id="5">Đường lui đã bị chặn, tôi chỉ biết đứng hình ở đây, không biết phải phản ứng thế nào trước những dòng bình luận bảo một kẻ đã đường cùng như mình hãy tiếp tục chiến đấu.</p><p id="6">"…"</p><p id="7">Lũ Hư thú vẫn chưa lao vào kết liễu dù có thể làm thế bất cứ lúc nào, chúng chỉ đang từ từ siết chặt vòng vây. ...Có lẽ, mục tiêu của chúng là nhử tôi phản công để tiếp tục nhân bản thêm.</p><p id="8">Nếu vậy, chẳng thà mình đừng mắc mưu chúng, cứ thế mà chết đi cho xong... Lý trí của tôi mách bảo như vậy.</p><p id="9">──Nhưng.</p><p id="10">(Mình… có thể được cứu sao...? Thật không...? Mình... được phép chiến đấu tiếp ư...?)</p><p id="11">Dù mỏng manh đến đâu, niềm hy vọng vừa nhen nhóm đã rót vào người tôi một thứ độc dược ngọt ngào đến tàn nhẫn.</p><p id="12">Nếu đúng như lời người xem nói, đây chỉ là một trò đùa ác ý... hay tệ hơn, là bình luận của kẻ nào đó muốn lũ Hư thú thắng thì sao. </p><p id="13">Chỉ một quyết định sai lầm lúc này thôi cũng đủ dẫn đến hậu quả không thể cứu vãn.</p><p id="14">"A... ư... hức..."</p><p id="15">Từ đôi môi khô khốc của tôi, những tiếng rên rỉ chẳng thành lời bật ra.</p><p id="16">Sợ quá, sợ quá, sợ quá đi mất. </p><p id="17">Không giống như cái chết đơn thuần, đây là một quyết định quá nặng nề, một thứ gì đó còn khủng khiếp hơn thế đang đè nặng lên vai.</p><p id="18">Áp lực ấy khiến tôi cảm thấy như ý thức mình đang chìm dần vào bóng tối─</p><p id="19">"──Được rồi! Chiến thôi, Milia-san!"</p><p id="20">Tiếng nói đầy quyết tâm của Hakushiki - linh vật đang trú ngụ trong vũ khí của tôi - khiến tôi bừng tỉnh.</p><p id="21">"Chuyện sau đó cứ mặc kệ đi! Có bị mắng vì làm kẻ địch tăng thêm thì tôi cũng đếch quan tâm!! Tôi không cam lòng, tuyệt đối không cam lòng nhìn Milia-san đã cố gắng đến nhường này mà phải kết thúc ở đây đâu!"</p><p id="22">"Hak... shiki...!"</p><p id="23">＜Nói hay lắm! Làm ơn hãy tiếp tục chiến đấu đi, vẫn còn hy vọng mà＞ <em>Ting</em> </p><p id="24">＜Dù chuyện gì xảy ra đi nữa thì cũng đừng chết nhé＞ <em>Ting</em></p><p id="25">Tiếng bình luận vang lên như tiếp thêm sức mạnh cho người cộng sự đang gào thét trong nước mắt kia.</p><p id="26">...Sức mạnh đang cuộn trào lên trong tôi. </p><p id="27">Dù là một kẻ chẳng giống nhân vật chính chút nào như tôi, vẫn có những người chịu tin tưởng đến tận thế này.</p><p id="28">"Ư, ư... ư ư ư... ư ư...!"</p><p id="29">Ôi, sợ quá. Mình thực sự rất sợ. </p><p id="30">Nhưng nếu chỉ cần chiến đấu thêm 5 phút nữa, tôi muốn tin tưởng. </p><p id="31">Chỉ cần 5 phút thôi. Chừng đó thì chắc là tôi vẫn có thể làm được.</p><p id="32">"……Làm thôi nào! Mọi người,đến phút cuối cùng, hãy cho tôi mượn sức mạnh nhé!"</p><p id="33">~*~</p><p id="34">Và thế là, tôi đã chiến đấu.</p><p id="35">Trước lũ Hư thú cứ thế tăng dần số lượng, dù bị áp lực nghẹt thở đè bẹp khi đường lui mất sạch, tôi vẫn không một giây lơ là, quyết tâm chống trả.</p><p id="36">Nói thực lòng, việc tôi có thể cầm cự được 5 phút là rất mong manh. Nhưng không phải là không thể. Không, không phải, tôi sẽ làm, tôi sẽ làm được.</p><p id="37">Tôi sẽ tiếp tục chiến đấu với ý chí kiên cường, giống như hình ảnh những "nhân vật chính" ma pháp thiếu nữ mà tôi từng thấy.</p><p id="38">...Nhưng lũ Hư thú lại một lần nữa cho tôi thấy hiện thực tại phũ phàng đến mức nào.</p><p id="39">"Gộc... hự... á!"</p><p id="40"> "M-Milia-san!?"</p><p id="41">Tiếp tục dùng Impact để đánh tan lũ Hư thú đang áp sát, việc chúng tăng số lượng vẫn nằm trong dự tính, không vấn đề gì.</p><p id="42">Tuy nhiên, lũ Hư thú khi đã tập trung đến một số lượng nhất định bỗng nhiên dồn về phía con nằm sâu nhất bên trong, bắt đầu chồng chất lên nhau.</p><p id="43">Và rồi, một con Hư thú thành hình... Nó đã to hơn hẳn một ban đầu, và trên hết, khí tức của nó tăng lên rõ rệt. Tôi có thể cảm thấy một áp lực khủng khiếp tỏa ra từ nó.</p><p id="44">"A... ặc...! A... di... A... di..."</p><p id="45">"A... di... ga... dou..."</p><p id="46">Ngay khoảnh khắc tiếng cười nhạo đầy nhiễu loạn phát ra từ cái miệng rách toác của con Hư thú hoàn chỉnh, tôi đã bị đánh bay với tốc độ và uy lực không thể tin nổi, rồi lăn lộn trên mặt đất.</p><p id="47">"Milia-san , có sao không!? N-Nó không phải đòn trực diện nhỉ!? Cố đứng dậy đi────"</p><p id="48">Đúng như Hakushiki nói, đòn đánh của con Hư thú đã bị món vũ khí tôi đang thủ thế chặn lại.</p><p id="49">Bởi đó không phải vết thương chí mạng, Hakushiki đã đúng khi cố động viên tôi, tôi vẫn có thể đứng dậy để câu thêm thời gian.</p><p id="50">Nhưng mà.</p><p id="51">"...Aha, xin lỗi nha, không được rồi... cú vừa nãy làm trật khớp vai mất rồi..." </p><p id="52">Dù gắng gượng ngồi dậy trong tư thế quỳ gối, tôi chỉ biết cười khổ khi nhìn cánh tay phải của mình đang thõng xuống không chút sức lực.</p><p id="53"><img src="https://headcanontl.wordpress.com/wp-content/uploads/2025/12/p050.jpg?w=99999" alt=""></p><p id="54">Impact, phương thức phản kháng duy nhất của tô, là kỹ thuật chỉ có thể phát động khi điều chỉnh chính xác bằng cả hai tay.</p><p id="55">"A... aa...!"</p><p id="56">Ngay cả khi trong trạng thái hoàn hảo nhất tôi còn chẳng có cửa thắng, thì giờ đây, khi vũ khí cũng bị tước mất, tôi thực sự chẳng còn làm được gì nữa rồi.</p><p id="57">(…. Đã bao lâu trôi qua kể từ bình luận đó rồi nhỉ... Chắc là khoảng 3 phút rồi... Xin lỗi nhé, dù bạn đã nói là sẽ có cứu viện...)</p><p id="58">Lúc này, tôi chợt nhớ về dòng bình luận của người xem mà bình thường chẳng mấy khi xuất hiện.</p><p id="59">Chẳng biết có thật hay không, nhưng dù sao thì tôi cũng không đáp lại được kỳ vọng đó rồi. Một cảm giác buông xuôi lẫn tội lỗi ùa về.</p><p id="60">"…"</p><p id="61">...Biết đâu, biết đâu đấy.</p><p id="62">Cứu viện sẽ đến sớm hơn 5 phút như đã nói thì sao. </p><p id="63">Tôi ôm lấy niềm hy vọng mong manh ấy và nhìn quanh, nhưng trên con đường dành riêng cho ma pháp thiếu nữ kia chẳng có tia sáng nào lao tới, cũng không có tiếng bước chân chạy trên mặt đất.</p><p id="64">(……Cũng phải thôi nhỉ)</p><p id="65">Trong lúc đó, con Hư Thú hoàn chỉnh cùng lũ tay sai đang chặn đường bắt đầu siết chặt vòng vây như muốn vờn mồi. </p><p id="66">Có lẽ sau khi hoàn thành việc giúp chúng phân ra, tôi đã hết giá trị sử dụng. Chúng tỏa ra thứ sát khí lạnh lùng và rõ rệt khác hẳn với lúc nãy.</p><p id="67">＜Bảo có cứu viện thì đến đi chứ làm ơn, sao lại bất công thế này＞ <em>Ting</em></p><p id="68">＜Xin lỗi tôi không xem nổi nữa rồi＞ <em>Ting</em></p><p id="69">(A... Aha, xin lỗi nhé)</p><p id="70">Cuối cùng cũng có một người xem không chịu nổi nữa mà rời đi.</p><p id="71">Số người xem giảm từ 3 xuống còn 2.</p><p id="72">Tôi mỉm cười nhàn nhạt, thấy có lỗi vì đã làm họ phải buồn dù họ đã hết lòng ủng hộ mình.</p><p id="73">(Mà... dù không suôn sẻ đến phút cuối... nhưng mình cũng đã làm hết sức rồi...)</p><p id="74">Nhìn quanh chỉ thấy toàn lũ Hư Thú đang áp sát.</p><p id="75">Nên vào giây phút cuối cùng của giấc mơ tan vỡ này, tôi muốn được ngắm nhìn thứ gì đó thật đẹp.</p><p id="76">Tôi ngước lên nhìn bầu trời đêm được ánh trăng soi sáng.</p><p id="77">"A... oa, tuyệt quá... này, nhìn kìa Hakushiki!"</p><p id="78">"…………Milia, a..."</p><p id="79">Đó có phải là phép màu đầu tiên và cuối cùng mà thần linh ban tặng không? Thứ lọt vào tầm mắt tôi khi đã buông xuôi  chính là một ngôi sao băng trắng sáng rực rỡ.</p><p id="80">Lần đầu tiên tôi thấy một ngôi sao băng lớn và gần đến thế. Dù ý thức đã mờ mịt đi vì đau đớn, tôi vẫn gửi gắm một điều ước vào đó, hy vọng nó sẽ thành hiện thực.</p><p id="81">Chuyện gia đình, chuyện ước mơ, chuyện cộng sự, và cả người có lẽ đang chạy đến cứu tôi nữa. ...Có quá nhiều điều muốn nghĩ đến.</p><p id="82">Nhưng thứ đầu tiên hiện lên trong tâm trí tôi là thế này.</p><p id="83">(─Cầu cho những người đã ủng hộ mình, lần tới, sẽ gặp được một ma pháp thiếu nữ tuyệt vời hơn)</p><p id="84">...Ừm, vậy xong rồi. </p><p id="85">Vừa kịp lúc. Cuối cùng, tôi cũng đã thấy mãn nguyện.</p><p id="86">Tôi cứ nhìn chăm chú vào ánh sáng trắng ấy, thầm nghĩ quả là một ngôi sao băng kỳ lạ khi nó chịu chờ đợi mình lâu đến thế─</p><p id="87">"……Ơ, cái đó...?"</p><p id="88">Tôi thốt lên đầy bối rối khi thấy ngôi sao băng ấy càng lúc càng to dần... đúng hơn là, nó đang lao thẳng về phía này.</p><p id="89">"Hả... đùa à, Milia-san, đó là..."</p><p id="90">Không, không phải nhìn lầm. Cả Hakushiki lẫn lũ Hư Thú cũng đều nhận thấy điều bất thường đã dừng bước để nhìn ngôi sao băng.</p><p id="91">Đó... không phải sao băng!</p><p id="92">(Một cô gái... Ma pháp thiếu nữ!?)</p><p id="93">Ngay khi tôi nhận ra bóng hình ấy. Cô nàng ma pháp thiếu nữ tóc vàng bao quanh bởi ánh sáng trắng đã lao vào giữa tôi và lũ Hư thú─</p><p id="94">BÀNHHHH!! Một tiếng nổ như sấm sét vang lên. Ngay giây tiếp theo, tôi thấy lũ Hư Thú đã bị thổi bay tứ tung.</p><p id="95">"A... a...!"</p><p id="96">Những thứ màu trắng bay lơ lửng xung quanh như những cánh hoa. </p><p id="97">Đó là lông vũ từ đôi cánh trắng muốt mọc ra từ lưng cô ấy. </p><p id="98">Tôi chỉ biết há hốc mồm kinh ngạc khi nhận ra cô ấy vừa dùng ma lực từ đôi cánh đó để thổi bay lũ Hư Thú.</p><p id="99">Tôi biết cô…. À không tôi biết người này. Biết thì có biết, nhưng tôi chưa từng thấy cô ấy... không, là "cậu ấy" trong bộ dạng này.</p><p id="100">Cái người đã thức tỉnh với tư cách là ma pháp thiếu nữ nam đầu tiên trong lịch sử vào ngày hôm đó, và ngay lập tức trở nên nổi tiếng... tên thật là Takatsuka Shiraha.</p><p id="101">Khác với lúc mới thức tỉnh hầu như chẳng mặc gì do thiếu ma lực. </p><p id="102">Giờ cậu ấy khoác trên mình bộ linh phục với tông màu trắng chủ đạo với những họa tiết như dải lụa màu xanh lá, tạo cảm giác nhẹ nhàng, bồng bềnh.</p><p id="103">Đôi chân thon dài như tác phẩm điêu khắc không mang giày, bao phủ trong lớp tất trắng hơi ánh xanh, còn đôi tay thì mang găng tay trắng mịn màng với tạo hình như đôi cánh.</p><p id="104">"Ha... ha... oa...!"</p><p id="105">Và thứ thu hút ánh nhìn nhất chính là đôi cánh lớn đã đưa cậu ấy đến đây và dùng để tấn công vừa rồi.</p><p id="106">Cứ như thể chúng được sinh ra chỉ để kịp thời cứu lấy tôi trong gang tấc vậy.</p><p id="107">Tôi nhận ra đôi cánh quá đỗi thuận tiện đó chính là năng lực độc nhất được tạo ra từ ma lực... giống như chiếc búa của tôi vậy.</p><p id="108">Hoá ra lời nhắn lúc nãy là thật. Còn chưa đầy 5 phút, cứu viện đã thực sự đến rồi.</p><p id="109">"A... à, thì là, t-tôi─"</p><p id="110">"──Giỏi thật đó, dù chỉ có một mình... có thể chống chọi được đến mức này..." </p><p id="111">"…Hả…?"</p><p id="112">Thấy tôi đang lắp bắp không thành lời vì quá sốc, cậu ấy đưa ngón tay lên trán đẩy kính như thói quen (dù chẳng đeo kính), rồi thoáng lộ vẻ xót xa trên gương mặt.</p><p id="113">Nhưng rồi cậu ấy nhanh chóng lấy lại bình tĩnh, cúi xuống chạm hai tay vào vai phải của tôi.</p><p id="114">"──Xin thất lễ."</p><p id="115">Một tiếng "khục" nhỏ vang lên, tôi chỉ thấy đau nhói trong tích tắc. Ngay sau đó, khớp vai bị trật của tôi đã trở lại vị trí bình thường.</p><p id="116">Giữa hàng loạt sự việc không thể tin nổi và đầy may mắn vừa xảy ra, cậu ấy tiếp tục nói:</p><p id="117">"Xin được tự giới thiệu lại. Rất xin lỗi vì đã liên lạc đột ngột vào đúng ngày hôm nay."</p><p id="118">Dù là hành động cúi người hay cách đưa tay ra, mọi cử chỉ của cậu ấy đều toát lên vẻ thần thánh đến mức tôi thấy tội lỗi khi để bộ trang phục trắng tinh kia lấm bẩn bùn đất.</p><p id="119">Cứ thế, cậu ấy cất lời bằng một giọng nói kỳ lạ. Nó vừa nghiêm trang như một chiếc đồng hồ tinh xảo, vừa chứa đựng sự dịu dàng vô bờ bến.</p><p id="120">"Rất vui được gặp em. Tôi là ma pháp thiếu nữ vừa ra mắt gần đây, tên là Shirahael. Miliamour-san, nếu không phiền, cô có muốn cùng tôi... thực hiện một buổi... LIVE... COLLAB... ngay bây giờ không?"</p><p id="121"><img src="https://headcanontl.wordpress.com/wp-content/uploads/2025/12/k002-003.jpg?w=999999" alt=""></p><p id="122">Ngày hôm đó, tại công viên không tên này.</p><p id="123">Một thiên thần đã giáng thế.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/74d7206e-decf-4f38-b5d6-003d26a41676.jpg?t=1768360276" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/f4744abe-bb28-4201-aa0c-be5b777efb2c.jpg?t=1768360276" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290245-chuong-04-truong-hop-cua-ma-phap-thieu-nu-yeu-duoi-yuuki-sena" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290899-chuong-06-thien-thach-va-huy-diet" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(4)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">4 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3165600"
    class="ln-comment-item mt-3 clear"
    data-comment="3165600" 
    data-parent="3165600" 
    data-type="chapter" 
    data-typeid="290383">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u206472-08da9d6f-09f5-4a3b-abcf-a8e86b027afd.png" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/206472">Schweinorg</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Tfnc
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi?comment_id=3165600#ln-comment-3165600"
                            class="text-slate-500">
                            <time class="timeago" title="16-01-2026 07:36:07"
                                datetime="2026-01-16T07:36:07+07:00">
                                16-01-2026 07:36:07
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3164249"
    class="ln-comment-item mt-3 clear"
    data-comment="3164249" 
    data-parent="3164249" 
    data-type="chapter" 
    data-typeid="290383">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u178774-e2e5dd8d-ea46-45f6-b57d-2e77dda57730.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/178774">.****.</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        +1 fan girl
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi?comment_id=3164249#ln-comment-3164249"
                            class="text-slate-500">
                            <time class="timeago" title="15-01-2026 06:18:52"
                                datetime="2026-01-15T06:18:52+07:00">
                                15-01-2026 06:18:52
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3164179"
    class="ln-comment-item mt-3 clear"
    data-comment="3164179" 
    data-parent="3164179" 
    data-type="chapter" 
    data-typeid="290383">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u120875-3805bd34-1198-48ca-a808-b1fc59768c98.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/120875">Hikittk</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Tên có yếu tố thiên thần mới chịu cơ
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi?comment_id=3164179#ln-comment-3164179"
                            class="text-slate-500">
                            <time class="timeago" title="15-01-2026 02:41:37"
                                datetime="2026-01-15T02:41:37+07:00">
                                15-01-2026 02:41:37
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

        <div class="ln-comment-reply">
            <div id="ln-comment-3164180"
    class="ln-comment-item mt-3 clear"
    data-comment="3164180" 
    data-parent="3164179" 
    data-type="chapter" 
    data-typeid="290383">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u120875-3805bd34-1198-48ca-a808-b1fc59768c98.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/120875">Hikittk</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Thiên thần của loli peak vl
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24599-lam-ma-phap-thieu-nu-la-nghia-vu-cua-nguoi-lon/c290383-chuong-05-nguoc-ve-phia-bau-troi?comment_id=3164179&amp;reply_id=3164180#ln-comment-3164180"
                            class="text-slate-500">
                            <time class="timeago" title="15-01-2026 02:43:29"
                                datetime="2026-01-15T02:43:29+07:00">
                                15-01-2026 02:43:29
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>
    
                
    </div>
    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '8367kfATOc46wGmBgW5oDM5B7D7V1lYyJRlydsYE';
        var comment_type = 'chapter';
        var comment_typeid = '290383';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '8367kfATOc46wGmBgW5oDM5B7D7V1lYyJRlydsYE';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24599');
    chapter_id = parseInt('290383');

    readingObject = {
        series_id: series_id,
        series_title: 'Làm ma pháp thiếu nữ là nghĩa vụ của người lớn',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="8367kfATOc46wGmBgW5oDM5B7D7V1lYyJRlydsYE" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
