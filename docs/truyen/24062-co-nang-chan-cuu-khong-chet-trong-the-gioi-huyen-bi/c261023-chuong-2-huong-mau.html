<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Cô Nàng Chăn Cừu Không Chết Trong Thế Giới Huyền Bí - Chương 2: Hương Máu - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Đến một lúc nào đó, thế giới dường như đã đổi thay. Một ngày nọ, khi Mel mở mắt, cô cảm nhận được rằng thế giới mình từng biết đã thay đổi theo một cách nào đó— Một vầng trăng đỏ, chủ nghĩa huyền bí, những buổi tụ họp bí...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="emBoimQttJb3mWIkusTYLd0Gh5xGskNJiRsVkxBU">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261023-chuong-2-huong-mau">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24062-84188109-c03b-4e38-9bfe-ea3572280d2f.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261022-chuong-1-vang-trang-do-va-nhung-tieng-thi-tham"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261192-chuong-3-mot-nguoi-chan-cuu-khac"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261023-chuong-2-huong-mau" style="background: url('https://i.hako.vn/ln/series/covers/s24062-84188109-c03b-4e38-9bfe-ea3572280d2f.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi">Cô Nàng Chăn Cừu Không Ch...</a></h5>
                    <small><i class="fas fa-pen"></i>阳光果粒橙</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/t34531-web-novel">Web Novel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261022-chuong-1-vang-trang-do-va-nhung-tieng-thi-tham">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1: Vầng Trăng Đỏ Và Những Tiếng Thì Thầm
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261023-chuong-2-huong-mau">
                                                                        Chương 2: Hương Máu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261192-chuong-3-mot-nguoi-chan-cuu-khac">
                                                                        Chương 3: Một Người Chăn Cừu Khác
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261907-chuong-4-dang-le-te">
                                                                        Chương 4: Dâng Lễ Tế
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c262348-chuong-5-thoi-khac-chan-dat-da-den">
                                                                        Chương 5: Thời Khắc Chăn Dắt Đã Đến
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c263072-chuong-6-giet-co-ay">
                                                                        Chương 6: Giết Cô Ấy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c263392-chuong-7-sau-vi-than">
                                                                        Chương 7: Sáu Vị Thần
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c265550-chuong-8-giet-ke-cam-do-be-boi-ay">
                                                                        Chương 8: Giết Kẻ Cám Dỗ Bê Bối Ấy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c268285-chuong-9-co-gai-va-duoc-si">
                                                                        Chương 9: Cô Gái Và Dược Sĩ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c268287-chuong-10-co-gai-va-huyen-thuat">
                                                                        Chương 10: Cô Gái Và Huyền Thuật
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c269014-chuong-11-phong-ban-thu-nam">
                                                                        Chương 11: Phòng Ban Thứ Năm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c269914-chuong-12-giai-doan-ap-luc">
                                                                        Chương 12: Giai Đoạn Áp Lực
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c273013-chuong-13-chiec-mat-na">
                                                                        Chương 13: Chiếc Mặt Nạ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c275065-chuong-14-ngai-huou">
                                                                        Chương 14: Ngài Hươu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c276392-chuong-15-co-gai-va-buoi-hop-mat-bi-mat">
                                                                        Chương 15: Cô Gái Và Buổi Họp Mặt Bí Mật
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 2: Hương Máu</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261023-chuong-2-huong-mau#chapter-comments" style="text-decoration: underline">3 Bình luận</a> -
                        Độ dài: 2,142 từ - Cập nhật: 
                        <time class="topic-time timeago" title="17-11-2025 21:19:49" datetime="2025-11-17T21:19:49+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 2: Hương Máu</p>
                    <p id="1">“Trăng vốn dĩ luôn đỏ mà, đúng không?”</p><p id="2">Chỉ một câu ngắn ngủi và Mel như bị sét đánh trúng, đứng chết lặng tại chỗ.</p><p id="3">Hai tay cô nắm chặt mép bồn rửa, các đốt ngón tay trắng bệch vì dùng lực quá mạnh.</p><p id="4">Qua gương, Mel nhìn thấy gương mặt của chính mình.</p><p id="5">Làn da hơi tái, đôi mày thanh mảnh khẽ nhíu lại, nơi khóe môi còn đọng một giọt nước—trông như thể cô đang cố hết sức để hiểu được lời vừa nghe thấy.</p><p id="6">Ngay cả mái tóc dài màu xám, vốn đã được Veronica chải mượt đến mức không một sợi rối, giờ cũng trở nên ảm đạm, mất đi ánh sáng, khẽ rung theo đôi môi đang run rẩy.</p><p id="7">Phản chiếu trong đôi mắt màu hổ phách của Mel là gương mặt Veronica trong gương, hơi hoang mang nhưng vẫn đầy dịu dàng.</p><p id="8">“Chị… vừa nói gì?”</p><p id="9">“Có gì không ổn sao?”</p><p id="10">Sự nghi hoặc trong mắt Veronica càng sâu hơn.</p><p id="11">Chị xoay người Mel lại rồi nhẹ nhàng áp trán mình vào trán em, như để kiểm tra nhiệt độ.</p><p id="12">“Không có sốt…”</p><p id="13">Veronica nhíu mày, giọng đầy lo lắng.</p><p id="14">“Mel, em thấy khó chịu ở đâu à?”</p><p id="15">“K-không…”</p><p id="16">Mel lắc đầu. “Ý em là chuyện chị nói… sao trăng lại có thể đỏ được?”</p><p id="17">“Trăng luôn đỏ mà.”</p><p id="18">Giọng Veronica mang theo một sự chắc chắn không thể lay chuyển.</p><p id="19">“Đó chẳng phải là kiến thức cơ bản sao?”</p><p id="20">“Kiến… thức cơ bản?”</p><p id="21">Một cơn choáng ập đến khiến tầm nhìn Mel trở nên mờ đi.</p><p id="22">Những bức tường trong phòng tắm như đang xoay vòng.</p><p id="23">Cô bám chặt vào mép bồn rửa, cố giữ mình đứng vững.</p><p id="24">Mel loạng choạng bước ra khỏi phòng tắm, ngẩng đầu nhìn lên bức tranh trang trí treo trên tường.</p><p id="25">Đó là một bức tranh đêm.</p><p id="26">Trong tranh, một vầng trăng đỏ khổng lồ treo lơ lửng giữa trời, nhuộm cả thế giới thành màu máu.</p><p id="27">Mel dán mắt vào bức tranh và ngay lập tức một cảm giác buồn nôn ập tới.</p><p id="28">“Chuyện này… chuyện này không thể nào…”</p><p id="29">Cô gái lẩm bẩm, tay chân bắt đầu run không kiểm soát.</p><p id="30">“Trăng… trăng phải màu trắng, chuyện này không thể… không thể nào…”</p><p id="31">Nghe vậy, Veronica, vừa bước ra khỏi phòng tắm, lập tức tái mặt vì kinh hãi.</p><p id="32">Chị vội chạy đến ôm lấy Mel, người đã ngồi phịch xuống ghế, nhẹ nhàng vuốt lưng cô.</p><p id="33">“Mel, những lời như thế là xúc phạm đến Huyết Nguyệt, em tuyệt đối không được nói bừa!”</p><p id="34">Veronica nghiêm giọng rồi ngẩng đầu lên, chắp tay hướng về bầu trời.</p><p id="35">“Hỡi Huyết Nguyệt trên cao, xin hãy tha thứ cho lời lẽ vô tình của em gái con… nó chỉ quá mệt mỏi gần đây.”</p><p id="36">Vừa nói, những ngón tay cô khẽ vuốt mái tóc của Mel, động tác mềm mại và trấn an.</p><p id="37">“Em mệt quá rồi, Mel. Áp lực từ trường học lớn đến vậy sao?”</p><p id="38">Mel tựa vào chị, cảm nhận hơi ấm từ cơ thể Veronica.</p><p id="39">Nhiệt độ quen thuộc và mùi hương dịu nhẹ ấy vốn phải khiến cô yên lòng, nhưng lúc này, chúng chẳng thể xua đi cái lạnh đang dâng lên trong tim.</p><p id="40">Ánh mắt cô lại rơi vào bức tranh phong cảnh đêm nhỏ treo trên tường.</p><p id="41">Vầng trăng đỏ trong tranh dường như đang chế giễu sự hoang mang của cô.</p><p id="42">Vầng trăng đỏ ấy quá sống động, quá bất thường.</p><p id="43">Như một con mắt khổng lồ và độc ác, lạnh lùng nhìn xuống thế gian.</p><p id="44">“Em không biết nữa, chị ạ.” Giọng Mel đầy bất lực. “Em không biết rốt cuộc mình bị sao…”</p><p id="45">“Không sao đâu, chị ở đây với em. Đừng lo nhé…”</p><p id="46">Buổi trưa, Veronica ra ngoài.</p><p id="47">Chị là một thủ thư.</p><p id="48">Để chăm sóc Mel, Veronica không làm việc đến tối như mọi khi, mà chọn tan ca sớm để về nhà.</p><p id="49">Đồng thời, chị cũng xin quản lý thư viện cho nghỉ một ngày, dự định ngày mai đưa Mel đến nhà thờ.</p><p id="50">Veronica mở cửa bước vào, vừa chào Mel vừa đặt thứ gì đó lên bàn.</p><p id="51">Thấy vậy, Mel tò mò lại gần, nhìn chiếc hộp mà Veronica mang về.</p><p id="52">Đó là một miếng bánh.</p><p id="53">“Sao chị lại mua bánh vậy?”</p><p id="54">Mel đi đến bên Veronica, giúp cô một tay, tiện miệng hỏi.</p><p id="55">“Ừm… vì chị nghĩ chắc em muốn ăn chút gì đó, nên mua về.” </p><p id="56">Veronica cười. “Chị đoán sai rồi à?”</p><p id="57">Nghe vậy, Mel hơi sững lại.</p><p id="58">Cô im lặng một lúc rồi mỉm cười lắc đầu.</p><p id="59">“Chị đoán đúng rồi.”</p><p id="60">“Hừm hừm, tất nhiên rồi.”</p><p id="61">Veronica cười đắc ý rồi tiếp tục tập trung vào công việc trước mặt.</p><p id="62">Còn Mel thì đứng rửa rau bên cạnh.</p><p id="63">Nước lạnh chảy qua đầu ngón tay cô, nhưng chẳng thể rửa sạch sự hỗn loạn đang cuộn lên trong lòng.</p><p id="64">Hình ảnh thân người bị bao phủ bởi thứ dơ bẩn trong con hẻm đó lại hiện lên khiến ngón tay Mel khẽ run.</p><p id="65">Cảm giác bị nhìn xuyên thấu linh hồn ấy như một con thú đang rình mồi trong bóng tối.</p><p id="66">“Ọc ọc—”</p><p id="67">Nước trong nồi bắt đầu sôi, hơi nóng tỏa khắp gian bếp.</p><p id="68">“Mel, em giúp chị cắt cà rốt nhé?”</p><p id="69">Giọng Veronica kéo Mel trở lại thực tại.</p><p id="70">Cô gật đầu, cầm lấy con dao bếp rồi bắt đầu cắt. Tiếng lưỡi dao chạm vào cà rốt vang lên đều đặn trong bếp.</p><p id="71">“Ôi chà, tay nghề của Mel càng ngày càng tốt đấy.”</p><p id="72">Veronica liếc nhìn rồi khen.</p><p id="73">“Em dùng dao đúng cách rồi.”</p><p id="74">“Thật sao?”</p><p id="75">Mel cúi xuống nhìn thớt trước mặt.</p><p id="76">Sau khi Veronica nói vậy, cô mới nhận ra dường như đúng thật.</p><p id="77">“Chị nói rồi mà, Mel của chúng ta là một đứa trẻ thông minh.”</p><p id="78">Veronica mỉm cười, khẽ xoa đầu Mel. “Vất vả rồi, phần còn lại để chị làm.”</p><p id="79">Mel gật đầu rồi cầm những chiếc đĩa bưng ra bàn ăn, đặt xuống từng chiếc một.</p><p id="80">Vì tò mò, cô mở hộp bánh ra, bên trong là một miếng mousse mâm xôi.</p><p id="81">“Thảo nào, đồ ăn chẳng có linh hồn…”</p><p id="82">Mel lẩm bẩm.</p><p id="83">Một lúc sau, Veronica đặt nồi hầm kem nóng hổi lên bàn rồi múc một muỗng đầy vào bát Mel.</p><p id="84">Làn hơi trắng bốc lên như một tấm màn mỏng lơ lửng trong không khí.</p><p id="85">“Hôm nay chị cho thêm kem đấy.”</p><p id="86">Veronica cắt bánh mì.</p><p id="87">Ổ bánh trắng mới nướng tỏa hương lúa mì, lớp vỏ vàng giòn bao lấy phần ruột mềm mại bên trong.</p><p id="88">“Ngày mai mình ra chợ nhé? Gần đây có mở một cửa hàng vải mới. Nghe nói họ có rất nhiều hoa văn đẹp, mà giá lại rẻ. Nhân tiện mình làm thêm vài bộ váy nữa.”</p><p id="89">Veronica tiếp tục trò chuyện.</p><p id="90">Mel nhìn nụ cười dịu dàng của chị gái, những sợi tơ đen quấn quanh linh hồn mình dường như cũng mềm lại đôi chút.</p><p id="91">Sau bữa tối, Veronica thu dọn bát đĩa, còn Mel theo thói quen cầm túi rác buộc sẵn rồi bước ra khỏi nhà để đem đi vứt.</p><p id="92">Đó là thói quen bao năm của hai chị em: một người rửa bát, một người mang rác đi đổ.</p><p id="93">Đêm xuống, những ngọn đèn khí trên phố lần lượt sáng lên, vẽ những vòng sáng vàng nhạt mờ ảo trên nền đường.</p><p id="94">Mel mang theo túi rác, đi dọc con phố quen thuộc đến khu đổ rác.</p><p id="95">Sau khi vứt rác xong, cô phủi tay rồi quay người rời đi.</p><p id="96">“Da da—”</p><p id="97">Tiếng giày da gõ trên mặt đường lát đá vang lên rõ ràng trong con phố yên tĩnh.</p><p id="98">Mel bước chậm rãi nhưng rồi đột ngột dừng lại.</p><p id="99">Cô dường như ngửi thấy mùi máu.</p><p id="100">Cô gái đứng chết lặng, hít nhẹ mùi hương tanh ngọt đang lẩn trong không khí.</p><p id="101">“Cứu tôi…”</p><p id="102">Một tiếng cầu cứu yếu ớt vang lên từ con hẻm nhỏ phía sau, chất chứa tuyệt vọng và bất lực.</p><p id="103">“Có ai… cứu tôi với.”</p><p id="104">Mel khựng lại, do dự trong chốc lát. Bàn chân vừa định bước đi lại rụt về như thể đang đấu tranh giữa bỏ mặc và quay lại xem thử.</p><p id="105">“Cứu… cứu tôi…”</p><p id="106">Một tiếng cầu cứu nữa, yếu ớt hơn, mang theo tiếng nghẹn ngào, nện thẳng vào lương tâm Mel như chiếc búa nặng.</p><p id="107">Cuối cùng, Mel hít sâu một hơi rồi chậm rãi quay người, bước về phía phát ra âm thanh.</p><p id="108">Chỉ nhìn một chút thôi. Nếu có gì bất thường, mình sẽ lập tức rời đi.</p><p id="109">Cô gái tự nhắc bản thân, nhưng bước chân lại vô thức nhanh hơn.</p><p id="110">Cuối con hẻm, một người phụ nữ ăn mặc giản dị đang tựa vào tường, toàn thân đầy vết bầm, trông vô cùng thê thảm.</p><p id="111">Trên bụng cô ta có một vết thương gớm ghiếc, máu không ngừng tuôn ra, gom lại thành một vũng đỏ thẫm dưới chân.</p><p id="112">“Tạ ơn Huyết Nguyệt phù hộ… cuối cùng cũng có người…”</p><p id="113">Thấy bóng Mel, ánh mắt người phụ nữ lóe lên tia hy vọng.</p><p id="114">Cô cố chống người đứng dậy, nhưng đau đớn khiến cô lại đổ sụp xuống.</p><p id="115">Vì thế cô ngẩng đầu, khẩn cầu Mel.</p><p id="116">“Cô gái xinh đẹp, xin hãy cứu tôi… tôi cần đến bệnh viện…”</p><p id="117">Mel đứng bất động, lặng lẽ quan sát người phụ nữ.</p><p id="118">Khi còn đang do dự có nên tiến lại gần hay không, cô bỗng nhìn thấy một chiếc ví và một con dao dính máu rơi bên cạnh người phụ nữ.</p><p id="119">Có vẻ như cô ta đã bị kẻ cướp tấn công và kẻ đó sau khi làm cô bị thương đã bỏ chạy vội vã đến mức không kịp lấy lại hung khí.</p><p id="120">Mel suy nghĩ một chút rồi bước tới.</p><p id="121">“Cô ổn chứ?”</p><p id="122">“Tôi… tôi lạnh quá… cảm ơn vì đã dừng lại…”</p><p id="123">Người phụ nữ thều thào, giọng run rẩy.</p><p id="124">“Cô có gì để cầm máu không… tôi… tôi sợ mình sẽ mất máu mà chết…”</p><p id="125">“Xin lỗi… tôi không mang theo gì cả.”</p><p id="126">Mel lắc đầu.</p><p id="127">Nghe vậy, ánh sáng trong mắt người phụ nữ càng mờ đi một chút.</p><p id="128">“Không… không sao, vậy cô có thể đỡ tôi đứng dậy, đưa tôi đến bệnh viện không… Tôi không muốn chết, làm ơn.”</p><p id="129">Người phụ nữ đưa cánh tay nhuốm máu về phía Mel.</p><p id="130">Mel nhìn cánh tay đầy máu ấy, do dự một chút, nhưng cuối cùng vẫn bước lại gần để cô ta dựa vào đứng dậy.</p><p id="131">“Cảm ơn…”</p><p id="132">Người phụ nữ dựa nặng lên Mel, tay còn lại ôm chặt vết thương, đau đến mức cả người run rẩy.</p><p id="133">“Nếu không có cô, tôi chẳng biết sẽ thế nào… Cô có thể dìu tôi ra đầu hẻm không? Ra đường lớn dễ gọi xe ngựa hơn…”</p><p id="134">“Mhm.”</p><p id="135">Mel khẽ gật đầu rồi đỡ người phụ nữ, từng bước một dìu bà ra ngoài, cẩn thận đến mức sợ làm vết thương nặng thêm.</p><p id="136">Con hẻm yên ắng lạ thường, chỉ có tiếng bước chân hai người hòa với đôi cơn gió lạnh thổi qua.</p><p id="137">“Cô đúng là một thiên thần tốt bụng.” Người phụ nữ đứt quãng nói, mỗi câu đều kèm theo tiếng thở dốc. “Tên cô là gì?”</p><p id="138">“Mel. Mel Rossetti.”</p><p id="139">Mel đáp ngắn gọn. “Giờ cô nên nói ít lại thì hơn.”</p><p id="140">“Xin lỗi…”</p><p id="141">Người phụ nữ nở một nụ cười yếu ớt.</p><p id="142">“Nhưng nếu không nói, tôi cảm giác như mình sẽ ngủ thiếp đi bất cứ lúc nào. Nên… làm ơn nói chuyện với tôi một chút.”</p><p id="143">Cô hít sâu một hơi. “Mel… tên đẹp lắm. Tôi tên là Jessica. À, cô là người bản địa à? Có gia đình ở đây chứ?”</p><p id="144">“Mhm, tôi lớn lên ở thành phố Dunke và tôi có một chị gái.”</p><p id="145">Mel nhẹ nhàng gật đầu. “Tôi và chị sống cùng nhau.”</p><p id="146">“Chắc chị ấy thương cô lắm.” Jessica nói.</p><p id="147">“Mhm.”</p><p id="148">Mel gật đầu khẽ.</p><p id="149">“Tốt quá… Tôi cũng từng có một em gái. Nếu nó còn sống chắc cũng tầm tuổi cô.”</p><p id="150">Trong giọng Jessica phảng phất chút hoài niệm, nhưng rồi nhanh chóng chìm thành nỗi buồn.</p><p id="151">“Nhưng nó mất vì bệnh rồi, để lại tôi một mình trên đời. Có lúc tôi tự hỏi sống cô độc như vậy thì còn ý nghĩa gì.”</p><p id="152">Nghe vậy, Mel khẽ dâng lên chút thương cảm, nhưng ngay sau đó là một cảm giác khó chịu và bất an.</p><p id="153">Cơ thể cô dần trở nên cứng đờ, nặng nề như thể đang bị những sợi dây vô hình trói buộc.</p><p id="154">Cảm giác rất lạ.</p><p id="155">“Nếu có thể tôi cũng muốn có một đứa em gái giống cô.”</p><p id="156">Jessica bỗng nói.</p><p id="157">“Mel làm em gái tôi được không?”</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/13694" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/13694/2dc2458a-7500-4983-b608-fedff1f93fba.jpg?t=1727447414" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/13694" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/13694/63e71121-cb31-4692-bc99-5980c02144fc.jpg?t=1727447414" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261022-chuong-1-vang-trang-do-va-nhung-tieng-thi-tham" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261192-chuong-3-mot-nguoi-chan-cuu-khac" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(3)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">3 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3123621"
    class="ln-comment-item mt-3 clear"
    data-comment="3123621" 
    data-parent="3123621" 
    data-type="chapter" 
    data-typeid="261023">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.docln.net/lightnovel/users/ua8761-70b1b966-cf1b-4be1-bd62-10d16a1d2c76.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/8761">History</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Giề vậy, hiện tượng siêu nhiên à
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261023-chuong-2-huong-mau?comment_id=3123621#ln-comment-3123621"
                            class="text-slate-500">
                            <time class="timeago" title="13-12-2025 20:54:51"
                                datetime="2025-12-13T20:54:51+07:00">
                                13-12-2025 20:54:51
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3116257"
    class="ln-comment-item mt-3 clear"
    data-comment="3116257" 
    data-parent="3116257" 
    data-type="chapter" 
    data-typeid="261023">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://docln.net/img/noava.png" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/223762">no name002</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        truyện hắp dẫn nha :))))
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261023-chuong-2-huong-mau?comment_id=3116257#ln-comment-3116257"
                            class="text-slate-500">
                            <time class="timeago" title="07-12-2025 04:16:10"
                                datetime="2025-12-07T04:16:10+07:00">
                                07-12-2025 04:16:10
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3105578"
    class="ln-comment-item mt-3 clear"
    data-comment="3105578" 
    data-parent="3105578" 
    data-type="chapter" 
    data-typeid="261023">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u78950-6dcaad7b-4a08-4186-ab3b-c78db4846b2b.gif" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/78950">Riki✓</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        💯
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24062-co-nang-chan-cuu-khong-chet-trong-the-gioi-huyen-bi/c261023-chuong-2-huong-mau?comment_id=3105578#ln-comment-3105578"
                            class="text-slate-500">
                            <time class="timeago" title="28-11-2025 12:42:21"
                                datetime="2025-11-28T12:42:21+07:00">
                                28-11-2025 12:42:21
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'emBoimQttJb3mWIkusTYLd0Gh5xGskNJiRsVkxBU';
        var comment_type = 'chapter';
        var comment_typeid = '261023';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'emBoimQttJb3mWIkusTYLd0Gh5xGskNJiRsVkxBU';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24062');
    chapter_id = parseInt('261023');

    readingObject = {
        series_id: series_id,
        series_title: 'Cô Nàng Chăn Cừu Không Chết Trong Thế Giới Huyền Bí',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="emBoimQttJb3mWIkusTYLd0Gh5xGskNJiRsVkxBU" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
