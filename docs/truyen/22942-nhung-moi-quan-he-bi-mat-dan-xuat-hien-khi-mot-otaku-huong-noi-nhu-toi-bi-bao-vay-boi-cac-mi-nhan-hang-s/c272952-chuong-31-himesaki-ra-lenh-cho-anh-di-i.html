<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Những Mối Quan Hệ Bí Mật Dần Xuất Hiện Khi Một Otaku Hướng Nội Như Tôi Bị Bao Vây Bởi Các Mĩ Nhân Hạng S - Chương 3.1: Himesaki, ra lệnh cho anh đi! I - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Izumiya Ryouta, một otaku hướng nội, tự dưng bị bao vây bởi ba mỹ nhân hàng đầu của lớp sau một lần đổi chỗ. Phía trước cậu là Miyama Airi thuộc kiểu em gái dễ thương. Bên trái là gyaru lạnh lùng và xa cách, Ichinose Yuria. Và bên phải...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="2nwwfIuCYYv4smdqCRtxcHNqt45pL4XxqMSk54vs">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c272952-chuong-31-himesaki-ra-lenh-cho-anh-di-i">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s22942-311b55b2-a172-456c-8b2b-62b544bec08f.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c272584-chuong-22-thu-tinh-bat-thinh-linh-ii"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c272952-chuong-31-himesaki-ra-lenh-cho-anh-di-i" style="background: url('https://i.hako.vn/ln/series/covers/s22942-311b55b2-a172-456c-8b2b-62b544bec08f.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s">Những Mối Quan Hệ Bí Mật...</a></h5>
                    <small><i class="fas fa-pen"></i>Hoshino Hoshino</small>
                    <small><i class="fas fa-paint-brush"></i>Kuroto Yuu</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c210649-mo-dau">Tập 01</a></li>
                                        
                                                            <li class=""><a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c210704-minh-hoa-bia">Tập 02</a></li>
                                        
                                                            <li class="current"><a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/t34193-tap-03">Tập 03</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c254155-minh-hoa-bia-se-cap-nhap-dan">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Minh hoạ bìa
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c258544-mo-dau">
                                                                        Mở đầu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c264780-chuong-11">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1.1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c266422-chuong-12">
                                                                        Chương 1.2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c268558-chuong-13">
                                                                        Chương 1.3:
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c270495-chuong-14">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1.4:
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c271920-chuong-21-thu-tinh-bat-thinh-linh">
                                                                        Chương 2.1: Thư tình bất thình lình I
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c272584-chuong-22-thu-tinh-bat-thinh-linh-ii">
                                                                        Chương 2.2: Thư tình bất thình lình II
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c272952-chuong-31-himesaki-ra-lenh-cho-anh-di-i">
                                                                        Chương 3.1: Himesaki, ra lệnh cho anh đi! I
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 03</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 3.1: Himesaki, ra lệnh cho anh đi! I</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c272952-chuong-31-himesaki-ra-lenh-cho-anh-di-i#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,604 từ - Cập nhật: 
                        <time class="topic-time timeago" title="13-12-2025 14:50:50" datetime="2025-12-13T14:50:50+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 3.1: Himesaki, ra lệnh cho anh đi! I</p>
                    <p id="1">Ngày hôm sau.</p><p id="2">Bảy giờ sáng, trong trường chỉ có học sinh đi tập câu lạc bộ vào buổi sáng. Ngoại trừ sân trường và nhà thể dục thì mọi nơi đều yên ắng.</p><p id="3">Tay nắm chặt bức thư, tôi leo cầu thang lên sân thượng từng bước một.</p><p id="4">Đây là lần đầu tiên trong đời tôi nhận được thư tình.</p><p id="5">Tỏ tình thật hay không thì chưa biết… nhưng sự mong đợi trong tôi cứ tăng dần.</p><p id="6">“Cuối cùng cũng đến.”</p><p id="7">Nén lại trái tim đang đập thình thịch, tôi vặn tay nắm cửa sân thượng.</p><p id="8">Và rồi—</p><p id="9">“Hửm? Đó là…”</p><p id="10">Khoảnh khắc tôi bước ra sân thượng trong tâm trạng đầy háo hức, một cảm giác quen thuộc ập đến.</p><p id="11">Một cô gái có mái tóc đỏ rực tung bay trong gió, đang ngước nhìn mặt trời buổi sớm.</p><p id="12">Màu đỏ ấy như được tô bằng sắc chiều tà mà tôi đã thấy buổi tan học, lúc đi xem Rui thi đấu về.</p><p id="13">“Giời ạ, em đợi hai phút rồi đấy nhé, anh Ryouta ạ♡”</p><p id="14">“H-Himesaki!?”</p><p id="15">Người gọi tôi lên chính là nữ sinh nổi tiếng nhất năm nhất … Himesaki Nozomi.</p><p id="16">Tóc đỏ nửa buộc nửa thả, sống mũi cao đẹp, đôi mắt cụp xuống dễ thương.</p><p id="17">Dù dáng người thanh mảnh, nhưng vòng một vừa vặn… theo cảm nhận của tôi thì lớn hơn Rui nhưng nhỏ hơn Yuria.</p><p id="18">Từ lần em ấy chặn tôi lại hôm đó tới nay, vẻ ngoài, dáng người lẫn khuôn mặt vẫn thuộc hàng thượng đẳng.</p><p id="19">“Himesaki… em lại định làm gì nữa à?”</p><p id="20">“Ô kìa, anh còn nhớ tên em cơ đấy. Vinh dự quá.”</p><p id="21">Himesaki nói với giọng đùa cợt, mỉm cười ngại ngùng.</p><p id="22">Lần đầu tôi nói chuyện với em ấy là khi chạm mặt nhau ở Inter-High, rồi sau đó em ấy đột nhiên chặn tôi lại lúc tôi đang về nhà. Tổng cộng mới hai lần nói chuyện.</p><p id="23">Ngay khi gặp nhau lần đầu, em ấy đã gọi tôi bằng tên, và hôm đó trên đường về còn nói những câu giống như biết gì đó giữa tôi và Rui… Lần này cũng vì chuyện đó sao?</p><p id="24">“Sao anh lại nhớ em? Chẳng lẽ anh Ryouta đây… có hứng thú với em à?”</p><p id="25">“Thì… em nói về chuyện con chó ấy, nên anh nhớ. Với lại, lần đầu nhìn thấy em, anh nghĩ em khá dễ thương nên tất nhiên là nhớ chứ.”</p><p id="26">“Ra là vậy… Thì ra đây là cách mà anh khéo léo lấy lòng con gái bằng mấy câu khen dễ thương dễ thương dễ thương, khiến cả đống người bị mê hoặc.”</p><p id="27">“Ê nha! Gì đấy!? Nghe cứ như anh là loại sở khanh chuyên tán gái không bằng!”</p><p id="28">Đúng là tôi thân ba người đẹp kia thật, nhưng cũng có làm trò gì mờ ám đâu… D-Dù cú úp mặt vào ngực và vụ chạm ngực thật kia thì thuộc dạng “va chạm may mắn” thôi…</p><p id="29">“Thôi kệ đi. Có gì nói luôn xem nào. Em lại muốn nói chuyện với anh đúng không?”</p><p id="30">Vì người gọi tôi tới đây cũng là người từng đe dọa tôi lần trước nên chắc chắn không phải đến để tỏ tình.</p><p id="31">Con bé lại định đe dọa nữa sao? Nhưng chuyện giữa tôi và Rui chỉ là tin đồn, chẳng có chứng cứ gì hết.</p><p id="32">Từ hôm qua đầu dưới tôi cứ mơ tưởng được đàn em tỏ tình, nhưng giờ phải lại phải suy nghĩ bằng đầu trên nên tôi ép bản thân tỉnh táo lại.</p><p id="33">“Trời ạ. Anh cảnh giác quá nhỉ.”</p><p id="34">“Tất nhiên rồi! Bị em đe dọa như lần trước không cảnh giác mới lạ! Rốt cuộc thì em muốn gì!?”</p><p id="35">“Vậy à. Thế trước khi vào chuyện chính, để em giới thiệu lại bản thân cho đàng hoàng nhé?”</p><p id="36">“Hả? Giới thiệu bản thân?”</p><p id="37">Đột nhiên làm gì vậy—</p><p id="38">“Em là Himesaki Nozomi, năm nhất. Có thể anh biết rồi, nhưng trước khi vào cấp 3, em sống ở nước ngoài vì công việc của bố mẹ nên em rất giỏi tiếng Anh. Em cũng đứng đầu khối về thành tích học tập, và vì ngoại hình lẫn tính cách đều hoàn hảo, nên hồi ở nước ngoài thậm chí có một hoàng tử của một quốc gia nọ cầu hôn em trong lúc du học—”</p><p id="39">“K-Khoan đã!”</p><p id="40">“Dạ? Có chuyện gì vậy?”</p><p id="41">“Ờm… đến bao giờ em mới khoe khoang xong vậy?”</p><p id="42">Cơn khoe khoang của em ấy cứ tuôn dài dằng dặc nên tôi buộc phải cắt ngang.</p><p id="43">“Trời ơi. Con gái đang khoe khoang thì anh phải mỉm cười rồi bảo ‘Ồ, tuyệt quá’, hiểu chứ? Đồ ngốc.”</p><p id="44">“Là sao!? Đây có phải lúc em bảo ‘Vậy em cho vào nhé’ hay gì không?”</p><p id="45">“Cho vào? Em chẳng hiểu anh nói gì cả, nhưng vì anh van nài nên em kết thúc phần giới thiệu ở đây nhé. Giờ đến lượt anh.”</p><p id="46">“A-anh á?”</p><p id="47">Bảo tự giới thiệu… thì tôi chẳng có gì để nói ngoài tên.</p><p id="48">“Ờ thì… anh là Izumiya Ryouta. Năm hai, không tham gia câu lạc bộ nào… rồi, ừm…”</p><p id="49">C-Chết rồi… tôi hướng nội đến độ chẳng có gì để nói trong lúc tự giới thiệu!</p><p id="50">Nó y chang bài tự giới thiệu đầu năm luôn.</p><p id="51">Dù phía sau hậu trường tôi đã chạm đùi trần, chạm ngực trần và tận hưởng cảm giác chiến thắng, nhưng đó là tự tôi diễn trong đầu thôi.</p><p id="52">Trong mắt người ngoài, tôi chẳng thay đổi tí nào, đến mức thầy Anzai bán KFC chắc cũng sốc.</p><p id="53">“Thế thôi ạ?”</p><p id="54">“Ừ. Xin lỗi, anh chẳng có gì đáng khoe như em cả…”</p><p id="55">“Trời đất. Anh lại nói dối nữa rồi.”</p><p id="56">“Hả? Anh có nói dối đâu. Thật mà.”</p><p id="57">“Vậy để em giới thiệu giùm anh Ryouta nhé.”</p><p id="58">“Giới thiệu anh!? Em định nói cái gì—”</p><p id="59">“Anh là Izumiya Ryouta, một chàng trai có vẻ bình thường ở lớp 2-B, nhưng tại lễ hội văn hóa năm nay, anh đóng vai Bạch Tuyết và trở thành đề tài bàn tán toàn trường. Chưa hết, sau giờ học anh thường được thấy đi cùng chị Ichinose Yuria, chị Miyama Airi và cả chị Kuroki Rui nổi tiếng nữa. Thậm chí còn có tin đồn anh và chị Kuroki Rui đang hẹn hò… đúng không nhỉ?”</p><p id="60">Tôi với Rui…?</p><p id="61">Con bé này lại tin mấy lời đồn nhảm đó thật.</p><p id="62">Phần đó thì vô lý, nhưng chuyện tôi hay đi cùng Yuria và Airi thì đúng.</p><p id="63">Nó biết cả điều đó, biết quá nhiều về tôi luôn.</p><p id="64">“Sao rồi? Anh ấn tượng với khả năng điều tra của em chứ?”</p><p id="65">“Công nhận là em biết nhiều thật. Nhưng anh không hẹn hò với Rui, hay Airi, hay Yuria. Bọn họ chỉ bắt đầu nói chuyện với anh nhiều hơn sau lần đổi chỗ thôi.”</p><p id="66">“Vậy à. Tức là anh vẫn cố giả ngu.”</p><p id="67">“K-không có! Anh thực sự không hẹn hò với ai hết!”</p><p id="68">Cô ấy đang cố gây lung lay tâm trí tôi bằng tin đồn, nhưng tôi phủi sạch.</p><p id="69">“Bảo rồi, em phải có bằng chứng. Mà em không có, đúng không?”</p><p id="70">“Thế cái này là gì?”</p><p id="71">“Gì cơ?”</p><p id="72">Himesaki bình thản lấy từ túi váy ra một tấm ảnh và đưa tôi xem.</p><p id="73">Một t-tấm ảnh…? Cô ấy—hả?</p><p id="74">Chụp bằng độ phân giải cực cao, là tôi và Rui—khoan, cái này là cảnh tôi cúi đầu thật thấp, cầu khẩn chân thành, và Rui mỉm cười chấp nhận.</p><p id="75">Đây là lúc tôi xin cô ấy cho tôi làm phó hội trưởng—</p><p id="76">“Em muốn cho anh xem từ lần trước rồi, nhưng điện thoại em hết pin. Đây là bằng chứng.”</p><p id="77">Ra là vậy nên hôm đó em ấy tự tin như thế, hóa ra là đã có bằng chứng ngay từ đầu!</p><p id="78">“Nhân tiện, bức ảnh này chụp đúng khoảnh khắc anh Ryouta tỏ tình, và chị Rui đồng ý.”</p><p id="79">“T-Tỏ tình!? Không phải! Sai rồi!”</p><p id="80">“Ừm, trong đầu anh có thể là vậy. Nhưng khách quan thì sao? Với em, trông nó giống hệt cảnh tỏ tình mà chị Rui mỉm cười đồng ý. Em nói sai à?”</p><p id="81">Tôi muốn phản bác.</p><p id="82">Nhưng ai không biết chuyện thì nhìn vào đúng là… rất giống như vậy.</p><p id="83">“Đã có tin đồn anh với chị Rui hẹn hò rồi. Và nếu em mà… lỡ tay đánh rơi bức ảnh này đâu đó…”</p><p id="84">“Em định dọa anh nữa đúng không…?”</p><p id="85">“Đe dọa? Em chưa từng nói thế. Em chỉ muốn nói—”</p><p id="86">“Nói…?”</p><p id="87">“Có một việc em muốn nhờ anh. Nếu anh đồng ý, em sẽ xé vụn tấm ảnh, xóa toàn bộ dữ liệu, và chôn vùi mọi chuyện xuống đáy Marianna.”</p><p id="88">Đôi mắt hiền hòa của Himesaki sắc lại.</p><p id="89">Con bé này… nghiêm túc thật.</p><p id="90">Cũng chẳng có gì đảm bảo nó sẽ xóa thật… nhưng một điều chắc chắn: nếu tôi chống lại, Rui sẽ bị kéo vào.</p><p id="91">Tôi đã bảo với Rui là tôi muốn làm phó hội trưởng để hỗ trợ cho sự hoàn hảo của cô ấy.</p><p id="92">Tôi sẽ không đời nào để hình tượng hoàn hảo của cô ấy sụp đổ vì sự bất cẩn của tôi… tuyệt đối không!</p><p id="93">Giờ thì tôi buộc phải nghe theo yêu cầu của ẻm.</p><p id="94">“Đ-Được rồi. Nếu chỉ cần làm theo yêu cầu của em là được thì anh sẽ làm. Vậy… yêu cầu của em là gì, Himesaki?”</p><p id="95">Đừng nói lại là chuyện “làm chó của em” nữa nhé…</p><p id="96">"Xin hãy trở thành cún con của em♡"</p><p id="97">Thôiiiiiiiiii xongggggg.</p><p id="98">“Anh làm cún của em luôn được không?”</p><p id="99">Nở nụ cười hiền lành, Himesaki phán ra yêu cầu kinh khủng hoàn toàn không hợp với nét mặt đó.</p><p id="100">Và ánh mắt kia… lại giống của Rui ở một điểm.</p><p id="101">Em cũng vậy à? Em cũng thuộc phe đó (siêu S) sao…?</p><p id="102">“Nếu anh chịu làm cún của em thì ảnh của chị Rui sẽ bị xóa hết sạch, mọi chuyện êm đẹp, đúng chứ?”</p><p id="103">Êm đẹp cái khỉ gì khi phần tôi phải làm chó bị bỏ qua!?</p><p id="104">Bảo tôi làm chó mà tôi còn chẳng biết mình sẽ bị đối xử thế nào. Tưởng tượng thôi đã nhục kinh khủng luôn ấy.</p><p id="105">Nhưng trong tình cảnh này, nếu đổi góc nhìn thì vẫn có… chút lợi ích.</p><p id="106">Ví dụ, nếu tôi là chó, thì kiểu gì tôi cũng được tha thứ nếu làm gì đó… tức là, với tư cách của một con chó, tôi được liếm tay hay chân của em ấy, đúng không…? Đúng không?</p><p id="107">Tay Himesaki… chân Himesaki… mlem mlem.</p><p id="108">“Sao thế anh Ryoutaaaaaaa? Sốc vì yêu cầu của em nhục nhã đến thế à?”</p><p id="109">Nếu làm chó, tôi có được liếm không?</p><p id="110">Và nếu có thì được liếm chỗ nào?</p><p id="111">Để bảo vệ Rui, tôi không thể từ chối làm chó. Và nếu đã vậy, hưởng được chút “đãi ngộ” cũng đâu có gì sai… đúng không?</p><p id="112">“Anh định nghĩ bao lâu nữa vậy? Nếu anh không mau quyết, ảnh của chị Rui sẽ—”</p><p id="113">“Rồi, được! Anh chấp nhận! Anh chấp nhận, nên mau cho anh liếm đi!”</p><p id="114">“Ể—k-khoan, l-liếm!? Ghê quá!”</p><p id="115">C-Cái quái gì vậy. Nghĩ nhiều quá nên tôi lỡ bật ra lời dâm dục như mọi khi!</p><p id="116">Nghe cứ như tôi muốn liếm Himesaki khắp nơi khi đóng vai chó của em ấy! (Mà đúng là tôi muốn thật.)</p><p id="117">“E-em không yêu cầu vô nhân tính đến mức bắt anh phải liếm đâu! Làm ‘chó’ nghĩa là làm một con pet ngoan thôi – em gọi thì tới, đi cùng với em các thứ các thứ thôi.”</p><p id="118">“Haiz… thật à? Nhạt quá đấy. Đã làm chó rồi thì anh mong mấy trò như bị xích cổ đi dạo hay bắt đi t* trong lúc bị nhìn chằm chằm chẳng hạn.”</p><p id="119">“Xích cổ? T*? Ơ—khoan, từ từ. Anh lảm nhảm cái gì thế!?”</p><p id="120">“Má—! Chết thật! Tất cả tại em! Em làm ra vẻ phản diện nhưng mấy yêu cầu em đưa ra thì… R14 còn chưa tới! “Đi cùng em”? Thật á!? Đã chơi thì chơi yêu cầu nguy hiểm, khêu gợi hơn chút chứ!? Em làm anh rối hết cả lên!</p><p id="121">“E-Ế….”</p><p id="122">Tôi còn mong gì nặng đô hơn nữa cơ… Đúng là thất vọng tràn trề.</p><p id="123">“Em không hiểu anh nói gì từ nãy đến giờ, nhưng… tóm lại là anh chịu làm chó của em đúng không?”</p><p id="124">“A-anh đâu còn lựa chọn khác.  Nếu muốn ngăn ảnh bị lộ thì anh buộc phải làm vậy.”</p><p id="125">Làm chó cho hậu bối xinh đẹp…</p><p id="126">K-Không, chỉ vì bảo vệ Rui thôi. Vì em ấy nắm điểm yếu của tôi nên tôi buộc phải chấp nhận.</p><p id="127">Tôi đâu có muốn được một đàn em đáng yêu vuốt đầu như cún hay dắt đi dạo gì đâu! Tuyệt đối không!</p><p id="128">“Ô trời. Anh chấp nhận nhanh vậy… đúng là một người thú vị.”</p><p id="129">“Còn gì nữa không?”</p><p id="130">“Không. Nhưng mà—”</p><p id="131">Himesaki đưa cho tôi tấm ảnh in ra, rồi đưa cả điện thoại.</p><p id="132">“Em giao lại tấm ảnh này cho anh. Và để chứng minh, anh cũng có thể xem ảnh trong điện thoại em.”</p><p id="133">“H-Hả? Em cho anh xem ảnh trong điện thoại em thật? N-Nếu em có chụp mấy tấm ero selfie hồi còn dại dột thì… anh sẽ nhắm mắt cho qua nhé!?”</p><p id="134">“E-Ero!? Selfie!? Ý anh là gì!? Ảnh bậy á!? Em không có loại đó đâu!”</p><p id="135">Mặt Himesaki đỏ bừng, la lớn đến mức suýt bắn nước bọt vào tôi.</p><p id="136">Liếm… đây là mùi vị của sự dối trá… [note85356]</p><p id="137">Nhưng thật sự là lứa tuổi này mà còn không biết ero selfie là gì sao?</p><p id="138">Nghĩ lại, lúc nãy em ấy cũng chẳng hiểu gì khi tôi nhắc đến xích cổ hay tè… Ra là vậy. Đây chính là thất bại của giáo dục bắt buộc.</p><p id="139">“Thôi được rồi! Anh coi nhanh đi!”</p><p id="140">“Ờ. Được.”</p><p id="141">Mò ảnh trong điện thoại con gái đúng là hơi sai sai… nhưng vì Rui, tôi sẽ xem.</p><p id="142">Tôi mở album ảnh của Himesaki và lướt qua.</p><p id="143">Để xem… hừm.</p><p id="144">Toàn ảnh chụp đồ ăn ở mấy chỗ kiểu Starbucks.</p><p id="145">Còn lại là selfie với cảnh du lịch phía sau, hoặc ảnh soi gương khoe đồ, ngạc nhiên là chẳng có tấm nào chụp chung với ai cả.</p><p id="146">Hửm? Himesaki đáng lẽ phải nổi tiếng ngang ngửa Rui trong đám nhất năm đúng không?</p><p id="147">Vậy mà trong điện thoại lại chẳng có tấm hình nào chụp với bạn bè…</p><p id="148">“Ừm. Cảm ơn Himesaki.”</p><p id="149">Cảm giác có gì đó sai sai khiến tôi nhanh chóng kiểm tra xong và trả lại điện thoại.</p><p id="150">“Ờ thì, vẫn có khả năng em còn lưu gì đó trong máy tính ở nhà, nhưng ít nhất anh biết là điện thoại không có gì.”</p><p id="151">“Anh nói như thể em là tội phạm ấy.”</p><p id="152">“Anh không muốn nghe câu đó từ người đã lén chụp hình người ta đâu, đồ quay lén! Mà nói chung là anh không hiểu hết lý do, nhưng làm chó cho em thì em hài lòng đúng không?”</p><p id="153">“Đúng thế!”</p><p id="154">Dù vừa đưa ra yêu cầu vô liêm sỉ như vậy, em ấy vẫn cười rạng rỡ, không thua kém gì Rui. Con bé này chắc chắn cũng thuộc phe S.</p><p id="155">Tôi nên chuẩn bị tinh thần nghiêm túc thì hơn.</p><p id="156">“Vậy thì từ giờ trở đi, anh sẽ là cún cưng của em nên nhớ phải nghe lệnh cho đàng hoàng đấy nhé♡”</p><p id="157">Và như thế, chuỗi ngày tôi bị cô em khóa dưới dắt đi bắt đầu.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note85356"><a href="#anchor-note85356" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note85356" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Ref Jojo- this is the taste of a liar</span></div><span class="note-content_real long-text">Ref Jojo- this is the taste of a liar</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s/c272584-chuong-22-thu-tinh-bat-thinh-linh-ii" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/22942-nhung-moi-quan-he-bi-mat-dan-xuat-hien-khi-mot-otaku-huong-noi-nhu-toi-bi-bao-vay-boi-cac-mi-nhan-hang-s" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '2nwwfIuCYYv4smdqCRtxcHNqt45pL4XxqMSk54vs';
        var comment_type = 'chapter';
        var comment_typeid = '272952';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '2nwwfIuCYYv4smdqCRtxcHNqt45pL4XxqMSk54vs';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('22942');
    chapter_id = parseInt('272952');

    readingObject = {
        series_id: series_id,
        series_title: 'Những Mối Quan Hệ Bí Mật Dần Xuất Hiện Khi Một Otaku Hướng Nội Như Tôi Bị Bao Vây Bởi Các Mĩ Nhân Hạng S',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="2nwwfIuCYYv4smdqCRtxcHNqt45pL4XxqMSk54vs" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="//spicewaxworks.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
