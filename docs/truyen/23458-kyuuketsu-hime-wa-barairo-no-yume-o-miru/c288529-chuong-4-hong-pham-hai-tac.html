<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Kyuuketsu Hime wa Barairo no Yume o Miru - Chương 4 – Hồng Phàm Hải Tặc - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Một bé shota (thực ra đã hơn 20 tuổi) có cuộc sống éo le như bao main khác, đã được đầu thai sang thế giới khác sau khi gặp tai nạn, với cơ thể thuộc về một bé loli vampire (13 tuổi), nhân vật trong game mà cậu chơi ở...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="K4wbTOHjwzcZzOVIlWxJreamlsy10CUCug1GllUc">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c288529-chuong-4-hong-pham-hai-tac">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s23458-4ebe0e3a-f75c-4c54-ab73-2d563201c2e8.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286799-chuong-3-hai-tac-tap-kich"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c288529-chuong-4-hong-pham-hai-tac" style="background: url('https://i.hako.vn/ln/series/covers/s23458-4ebe0e3a-f75c-4c54-ab73-2d563201c2e8.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru">Kyuuketsu Hime wa Barairo...</a></h5>
                    <small><i class="fas fa-pen"></i>Sasaki Ichiro</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c230379-tien-truyen-1-tro-lai">Khúc dạo đầu</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c230570-minh-hoa">Vol 1: Cõi Tái Sinh (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c230571-minh-hoa">Vol 2: Biến cố ở Vương Đô (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c238833-minh-hoa">Vol 3: Thú vương của vùng biên cương (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c248044-minh-hoa">Vol 4: Đế quốc hỗn loạn (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c276203-chuong-1-phong-an-ma-than">Vol 5: Hấp Huyết Ma Thần (Done)</a></li>
                                        
                                                            <li class="current"><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/t35385-vol-6-thanh-vuc-cua-vi-than-sa-nga-dang-tien-hanh">Vol 6: Thánh Vực Của Vị Thần Sa Ngã - END (Đang tiến hành)</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c285998-chuong-1-hai-tac-quay-pha">
                                                                        Chương 1 – Hải Tặc Quấy Phá
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286015-chuong-2-thanh-pho-cang">
                                                                        Chương 2 – Thành Phố Cảng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286799-chuong-3-hai-tac-tap-kich">
                                                                        Chương 3 - Hải Tặc Tập Kích
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c288529-chuong-4-hong-pham-hai-tac">
                                                                        Chương 4 – Hồng Phàm Hải Tặc
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Vol 6: Thánh Vực Của Vị Thần Sa Ngã - END (Đang tiến hành)</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 4 – Hồng Phàm Hải Tặc</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c288529-chuong-4-hong-pham-hai-tac#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,958 từ - Cập nhật: 
                        <time class="topic-time timeago" title="10-01-2026 22:36:49" datetime="2026-01-10T22:36:49+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 4 – Hồng Phàm Hải Tặc</p>
                    <p id="1">“Vậy là… chúng cấu kết với nhau?”</p><p id="2">Vừa dứt lời, Quốc vương Collard đã đưa tay xoa thái dương, nặng nề thở dài.</p><p id="3">“Vâng. Xem ra hải tặc và quan lại ở Quito đã bắt tay ngầm với nhau từ lâu rồi.”</p><p id="4">Tôi tiếp tục thuật lại, nhún vai nhẹ, trong khi nếp nhăn trên trán Quốc vương ngày càng hằn sâu.</p><p id="5">Những gì tôi kể đều là tin moi được từ tên hải tặc kia—không phải tra tấn gì ghê gớm, chỉ là vận dụng đơn giản «Ma nhãn» mà thôi. Trước đó, Kagerou cùng một đám “nhiệt huyết quá mức” đã lôi ra đủ thứ như «Ngưu Đồng Phalaris», «Toán Bàn Tra Tấn» , «Xử Nữ Thép», «Nghiền Sọ», «Lê Thống Khổ», «Nôi Judas», «Kìm Cá Sấu»… Thật sự, không hiểu bọn họ moi mấy món tởm lợm ấy từ đâu ra nữa?! Nhưng chuyện đó không quan trọng.</p><p id="6">Quay lại vấn đề chính—đám hải tặc mang cái tên kỳ quái Shrinkus vốn xuất thân từ Vương quốc Colme ở phía bắc Tây Vực. Chúng có một chiến hạm chủ lực cỡ lớn làm trung tâm, xung quanh là nhiều thuyền nhỏ với tính cơ động cao, hợp thành một hạm đội hải tặc không hề tầm thường (dù tên tôi bắt được chỉ là một tiểu tốt hạng bét).</p><p id="7">Phương thức hoạt động của chúng lại cực kỳ xảo quyệt. Thay vì cướp bóc bừa bãi tàu buôn hay thuyền hàng, chúng dùng vàng bạc mua chuộc quan lại địa phương. Quan chức sẽ làm ngơ trước đơn kiện của nạn nhân, báo cáo thiệt hại thấp hơn thực tế, đổi lại là một phần chiến lợi phẩm béo bở từ phía hải tặc.</p><p id="8">Không chỉ vậy, chúng còn tống tiền các thương nhân giàu có và các đoàn ngư dân, lấy danh nghĩa “bảo hộ”:</p><p id="9">“Nộp tiền đi, làng của ngươi, thuyền của ngươi sẽ được bình an vô sự.”</p><p id="10">Liên minh dơ bẩn này đã tồn tại suốt nhiều năm. Nhưng gần đây, cán cân bắt đầu nghiêng lệch.</p><p id="11">Nguyên nhân lớn nhất chính là cơn bùng nổ thương mại sau khi Amitia và Cres gia nhập vòng bảo hộ của Xích Hoàng Triều. Tàu thuyền ngoại quốc đổ về ngày một nhiều, khiến việc che giấu các vụ tập kích của hải tặc—nhất là ngoài phạm vi quản hạt quen thuộc của Quito—trở nên bất khả thi.</p><p id="12">Cùng lúc đó, sự xuất hiện của đám hải tặc cưỡi “ma thuyền mang cánh buồm đỏ thẫm” đã quét sạch các thế lực hải tặc khác khỏi vùng Bắc Hải. Bị dồn ép, chúng tràn cả xuống khu vực này. Khi số lượng vượt quá giới hạn kiểm soát, hỗn loạn bùng nổ, và chiến lược cũ hoàn toàn sụp đổ.</p><p id="13">“Thật là tội ác không thể dung thứ!”</p><p id="14">Revan nghiến răng, nắm chặt tay phải rồi đập mạnh vào lòng bàn tay trái.</p><p id="15">“Những kẻ được gọi là người bảo hộ pháp luật lại dám thông đồng với hải tặc, nhận hối lộ sau lưng!”</p><p id="16">“Quả thực là đê tiện.”</p><p id="17">Quốc vương Collard đứng dậy, nét mặt nặng trĩu hối hận, cúi đầu thật sâu trước Revan.</p><p id="18">“Nhưng đây cũng là lỗi của ta—đã để sự việc xảy ra ngay dưới tầm quản lý của mình. Điện hạ, xin hãy cho phép ta tạ lỗi vì sự bất tài này.”</p><p id="19">“À—không, không phải vậy đâu!”</p><p id="20">Revan vội xua tay.</p><p id="21">“Ta chỉ nói theo cách nói thôi, hoàn toàn không phải trách ngài…”</p><p id="22">Tôi cũng lắc đầu, nói một cách thản nhiên:</p><p id="23">“Chuyện đã xảy ra thì đừng tự trách nữa. Không phải lỗi của ngươi. Mọi tội lỗi đều thuộc về hải tặc và bọn quan lại tham nhũng kia. Nếu nói đến trách nhiệm… thì e rằng ta cũng không thể hoàn toàn đứng ngoài.”</p><p id="24">“Nhưng bỏ qua chuyện đó,” Quốc vương ngẩng đầu, ánh mắt trở nên kiên quyết,</p><p id="25">“chúng ta phải lập tức mở cuộc điều tra khẩn cấp tại Quito, đưa tất cả những kẻ liên quan ra trước công lý.”</p><p id="26">Ừm… sẽ là một cuộc đại thanh trừng long trời lở đất, nhưng xử lý triệt để vẫn là thượng sách.</p><p id="27">“Vâng, làm vậy chắc sẽ ổn định tình hình. À, nhân tiện thì—Shrinkus đã bị tiêu diệt ngay trong đêm hôm đó. Kho tàng chúng tích trữ cũng đã thu hồi, hãy dùng số đó để bồi thường cho nạn nhân trong khả năng cho phép. Chi tiết thì cứ hỏi tên đầu lĩnh và thủ hạ của hắn—chúng đang bị giam dưới tầng hầm biệt thự Quito. Hiện tại, vài ‘người có đam mê’ của bên ta đang… thẩm vấn họ. …Chỉ tiếc là không thể khiến người chết sống lại.”</p><p id="28">Cổ họng khô khốc, tôi cầm ly máu tươi lên, uống cạn trong một hơi. Tengai đứng hầu bên cạnh lặng lẽ bước tới, rót đầy lại cho tôi.</p><p id="29">“…Bệ hạ, hôm nay người trông có vẻ bực bội hơn thường lệ. Có chuyện gì xảy ra sao?”</p><p id="30">Công chúa Oliana vừa hỏi, vừa cắt gọn gàng miếng strudel và sachertorte—đồ ăn vặt cho bữa trà chiều hôm nay. Lẽ ra chỉ là một buổi báo cáo đơn giản, vậy mà cô vẫn gạt hết lịch trình để tham dự. Phải công nhận, ánh mắt quan sát của cô ấy luôn sắc bén đến đáng sợ.</p><p id="31">Tôi từng định giả vờ không sao, nhưng bị nhìn chằm chằm như thế, đành lên tiếng:</p><p id="32">“Không phải bực… chỉ là đang nguyền rủa sự ngu ngốc của bản thân—hay đúng hơn là cái nhìn quá ngây thơ của mình.”</p><p id="33">“Ý người là sao?”</p><p id="34">Cô hỏi tiếp, cắn một miếng sachertorte. Vừa nếm xong, đôi mắt cô lập tức sáng lên, tay nhanh chóng đưa thêm một miếng nữa vào miệng, nhưng ánh nhìn vẫn không rời khỏi tôi.</p><p id="35">…Cô thật sự rất nghiêm túc trong chuyện này nhỉ?</p><p id="36">“Quán ăn mà ta từng kể ấy—cuối cùng cũng bị quấy nhiễu như thường lệ. Sau hai, ba ngày thì buộc phải đóng cửa, còn chủ quán cùng vợ thì biến mất. Sau đó, mối cấu kết giữa quan lại và hải tặc dần bị phơi bày. Quan chức vì cầu sự ‘bảo hộ’ mà cấu kết với hải tặc… chuyện gì xảy ra tiếp theo, chắc mọi người cũng đoán được rồi.”</p><p id="37">“…Lại thêm một bi kịch nữa.”</p><p id="38">Revan trầm giọng.</p><p id="39">“Chỉ là tin đồn thôi, nhưng nghe nói có người thấy hai vợ chồng chủ quán mang theo toàn bộ hành lý rời đi trong đêm khuya. Nên có lẽ… điều tệ nhất đã không xảy ra—hoặc ít nhất, ta hy vọng là vậy.”</p><p id="40">“Có nên cho người tìm kiếm và tăng cường bảo vệ từ phía chúng ta không?”</p><p id="41">Quốc vương Collard đề nghị.</p><p id="42">Tôi hiểu thiện ý ấy, nhưng vẫn lắc đầu.</p><p id="43">“Không. Đây là sai lầm của ta khi không suy xét chu toàn. Nhưng ta không muốn can thiệp vào cuộc sống của họ. Họ có cách sống của riêng mình.”</p><p id="44">“Điều đó cũng đúng.”</p><p id="45">Oliana lên tiếng, giọng điềm tĩnh.</p><p id="46">“Là người cầm quyền, bổn phận của chúng ta là đảm bảo hòa bình cho toàn thể dân chúng. Chính sách phải vì đại cục quốc gia. Dùng quyền lực cho một cá nhân—dù xuất phát từ thiện ý—cũng tạo ra bất công. Nghe có thể tàn nhẫn, nhưng mỗi người đều phải tự chịu trách nhiệm cho sinh mệnh của chính mình.”</p><p id="47">Một nhận định thực tế, rất đúng phong cách của Oliana. Nhưng Revan chưa chịu dừng lại.</p><p id="48">“Đó chính là sự kiêu ngạo của kẻ ở trên cao—bám víu vào lý trí như chân lý tuyệt đối, mà phớt lờ nỗi thống khổ của kẻ ở dưới. Nói thì dễ, khi ngươi chưa từng lo lắng bữa ăn ngày mai ở đâu ra.”</p><p id="49">“Không—đó mới chính là kiêu ngạo.”</p><p id="50">Oliana đặt mạnh chiếc nĩa xuống đĩa.</p><p id="51">“Ngươi có gánh vác sinh mệnh của từng người dân trong quốc gia mình không? Dân chúng của ngươi chẳng phải vẫn sống tiếp, dù phải chịu khổ đó sao? Ngươi có biết vì sao không? Bởi vì trong thâm tâm, họ vẫn còn hy vọng—hy vọng rằng một ngày nào đó, mọi thứ sẽ đổi thay. Nhiệm vụ của chúng ta là đảm bảo ngọn lửa hy vọng ấy không bao giờ tắt.”</p><p id="52">Khi hai người bắt đầu tranh luận gay gắt, tôi quay sang nhìn Quốc vương Collard—không giấu nổi chút ngạc nhiên trong lòng.</p><p id="53">Quốc vương nở một nụ cười gượng gạo, khẽ thở dài.</p><p id="54">“Hai người họ đúng là như chó với mèo vậy.”</p><p id="55">Quả thật là thế. Dù quan điểm nhân sinh của họ hoàn toàn trái ngược, nhưng không ai sai cả—vậy nên cũng chẳng thể đơn giản đứng về phe nào.</p><p id="56">“Thôi được rồi, điểm mấu chốt là: chúng ta không phải toàn năng, càng không phải thần linh. Có những việc ta không thể làm, nhưng cũng luôn có những thứ có thể cải thiện. Vậy nên hãy tập trung vào những gì ta <em>có thể</em> thay đổi—mọi người thấy sao?”</p><p id="57">“Không thể nói hay hơn.”</p><p id="58">Quốc vương Collard gật đầu tán thành.</p><p id="59">Khi cuộc tranh luận bắt đầu có dấu hiệu leo thang, tôi đứng ra điều phối lại. Sau khi bổ sung thêm vài ý kiến từ phía Quốc vương, cuối cùng chúng tôi cũng khép lại được chủ đề.</p><p id="60">Dù ở thế giới nào, con người cũng chẳng dễ thay đổi. Devta có thể tự xưng là “thần”, nhưng tôi vẫn từng hy vọng hắn sẽ thúc đẩy một thế giới mang tính không tưởng hơn… vậy mà rốt cuộc, mọi thứ vẫn là như thế này.</p><p id="61">Giữa lúc tôi đang thầm thở dài trước bản tính con người, Ikaruga—trong hình thái nhân hình, mái tóc trắng, làn da sẫm màu, dung mạo tuyệt mỹ không gì sánh kịp, một trong Thập Tam Ma Tướng—sải bước nhanh vào phòng.</p><p id="62">“Xin thứ lỗi đã quấy rầy, nhưng đã xảy ra chuyện.”</p><p id="63">Ikaruga lên tiếng.</p><p id="64">“Có chuyện gì vậy, Ikaruga?”</p><p id="65">Tengai hỏi, và hắn khẽ gật đầu.</p><p id="66">“Vâng. Là chuyện liên quan đến đám hải tặc khi nãy. Sau khi được… à, gọi là ‘thẩm vấn đầy nhiệt huyết’—do Kage… khụ, ý tôi là Điều tra viên phụ trách cùng tôi tiến hành—chúng đã cung cấp một số thông tin vô cùng thú vị.”</p><p id="67">Tôi có cả tá điều muốn phàn nàn về mấy lần lỡ miệng của hắn, nhưng tạm thời nhịn xuống, chờ nghe tiếp.</p><p id="68">“Trước hết, chiến thuật cấu kết với quan lại địa phương là sao chép từ «Hồng Phàm Hải Tặc Đoàn» [note86797]. Không—đó không phải tên tự xưng của chúng, mà là cách các hải tặc khác gọi. Tuy nhiên, bản sao này kém xa bản gốc.”</p><p id="69">“Vậy theo logic đó, thì bản gốc của «Hồng Phàm Hải Tặc Đoàn» cũng dùng cùng chiến thuật—chỉ là ở quy mô lớn hơn rất nhiều?”</p><p id="70">“Đúng vậy.”</p><p id="71">Ikaruga xác nhận.</p><p id="72">“Chúng gần như đã thao túng cả một quốc gia, rồi lần lượt đem các nước nhỏ xung quanh ra… buôn bán.”</p><p id="73">Quy mô của sự việc đột ngột mở rộng đến mức kinh người. Bốn người chúng tôi—những kẻ đứng đầu các quốc gia—chỉ có thể trố mắt nhìn gương mặt tuấn mỹ của Ikaruga, biểu cảm đầy kinh ngạc và hoài nghi.</p><p id="74">“Một… quốc gia hoàn chỉnh sao?”</p><p id="75">Tôi lẩm bẩm.</p><p id="76">“Quả thật là một tập đoàn hải tặc có quy mô vượt ngoài tưởng tượng.”</p><p id="77">“Nhưng nói thật thì… chẳng phải rất phí công sao? Chiếm được một quốc gia rồi lại bán đi sau bao công sức? Nghe thế nào cũng thấy lãng phí”, Revan lên tiếng</p><p id="78">Quốc vương Collard lắc đầu, đưa ra suy đoán của mình.</p><p id="79">“Không. Trước hết, ta không cho rằng bọn hải tặc từng có ý định quản trị quốc gia. Chỉ cần có người mua, chúng sẽ bán. Và nếu sau này xuất hiện một người mua còn lớn hơn nữa… chúng hoàn toàn có thể chiếm lại, rồi bán thêm lần nữa.”</p><p id="80">“Ta hiểu rồi. Giống như việc các quốc gia tiến hành xâm lược dưới danh nghĩa chính nghĩa—chỉ khác là chúng làm điều đó một cách phi pháp. Nói cách khác, ta phải coi sức quân sự của chúng ngang với một quốc gia.”</p><p id="81">Nếu đã như vậy… thì kẻ đứng đầu hải tặc kia, e rằng chỉ có thể là Momongai.</p><p id="82">“Và quốc gia bù nhìn—nơi «Hồng Phàm Hải Tặc Đoàn» đang cắm rễ—là…”</p><p id="83">Ikaruga dừng lại một nhịp, liếc nhanh sang Oliana.</p><p id="84">“…Enyuria, thuộc địa phương Bắc của Đế quốc Graviol.”</p><p id="85">Không khí lập tức đông cứng.</p><p id="86">Chúng tôi đồng loạt hít vào một hơi, ánh mắt dồn cả về phía Oliana.</p><p id="87">“…Hoang đường… không thể nào…”</p><p id="88">Oliana thì thầm, đôi mắt mở to vì chấn động.</p><p id="89">◆◇◆◇</p><p id="90">“Hoan nghênh ngài trở về, Chủ nhân.”</p><p id="91">Một thiếu nữ tai thỏ tuyệt mỹ—tộc Thố Nhân, kiêm tổng quản hầu gái, trạc mười tám tuổi—trong bộ y phục khiêu khích cúi chào khi thuyền trưởng của «Hồng Phàm Hải Tặc Đoàn» quay lại chiến hạm.</p><p id="92">Hắn cưỡi trên lưng một cự thú khổng lồ, hình dáng như hải sư tinh tú nhưng trên trán mọc ra một chiếc sừng, trọng lượng ít nhất cũng vượt quá một tấn.</p><p id="93">Chàng trai ánh mắt sắc bén, mái tóc đỏ rực được quấn gọn dưới khăn xếp, làn da đồng hun khắc những hình xăm bạc, khoác chiếc áo gi-lê đỏ đơn giản—đặt chiếc rương gỗ nặng trịch xuống sàn tàu.</p><p id="94">“Đây. Gia vị phương Nam mà ngươi mong đợi bấy lâu. Mà nói trước nhé—chỉ riêng cái rương này thôi đã có giá ngang một con thuyền rồi. Lố bịch thật.”</p><p id="95">Hắn nói với vẻ mặt khó chịu.</p><p id="96">Trái ngược với giọng điệu của hắn, thiếu nữ lập tức sáng rỡ mặt mày.</p><p id="97">“Ôi trời, nhiều loại quá! Cảm ơn ngài rất nhiều, Chủ nhân!”</p><p id="98">Bị tiếng reo vui ấy lôi kéo, khoảng ba mươi thủy thủ tụ tập trên boong. Điều đáng nói là—tất cả đều là nữ, tuổi chừng từ cuối thiếu niên đến ngoài hai mươi, ai nấy đều sở hữu dung mạo xuất chúng.</p><p id="99">Ngoài gia vị, trong rương còn có đủ loại bảo vật chế tác từ vật liệu quý hiếm cùng váy áo dị quốc, vốn được chuẩn bị làm quà. Đám thiếu nữ ngồi xổm quanh rương, vừa xem vừa ríu rít như chim sẻ.</p><p id="100">Cảnh tượng ấy chẳng khác nào một người cha bị các con gái chiếm trọn phòng khách. Với vẻ mặt mệt mỏi, chàng trai lánh ra xa, ngồi lên lan can tàu, ánh mắt dõi về chân trời xa xăm.</p><p id="101">“Mình đã làm gì mà lại tuyển phải cả một thủy thủ đoàn toàn nữ thế này chứ? Chuyện này vốn dĩ không nên xảy ra mới phải…”</p><p id="102">Hắn lẩm bẩm đầy cay đắng.</p><p id="103">“Xét việc ngài luôn miệng hô hào, <em>‘Biển cả đều là của ta! Mọi nữ nhân trên đời đều là của ta! Đám đàn ông thì xuống địa ngục hết đi!’ </em>…thì có gì đáng ngạc nhiên đâu?”</p><p id="104">Tổng quản tai thỏ bất ngờ xuất hiện bên cạnh. Chàng trai bực bội xoa tóc.</p><p id="105">“Ta biết chứ, nhưng mấy câu đó là nói <em>riêng</em> thôi! Hải tặc thì phải có phó quan đầu trọc đeo bịt mắt, với trợ thủ chân gỗ chứ! Như thế mới có khí thế hô ‘Giương cờ! Toàn quân xuất kích!’ chứ! Đám con gái này thì đánh đấm kiểu gì đây?!”</p><p id="106">“Ôi, ngài lại bắt đầu nói mấy lời ngớ ngẩn rồi.”</p><p id="107">Có lẽ là đặc tính chủng tộc, thiếu nữ khúc khích cười, giọng ngọt đến mức phát ngấy.</p><p id="108">“Không biết là ai từng hét toáng lên, ‘1 dàn harem là giấc mơ của mọi nam nhân! Đời ta từ nay nhuốm sắc hồng! Ta sẽ làm Vua harem!’—khi cứu tôi khỏi tay Shrinkus nhỉ?”</p><p id="109">“…Đó chỉ là sự nông nổi của tuổi trẻ. Giờ ta hối hận lắm rồi.”</p><p id="110">“Ngài nói vậy thôi, chứ tối qua ngài còn ngủ chung rất thân mật với trưởng kỹ sư mà—”</p><p id="111">“Hảáá?! Sao cô biết được chuyện đó?!”</p><p id="112">“Thuyền thì chật mà, ngài biết rồi đấy.”</p><p id="113">Chàng trai gục đầu bất lực, trong khi cô nàng vẫn không ngừng trêu chọc.</p><p id="114">“Ngài đúng là bị nguyền rủa về mặt nữ nhân rồi. Lần tới cập bến, hay là chúng ta ghé đền Hải Thần cầu an đi?”</p><p id="115">“…Thôi bỏ đi.”</p><p id="116">Biết rằng không thể thắng nổi nàng, hắn vội chuyển chủ đề. Thiếu nữ vỗ đùi đánh bốp, nở nụ cười tinh quái.</p><p id="117">“À đúng rồi! Thầy bói Donna chẳng phải từng nói rằng ngài sẽ sớm bị ‘Nguyệt Thần đâm sau lưng’, còn dặn phải cẩn thận sao? Hay là lần tới ghé đền Nguyệt Thần nhé?”</p><p id="118">“Cái đó có ý gì?”</p><p id="119">“Không biết~ Tôi đoán là nói bóng gió rằng ngài sẽ bị một cô gái lừa rồi đâm sau lưng thôi.”</p><p id="120">Nhắc đến “đâm sau lưng”… quá nhiều gương mặt bất chợt lóe lên trong đầu hắn. Cảm giác tội lỗi dâng lên, chàng trai vội quay đi chỗ khác.</p><p id="121">“Thôi, khi chuyện đó xảy ra thì nhớ xin lỗi cho đàng hoàng nhé.”</p><p id="122">Nói xong, nàng tung tăng chạy về phía nhóm thiếu nữ đang ríu rít.</p><p id="123">Cuối cùng cũng được yên thân, chàng trai lại nhìn về đường chân trời, thì thầm:</p><p id="124">“Nguyệt Thần à…”</p><p id="125">Có khi tên thần tự xưng kia thực sự biết điều gì đó chăng…?</p><p id="126">Không, chỉ là lời sảng của thầy bói mà thôi.</p><p id="127">Tự trấn an như vậy, hắn quay người, bước vào trong lòng chiến hạm.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note86797"><a href="#anchor-note86797" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note86797" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Băng Hải Tặc có cánh buồm đỏ</span></div><span class="note-content_real long-text">Băng Hải Tặc có cánh buồm đỏ</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286799-chuong-3-hai-tac-tap-kich" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'K4wbTOHjwzcZzOVIlWxJreamlsy10CUCug1GllUc';
        var comment_type = 'chapter';
        var comment_typeid = '288529';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'K4wbTOHjwzcZzOVIlWxJreamlsy10CUCug1GllUc';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('23458');
    chapter_id = parseInt('288529');

    readingObject = {
        series_id: series_id,
        series_title: 'Kyuuketsu Hime wa Barairo no Yume o Miru',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="K4wbTOHjwzcZzOVIlWxJreamlsy10CUCug1GllUc" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
