<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Kyuuketsu Hime wa Barairo no Yume o Miru - Chương 2 – Thành Phố Cảng - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Một bé shota (thực ra đã hơn 20 tuổi) có cuộc sống éo le như bao main khác, đã được đầu thai sang thế giới khác sau khi gặp tai nạn, với cơ thể thuộc về một bé loli vampire (13 tuổi), nhân vật trong game mà cậu chơi ở...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="BhMmdAK1kUcVcBHzgf57NWLxlVnC3xjSsuSWoJy7">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286015-chuong-2-thanh-pho-cang">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s23458-4ebe0e3a-f75c-4c54-ab73-2d563201c2e8.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c285998-chuong-1-hai-tac-quay-pha"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286799-chuong-3-hai-tac-tap-kich"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286015-chuong-2-thanh-pho-cang" style="background: url('https://i.hako.vn/ln/series/covers/s23458-4ebe0e3a-f75c-4c54-ab73-2d563201c2e8.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru">Kyuuketsu Hime wa Barairo...</a></h5>
                    <small><i class="fas fa-pen"></i>Sasaki Ichiro</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c230379-tien-truyen-1-tro-lai">Khúc dạo đầu</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c230570-minh-hoa">Vol 1: Cõi Tái Sinh (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c230571-minh-hoa">Vol 2: Biến cố ở Vương Đô (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c238833-minh-hoa">Vol 3: Thú vương của vùng biên cương (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c248044-minh-hoa">Vol 4: Đế quốc hỗn loạn (Done)</a></li>
                                        
                                                            <li class=""><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c276203-chuong-1-phong-an-ma-than">Vol 5: Hấp Huyết Ma Thần (Done)</a></li>
                                        
                                                            <li class="current"><a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/t35385-vol-6-thanh-vuc-cua-vi-than-sa-nga-dang-tien-hanh">Vol 6: Thánh Vực Của Vị Thần Sa Ngã - END (Đang tiến hành)</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c285998-chuong-1-hai-tac-quay-pha">
                                                                        Chương 1 – Hải Tặc Quấy Phá
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286015-chuong-2-thanh-pho-cang">
                                                                        Chương 2 – Thành Phố Cảng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286799-chuong-3-hai-tac-tap-kich">
                                                                        Chương 3 - Hải Tặc Tập Kích
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Vol 6: Thánh Vực Của Vị Thần Sa Ngã - END (Đang tiến hành)</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 2 – Thành Phố Cảng</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286015-chuong-2-thanh-pho-cang#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,842 từ - Cập nhật: 
                        <time class="topic-time timeago" title="06-01-2026 14:10:35" datetime="2026-01-06T14:10:35+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 2 – Thành Phố Cảng</p>
                    <p id="1">“Cơ hội đúng là tự rơi xuống tay chúng ta rồi, nhỉ.”</p><p id="2">Kagerou lên tiếng, làm bộ như đã nhìn thấu mọi chuyện từ đầu.</p><p id="3">Bất kể kết quả buổi hội đàm ra sao, hôm nay nó vẫn khép lại trong bầu không khí hòa hoãn. Trong quá trình trao đổi, Oliana bắt đầu thể hiện sự quan tâm chân thành tới quốc gia của chúng tôi. Cô bày tỏ mong muốn sẽ lui tới thường xuyên hơn, thậm chí còn dò hỏi khả năng lắp đặt một thiết bị dịch chuyển trực tiếp tại dinh thự biệt lập của mình trong Hoàng cung Đế quốc.</p><p id="4">Đáng tiếc thay, kỳ vọng ấy nhanh chóng rơi vào bế tắc. Khác với các ma pháp trận dịch chuyển thông thường của thế giới này—vốn yêu cầu người sử dụng phải đăng ký dấu ấn ma lực tại điểm đến—thiết bị dịch chuyển của chúng tôi có thể đưa người dùng tới bất kỳ đâu. Xét theo nghĩa nào đó, nó chẳng khác gì một OOParts [note86571] của thế giới này.</p><p id="5">Khi ba người quay trở lại, Kagerou giải trừ kỹ năng «Ẩn Hình», hiện thân ra và bắt đầu ung dung thưởng thức bánh tart dâu cùng crème catalana—đều là tác phẩm của tôi, đến mức Oliana còn mang theo một phần làm quà. Hắn đã âm thầm quan sát toàn bộ buổi họp, với lý do sự hiện diện của mình sẽ phá vỡ bầu không khí yên bình:</p><p id="6">“Nếu tôi lộ diện trước thằng nhóc đó hay vị công chúa cao quý kia, thì buổi họp chắc chắn sẽ chẳng còn yên ổn. Tốt nhất là cứ để chó ngủ yên, cho tới khi thật sự cần thiết.”</p><p id="7">“Ý ngươi là gì khi nói <em>&lt;Cơ hội của chúng ta&gt;</em>?”</p><p id="8">“Hả? Ý tôi là cơ hội để đột nhập vào thánh địa của tên béo đó chứ sao. —Ôi, mấy món này ngon thật!”</p><p id="9">“Tên béo” là biệt danh chúng tôi đặt cho ‘Lam Thần’ hay còn gọi là Long Kỵ Sĩ Devta của «E.H.O». Ngoài đời, thân hình hắn quả thật mập mạp, điều mà tôi đã tận mắt xác nhận trong một buổi offline ngoài đời.</p><p id="10">“Ngươi đang nói là hải tặc có liên quan tới Devta sao? Ngươi biết gì đó à?”</p><p id="11">“Biết chứ. Chắc chắn là có liên quan. Nhưng trước hết, tiểu thư định lén xâm nhập Faximile bằng cách nào đây? —À, cho tôi thêm một phần nữa được không?”</p><p id="12">“Có lẽ cải trang thành thường dân hay đại loại thế—”</p><p id="13">“Không thể,” hắn lập tức bác bỏ.</p><p id="14">“Một người ngoại quốc xuất hiện trong một quốc gia độc tài, cai trị bằng quân luật và đầy rẫy tín đồ cuồng tín, sẽ lập tức bị chú ý. Ở đó không có khách hành hương từ nước khác, còn số tín đồ sùng đạo thì nhiều như sao trời, ngày ngày tụng kinh cầu nguyện. Chuẩn bị hời hợt chỉ chuốc lấy thất bại.”</p><p id="15"><em>Chết tiệt. Khi ghé thăm Sirent—quốc gia lân cận—chúng tôi đã không được tiếp đón mấy thiện cảm. Và xem ra, Thánh Quốc Aeon còn khắt khe hơn gấp bội.</em></p><p id="16">“Nhân tiện, trước đây bọn tôi thường dùng thiết bị dịch chuyển để tới chỗ hắn, nhưng cái đó đã bị phá hủy, nên không còn dùng được nữa.”</p><p id="17">Vừa phụ Mikoto bày món tráng miệng, Kagerou vừa dùng thìa và nĩa trong tay tạo thành dấu X.</p><p id="18">“Con đường duy nhất còn lại là mượn thiết bị dịch chuyển của người khác. Nhưng cả Tamegoro lẫn Lubbock đều dùng đá dịch chuyển cá nhân, chứ không phải thiết bị cố định. Còn nếu cô đang tự hỏi có phương án nào khác không—thì thực ra là có. Tôi tin rằng chỉ còn các guild home là sở hữu thiết bị dịch chuyển cố định. Hiện tại, chỉ còn hai lựa chọn: «Cung Điện Trà Hoa» của Achako, hoặc «Chiến Hạm Ngầm: Hải Đế Vương» của đại sư Momongai.”</p><p id="19">“Hắn roll được cả mấy thứ đó nữa sao?!”</p><p id="20">Thông tin bất ngờ khiến tôi sững sờ, nhưng sắc mặt Kagerou lại trầm xuống.</p><p id="21">“—Dù vậy, xét về thực lực thì họ không thể so với Lubbock hay Animaru, nên có thể tạm gạt sang một bên. Còn về việc quay lại guild home… «Cung Điện Trà Hoa» của Achako đã biến mất không dấu vết từ lâu rồi.”</p><p id="22">“Bị chuyển tới nơi khác à?”</p><p id="23">“Nếu là vậy thì còn may.”</p><p id="24">Để lại một gợi ý mơ hồ đầy bất an, Kagerou cắn một miếng tráng miệng.</p><p id="25">“Tóm lại, tạm thời loại bỏ phương án đó. Nếu không phải cô ta, thì lựa chọn duy nhất còn lại là thiết bị dịch chuyển của Hải Đế Vương. Chỉ cần có nó, chúng ta sẽ nắm trong tay đòn sát thủ.”</p><p id="26">“Nghe có vẻ đầy hứa hẹn, nhưng… ngươi có biết hiện giờ Hải Đế Vương đang ở đâu không?”</p><p id="27">“Chịu đấy!”</p><p id="28">Kagerou đáp gọn lỏn, nhấp ngụm hồng trà đen sau bữa ăn.</p><p id="29">“Vậy nãy giờ nói dài như vậy để làm gì chứ?!”</p><p id="30">“Thưa tiểu thư, đó chính là lý do tôi nói vụ náo loạn hải tặc này là cơ hội của chúng ta.”</p><p id="31">“……?”</p><p id="32">“Ôi chao, xem ra cô chưa biết rồi. ‘<em>Thất Hải không thuộc về ai ngoài ta</em>’ và ‘<em>Ta sẽ trở thành Thuyền Trưởng xxxx</em>!’—đó đều là những câu cửa miệng của đại sư Momongai.”</p><p id="33">Hả? Không ngờ hắn lại màu mè như vậy. Vì ít khi trò chuyện, nên tôi chưa từng nhận ra.</p><p id="34">“Ý ngươi là Momongai đứng sau vụ hải tặc này?”</p><p id="35">“Tôi không dám chắc hắn là kẻ thao túng toàn bộ hay chỉ là một hải tặc gây loạn khác, nhưng khả năng hắn có dính líu là rất cao. Có thể là nghi binh, nhưng vẫn nên điều tra.”</p><p id="36">Ừm. Dù hắn có liên quan hay không, vấn đề hải tặc vẫn phải giải quyết… Mà như vậy thì rốt cuộc vẫn không tránh khỏi biển cả, nhỉ.</p><p id="37"><em>Thành thật mà nói, mình muốn tránh xa mọi thứ liên quan tới nước càng xa càng tốt…</em>Nhưng dĩ nhiên, tôi không thể nói thẳng điều đó ra được.</p><p id="38">“Được rồi, Tengai. Liên lạc với Quốc vương Collard, nhờ ông ấy chuẩn bị biệt thự ở Quito và sắp xếp một người dẫn đường địa phương.”</p><p id="39">“Đã rõ, thần sẽ làm ngay. Còn về những người hầu đi cùng… thần có thể tùy ý sắp xếp như thường lệ chứ?”</p><p id="40">Sau một thoáng suy nghĩ, tôi gật đầu ra lệnh.</p><p id="41">Lần này có vẻ như chúng tôi sẽ trực tiếp đánh vào sào huyệt của đối phương, nên mang theo lực lượng mạnh nhất là lựa chọn thận trọng.</p><p id="42">Nghe lời tôi, khóe môi Utsuho khẽ cong lên thành một nụ cười mờ nhạt.</p><p id="43">“Hehe, vậy là cuối cùng cũng đến lúc toàn bộ Ma Tướng Hội Bàn Tròn xuất quân rồi.”</p><p id="44">Đáp lại lời cô, các Ma Tướng xung quanh đồng loạt phóng thích sát khí sục sôi. Chỉ riêng sự háo chiến ấy đã khiến toàn bộ lâu đài rung chuyển, khí thế chiến tranh thậm chí còn làm vỡ tung cửa sổ.</p><p id="45">“Thời khắc đã tới! Tên mạo thần ngu ngốc kia sẽ bị Công chúa trừng phạt! Nghe cho rõ, mọi người—đây không chỉ là chiến tranh, mà là phán quyết!”</p><p id="46">Được Tengai tiếp thêm lửa, chiến ý của các Ma Tướng càng bùng lên dữ dội, tạo thành một làn sóng xung kích hất bay cả tôi lẫn chiếc ghế đang ngồi.</p><p id="47"><em>—Trời đất ơi, mình đã làm cái gì thế này?! Mang theo hơn hai mươi pet, mỗi kẻ đều sánh ngang quái vật cấp raid quy mô lớn… chuyện này rõ ràng hợp với một cuộc chiến diệt thế hơn là đối phó hai ba người chơi!</em></p><p id="48">“Xem ra đã sắp tới cao trào rồi nhỉ?”</p><p id="49">Trong khi tôi run rẩy trước tình cảnh này, Kagerou vẫn ung dung như thường lệ, rót cho mình tách hồng trà đen thứ hai.</p><p id="50">◆◇◆◇</p><p id="51">Vì thế, sau khi hoàn tất chuẩn bị, chúng tôi lên đường tới biệt viện của cựu vương tộc, nằm gần thành phố cảng Quito. Vâng, mọi thứ đều diễn ra đúng kế hoạch—ngoại trừ một điều.</p><p id="52">“……Sao cậu lại trở thành người dẫn đường cho chúng ta vậy?”</p><p id="53">Sau buổi học bơi buổi sáng—nơi tôi suýt chết đuối lần thứ hai, lại chỉ bơi được vỏn vẹn năm mét nhờ tấm ván tập—tôi bị Joey kéo thẳng vào thị trấn ngay trong buổi chiều.</p><p id="54">Do bộ váy đen thường ngày quá nóng nực, tôi đã đổi sang trang phục mùa hè giản dị hơn: áo có phần ngực xếp bèo, váy nhiều tầng, mũ rộng vành, cùng giày mùa hè điểm nơ ren.</p><p id="55">Tôi tháo bím tóc, để lại mái tóc thẳng quen thuộc. Chỉ cần tháo ra là tóc lập tức trở về trạng thái tự nhiên, không hề gợn sóng—một đặc điểm kỳ lạ mà tôi cũng chẳng biết nên vui hay buồn.</p><p id="56">“Vì quê tôi ở gần đây thôi.”</p><p id="57">Joey đáp thản nhiên, vừa nói vừa nắm tay tôi kéo đi.</p><p id="58">Nghe đâu cậu sinh ra ở một thôn làng miền núi hẻo lánh, thiếu thốn đủ thứ. Thuở nhỏ, mỗi khi đến lễ hội hay cần tiếp tế, cậu đều phải đi bộ nửa ngày tới Quito để khuân vác hàng hóa.</p><p id="59">“Ra vậy. Nhắc mới nhớ, không thấy Fiore đi cùng cậu nhỉ?”</p><p id="60">“Fiore à? Cô ấy tạm nghỉ việc một thời gian vì kỳ thi Pháp Sư Quốc Gia bậc bốn gì đó trong tuần này. Nghe cô ấy nói thì có vẻ rất tự tin.”</p><p id="61">“Ồ? Chắc hẳn đã nỗ lực nhiều. Mong là mọi chuyện thuận lợi.”</p><p id="62">“Ừ.”</p><p id="63">…Khoan đã, nếu cô ấy vượt qua kỳ thi quốc gia, liệu có tiếp tục làm mạo hiểm giả không? Tôi nhớ cô ấy chỉ chuyển sang mạo hiểm vì gặp trắc trở trên con đường sự nghiệp; nếu thành công, chẳng phải sẽ quay lại ước mơ trở thành pháp sư sao…?</p><p id="64">Ý nghĩ ấy thoáng qua, nhưng thấy Joey—người đồng hành của Fiore—không hề tỏ ra lo lắng, tôi đành gác lại và đổi chủ đề.</p><p id="65">“Nhân tiện, đã lâu không về đây, sao cậu không tranh thủ ghé thăm quê nhà sau khi hoàn thành nhiệm vụ dẫn đường?”</p><p id="66">“Có lẽ… để xem đã. Tôi sẽ cân nhắc.”</p><p id="67">Sau một khoảng lặng dài, Joey bật cười khẽ, nụ cười pha lẫn chua xót.</p><p id="68">…Cậu từng nói gia đình quá nghèo, đến bữa ăn cũng chật vật, nên cậu rời đi để giảm gánh nặng và bắt đầu sự nghiệp mạo hiểm giả ở Alra.</p><p id="69">Ugh, có lẽ tôi đã vô tình chạm vào vết thương.</p><p id="70">Tôi cúi đầu vì lỡ lời. Joey nhìn tôi đầy khó hiểu, rồi ngẩng lên nhìn mặt trời đang ở đỉnh đầu, như chợt nhận ra điều gì đó mà vỗ tay một cái.</p><p id="71">“Nhìn kìa, qua giờ ăn trưa rồi. Ta tìm chỗ ăn quanh đây thôi.”</p><p id="72">…Có lẽ tôi đã lo lắng quá mức.</p><p id="73">◆◇◆◇</p><p id="74">Chúng tôi bước vào quán ăn trông tươm tất đầu tiên bắt gặp—một nhà hàng nhỏ nhắn, cổ kính. Có lẽ do đã quá giờ trưa, hoặc vì tập quán địa phương, nên trong quán chỉ có mỗi chúng tôi.</p><p id="75">Vừa ngồi xuống chưa bao lâu, một phụ nữ—có lẽ là bà chủ—đã tiến tới với ánh mắt đầy phấn khích.</p><p id="76">“Ôi trời, cháu là công chúa sao?!”</p><p id="77">“Trời ơi, xinh đẹp quá!”</p><p id="78">Bà thậm chí còn so sánh tôi với “Nữ Thần Trăng Arte”, rồi mang ra hàng loạt món chúng tôi chưa hề gọi.</p><p id="79">Từ sâu trong bếp, chồng bà quát lớn, mắng bà vì tội nịnh nọt:</p><p id="80">“Bà nói toàn mấy lời nhảm nhí ngu xuẩn thôi, cái bà già này!”</p><p id="81">Ngay lập tức, nụ cười trên mặt bà chủ biến mất, thay vào đó là ánh nhìn dữ tợn như tu la.</p><p id="82">“Ai chết mà phong ông làm trọng tài chân lý vậy, đồ vô dụng?!”</p><p id="83">“Nói thật thì có gì sai hả, đồ bà già hôi hám?!”</p><p id="84">Cuộc khẩu chiến vợ chồng chính thức khai màn.</p><p id="85">Thoạt đầu tôi còn bối rối, không biết có nên can thiệp hay không, nhưng Joey chẳng buồn để tâm, thản nhiên cầm đũa lên ăn.</p><p id="86">“Cứ tập trung ăn đi, Hiyuki. Chuyện vợ chồng cãi nhau thì không đáng để xen vào.”</p><p id="87">Giọng cậu mang theo vẻ từng trải của người đã quen với cảnh này. Không còn cách nào khác, tôi cũng đành ăn theo.</p><p id="88">“Nguyên liệu tươi, hương vị khá ổn.”</p><p id="89">Nghe cậu nhận xét vậy, tôi thử món cá—đặc sản của thị trấn. Khác với Joey, tôi không thể hoàn toàn phớt lờ cuộc cãi vã đang diễn ra, nên bữa ăn khó mà trọn vẹn.</p><p id="90">“…Có vẻ cậu quen với mấy cảnh này lắm nhỉ?”</p><p id="91">Nhận ra ẩn ý, Joey lại nở nụ cười buồn.</p><p id="92">“Ừ, chuyện thường ngày thôi. Là con trai cả, tôi hay đứng ra hòa giải—kết quả thường là bị đá ra ngoài sau khi ăn vài cú đấm.”</p><p id="93">…Xem ra chuyến “trở về” này chẳng hề dễ chịu. Nghĩ đến việc cậu đã rời bỏ nơi đây từ lâu, điều đó cũng dễ hiểu.</p><p id="94">“À mà, bà chủ nói ta giống ‘Nữ Thần Trăng Arte’. Lúc mới gặp, cậu cũng từng hỏi ta có phải Nữ Thần Trăng không.”</p><p id="95">Joey lập tức sặc canh cá, ho sặc sụa.</p><p id="96">“Khụ—khụ… Cô… khụ… cô vẫn nhớ à?”</p><p id="97">Mặt cậu ta đỏ bừng tới tận mang tai.</p><p id="98">“Cảnh đó khá ấn tượng. Nhưng chắc tính cách của ta đã sớm phá tan ảo tưởng của anh rồi nhỉ? —Nhân tiện, Nữ Thần Trăng Arte là anh hùng à?”</p><p id="99">Joey thì thào gì đó như “Không, tôi chưa từng nghĩ vậy… cô mãi mãi là… trong tim tôi…”, khiến tôi chẳng hiểu gì. Đúng lúc đó, bà chủ bước tới, tiếng chân vang lên từ phía bên kia quán—sẵn sàng giải thích thay cho Joey.</p><p id="100">Không thấy ông chồng đâu cả, có lẽ bà đã thắng cuộc cãi vã. [note86588]</p><p id="101">“Nữ Thần Trăng Arte được thủy thủ tôn kính,” bà bắt đầu, vừa nói vừa tự nhiên ngồi xuống bàn chúng tôi.</p><p id="102">“Người là con gái của Hải Thần và Dạ Thần, cai quản tinh tú—những biểu tượng được thủy thủ vô cùng tôn trọng.”</p><p id="103">À, ra vậy. Trên biển cả không có mốc định hướng, mặt trăng và các vì sao quả thực vô cùng quan trọng.</p><p id="104">“Thị trấn này cũng có đền thờ của người, nhưng dạo gần đây rất nhộn nhịp. Thủy thủ kéo tới cầu chỉ dẫn vì nạn hải tặc.”</p><p id="105">Dù nói với giọng thản nhiên, từ “hải tặc” vẫn khiến tôi lập tức chú ý.</p><p id="106">“Ồ? Hải tặc đã nghiêm trọng đến vậy sao?”</p><p id="107">“Đúng vậy, mọi thứ đã đi xa quá mức rồi.”</p><p id="108">Gương mặt bà lộ rõ vẻ chán ghét, xen lẫn cam chịu.</p><p id="109">Theo bà, bọn cướp gần đây có vẻ ngày càng manh động hơn, chúng thường xuyên xuất hiện trên các tuyến giao thương giữa Amitia và Cres. Các tàu áp đảo về kích thước hay tàu ma pháp vẫn có thể dùng lợi thế tốc độ để cắt đuôi bọn chúng hoặc dùng hỏa lực để chế ngự, vấn đề là số lượng và tần suất các nhóm nhỏ cướp biển đang tăng lên, và có vẻ chúng cũng dần quen thuộc với các tuyến hàng hải địa phương. Các thủy thủ tin rằng chỉ là vấn đề thời gian trước khi lũ cướp biển này thực sự trở thành mối đe dọa lớn với họ.</p><p id="110">“Nghe tệ thật. Có vẻ chỉ có sức mạnh quốc gia mới ngăn được thảm họa này.”</p><p id="111">“Chỉ là ảo tưởng thôi. Quân đội của chúng ta giỏi đánh trên đất liền. Nếu xử lý được hải tặc thì đúng là kỳ tích.”</p><p id="112">Giọng bà có chút khinh miệt nhưng cũng phảng phất sự cam chịu trước sự thật.</p><p id="113">“Cháu hiểu… Nhưng vì sao hải tặc lại đột nhiên mạnh lên như vậy?”</p><p id="114">“Ừm…” Bà trầm ngâm rồi nói. “Chỉ là tin đồn thôi. Nghe nói ban đầu bọn chúng có căn cứ ở phía bắc. Sau khi thua tranh chấp địa bàn, chúng cụp đuôi chạy sang đây.”</p><p id="115">Thông tin này khiến tôi chăm chú nhìn bà thật lâu.</p><p id="116">“Thật sao?”</p><p id="117">“Đã bảo là tin đồn mà. Nghe đâu có một hải tặc sở hữu ma thuyền với cánh buồm đỏ thẫm, muốn chiếm cứ phương bắc, rồi dẫn đến cục diện hiện tại. Người ta còn đồn rằng tên thủ lĩnh ấy điều khiển được một con cá trắng khổng lồ… nhưng mà tin đồn thì vẫn chỉ là tin đồ thôi.”</p><p id="118">“Ồ?”</p><p id="119">“Ồ?”</p><p id="120">Chúng tôi đồng thanh thốt lên. Bà chủ xem đó chỉ là chuyện hoang đường, còn tôi thì không nhịn được mà cười thầm trong lòng.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note86571"><a href="#anchor-note86571" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note86571" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Out-of-Place Artifacts (Kiểu đồ xịn vượt thời đại chẳng biết từ đâu mà ra, tạm dịch là công nghệ vượt thời đại cũng được)</span></div><span class="note-content_real long-text">Out-of-Place Artifacts (Kiểu đồ xịn vượt thời đại chẳng biết từ đâu mà ra, tạm dịch là công nghệ vượt thời đại cũng được)</span></div>
                                                    <div style="margin-bottom: 20px;" id="note86588"><a href="#anchor-note86588" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note86588" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">+1 ngủ sofa</span></div><span class="note-content_real long-text">+1 ngủ sofa</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c285998-chuong-1-hai-tac-quay-pha" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/23458-kyuuketsu-hime-wa-barairo-no-yume-o-miru/c286799-chuong-3-hai-tac-tap-kich" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'BhMmdAK1kUcVcBHzgf57NWLxlVnC3xjSsuSWoJy7';
        var comment_type = 'chapter';
        var comment_typeid = '286015';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'BhMmdAK1kUcVcBHzgf57NWLxlVnC3xjSsuSWoJy7';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('23458');
    chapter_id = parseInt('286015');

    readingObject = {
        series_id: series_id,
        series_title: 'Kyuuketsu Hime wa Barairo no Yume o Miru',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="BhMmdAK1kUcVcBHzgf57NWLxlVnC3xjSsuSWoJy7" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
