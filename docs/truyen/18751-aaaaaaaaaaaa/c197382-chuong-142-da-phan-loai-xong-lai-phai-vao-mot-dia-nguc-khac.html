<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Majutsushi kunon Wa Mieteiru - Chương 142: Đã phân loại xong, lại phải vào một địa ngục khác. - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Trên đời này có thực sự tồn tại việc nhân sinh của một ai đó thay đổi hoàn toàn chỉ vì một câu nói. Kunon grion, kẻ mang trong mình lời nguyền khiến cậu bị cướp đi thị lực từ lúc được sinh ra với một cái tên mỹ miều...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="AGEeSyOfYCMJhiuobsIhoaXdcau5Mqhij21eg2dh">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/18751-aaaaaaaaaaaa/c197382-chuong-142-da-phan-loai-xong-lai-phai-vao-mot-dia-nguc-khac">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s18751-32e7ed7c-f69b-4675-b3c1-04c131467775.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/18751-aaaaaaaaaaaa/c196928-chuong-141-cai-kho-lo-cai-khon-ket-qua-sau-khi-suy-nghi-thau-dao"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/18751-aaaaaaaaaaaa"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/18751-aaaaaaaaaaaa/c197928-chuong-143-buoc-vai-buoc-tren-nac-thang-tro-thanh-nguoi-lon"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/18751-aaaaaaaaaaaa/c197382-chuong-142-da-phan-loai-xong-lai-phai-vao-mot-dia-nguc-khac" style="background: url('https://i.hako.vn/ln/series/covers/s18751-32e7ed7c-f69b-4675-b3c1-04c131467775.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/18751-aaaaaaaaaaaa">Majutsushi kunon Wa Miete...</a></h5>
                    <small><i class="fas fa-pen"></i>南野海風</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/18751-aaaaaaaaaaaa/c139119-chuong-01-an-tich-cua-nguoi-hung">Tập 01 Ấn Tích của Người Hùng</a></li>
                                        
                                                            <li class=""><a href="/truyen/18751-aaaaaaaaaaaa/c152967-chuong-41-gap-go-va-chia-ly">Tập 02 : Cuộc sống mới ở trường ma thuật</a></li>
                                        
                                                            <li class=""><a href="/truyen/18751-aaaaaaaaaaaa/c156121-chuong-68-thu-nay-chinh-la-ma-dao-cu">Tập 03 : Saa, jikken wo hajimemashouka?</a></li>
                                        
                                                            <li class=""><a href="/truyen/18751-aaaaaaaaaaaa/c163427-chuong-88-giao-vien-thuc-tap-jennie-coase">Tập 04 : Trải nghiệm học lớp khóa dưới và trận chiến sinh tử</a></li>
                                        
                                                            <li class="current"><a href="/truyen/18751-aaaaaaaaaaaa/t29894-tap-05-ma-doi-hop-hien-tuong-sang-the-va-chich-dien">Tập 05 : Ma Đới Hộp, Hiện Tượng Sáng Thế và... Chích Điện</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c179768-chuong-01">
                                                                        Chương 116: Điểm tín chỉ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c180112-chuong-117-cau-chuyen-dan-bi-xep-chong">
                                                                        Chương 117: Câu chuyện dần bị xếp chồng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c180331-chuong-118-cai-goi-la-thuy-canh">
                                                                        Chương 118: Cái gọi là Thủy Canh
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c180970-chuong-119-thu-vi-hon-minh-nghi">
                                                                        Chương 119: Thú vị hơn mình nghĩ.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c181130-chuong-120-chi-con-2-tuan-bi-tre-nua-thoi">
                                                                        Chương 120: Chỉ còn 2 tuần bị trễ nữa thôi.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c181602-chuong-121-bat-dau-chuan-bi">
                                                                        Chương 121: Bắt đầu chuẩn bị.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c181612-chuong-122-5-nguoi-dau-tien">
                                                                        Chương 122: 5 người đầu tiên
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c182446-chuong-123-quang-thoi-gian-sau-khi-khoi-dong-du-an-p1">
                                                                        Chương 123 : Quãng thời gian sau khi khởi động dự án p1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c184013-chuong-09">
                                                                        Chương 124 : Quãng thời gian sau khi khởi động dự án p2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c184199-chuong-125-cong-chua-bup-be-hoi-huong">
                                                                        Chương 125: Công Chúa Búp Bê Hồi Hương
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c185337-chuong-126-su-lo-lang-cua-giao-hoangpapa">
                                                                        Chương 126 : Sự lo lắng của Giáo Hoàng(papa).
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c186856-chuong-127-chuyen-ve-reyes">
                                                                        Chương 127: Chuyện về Reyes
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c186931-chuong-128-hat-giong-cua-huy-hon-thu">
                                                                        Chương 128: Hạt giống của Huy Hồn Thụ.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c187316-chuong-14">
                                                                        Chương 129 : Hoàn thành hàng thử nghiệm.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c187876-chuong-130-day-la-dau-toi-la-ai">
                                                                        Chương 130: Đây là đâu? Tôi là ai?
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c188275-chuong-131-phuong-cham-hien-tai-cau-noi-dau-tien-cua-thanh-nu">
                                                                        Chương 131: Phương châm hiện tại, câu nói đầu tiên của Thánh Nữ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c188888-chuong-132-truoc-tien-phai-giai-thich-cai-da">
                                                                        Chương 132: Trước tiên phải giải thích cái đã.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c189420-chuong-133-khong-the-tha-thu-cho-lu-chim-duoc">
                                                                        Chương 133: Không thể tha thứ cho lũ chim được!
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c189532-chuong-134-dieu-tra-khu-rung-p1">
                                                                        Chương 134: Điều tra khu rừng p1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c190829-chuong-135-dieu-tra-khu-rung-p2">
                                                                        Chương 135 : Điều tra khu rừng – P2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c191810-chuong-136-goi-toi">
                                                                        Chương 136: Gọi tới
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c193663-chuong-137-quy-ba-bong-toi">
                                                                        Chương 137: Quý Bà Bóng Tối
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c193680-chuong-138-toan-bo-su-viec">
                                                                        Chương 138: Toàn bộ sự việc
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c193752-chuong-139-quy-ba-dang-kia-khong-le-la">
                                                                        Chương 139 : Quý Bà đằng kia, không lẽ là...
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c195932-chuong-140-lai-thinh-tia-chop-den">
                                                                        Chương 140 : Lại thỉnh Tia Chớp đến.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c196928-chuong-141-cai-kho-lo-cai-khon-ket-qua-sau-khi-suy-nghi-thau-dao">
                                                                        Chương 141: Cái khó ló cái khôn. (Kết quả sau khi suy nghĩ thấu đáo)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c197382-chuong-142-da-phan-loai-xong-lai-phai-vao-mot-dia-nguc-khac">
                                                                        Chương 142: Đã phân loại xong, lại phải vào một địa ngục khác.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c197928-chuong-143-buoc-vai-buoc-tren-nac-thang-tro-thanh-nguoi-lon">
                                                                        Chương 143: Bước vài bước trên nấc thang trở thành người lớn.
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c198757-chuong-144-thay-doi-tam-trang">
                                                                        Chương 144: Thay đổi tâm trạng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c199030-chuong-145-quang-nghi-noi-sau-cua-thanh-nu">
                                                                        Chương 145: Quãng nghỉ – Nỗi sầu của Thánh Nữ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/18751-aaaaaaaaaaaa/c199936-chuong-146-quang-nghi-tang-qua-cho-vi-hon-the">
                                                                        Chương 146: Quãng Nghỉ – Tặng quà cho vị hôn thê
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=""><a href="/truyen/18751-aaaaaaaaaaaa/c200397-chuong-147-truong-ma-thuat-nam-hai">Tập 06 : Bắt đầu năm hai.</a></li>
                                        
                                                            <li class=""><a href="/truyen/18751-aaaaaaaaaaaa/c226265-chuong-196-tai-ngo-ngo-lo">Tập 07 : Hẹn hò, lĩnh vực tri thức mới.</a></li>
                                        
                                                            <li class=""><a href="/truyen/18751-aaaaaaaaaaaa/c257330-chuong-233-mua-dong-thu-hai-va-tao-ma-hoc">Tập 08</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 05 : Ma Đới Hộp, Hiện Tượng Sáng Thế và... Chích Điện</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 142: Đã phân loại xong, lại phải vào một địa ngục khác.</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/18751-aaaaaaaaaaaa/c197382-chuong-142-da-phan-loai-xong-lai-phai-vao-mot-dia-nguc-khac#chapter-comments" style="text-decoration: underline">3 Bình luận</a> -
                        Độ dài: 1,850 từ - Cập nhật: 
                        <time class="topic-time timeago" title="16-07-2025 18:02:38" datetime="2025-07-16T18:02:38+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 142: Đã phân loại xong, lại phải vào một địa ngục khác.</p>
                    <p id="1">"--- Phân loại bằng ma thuật?"</p><p id="2">Sau khi bị chích điện ba lần, Shiroto mới chịu lắng nghe chủ trương của Kunon.</p><p id="3">"Theo lý thuyết thì có thể thực hiện được."</p><p id="4">Kunon, người đang bốc khói nhẹ, đang bày về khả năng chiến thắng.</p><p id="5">"Nhưng cần gì phải 'vẽ rắn thêm chân' chứ? Chỉ còn 2 ngày là xong thôi mà?"</p><p id="6">"Cái đó thì không được đâu. Dù nàng có là một quý cô xinh đẹp hội tụ những phẩm chất dịu dàng lẫn nghiêm khắc thì nàng cũng nên biết rằng mình nên và không nên nói cái gì."</p><p id="7">"Vậy, vậy hả?..."</p><p id="8">Kunon muốn thoát khỏi công việc lao động trong tù này càng sớm càng tốt, cho nên sẽ thật tồi tệ nếu ai đó lại đi phủ định nỗ lực ấy của cậu.</p><p id="9">Trong lòng cậu chỉ là những dòng suy nghĩ <em>[Kệ cái công việc này, mình không thấy, mình không biết gì hết! Mình chỉ muốn hoàn thành trong vòng nửa ngày rồi phắn ra khỏi đây thôi!]</em></p><p id="10">"Mà mà Shiroto, có đây có một --- đau đau đau, tại sao lại chích điện anh hả?"</p><p id="11">Chẳng phải là tranh cãi gì, nhưng Bale muốn tham gia như một người hòa giải thì lại bị Shiroto chích điện theo phản xạ.</p><p id="12">"À, xin lỗi." - Shiroto nhận lỗi.</p><p id="13">Dường như cô đã sinh ra một thói quen sẽ chích điện những ai mà cô thấy không chịu làm việc, và cả những ai nói chuyện phiếm nữa. Cô chỉ đơn giản phản ứng bởi giọng nói thôi.</p><p id="14">Khá may mắn khi mà tác động lên cơ thể khá lớn nhưng cơn đau lại khá ít, dù sao cô cũng đã khống chế lại cường độ. Dù thế đi nữa thì chỉ cần giật 2, 3 phát liên tiếp thì đối phương cũng không dễ chịu là mấy.</p><p id="15">"Nhưng cậu cứ tiếp tục công việc của mình đi, tôi sẽ nghe câu chuyện của Kunon."</p><p id="16">"..."</p><p id="17">Vị giám sát viên không hề tỏ ra lung lay, khiến Bale phải quay lại công việc của mình với một bóng lưng cô đơn.</p><p id="18"><em>[Anh ấy đáng thương quá.]</em> – Kunon nghĩ.</p><p id="19">Nhưng hiện tại không phải là lúc để cảm khái.</p><p id="20">"... Thế? Nó rốt cuộc là gì?"</p><p id="21">"Kẻ hèn này đã nghĩ ra phương pháp phân loại nên muốn thử."</p><p id="22">"Nhưng nhóc là Thủy Thuộc Tính mà, dùng nước đi phân loại á? Đối tượng là giấy đó? Hay nhóc có cách khác ngoài nước?"</p><p id="23">"A, nàng đừng lo, kẻ hèn này có thể điều chỉnh khả năng thẩm thấu của nước."</p><p id="24">Chỉ cần điều chỉnh độ dính thì có thể khiến nước không thấm vào giấy. Vả lại việc hút nước từ vật chất thấm chất lỏng khá dễ dàng với cậu, dù hơi ẩm một chút nhưng nếu là giấy đã khô mực thì không thành vấn đề.</p><p id="25">"Làm được đến mức ấy cơ à, nhóc đúng là tháo vát thật đấy."</p><p id="26">Shiroto khoanh tay suy nghĩ rồi nói:</p><p id="27">"Được rồi, làm đi."</p><p id="28">Nghe theo lệnh của Shiroto, mọi người đều rời khỏi căn phòng, nhận lấy một khoảnh khắc tự do ngắn ngủi.</p><p id="29">Sau khi cô ấy tới, Trật Tự và Quy Tắc đã được sinh ra. Cụ thể hơn thì từ sáng đến tối không có ai được phép ra khỏi căn phòng. Muốn ăn cơm thì phải ăn tại đây, giờ đi vệ sinh hay nghỉ giải lao cũng được quyết định sẵn thời gian, và dĩ nhiên hành vi chạy trốn là không thể tha thứ được.</p><p id="30">Chỉ có khuya mới được phép về, cơ mà ai quan tâm chứ.</p><p id="31">Cho đến ngày mai, rồi ngày kia mới có thể kết thúc công việc địa ngục này, cả bọn phải làm công việc dọn dẹp đáng ghét ở ngôi trường thân thương.</p><p id="32">Phải biết trân quý hiện tại, cái khoảnh khắc tự do đầy ngắn ngủi này.</p><p id="33">Không khí bên ngoài tại sao lại trong lành đến vậy? Ôi, những cơn gió của sự tự do lại thoải mái làm sao! Còn ở trong căn phòng đó chỉ đầy rẫy sự tù túng, cảm giác buông xuôi và những cú chích điện mà thôi!!</p><p id="34">Nhưng, có lẽ đây không hẳn là một khoảnh khắc tự do ngắn ngủi, vì Kunon từ giờ sẽ thử nghiệm cách giải thoát cho mọi người. --- Giờ thì dù muốn hay không, mọi người đều trông mong vào cậu.</p><p id="35">"Vậy thì bắt đầu nhé... À mà giải thích trước nhé, sẽ không có chuyện gì đâu nên mọi người đừng có ngăn cản nhé."</p><p id="36">Vì mọi người chả hiểu lời nhắc nhở của Kunon mang ý nghĩa gì nên chả ai mở miệng cả. Vì thế mà áp lực vô hình từ họ gây ra cho cậu như thể muốn nói <em>"được rồi, làm nhanh lên."</em></p><p id="37">"Vậy thì, bắt đầu nhé."</p><p id="38">Kunon đứng từ phía hành lang, đưa cánh tay mình về phía căn phòng bị mở ra cửa sổ. --- Ngay lập tức cả căn phòng bị ngập trong nước, độ cao khoảng đến eo, bởi vì sức căng được kiểm soát bởi thao tác ma lực nên chúng không bị tràn ra ngoài.</p><p id="39">Có thể chắc chắn rằng toàn bộ phần sàn đã bị bao phủ bởi nước.</p><p id="40">"... Ướt nhem..." – ai đó đã lẩm bẩm.</p><p id="41">Dù không hiểu lời nhắc nhở của cậu, nhưng hiện tại khi đã lý giải được rồi thì cảnh tượng trước mắt này thật không tốt cho sức khỏe tim mạch một tý nào.</p><p id="42">Dù sao thì từng tờ từng tờ tài liệu ở đây đều cực kỳ quý giá, chúng là kết tinh cho những ngày tháng khổ sở mà ai đó đã viết ra.</p><p id="43">Bởi vì tình hình bắt buộc nên mọi người phải đạp loạn lên chúng vì không có chỗ đặt chân, nhưng dù vậy thì nó không đáng bị đối xử như thế cả. Vậy mà giờ đây, toàn bộ chúng đã bị chìm xuống đáy nước.</p><p id="44">"--- Chúng xao động kìa."</p><p id="45">Mặt nước bị xao động, còn những tờ tài liệu bên trong đó cũng biến động tập trung lại theo dòng nước, và rồi...</p><p id="46">Vài tờ giấy dần lơ lửng rồi trồi lên trên mặt nước, nhìn giống như một thứ gì đó vô tình bị cuốn theo dòng nước---</p><p id="47">"Vâng, xin hãy nhận lấy."</p><p id="48">Những tờ tài liệu ấy bị dạt bởi dòng nước rồi cứ thế hướng ra chỗ cửa sổ rồi bị Kunon bắt lấy, cậu sau đó đưa cho một học sinh nam.</p><p id="49">"Ể?... A? Cái này của tôi à?"</p><p id="50">Dùng nước để tiếp xúc, sau đó mô phỏng lại những ký tự trên mặt giấy, cuối cùng cậu chỉ nhặt nhạnh những tờ tài liệu thỏa mãn điều kiện mà bản thân đã đưa ra.</p><p id="51">Về mặt lý thuyết thôi thì <em>"tầm nhìn ma lực"</em> có thể làm được, nhưng với số lượng và quy mô khủng khiếp như thế này thì quá khó khăn cho việc dùng ma lực để tìm kiếm.</p><p id="52">Cho nên nó chỉ có thể làm <em>support</em> mà thôi. Chỉ cần trao cho đặc tính <em>"tìm kiếm những hình dạng cố định"</em> cho nước thì sẽ ra kết quả hiện tại.</p><p id="53">Với lại sau khi chỉ định <em>"tìm chữ"</em> thì dù không làm gì nó cũng sẽ tự vận hành giúp cậu, mà dù sao thì vẫn cần điều khiển. Nếu lỡ mất khống chế thì đống tài liệu này sẽ bị ngập nước thật.</p><p id="54">"Chỉ có vài tờ thôi à?"</p><p id="55">Khi Shiroto hỏi, người học sinh kia trả lời:</p><p id="56">"Bản báo cáo của tôi ít lắm, chắc chừng này là hết rồi."</p><p id="57">Có vẻ như với những tờ báo cáo này thì công việc phân loại với tư cách tù phạm của cậu ta cũng coi như kết thúc.</p><p id="58">"Tờ giấy... Ừm, có chút ẩm đấy. Dường như đây không phải là loại ma lực chuyên gây ra sát thương, ý tưởng không tồi đâu Kunon.</p><p id="59">Đống còn lại cứ dùng nó để phân loại hết luôn đi ha?"</p><p id="60">Đám tù phạm òa khóc trong sung sướng, nếu được Shiroto chấp nhận thì phương án này sẽ được đưa vào sử dụng.</p><p id="61">--- Dù vậy thì Kunon vẫn mang trong mình một nỗi lo trong sự vui mừng.</p><p id="62">"... Chữ mà đẹp quá thì cũng không thể phân biệt được đâu..."</p><p id="63">Mỗi chữ viết đều không giống nhau, có chữ bị cong vẹo, có chữ thì hơi quá khổ, có chữ thì nghiêng quá nên bị lệch tâm. Và dù cho có là cùng một người viết thì cũng không thể viết ra chữ đều y chang nhau, nếu tính cả thói quen viết (nét riêng) đi nữa.</p><p id="64">Lần này cậu chỉ nhận dạng một chữ viết có nét riêng, lúc đó cậu đã điều chỉnh mở rộng định dạng sao cho nó có hơi khác biệt một chút như là hơi cong hoặc hơi to thì vẫn được nhận dạng là <em>"hình dạng chỉ định."</em></p><p id="65">Vấn đề ở đây chỉ có một, và quả nhiên chính là nét riêng trong thói quen viết. Tóm lại nếu ai đó không có nét riêng thì cậu gần như chẳng phân biệt được, nếu thuộc dạng <em>"vở sạch chữ đẹp"</em> hoặc y chang nhau thì phương pháp phân loại của cậu coi như bỏ.</p><p id="66">"Không có vấn đề gì đâu, nghe anh."</p><p id="67">Bale mở miệng nói về giả định của mình để che đi nỗi lo lắng đó của Kunon.</p><p id="68">"Dù vậy đi nữa thì chú cũng đã phân loại được kha khá rồi, chú có thể phân biệt <em>'một đoạn văn chỉ định'</em> thay vì <em>'một chữ viết'</em> đúng chứ?</p><p id="69">Vậy thì ta chỉ cần phân biệt thông qua nội dung là được.</p><p id="70">Nếu trong trường hợp của nhóm chúng ta thì chắc sẽ là <em>'số một'</em> <em>'số hai'</em>, đoạn văn đó mấy nhóm khác không xài đâu."</p><p id="71">Kunon sốc.</p><p id="72">"Anh là thiên tài ạ?"</p><p id="73">"Anh mới là người phải hỏi chú câu đó đấy!"</p><p id="74">Tuy rằng khối lượng công việc phải mất thêm 2 ngày nữa mới hoàn thành, dù thế đi nữa thì tiến độ công việc đã được thúc đẩy với tốc độ không tưởng một cách đầy bất ngờ.</p><p id="75">Cả ngày hôm đó, mọi người đều chỉ muốn dọn sạch cái biển tài liệu này mà thôi, và rồi---</p><p id="76">"--- Ồ, coi bộ gần xong rồi ấy nhỉ? Thế thì tiếp theo là phân biệt vật dụng cá nhân nhé, khổ cho các em quá."</p><p id="77">Vừa ngay khi cả bọn hoàn thành công việc, cứ nghĩ cánh cổng địa ngục đã bị đóng kín, vậy mà thầy Surf khi tới đây để xem tiến độ công việc đã mở ra cho những đứa học sinh đáng yêu một cánh cửa địa ngục khác.</p><p id="78">"Cũng nhân tiện nên tôi cũng sẽ tham gia cùng mọi người nhé."</p><p id="79">Shiroto cũng quyết định sẽ tiếp tục nghĩa vụ giám sát.</p><p id="80">Cuối cùng thì cuộc sống ngục tù của đám phạm nhân lại phải kéo dài thêm một chút.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/18751-aaaaaaaaaaaa/c196928-chuong-141-cai-kho-lo-cai-khon-ket-qua-sau-khi-suy-nghi-thau-dao" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/18751-aaaaaaaaaaaa" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/18751-aaaaaaaaaaaa/c197928-chuong-143-buoc-vai-buoc-tren-nac-thang-tro-thanh-nguoi-lon" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(3)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">3 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-2999153"
    class="ln-comment-item mt-3 clear"
    data-comment="2999153" 
    data-parent="2999153" 
    data-type="chapter" 
    data-typeid="197382">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://docln.net/img/noava.png" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/90462">manzero</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        chỉ có ăn ngủ với phần loại thôi ạ đã thế còn bị chích điện như Campuchia :D
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/18751-aaaaaaaaaaaa/c197382-chuong-142-da-phan-loai-xong-lai-phai-vao-mot-dia-nguc-khac?comment_id=2999153#ln-comment-2999153"
                            class="text-slate-500">
                            <time class="timeago" title="27-08-2025 12:56:15"
                                datetime="2025-08-27T12:56:15+07:00">
                                27-08-2025 12:56:15
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-2939226"
    class="ln-comment-item mt-3 clear"
    data-comment="2939226" 
    data-parent="2939226" 
    data-type="chapter" 
    data-typeid="197382">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.docln.net/lightnovel/users/ua28974-8f3a2da7-4373-4caf-b293-5e8700455d2e.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/28974">Anata</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        khổ vcl<br>
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/18751-aaaaaaaaaaaa/c197382-chuong-142-da-phan-loai-xong-lai-phai-vao-mot-dia-nguc-khac?comment_id=2939226#ln-comment-2939226"
                            class="text-slate-500">
                            <time class="timeago" title="18-07-2025 01:03:54"
                                datetime="2025-07-18T01:03:54+07:00">
                                18-07-2025 01:03:54
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-2937866"
    class="ln-comment-item mt-3 clear"
    data-comment="2937866" 
    data-parent="2937866" 
    data-type="chapter" 
    data-typeid="197382">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u200059-f8742c70-2f75-4a89-87d0-80d034d38e8e.png" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/200059">You are an idiot</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Tem
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/18751-aaaaaaaaaaaa/c197382-chuong-142-da-phan-loai-xong-lai-phai-vao-mot-dia-nguc-khac?comment_id=2937866#ln-comment-2937866"
                            class="text-slate-500">
                            <time class="timeago" title="17-07-2025 00:04:53"
                                datetime="2025-07-17T00:04:53+07:00">
                                17-07-2025 00:04:53
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'AGEeSyOfYCMJhiuobsIhoaXdcau5Mqhij21eg2dh';
        var comment_type = 'chapter';
        var comment_typeid = '197382';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'AGEeSyOfYCMJhiuobsIhoaXdcau5Mqhij21eg2dh';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('18751');
    chapter_id = parseInt('197382');

    readingObject = {
        series_id: series_id,
        series_title: 'Majutsushi kunon Wa Mieteiru',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="AGEeSyOfYCMJhiuobsIhoaXdcau5Mqhij21eg2dh" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
