<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc A TS Reincarnated Student Who Just Tries her Best - 3 • Thực tại luôn là một trò chơi tệ hại - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Có chàng trai nọ trút hơi thở cuối cùng trên đất mẹ, chẳng biết hên hay xui mà cậu đã rơi xuống mảnh đất Kivotos của trò chơi Blue Archive dưới hình hài học sinh — và trong tất cả các ngôi trường khả dĩ, đó lại là Arius suy...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="BBnkB6nGYrMh6KiQnJ70Bcz8OW2NdHSAEGkJCquL">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271449-3-thuc-tai-luon-la-mot-tro-choi-te-hai">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24246-b26fb665-9082-40ab-a698-64be4bb5c6ee.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271444-2-luan-hoi-a-ha-khong-chuyen-gioi-thi-dung-hon"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271454-4-be-gai-dang-di-dao-thi-dinh-dan-lac"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271449-3-thuc-tai-luon-la-mot-tro-choi-te-hai" style="background: url('https://i.hako.vn/ln/series/covers/s24246-b26fb665-9082-40ab-a698-64be4bb5c6ee.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best">A TS Reincarnated Student...</a></h5>
                    <small><i class="fas fa-pen"></i>おにっく</small>
                    <small><i class="fas fa-paint-brush"></i>シロパンダクロ</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/t34933-web-novel">Web Novel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c270919-giay-phep-hanh-nghe-dich-gia-yapping">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Giấy phép hành nghề + dịch giả yapping
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271439-pho-cap-kien-thuc">
                                                                        Phổ cập kiến thức
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271442-httpsdocsgooglecomdocumentd1294n3qv7av16ytuqnldocm0qhlerp5cverltd6-dctiedittabt0">
                                                                        1 • Câu chuyện kể không gì ngoài sự luân hồi
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271444-2-luan-hoi-a-ha-khong-chuyen-gioi-thi-dung-hon">
                                                                        2 • Luân hồi á hả? Không, chuyển giới thì đúng hơn
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271449-3-thuc-tai-luon-la-mot-tro-choi-te-hai">
                                                                        3 • Thực tại luôn là một trò chơi tệ hại
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271454-4-be-gai-dang-di-dao-thi-dinh-dan-lac">
                                                                        4 • Bé gái đang đi dạo thì dính đạn lạc
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271457-5-ke-hoach-tuong-lai-va-chu-tich-hoi-hoc-sinh-arius-hien-tai">
                                                                        5 • kế hoạch tương lai và chủ tịch hội học sinh Arius hiện tại
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271484-6-hai-nhan-vat-quyen-luc-lap-di-chang-kem-gi-nhau">
                                                                        6 • Hai nhân vật quyền lực lập dị chẳng kém gì nhau
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271570-7-bang-chung-cua-tieu-quy">
                                                                        7 • Bằng chứng của tiểu quỷ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c272132-8-ban-chat-that-cua-ke-dich">
                                                                        8 • Bản chất thật của kẻ địch
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel</h2>
                    <h4 class="title-item text-base font-bold" align="center">3 • Thực tại luôn là một trò chơi tệ hại</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271449-3-thuc-tai-luon-la-mot-tro-choi-te-hai#chapter-comments" style="text-decoration: underline">11 Bình luận</a> -
                        Độ dài: 1,784 từ - Cập nhật: 
                        <time class="topic-time timeago" title="09-12-2025 20:53:32" datetime="2025-12-09T20:53:32+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">3 • Thực tại luôn là một trò chơi tệ hại</p>
                    <p id="1">Đã ba năm kể từ khi tôi chào đời trên thế giới này và được Arius nhận nuôi.</p><p id="2">"Fwaah..."</p><p id="3">Ngáp nhẹ, tôi nhảy ra khỏi giường.</p><p id="4">Kể từ ngày đó, tôi lớn lên trong ký túc xá bên trong Arius. Rõ ràng là có khá nhiều trẻ mồ côi - hay đúng hơn là những đứa trẻ bị bỏ rơi - xung quanh đây. Có lẽ là do tin đồn Arius nhận nuôi trẻ mồ côi. Tôi không có ý chê trách gì hết; bỏ mặc những đứa trẻ như vậy sẽ đè nặng lên lương tâm của bất kỳ ai.</p><p id="5">"Quahh... Ahhh...!"</p><p id="6">Tôi duỗi người, mở cửa và đi ra ngoài.</p><p id="7">Vì thế mà tôi nghĩ rằng đây là nguyên lý đằng sau cách Arius duy trì số lượng học sinh của mình. Tôi đã luôn thắc mắc về điều này khi còn làm sensei. Dù tất nhiên đó không phải là toàn bộ bức tranh. Vẫn có những hậu duệ của chủ tịch hội học sinh Arius, và hẳn cũng có những đứa trẻ được nhận vào thông qua các phương thức chính thống hơn. Tuy nhiên, bản thân ngôi trường thực tế là một sự tồn tại bất thường.</p><p id="8">Tạm bỏ qua chuyện này. Ba năm qua, tôi cũng không hẳn là nhàn rỗi. Ngày nào tôi cũng chuyên tâm thu thập thông tin. Và từ đó cố gắng ghép các manh mối lại với nhau từng chút một.</p><p id="9">Ngay lúc tôi đang ngẫm lại thông tin trong đầu, một người phụ nữ tóc đỏ chào tôi.</p><p id="10">"…hửm. Chào buổi sáng, Suou."</p><p id="11">"…chào buổi sáng, Hiro-san."</p><p id="12">À phải ha—cũng lâu lắm rồi, để tôi giới thiệu bản thân lại cái nhé. Tôi là Naitou Sei, bây giờ có tên là Kirihana Suou. Dễ thương lắm đúng không? Vâng... đó là tên con gái. Con mẹ cuộc đời.</p><p id="13">Và người này là Saeki Hiro-san, người phụ nữ đã nhận nuôi tôi. Cái tức cười là rốt cuộc tên cô ấy lại gần như trùng lặp với biệt danh tạm thời mà tôi đã đặt là "Hiroko-san." Cô ấy là người đã cưu mang tôi.</p><p id="14">"Mừm, con nhất quyết dùng kính ngữ đến cùng thật sao. Dì thấy cô đơn quá."</p><p id="15">"Con tôn trọng dì, Hiro-san. Chỉ vậy thôi."</p><p id="16">"…ra vậy. Suou thực sự rất trưởng thành. Thật khó tin rằng con chỉ mới ba tuổi."</p><p id="17">Tôi cứng đờ.</p><p id="18">"Cứ thế này thì dì không nghĩ mình sẽ phải lo lắng, kể cả khi đã rời đi."</p><p id="19">"…"</p><p id="20">…ba tuổi. Độ tuổi tốt nghiệp lớp mẫu giáo.</p><p id="21">Và hôm nay, ngay sáng nay, là ngày Hiro-san rời đi. Tôi chỉ mới được gọi cô ấy là Hiro-san cách đây không lâu.</p><p id="22">Tôi đã rất ngạc nhiên khi Trường Chi Nhánh Arius thế mà cũng có hệ thống cấp học. Tuy nhiên, tốt nghiệp rồi thì sao? Học sinh sẽ đi về đâu, một khi rời khỏi thành phố học viện của thế giới này? Tôi quá sợ hãi để hỏi.</p><p id="23">Tuy nhiên, những học sinh quá mười tám tuổi vẫn sở hữu Halo đã xuất hiện trong trò chơi. Điều đó có nghĩa là không phải tất cả bọn họ đều rời khỏi Kivotos... có lẽ vậy.</p><p id="24">"…Hiro-san, dì định đi đâu vậy?"</p><p id="25">"Dì á? Dì dự định chuyển tới công tác ở một trường mẫu giáo. Vẫn ở trong Kivotos. Ai biết được, biết đâu sẽ có ngày chúng ta gặp lại nhau."</p><p id="26">"…! Thật sao ạ?!"</p><p id="27">"Đúng vậy. Đánh nhau... không phải là thứ dì giỏi hay yêu thích. Thành thật mà nói, dì không quan tâm đến mối thù của Arius. Đơn thuần là không hứng thú… dù dì nghĩ rằng nói điều này với con sẽ không có nhiều ý nghĩa lắm."</p><p id="28">Không, không, con hoàn toàn hiểu ý của Hiro-san.</p><p id="29">Dẫu vậy… nghe nó vẫn… thật ấm lòng.</p><p id="30">"Sao thế này? Biết dì đi nên con thấy buồn hả? Hóa ra Suou-chan cũng có những điểm dễ thương nha?"</p><p id="31">"…ừm."</p><p id="32">Tôi không thể phủ nhận điều đó.</p><p id="33">Điều này liên quan đến một trong những sự thật mà tôi đã tìm ra: tâm trí và cảm xúc của tôi đang bị kéo tụt lại do ảnh hưởng độ tuổi của cơ thể này.</p><p id="34">Ví dụ như, tôi sợ bóng tối đến nỗi không dám tin rằng mình đã từng là học sinh trung học. Đôi khi bị bỏ lại một mình, tôi sẽ không nhịn được mà oà khóc. Suy nghĩ của tôi cũng không còn hoạt động mạnh mẽ nữa. Điều gì đang xảy ra với tôi vậy?</p><p id="35">Tôi vẫn còn nhớ tất cả kiến thức và ký ức từ kiếp trước, nhưng cảm xúc và tâm lý của tôi lại gần với của một đứa trẻ hơn. Một tình huống oái oăm, theo cách nói giảm nói tránh là vậy.</p><p id="36">"Dù không có dì ở bên, con vẫn sẽ ổn thôi. Hãy mạnh mẽ, nhé con yêu?"</p><p id="37">"…vâng."</p><p id="38">Và đó cũng là lý do tại sao mà cuộc chia tay này khiến tôi cảm thấy cô đơn khủng khiếp.</p><p id="39">"Chúng ta sẽ còn gặp lại, chắc chắn thế... vậy nên đừng khóc."</p><p id="40">"Vâng...! Cảm ơn dì rất nhiều...!"</p><p id="41">Hiro-san để tôi vùi mặt vào vai cô ấy.</p><p id="42">Cô ấy đã làm nhiều điều cho tôi. Đã giúp đỡ tôi theo nhiều cách. Lý do tôi còn sống ngày hôm nay là vì cô ấy đã tìm thấy tôi vào tối hôm đó. Bởi vì cô ấy đã đón tôi về nhà nuôi nấng. Tôi sẽ không bao giờ có thể trả hết món nợ cả đời này.</p><p id="43">"…gặp lại sau nhé Suou."</p><p id="44">"…nhất định! Một ngày nào đó, ở một nơi nào đó!" </p><p id="45">"…ừm."</p><p id="46">Hiro-san xoa đầu tôi lần cuối, và sau đó rời khỏi Trường Chi Nhánh Arius.</p><p id="47">Bơ vơ. Tôi cô đơn trong đau đớn. Nhưng ít ra tôi cũng cảm thấy nhẹ nhõm chút ít... bởi Hiro-san đã kịp thời rời khỏi nơi này trước khi ả ta đến.</p><p id="48">•</p><p id="49">Sau khi chia tay Hiro-san, tôi ngồi trên giường của phòng ký túc xá được phân cho mình mình mà suy nghĩ.</p><p id="50">Sự thật thứ hai mà tôi đã tìm ra: Beatrice vẫn chưa đến Trường Chi Nhánh Arius.</p><p id="51">Trên thực tế, cuộc nội chiến thậm chí còn chưa bắt đầu. Điều đó cho thấy rằng, sự căng thẳng trong không khí vốn đã tồn tại từ lâu, từng chút từng chút một tích lũy—như thể chỉ là vấn đề thời gian trước khi bong bóng vỡ ra.</p><p id="52">Điều đó có nghĩa là, vẫn còn hơn mười năm nữa trước khi câu chuyện chính bắt đầu. Chính xác hơn... mười bốn hoặc mười lăm năm.</p><p id="53">Làm sao tôi biết ư? Bởi vì tôi đã bí mật nhìn trộm một vài tài liệu trong trường cách đây không lâu. Thành thật mà nói, tôi nghĩ mình đã làm khá tốt so với một cơ thể ba tuổi.</p><p id="54">Và trong những tài liệu đó, tôi tìm thấy cái tên "Hakari Atsuko"[note85107]. Việc tôi cần làm chỉ là tính tuổi của cô ấy và lấy mười năm trừ đi. Bởi vì thời gian chính xác của câu chuyện chính không rõ ràng nên tôi đã cho nó sai số khoảng một năm.</p><p id="55">Thật mạo hiểm, tôi biết chứ, nhưng tôi thà tự mình băng qua cây cầu nguy hiểm đó trước khi dì Bea xuất hiện.</p><p id="56">Ở tầm tuổi này, bất quá tôi cũng chỉ bị giám sát hoặc sạc cho một trận. Nhưng nếu dì Bea đến... vâng, tôi có thể sẽ bị thanh trừng.</p><p id="57">Vì vậy, đây là lần duy nhất tôi có thể chấp nhận rủi ro.</p><p id="58">Hành động với tâm lý đó đã dẫn đến những quả ngọt này. Điều đó có nghĩa là, mãi đến khi tôi vào năm hai trung học, câu chuyện chính mới bắt đầu.</p><p id="59">"Tuyệt đối game rác...!"</p><p id="60">Ý là, ôi thôi nào! Chỉ trong vỏn vẹn ba hoặc bốn năm nữa, cuộc nội chiến sẽ nổ ra! Trong bốn hoặc năm năm sau nữa, chương trình tẩy não của dì Bea sẽ được ban hành! Sau đó là đến cuộc đột kích Trinity! Sau nữa là cuộc tấn công lễ ký kết Hiệp Ước Eden! Và cuối cùng là dự án "Màu Sắc" mà dì Bea dày công chuẩn bị!</p><p id="61">Đứa nào viết truyện chơi ác thế, rồi sao người ta sống?! Bé chỉ mới ba tuổi!</p><p id="62">"Haaa..."</p><p id="63">Nhưng tôi đã kịp ngăn mình chạy trốn và bắt đầu suy nghĩ lại.</p><p id="64">"…về mặt kỹ thuật, mình có thể bỏ chạy."</p><p id="65">Sự thật thứ ba mà tôi đã tìm ra: trước khi dì Bea đến, trường học không chỉ có những kẻ cực đoan bạo lực. Vẫn còn rất nhiều sinh viên ôn hòa.</p><p id="66">Và đó có lẽ là nguyên nhân thực sự của cuộc nội chiến.</p><p id="67">Học sinh mang mối hận thù cha truyền con nối sinh sống trong cùng một không gian với những học sinh muốn sống cho hiện tại. Mồi lửa được châm, cuộc chiến nổ ra, dì Bea xuất hiện, và mọi chuyện kết thúc. Đó có lẽ là cách nó sẽ diễn ra.</p><p id="68">Tuy nhiên, ngay bây giờ, nó vẫn chưa phải là kiểu học viện bạo lực mà về cơ bản chỉ thông hành một luật là "không chấp nhận ngoại tộc, và kẻ cố rời đi sẽ bị giết". Nhờ vậy mà tôi vẫn sống khá ổn.</p><p id="69">…nhưng nếu tôi chọn rời đi—</p><p id="70">"Mình sẽ bỏ rơi họ..."</p><p id="71">Các thành viên của Biệt Đội Arius[note85110]. Ba người từ Tea Party[note85111].</p><p id="72">Bọn họ rồi sẽ được cứu kể cả khi không có tôi. Bởi Sensei[note85108] từ Schale[note85109].</p><p id="73"><strong> </strong></p><p id="74">Không sao cả. Tôi không đủ kiêu ngạo để nghĩ rằng mình có thể làm được những gì Sensei đã làm.</p><p id="75">Cơ mà... kể cả khi sự cứu rỗi được đảm bảo, họ vẫn sẽ đau khổ. Hết lần này đến lần khác, trong một thời gian dài.</p><p id="76">Và không chỉ họ. Những học sinh ở độ tuổi của tôi ngay bây giờ... họ có lẽ sẽ bị nuốt chửng bởi hận thù. Họ sẽ tiếp tục sống dưới nền giáo dục của dì Bea.</p><p id="77">"Mình không thích như vậy..."</p><p id="78">Rốt cuộc cũng chỉ là một cuộc đấu tranh cảm xúc.</p><p id="79">Có lẽ tôi có thể làm gì đó. Có lẽ tôi có thể giúp đỡ, dù chỉ một chút.</p><p id="80">Nghĩ vậy, tôi không thể bỏ trốn một mình. Biết điều gì sắp xảy đến, ngồi yên nhìn người khác đau khổ vì sự thiếu hành động của mình... không, tôi không thích như vậy.</p><p id="81">Bởi nếu làm vậy, tôi sẽ căm ghét chính mình mất.</p><p id="82">"…mình nên làm gì bây giờ."</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note85107"><a href="#anchor-note85107" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note85107" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Vann: công chúa của Arius

<img src="https://i.redd.it/mreay7k62x391.png" alt="”atsuko”"></span></div><span class="note-content_real long-text">Vann: công chúa của Arius

<img src="https://i.redd.it/mreay7k62x391.png" alt="”atsuko”"></span></div>
                                                    <div style="margin-bottom: 20px;" id="note85108"><a href="#anchor-note85108" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note85108" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Vann: Sensei

ー Một "người lớn" làm việc tại Schale, một tổ chức ngoài pháp luật.

ー Mặc dù được gọi là "giáo viên", nhưng nhà giáo này không thực sự đứng lớp dạy học mà chủ yếu đóng vai trò cố vấn chuyên khắc phục sự cố đa năng.

ー Các trường đều có giáo viên túc trực  thường xuyên, nhưng "Sensei" chỉ đề cập đến một người này (hay nói cách khác là chính người chơi).</span></div><span class="note-content_real long-text">Vann: Sensei

ー Một "người lớn" làm việc tại Schale, một tổ chức ngoài pháp luật.

ー Mặc dù được gọi là "giáo viên", nhưng nhà giáo này không thực sự đứng lớp dạy học mà chủ yếu đóng vai trò cố vấn chuyên khắc phục sự cố đa năng.

ー Các trường đều có giáo viên túc trực  thường xuyên, nhưng "Sensei" chỉ đề cập đến một người này (hay nói cách khác là chính người chơi).</span></div>
                                                    <div style="margin-bottom: 20px;" id="note85109"><a href="#anchor-note85109" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note85109" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Vann: Schale

ー Nơi làm việc của Sensei.

ー Với sự giúp đỡ của học sinh, tổ chức giải quyết nhiều vấn đề khác nhau trên khắp Kivotos.
<img src="https://static.wikia.nocookie.net/blue-archive/images/7/75/Main_Office_Night_1.png/revision/latest/scale-to-width-down/250?cb=20210821141337" alt="”schale”"></span></div><span class="note-content_real long-text">Vann: Schale

ー Nơi làm việc của Sensei.

ー Với sự giúp đỡ của học sinh, tổ chức giải quyết nhiều vấn đề khác nhau trên khắp Kivotos.
<img src="https://static.wikia.nocookie.net/blue-archive/images/7/75/Main_Office_Night_1.png/revision/latest/scale-to-width-down/250?cb=20210821141337" alt="”schale”"></span></div>
                                                    <div style="margin-bottom: 20px;" id="note85110"><a href="#anchor-note85110" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note85110" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Vann: Biệt đội Arius
ー Đơn vị tinh nhuệ bốn người từ Trường Chi Nhánh Arius. Khi đề cập đến "Arius", người ta thường nghĩ ngay đến những cô gái này.
<img src="https://static.wikia.nocookie.net/blue-archive/images/8/85/Arius_Squad_1.png/revision/latest/scale-to-width-down/1200?cb=20221002202234" alt="”arius"></span></div><span class="note-content_real long-text">Vann: Biệt đội Arius
ー Đơn vị tinh nhuệ bốn người từ Trường Chi Nhánh Arius. Khi đề cập đến "Arius", người ta thường nghĩ ngay đến những cô gái này.
<img src="https://static.wikia.nocookie.net/blue-archive/images/8/85/Arius_Squad_1.png/revision/latest/scale-to-width-down/1200?cb=20221002202234" alt="”arius"></span></div>
                                                    <div style="margin-bottom: 20px;" id="note85111"><a href="#anchor-note85111" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note85111" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Vann: 
<img src="https://static.tvtropes.org/pmwiki/pub/images/tea_party_2.jpg" alt="tp"></span></div><span class="note-content_real long-text">Vann: 
<img src="https://static.tvtropes.org/pmwiki/pub/images/tea_party_2.jpg" alt="tp"></span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271444-2-luan-hoi-a-ha-khong-chuyen-gioi-thi-dung-hon" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271454-4-be-gai-dang-di-dao-thi-dinh-dan-lac" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(11)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">11 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3119314"
    class="ln-comment-item mt-3 clear"
    data-comment="3119314" 
    data-parent="3119314" 
    data-type="chapter" 
    data-typeid="271449">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u224745-d3509dcf-4be6-4fe7-935e-284ebe11e310.gif" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/224745">Vane&#039;s Vanguard</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        <em><strong>toi yeu loli gender bender</strong></em>🗣️🔥🔥<br>
<strong><em>toi yeu loli gender bender</em></strong>🗣️🔥🔥<br>
<strong><em>toi yeu loli gender bender</em></strong>🗣️🔥🔥<br>
<strong><em>toi yeu loli gender bender</em></strong>🗣️🔥🔥<br>
<strong><em>toi yeu loli gender bender</em></strong>🗣️🔥🔥
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271449-3-thuc-tai-luon-la-mot-tro-choi-te-hai?comment_id=3119314#ln-comment-3119314"
                            class="text-slate-500">
                            <time class="timeago" title="09-12-2025 20:51:18"
                                datetime="2025-12-09T20:51:18+07:00">
                                09-12-2025 20:51:18
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

        <div class="ln-comment-reply">
            <div id="ln-comment-3119781"
    class="ln-comment-item mt-3 clear"
    data-comment="3119781" 
    data-parent="3119314" 
    data-type="chapter" 
    data-typeid="271449">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u66934-4ee874a2-08f6-4de7-a286-fee062777b08.gif" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/66934">Vannesith</a>
    </div>
                        <div class="self-center">
                <div
                    class="flex gap-1 rounded-sm shadow-[inset_0px_0px_0px_2px_#E63950] dark:bg-[#E63950]/50 px-1.5 py-0.5 align-middle text-[10px] font-bold text-[#E63950] dark:text-[#FDCB02]">
                    <img class="my-auto h-[14px]" src="/img/badge/owner.png" />
                    <div class="leading-4">CHỦ THỚT</div>
                </div>
            </div>
                                    <div class="self-center">
            <div
                class="flex gap-1 rounded-sm bg-[#49d0b2]/50 dark:bg-[#36a189]/50 px-1.5 py-0.5 align-middle text-[10px] font-bold text-[#36a189] dark:text-[#eaeaea]">
                <img class="my-auto h-[14px]" src="/img/badge/trans5.png" />
                <div class="leading-4">TRANS</div>
            </div>
        </div>
        </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        <strong><em>toi cung yeu loli gender bender</em></strong>🗣️🔥🔥
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271449-3-thuc-tai-luon-la-mot-tro-choi-te-hai?comment_id=3119314&amp;reply_id=3119781#ln-comment-3119781"
                            class="text-slate-500">
                            <time class="timeago" title="10-12-2025 07:44:05"
                                datetime="2025-12-10T07:44:05+07:00">
                                10-12-2025 07:44:05
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">2</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>
            <div id="ln-comment-3119905"
    class="ln-comment-item mt-3 clear"
    data-comment="3119905" 
    data-parent="3119314" 
    data-type="chapter" 
    data-typeid="271449">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u173921-fd5fdc5d-2e05-44a6-930b-e7ab1d8051d3.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/173921">Mocchauxanh2</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        <a href="/thanh-vien/66934">@Vannesith:</a> <strong>toi yeu <em>gender bender nhung ko yeu loli 🐧</em></strong>
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24246-a-ts-reincarnated-student-who-just-tries-her-best/c271449-3-thuc-tai-luon-la-mot-tro-choi-te-hai?comment_id=3119314&amp;reply_id=3119905#ln-comment-3119905"
                            class="text-slate-500">
                            <time class="timeago" title="10-12-2025 11:07:23"
                                datetime="2025-12-10T11:07:23+07:00">
                                10-12-2025 11:07:23
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>
    
                <div class="fetch_reply" data-parent="3119314">
            Xem thêm 8 trả lời <i class="fas fa-chevron-down" style="margin-left: 4px;"></i>
        </div>
        <img class="loading" src="/img/loading.svg" style="width: auto; height: 15px; margin-left: 10px; display: none">
                
    </div>
    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'BBnkB6nGYrMh6KiQnJ70Bcz8OW2NdHSAEGkJCquL';
        var comment_type = 'chapter';
        var comment_typeid = '271449';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'BBnkB6nGYrMh6KiQnJ70Bcz8OW2NdHSAEGkJCquL';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24246');
    chapter_id = parseInt('271449');

    readingObject = {
        series_id: series_id,
        series_title: 'A TS Reincarnated Student Who Just Tries her Best',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="BBnkB6nGYrMh6KiQnJ70Bcz8OW2NdHSAEGkJCquL" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="//spicewaxworks.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
