<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Chú thuật sư không thể trở thành Dũng Giả - Chap 130 - Pháo đài Goma - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Ngày hôm đó, do sự xuất hiện của một sự kiện dị thường chưa từng diễn ra, 41 học sinh lớp 2-7 từ Cao trung Hakurei đã được triệu hồi tới thế giới khác, một dị giới đầy ma thuật. Bị chia cách và xuất hiện bên trong dungeon rộng...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="bCKZhsOd3gKFKgyOOLGaQ005TERhN5SJnLVBCqhj">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294689-chap-130-phao-dai-goma">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s15008-1aaef4a3-9653-4ece-be8d-6e00554de69a.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294685-chap-129-quan-the-di-tich-trong-rung-ram"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294781-chap-131-tran-chien-tai-phao-dai-goma"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294689-chap-130-phao-dai-goma" style="background: url('https://i.hako.vn/ln/series/covers/s15008-1aaef4a3-9653-4ece-be8d-6e00554de69a.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai">Chú thuật sư không thể tr...</a></h5>
                    <small><i class="fas fa-pen"></i>Hishikage Dairi</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c290627-bang-diem-danh-hoc-vien-hakurei-nam-2-lop-7">Chương 1: Học viện Hakurei, Năm 2 Lớp 7</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c289522-chap-7-nhung-cuoc-tham-hiem-dungeon-dau-tien">Chương 2: Lợn</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c289722-chap-15-vo-ky">Chương 3 - Thuốc</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c289833-chap-25-no-hoa">Chương 4: Mãnh khuyển hai đầu</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c290629-bang-diem-danh-hoc-vien-hakurei-nam-2-lop-7-2">Chương 5 - Tổ đội Harem tồi tệ nhất</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai">Chương 6 - Kẻ ăn thịt người</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c292180-chap-70">Chương 7 - Sát nhân</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c293122-chap-89-tendou-ryuichi-1">Chương 8 - Quyền lực của Vua</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c293712-chap-103-himeno-airi">Chương 9 - Mê hoặc</a></li>
                                        
                                                            <li class="current"><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/t35914-chuong-10-ao-anh">Chương 10 - Ảo ảnh</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294685-chap-129-quan-the-di-tich-trong-rung-ram">
                                                                        Chap 129 - Quần thể di tích trong rừng rậm
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294689-chap-130-phao-dai-goma">
                                                                        Chap 130 - Pháo đài Goma
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294781-chap-131-tran-chien-tai-phao-dai-goma">
                                                                        Chap 131 - Trận chiến tại Pháo đài Goma
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294936-chap-132-thanh-am-da-nghe">
                                                                        Chap 132 - Thanh âm đã nghe
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Chương 10 - Ảo ảnh</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chap 130 - Pháo đài Goma</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294689-chap-130-phao-dai-goma#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,611 từ - Cập nhật: 
                        <time class="topic-time timeago" title="21-01-2026 18:24:00" datetime="2026-01-21T18:24:00+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chap 130 - Pháo đài Goma</p>
                    <p id="1">Ba ngày đã trôi qua kể từ khi chúng tôi bắt đầu tiến sâu vào khu rừng rậm. Những tàn tích nằm rải rác quanh đây có lẽ là một phần của Dungeon, nhưng chúng tôi mãi chẳng tìm được Quảng Trường Tinh Linh ở vị trí thuận lợi như trước. Vì thế, đêm đầu tiên và đêm thứ hai, cả nhóm phải thay phiên nhau canh gác và ngủ tạm trong những tàn tích ngẫu nhiên. Đến hôm nay, ngày thứ ba, may mắn thay, nhờ trực giác của Natsukawa-san, chúng tôi đã tìm thấy một Quảng Trường Tinh Linh nằm sâu bên trong một di tích đổ nát.</p><p id="2">Đêm thứ ba ấy, ai nấy đều thấm thía sâu sắc rằng cảm giác an toàn mà Quảng Trường Tinh Linh mang lại to lớn đến nhường nào. Dù hai đêm trước có cắt cử người canh gác cẩn mật đến đâu, cũng chẳng ai dám buông lỏng cảnh giác mà ngủ ngon giấc. Bản thân tôi dù đã có kinh nghiệm ngủ rừng nhiều lần, nhưng vẫn phải thừa nhận sự mệt mỏi về tinh thần do lúc nào cũng phải căng như dây đàn.</p><p id="3">Trong tình cảnh này, việc không chạm trán với quái vật hùng mạnh nào quả là may mắn. Thú thật, tôi đã luôn thầm lo ngại con rồng bay trên trời kia sẽ ngẫu hứng lao xuống tấn công bất cứ lúc nào. Rốt cuộc, kể từ lần đầu tiên nhìn thấy, chúng tôi chưa gặp lại con rồng đó thêm lần nào nữa. Là do tình cờ, hay nó mất nhiều ngày để bay tuần tra hết lãnh thổ của mình? Thông tin về rồng không có trong email của Ma pháp trận, nên đến giờ sức mạnh và đặc tính sinh thái của nó vẫn là một ẩn số.</p><p id="4">Kết quả là, chúng tôi vẫn bình an vô sự tiến đến tận đây sau khi hạ gục đám quái vật trong rừng một cách thuận lợi. Càng đi sâu, có lẽ do đang đến gần sào huyệt của quân đoàn Goma, tỉ lệ đụng độ với chúng tăng lên rõ rệt. Ngược lại, các loài quái vật khác lại vắng bóng. Có lẽ nên xem khu vực này hoàn toàn là lãnh địa của lũ Goma.</p><p id="5">Dù đánh nhau với Goma và Govu mãi cũng chán, nhưng chúng tôi lại có một thu hoạch đáng kể.</p><p id="6">Đó là phát hiện ra 『Đá Ma thuật』.</p><p id="7">Đá Ma thuật là một loại kết tinh ma lực, khác biệt với Lõi. Về cơ bản, chúng được chia theo các thuộc tính như Lửa, Nước, Gió... khi chịu tác động vật lý hoặc được truyền ma lực vào, thuộc tính chứa trong đó sẽ phản ứng. Ví dụ, nếu đập vào viên Đá Ma thuật hệ Lửa, ngọn lửa sẽ bùng lên.</p><p id="8">Bọn Govu, những chiến binh tinh nhuệ của loài Goma, phần lớn đều sử dụng vũ khí ma thuật có cấu tạo đơn giản gắn loại đá này. Chủ yếu chúng dùng làm đầu mũi tên để bắn ra lửa hoặc sét. Thỉnh thoảng cũng có tên gắn Đá Ma thuật lên đầu ngọn thương.</p><p id="9">Theo thông tin từ email của Ma pháp trận, Đá Ma thuật không thể thay thế cho Lõi, nhưng với chúng tôi, nó lại có giá trị sử dụng riêng.</p><p id="10">“Có đống này thì tha hồ luyện tập rồi!”</p><p id="11">Đứng trước vô số viên Đá Ma thuật tỏa sáng lấp lánh như ngọc quý đủ màu, Takanashi-san hừng hực khí thế.</p><p id="12">Có vẻ cô ấy định dùng số Đá Ma thuật này làm nguyên liệu để luyện thành vũ khí ma thuật.</p><p id="13">Trước đây, để tạo ra vũ khí ma thuật cần phải có nguyên liệu từ quái vật mang thuộc tính tương ứng. Nếu có thể chế tạo tương tự bằng Đá Ma thuật, hoặc cường hóa vũ khí hiện có, thì sẽ hữu ích vô cùng.</p><p id="14">“...Xin lỗi nhé, tớ thất bại rồi.”</p><p id="15">Tuy nhiên, mọi chuyện không suôn sẻ như vậy. Cô ấy định dùng kiếm sắt và Đá Ma thuật Lửa để tạo ra Kiếm Lửa, nhưng thành phẩm lại là một thanh kiếm mà lưỡi của nó chỉ hơi ấm lên một chút.</p><p id="16">Có vẻ như một hai viên Đá Ma thuật thì không tạo ra hiệu quả gì đáng kể. Nếu không phải là viên đá lớn hơn hoặc có độ tinh khiết cao hơn, e rằng khó mà phát huy uy lực ở mức thực chiến.</p><p id="17">Nhưng khi thử bỏ vào một lượng lớn Đá Ma thuật nhỏ, thì quá trình luyện thành lại thất bại. Có lẽ trình độ của Takanashi-san hiện tại chưa đủ để xử lý lượng ma lực cao đến thế.</p><p id="18">Dù rất kỳ vọng vào việc lên cấp sau này... nhưng dẫu không tạo ra vũ khí chiến đấu ngay lập tức, một khả năng khác lại mở ra.</p><p id="19">“Hưm, xong rồi!”</p><p id="20">Thứ được sinh ra sau vô số sản phẩm thất bại là một vật phẩm ma thuật.</p><p id="21">“Cậu luyện thành cái này chỉ bằng Đá Ma thuật thôi sao?”</p><p id="22">“Trông nó như một chiếc nhẫn màu đỏ ấy nhỉ.”</p><p id="23">Sản phẩm thử nghiệm đầu tiên là một chiếc nhẫn đỏ rực được làm hoàn toàn từ Đá Ma thuật Lửa. Cảm giác như viên đá kết tinh đỏ thẫm trong suốt tựa hồng ngọc ấy được uốn nguyên khối thành hình chiếc nhẫn vậy.</p><p id="24">“Ừm, đeo cái này vào thì có thể bắn ra một chút lửa đấy!”</p><p id="25">Ngay lập tức, Takanashi-san đeo chiếc nhẫn vào ngón tay nhỏ nhắn của mình và thực hành luôn.</p><p id="26">“Haaaa... Fire!”</p><p id="27">Cùng với tiếng hô đầy khí thế, một ngọn lửa nhỏ xíu phụt lên ở đầu ngón tay. Kích thước chỉ cỡ ngọn lửa nến, cảm giác như thổi mạnh một cái là tắt ngúm.</p><p id="28">Ừm... Cùi bắp hơn tôi tưởng.</p><p id="29">“Tớ đặt tên nó là 『Chakka Ring』! Fufu, thấy sao? Kotori có giỏi không?”</p><p id="30">Trước một Takanashi-san đang tự tin tràn trề, tôi nghẹn lời trong giây lát. Sakura cũng giữ im lặng, ánh mắt cứ liếc sang tôi cầu cứu. Này, đừng có hễ gặp chuyện khó xử là lại dựa dẫm vào anh trai thế chứ.</p><p id="31">“À ừm, cái đó...”</p><p id="32">“Gì chứ, có gì to tát đâu. Cỡ đó thì dùng cái bật lửa là xong mà.”</p><p id="33">Asuna, người đang đứng xem cùng, đã đưa ra lời nhận xét thẳng thắn không kiêng nể của một đứa bạn thân.</p><p id="34">“Hứ, Asuna-chan là đồ ngốc!”</p><p id="35">Dù Takanashi-san có phụng phịu, nhưng đúng là vạn sự khởi đầu nan, nhờ việc luyện thành chiếc 『Chakka Ring』 với hỏa lực ngang cái bật lửa này, cô ấy đã học được một ma pháp mới.</p><p id="36">『Ma Đạo Luyện Thành Trận』: Khắc ghi thuật thức vào quá trình luyện thành cơ bản bằng chính ma lực của bản thân. Khởi đầu của sự truy cầu ma đạo vĩnh hằng.</p><p id="37">Nhờ 『Ma Đạo Luyện Thành Trận』 này, việc luyện thành vốn dĩ cho ra kết quả gần như ngẫu nhiên trước đây, giờ đã có thể kiểm soát hình dáng và hiệu quả theo ý muốn ở một mức độ nào đó. Tuy nhiên, do độ thành thục của chính Takanashi-san chưa đủ, nên việc tạo ra hiệu ứng ma thuật mạnh mẽ vẫn còn khó khăn. Có lẽ phải đợi một thời gian nữa mới có thể mong đợi sự cường hóa vượt bậc so với việc luyện thành vũ khí trước đây.</p><p id="38">Thế nhưng, Takanashi-san đã phát hiện ra một công dụng đáng kinh ngạc của 『Ma Đạo Luyện Thành Trận』.</p><p id="39">“Mufufu, đố biết cái này là gì nàooo?”</p><p id="40">Lại một lần nữa, với vẻ mặt đắc ý tràn đầy tự tin, Takanashi-san giới thiệu tác phẩm tiếp theo.</p><p id="41">“Ờ thì, tớ chỉ thấy nó giống cái điện thoại thông minh thôi.”</p><p id="42">Tôi trả lời đúng những gì mình thấy. Bởi vì thứ cô ấy đang cầm trên tay, nhìn kiểu gì cũng chỉ là một chiếc smartphone. Cái điện thoại có ốp lưng hình linh vật địa phương ít tên tuổi kia chắc chắn là của Takanashi-san rồi.</p><p id="43">“Vâng, Souma-kun đoán đúng rồi! Chính xác, nó là smartphone!”</p><p id="44">“Ủa, nhưng điện thoại của Takanashi-san hình như hết pin rồi mà— khoan đã, chẳng lẽ...”</p><p id="45">Fufun, sau khi hất mũi đầy tự hào, Takanashi-san dõng dạc tuyên bố.</p><p id="46">“Không ngờ nha, khi luyện thành Đá Ma thuật Sét, tớ có thể sạc pin cho điện thoại đấyyyy!”</p><p id="47">“Ồ...”</p><p id="48">Tôi buột miệng trầm trồ thán phục. Giống như tôi, các thành viên khác cũng thấy chuyện này thật sự lợi hại và nhìn chằm chằm đầy thích thú.</p><p id="49">Kể từ khi lạc vào Dungeon dị giới không có điện đóm này, tôi đã nghĩ sẽ chẳng bao giờ sạc được điện thoại nữa nên đã tắt nguồn để dành phòng khi bất trắc, ai ngờ lại có thể sạc được thế này.</p><p id="50">“Chỉ với một mảnh Đá Ma thuật nhỏ xíu thế này thôi là đầy pin luôn!”</p><p id="51">Quả thật, biểu tượng pin trên màn hình điện thoại đang báo đầy.</p><p id="52">Đá Ma thuật Sét chúng tôi thu được cả đống từ những mũi tên của bọn Govu. Chỉ tính số lượng đang có thôi cũng đủ sạc đầy điện thoại cho cả nhóm nhiều lần.</p><p id="53">“Thế này là tha hồ dùng điện thoại! Tha hồ gọi điện luôn nhé!”</p><p id="54">“Không đâu Takanashi-san, gọi điện thì chịu đấy.”</p><p id="55">“Hả?”</p><p id="56">Dáng vẻ tròn mắt ngạc nhiên kiểu “sao lại thế được” của Takanashi-san trông rất dễ thương, nhưng thú thật, tôi thấy rùng mình trước suy nghĩ ngây thơ của cô ấy rằng chỉ cần điện thoại lên nguồn là sẽ gọi được.</p><p id="57">“Tại vì, muốn gọi điện thì phải—”</p><p id="58">Pirururu!</p><p id="59">Một tiếng chuông điện thoại vang lên inh ỏi cắt ngang lời tôi.</p><p id="60">“Nii-san, hình như máy của anh đang reo kìa?”</p><p id="61">“Eeeh!?”</p><p id="62">Người phải tròn mắt ngạc nhiên “sao lại thế được” lúc này lại là tôi.</p><p id="63">Điện thoại tôi vẫn tắt nguồn và theo thói quen cứ nhét trong túi áo đồng phục. Nhưng chẳng cần Sakura nhắc, chiếc điện thoại của tôi đang đổ chuông đầy khí thế. Tôi còn cảm nhận rõ nó đang rung bần bật trong túi.</p><p id="64">“Đ... Đùa sao, liên lạc được thật á?”</p><p id="65">Tôi run run lấy nó ra, trên màn hình sáng trưng hiện lên cái tên to tướng: Takanashi Kotori.</p><p id="66">“...A lô.”</p><p id="67">“A lô, Souma-kun! Kotori đâyyy!”</p><p id="68">Ờ, biết rồi. Cậu đang cười tươi rói nói chuyện vào điện thoại ngay trước mặt tớ đây này.</p><p id="69">Giọng của Takanashi-san vang lên trực tiếp bên ngoài, nhưng tai tôi cũng nghe rõ mồn một giọng cô ấy phát ra từ loa điện thoại.</p><p id="70">Thông rồi. Không còn nghi ngờ gì nữa, tôi buộc phải thừa nhận rằng điện thoại của tôi và cô ấy đang kết nối với nhau.</p><p id="71">“Chuyện quái gì đang diễn ra thế này...”</p><p id="72">“Có khi nào... niềm tin mãnh liệt của Kotori đã được tích hợp vào điện thoại dưới dạng ma thuật không nhỉ?”</p><p id="73">Lớp trưởng nghiêm túc trả lời thắc mắc của tôi.</p><p id="74">“Không, nhưng mà, mọi chuyện có thể diễn ra thuận lợi một cách vô lý thế sao?”</p><p id="75">“Vậy cậu thấy thuyết phục hơn nếu bảo rằng trong Dungeon này có trạm phát sóng vô tuyến à?”</p><p id="76">Đó là chuyện hiển nhiên, khi dùng điện thoại di động hay smartphone để gọi điện, nhắn tin, các thiết bị không kết nối trực tiếp với nhau bằng sóng vô tuyến. Dù có gọi cho người ngay trước mặt, tín hiệu từ máy này vẫn phải bay đến trạm thu phát sóng gần nhất, rồi từ đó mới chuyển đến máy của đối phương. Khoảng cách giữa hai người không quan trọng.</p><p id="77">Thứ trao đổi sóng trực tiếp với nhau là bộ đàm.</p><p id="78">“Được rồi, cứ coi như đó là ma thuật của Hiền nhân đi.”</p><p id="79">“Ừ, tốt nhất cứ để Kotori hiểu lầm như thế. Nếu giải thích cặn kẽ, lỡ cô ấy hiểu ra thì ma pháp có khi lại mất tác dụng.”</p><p id="80">Vậy là việc thấu hiểu, chấp nhận và thống nhất lời khai đã xong.</p><p id="81">“Tuyệt quá Takanashi-san! Thế này là liên lạc được với mọi người rồi! Cậu sạc giúp điện thoại cho mọi người luôn được không?”</p><p id="82">“Ừ, cứ giao cho 『Hiền nhân』 Takanashi Kotori này!”</p><p id="83">Và thế là, chúng tôi đã có trong tay những chiếc smartphone ma thuật.</p><p id="84">Takanashi-san dùng 『Ma Đạo Luyện Thành Trận』 để sạc pin. Điểm mấu chốt ở đây có lẽ là suy nghĩ của chính cô ấy: “Sạc xong là sẽ liên lạc được”. Ý nghĩ mạnh mẽ tựa như lời cầu nguyện đó đã vô thức khắc ghi ma pháp lên chiếc điện thoại.</p><p id="85">Thật sự chỉ cần thế mà cũng được sao? Dù vẫn bán tín bán nghi, nhưng sau khi kiểm chứng việc tất cả điện thoại đều có thể gọi điện, gửi mail và dùng mạng xã hội nội bộ mà không gặp trở ngại gì, chúng tôi không còn cách nào khác ngoài việc tin vào hiệu quả của nó.</p><p id="86">“Ưm, nhưng mà không vào mạng được, cũng không gọi được cho người khác nhỉ.”</p><p id="87">“Vì đây là dị giới nên không kết nối được với thế giới cũ đâu cậu. Nhưng những người ở gần nhau thì sóng tới được nên sẽ liên lạc được đấy.”</p><p id="88">“Ra là vậy! Đúng thế nhỉ!”</p><p id="89">Lời giải thích của Lớp trưởng hoàn toàn là mô tả cơ chế của bộ đàm, củng cố thêm sự hiểu lầm của Takanashi-san. Kiến thức về công nghệ viễn thông của cô ấy thấp đến mức đáng quan ngại đối với một học sinh cấp ba, nhưng trong trường hợp này, sự thiếu hiểu biết ấy lại hóa ra hữu ích nên chắc là phải mừng thôi.</p><p id="90">Kể cả khi nó chỉ hoạt động như bộ đàm liên lạc với đồng đội ở cự ly gần, thì việc có phương tiện giao tiếp từ xa vẫn là một hiệu quả vô cùng hữu dụng. Thiên chức là 『Hiền nhân』, và chính vì là Takanashi-san, nên ma pháp smartphone kỳ diệu này mới ra đời.</p><p id="91">Thực tế, mọi người đều rất vui mừng. Chỉ trừ một người đang nắm chặt điện thoại với vẻ tiếc nuối là Futaba-san.</p><p id="92">“Biết thế mình đã trao đổi địa chỉ mail với Kotaro-kun rồi...”</p><p id="93">Nhìn cô ấy cúi gằm mặt xuống, tôi chẳng tìm được lời nào để an ủi.</p><p id="94">—</p><p id="95">Sau khi chế tạo ra 『Chakka Ring』 và smartphone ma thuật, Takanashi-san vẫn tiếp tục tận dụng Đá Ma thuật để làm ra những vật dụng ma thuật nhỏ lẻ, hay có thể gọi là Magic Item. Dường như những món có hiệu quả khủng khiếp để dùng ngay trong chiến đấu không dễ làm ra như vậy, nhưng nếu cứ tiếp tục luyện tập hàng ngày thế này, chẳng mấy chốc cô ấy sẽ có thể phát triển ra đủ loại Magic Item khác nhau.</p><p id="96">Trong khi Takanashi-san nỗ lực, chúng tôi cũng thận trọng tiến bước trong khu rừng rậm, hướng về tòa lâu đài của lũ Goma, nơi được cho là có Ma pháp trận Dịch chuyển tiếp theo.</p><p id="97">“——Wawa, thấy rồi! Có thật này, sào huyệt của bọn Goma!”</p><p id="98">Natsukawa-san mang thiên chức 『Đạo tặc』 luôn đi tiên phong, cuối cùng cũng phát hiện ra nơi ở của lũ Goma. Chúng tôi thận trọng bám theo sau, và phía trước quả nhiên là nơi sinh sống của chúng.</p><p id="99">Trông nó không giống tòa lâu đài mục tiêu, mà chỉ như một ngôi làng nhỏ.</p><p id="100">Goma không phải loại quái vật tự nhiên sinh ra từ Dungeon như Skeleton. Tôi đã dự đoán từ trước là chắc chắn chúng phải có sào huyệt ở đâu đó, nhưng đây là lần đầu tiên được tận mắt chứng kiến.</p><p id="101">“Gọi là làng thì đúng hơn là sào huyệt nhỉ.”</p><p id="102">“Đúng vậy. Có vẻ chúng có trí thông minh tối thiểu để xây dựng kiến trúc.”</p><p id="103">Nằm giữa khu rừng rậm rạp cây cối um tùm, đây là một khoảng đất trống được khai quang rõ rệt. Những túp lều dựng bằng vải thô bẩn thỉu nằm san sát nhau chật ních.</p><p id="104">Xung quanh còn được bao bọc bởi hàng rào gỗ tuy thô kệch nhưng chắc chắn, làm từ những cọc gỗ cắm xuống đất và cố định bằng dây leo.</p><p id="105">“Nii-san, tính sao đây?”</p><p id="106">“Bọn chúng chưa phát hiện ra ta, có thể tập kích được đấy.”</p><p id="107">Goma không phải là quái vật quá đáng sợ, nhưng số lượng chúng rất đông. Nếu bị chúng bám đuổi dai dẳng thì cũng tiêu hao sức lực, tóm lại vẫn là những kẻ địch phiền toái. Đúng như Lớp trưởng nói, nếu tập kích ngay bây giờ, với sức mạnh hiện tại, chúng tôi có thể quét sạch cả làng trong chớp mắt.</p><p id="108">Tuy nhiên, khi nhìn thấy cảnh chúng ôm con cái sinh hoạt bình thường trong ngôi làng như thế kia, dù đối phương có là quái vật đi chăng nữa...</p><p id="109">“Không, bỏ qua chỗ này đi, chúng ta cần đi nhanh hơn.”</p><p id="110">“Phải đấy, tránh được những trận chiến không cần thiết thì vẫn hơn.”</p><p id="111">“Cũng đúng. Dù có mặc kệ thì chúng cũng chẳng gây ra mối đe dọa lớn nào.”</p><p id="112">Không biết họ có nhận ra cảm giác tội lỗi nho nhỏ trong tôi hay không. Nhưng dù sao thì Sakura, Lớp trưởng và các thành viên khác đều đồng ý. Chúng tôi lặng lẽ rút lui khỏi nơi đó mà không để lũ quái vật phát hiện.</p><p id="113">Những ngôi làng nhỏ như thế này có thể bỏ qua không vấn đề gì.</p><p id="114">Thứ chắc chắn sẽ chắn đường chúng tôi là tòa lâu đài có Ma pháp trận Dịch chuyển. Một khi đã đến đó, dù có Goma đàn bà hay trẻ con, việc nơi ấy biến thành chiến trường là điều không thể tránh khỏi.</p><p id="115">“...Đó là lâu đài của Goma sao?”</p><p id="116">Và rồi, sau gần một tuần ròng rã đi bộ trong rừng, cuối cùng chúng tôi cũng đến nơi.</p><p id="117">Sừng sững giữa rừng già như một ngọn núi là một kim tự tháp khổng lồ. Nó gợi nhớ đến những di tích của nền văn minh Maya.</p><p id="118">Công trình kiến trúc bằng đá khổng lồ này rõ ràng vượt quá khả năng xây dựng của loài Goma, nghĩ thế nào thì đây cũng là một phần của di tích Dungeon. Chiếc la bàn Ma pháp trận đang chỉ thẳng vào đỉnh của kim tự tháp này—và hiện tại, kim tự tháp đã biến thành một pháo đài với hàng vạn binh lính Goma đồn trú.</p><p id="119">Lấy lâu đài kim tự tháp làm trung tâm, những túp lều giống hệt cái chúng tôi thấy ở ngôi làng Goma lúc hành quân trải rộng ra một phạm vi rất lớn. Chỗ này không còn là làng nữa, phải gọi là thị trấn dưới chân lâu đài thì đúng hơn.</p><p id="120">“...Nii-san, làm thế nào bây giờ?”</p><p id="121">“Muốn công phá chỗ đó bằng biện pháp chính diện thì hơi căng đấy.”</p><p id="122">Ngay cả Sakura và Lớp trưởng cũng sa sầm mặt mày trước thị trấn Goma quy mô lớn nhường này. Chuyện này khác hoàn toàn với việc gặp quái trong Dungeon thì đánh. Lao vào đó chẳng khác nào khơi mào một cuộc chiến tranh thu nhỏ.</p><p id="123">“Nhưng muốn đi tiếp thì chỉ có cách vào đó thôi. Đây là khu rừng bên ngoài, không thể tìm đường vòng như trước đây được đâu.”</p><p id="124">“Đúng vậy! Cái tớ nhìn thấy trên bệ đá ở tháp cũng chỉ ra rằng chỉ có nơi này là có vẻ chứa Ma pháp trận Dịch chuyển thôi.”</p><p id="125">Takanashi-san khẳng định chắc nịch.</p><p id="126">Tôi nghĩ không phải là không có khả năng khác, nhưng việc chức năng bản đồ của bệ đá không hiển thị gì đồng nghĩa với việc ít nhất trong vùng này không có Ma pháp trận Dịch chuyển nào khác, cũng không có lối vào Dungeon ngầm nào.</p><p id="127">Nếu muốn tìm kiếm thì phải đi rất xa. Và dù có đi tìm, cũng chẳng có gì đảm bảo sẽ thấy.</p><p id="128">“Nhưng mà, chỗ đó thì hơi...”</p><p id="129">“Ừ, thế này là lấy ít địch nhiều rồi.”</p><p id="130">Cả Natsukawa-san và Asuna đều có vẻ không hào hứng lắm.</p><p id="131">“Ưm, chắc không sao đâu nhỉ?”</p><p id="132">Tuy nhiên, chỉ có Futaba-san là vẫn thản nhiên buông lời như mọi khi.</p><p id="133">“Futaba-san, đừng phát ngôn thiếu suy nghĩ quá—”</p><p id="134">“Thì, chỉ cần làm như mọi khi, đánh bại Boss rồi dịch chuyển đi là xong chứ gì? Đâu cần phải đánh nhau với tất cả bọn Goma ở đó, cứ xông vào nhanh gọn hạ Boss rồi chạy luôn, không được sao?”</p><p id="135">“Sao mà đơn giản thế được...”</p><p id="136">Sakura ngán ngẩm ra mặt, nhưng lời Futaba-san nói cũng có lý.</p><p id="137">“Không, rốt cuộc thì cũng chỉ còn cách đó thôi. Nếu được thì lẻn vào lâu đài mà không để chúng phát hiện, nhanh chóng hạ gục Boss, lấy Lõi. Sau đó lập tức dịch chuyển thoát thân.”</p><p id="138">“Phải ha... Chẳng còn đường nào khác, đành phải làm thôi.”</p><p id="139">Dù không mấy hào hứng, nhưng một khi đã quyết định thì mọi chuyện diễn ra rất nhanh. Mọi người chắc hẳn cũng lo lắng, nhưng tất cả đều giấu nỗi bất an vào trong, dũng cảm cầm vũ khí đứng lên.</p><p id="140">Tuy nhiên, không thể cứ thế xông vào xâm nhập ngay được. Chúng tôi cần phải thăm dò và chuẩn bị kỹ càng nhất có thể.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294685-chap-129-quan-the-di-tich-trong-rung-ram" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c294781-chap-131-tran-chien-tai-phao-dai-goma" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'bCKZhsOd3gKFKgyOOLGaQ005TERhN5SJnLVBCqhj';
        var comment_type = 'chapter';
        var comment_typeid = '294689';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'bCKZhsOd3gKFKgyOOLGaQ005TERhN5SJnLVBCqhj';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('15008');
    chapter_id = parseInt('294689');

    readingObject = {
        series_id: series_id,
        series_title: 'Chú thuật sư không thể trở thành Dũng Giả',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="bCKZhsOd3gKFKgyOOLGaQ005TERhN5SJnLVBCqhj" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
