<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Jujutsushi Wa Yuusha Ni Narenai - Chap 41 - Đầm lầy thối rữa - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Ngày hôm đó, do sự xuất hiện của một sự kiện dị thường chưa từng diễn ra, 41 học sinh lớp 2-7 từ Cao trung Hakurei đã được triệu hồi tới thế giới khác, một dị giới đầy ma thuật. Bị chia cách và xuất hiện bên trong dungeon rộng...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="472sBdrf7rW19tkxA1Tq3lKOMmzJd8mEZqMWog7k">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c291318-chap-41-dam-lay-thoi-rua">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s15008-1aaef4a3-9653-4ece-be8d-6e00554de69a.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c291303-chap-40-di-vat-va-chien-loi-pham"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c291318-chap-41-dam-lay-thoi-rua" style="background: url('https://i.hako.vn/ln/series/covers/s15008-1aaef4a3-9653-4ece-be8d-6e00554de69a.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai">Jujutsushi Wa Yuusha Ni N...</a></h5>
                    <small><i class="fas fa-pen"></i>Hishikage Dairi</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c290627-bang-diem-danh-hoc-vien-hakurei-nam-2-lop-7">Chương 1: Học viện Hakurei, Năm 2 Lớp 7</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c289522-chap-7-nhung-cuoc-tham-hiem-dungeon-dau-tien">Chương 2: Lợn</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c289722-chap-15-vo-ky">Chương 3 - Thuốc</a></li>
                                        
                                                            <li class=""><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c289833-chap-25-no-hoa">Chương 4: Mãnh khuyển hai đầu</a></li>
                                        
                                                            <li class="current"><a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/t35718-chuong-5-to-doi-harem-toi-te-nhat">Chương 5 - Tổ đội Harem tồi tệ nhất</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c290629-bang-diem-danh-hoc-vien-hakurei-nam-2-lop-7-2">
                                                                        Bảng Điểm Danh Học viện Hakurei, Năm 2 Lớp 7 (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c291303-chap-40-di-vat-va-chien-loi-pham">
                                                                        Chap 40 - Di vật và Chiến lợi phẩm
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c291318-chap-41-dam-lay-thoi-rua">
                                                                        Chap 41 - Đầm lầy thối rữa
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Chương 5 - Tổ đội Harem tồi tệ nhất</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chap 41 - Đầm lầy thối rữa</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c291318-chap-41-dam-lay-thoi-rua#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,442 từ - Cập nhật: 
                        <time class="topic-time timeago" title="16-01-2026 23:15:27" datetime="2026-01-16T23:15:27+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSe3y_bpPb6ADsKAgPWE3o3Jgzzftw8NKkp93_5vUayXLaQICg/viewform" target="_blank">
                        <img src="https://i2.hako.vip/vault/2025final_1.webp" style="width: 700px; height: auto">
                    </a>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chap 41 - Đầm lầy thối rữa</p>
                    <p id="1">“A... Ruinhilde-sama.”</p><p id="2">“Tín đồ của ta, Momokawa Kotarou. Có vẻ như ngươi đã thực sự phát triển lời nguyền, dù chỉ là một chút.”</p><p id="3">“C-Cảm ơn... ngài ạ...”</p><p id="4">Mở mắt ra, tôi lại thấy vị thần trông giống Tử Thần đang đứng ngay trước mặt.</p><p id="5">Chắc là trong lúc tôi ngủ thêm một giấc trước khi khởi hành, tôi lại được ưu ái mời đến không gian thần thánh này. Thú thật, dù có đến bao nhiêu lần tôi cũng không quen nổi. Lần trước thì không đau, nhưng lần này thì chưa biết thế nào. Đây chẳng khác nào một màn tra tấn nhẹ nhàng cả.</p><p id="6">“Ý niệm mạnh mẽ, khát vọng mãnh liệt, là nguồn lương thực để lời nguyền phát triển. Tuy nhiên, chỉ có cảm xúc thôi thì vô nghĩa.”</p><p id="7">“Hm... Ý ngài là, phải đánh bại quái vật, phải đạt được thành quả thì mới có kết quả, đại loại vậy phải không ạ?”</p><p id="8">“Chính xác.”</p><p id="9">Cái đầu lâu đáng sợ gật gù đại lượng, có vẻ hài lòng.</p><p id="10">Mà cũng phải thôi, không đánh bại kẻ địch thì lấy đâu ra điểm kinh nghiệm, đó là lẽ thường tình. Kiểu như chưa hạ được ai mà chỉ cần hét lên “Ta không thể thua tên này được! Uoooaaaa!” trước con Boss mạnh mẽ là tự nhiên được ban sức mạnh mới rồi thắng đẹp, chuyện đó chỉ có trong mấy cái sự kiện của game RPG kịch bản rẻ tiền thôi.</p><p id="11">Nói cách khác, dù tôi có khát khao chiêu thức tấn công đến mức nào, nếu không đạt được chiến quả đủ để Thần gật đầu, ngài sẽ không ban cho. Tệ hơn nữa, có khi vốn dĩ Chú Thuật Sư chẳng hề có kỹ năng tấn công nào. Biết đâu cái thực tế phũ phàng đang chờ đợi tôi là “ngoan ngoãn đi tập vung kiếm còn giúp tăng khả năng chiến đấu hơn đấy”.</p><p id="12">Không, chắc không có chuyện đó đâu nhỉ. Lời nguyền của Ruinhilde-sama chắc chắn phải có kỹ năng tấn công chứ, đúng không ạ?</p><p id="13">“Được thôi. Ta sẽ ban cho ngươi sức mạnh để làm tổn thương kẻ khác mà ngươi hằng mong ước.”</p><p id="14">“Eh, thật ạ!?”</p><p id="15">Mà khoan, ngài vừa đọc suy nghĩ của con đúng không? Có phải toàn bộ độc thoại nội tâm của con đều bị ngài nghe thấy hết không? X-Xin lỗi ngài, có thể con đã nghĩ vài điều hơi thất lễ, nhưng mà, đó là chuyện không tránh khỏi ạ!</p><p id="16">“Được rồi. Ngươi đã thể hiện sự trưởng thành đủ để nhận lấy lời nguyền này. Chỉ đơn giản vậy thôi.”</p><p id="17">“Wa, c-cảm ơn ngài nhiều lắm ạ!”</p><p id="18">Được khen thẳng thắn thế này, tự nhiên tôi thấy hơi vui. Trong ký ức của tôi, tôi ít khi được khen ngợi. Bố mẹ tôi cũng không theo phương châm giáo dục kiểu buông thả khen con cái mọi lúc mọi nơi, nên tôi lớn lên với tư tưởng thỏa hiệp liên tục, không được khen là chuyện bình thường. Miễn không bị mắng là OK.</p><p id="19">Tóm lại là tôi không quen được khen. Tự tôi cũng lo là được tâng bốc chút xíu sẽ dễ bị tự mãn.</p><p id="20">“Ơ, nhưng mà, trong trận chiến boss vừa rồi con đâu có đóng góp được gì to tát... thật sự ổn chứ ạ?”</p><p id="21">“Sức mạnh của lời nguyền tỷ lệ thuận với độ sâu của nghiệp chướng. Kẻ vì những cảm xúc tầm thường mà oán hận ngược đãi người khác sẽ không thể nào thấu hiểu được chân lý của lời nguyền thâm sâu.”</p><p id="22">Có lẽ ngài đang ám chỉ việc tôi không oán hận Hirano-kun và Nishiyama-san. Những kẻ hơi tí là nổi đóa, căm ghét hay oán hận người khác thì không có tài năng làm Chú Thuật Sư.</p><p id="23">Vậy thì tôi nên nổi đóa vào lúc nào đây? Ít nhất thì đối với Higuchi, tôi chỉ toàn là tâm nguyện trả thù.</p><p id="24">“Lời nguyền vĩ đại nằm ở tận cùng của lý trí kiên cường và sự tỉnh táo——Nào, Momokawa Kotarou, đưa tay ra đây.”</p><p id="25">“V-Vâng...”</p><p id="26">A, cuối cùng cũng đến rồi. Thời khắc nhận lời nguyền mới. Để xem, lần này đau hay không đhau đây. Sự quan tâm của tôi dồn hết vào điểm này hơn cả hiệu quả của kỹ năng tấn công mới.</p><p id="27">“Chú Thuật Sư phải biết rằng không chỉ trái tim, mà cả thể xác cũng là một lời nguyền. Hãy đón nhận Chú Ấn.”</p><p id="28">Ngón tay xương trắng toát sắc như dao của Ruinhilde-sama đâm phập vào mu bàn tay phải tôi đang đưa ra ――</p><p id="29">“Gyaaaaaaaaaa!”</p><p id="30">Cắt rồi! Cắt rồi, hay đúng hơn là đang khoét thịt ra ấy chứ!?</p><p id="31">Ngón tay của Thần linh không chút nương tình cào rách, khoét sâu vào cả thịt trên mu bàn tay tôi, khắc lên một vết sẹo sâu hoắm.</p><p id="32">“Đây chính là bước đầu tiên để trở thành một Chú Thuật Sư chân chính.”</p><p id="33">Aaah, chết tiệt, lần này lại trúng vào loại đau đớn rồi!</p><p id="34">Vừa để những lời vàng ngọc của Ruinhilde-sama trôi tuột từ tai phải sang tai trái, tôi vừa gào thét đến rách cả cổ họng, và vượt qua thử thách của Thần linh bằng cách ngất đi lúc nào không hay.</p><p id="35">—</p><p id="36">“...Được rồi, đi thôi.”</p><p id="37">“Ừm!”</p><p id="38">Sau khi hoàn tất việc nghỉ ngơi, bao gồm bổ sung dược thảo, giặt giũ và sửa chữa đồng phục, chúng tôi lại tiếp tục công cuộc chinh phục Dungeon. Futaba-san trông có vẻ sung mãn cả về thể chất lẫn tinh thần, còn tôi, kẻ vừa trải qua nghi thức level up như ác mộng, thì tâm trạng lại chùng xuống như mọi khi.</p><p id="39">Nhưng mà, cứ tỏa ra bầu không khí ảm đạm mãi cũng xui xẻo. Phải cố gắng vực dậy tinh thần thôi.</p><p id="40">“Tầng này có cảm giác giống chỗ đầu tiên nhỉ?”</p><p id="41">“Ừ, nhưng mà... hơi tối và có cảm giác khó chịu sao ấy.”</p><p id="42">Nơi chúng tôi đang đi là một hành lang bằng đá không thấy điểm cuối. Chỉ có những tấm panel phát sáng rải rác, không khí u tối cũng giống như trước đây... nhưng Futaba-san đã nói là “cảm giác khó chịu” thì chắc chắn phải có gì đó. Mặc dù kỹ năng của Cuồng Chiến Binh đâu có cái nào là trực giác hay giác quan thứ sáu đâu.</p><p id="43">“Biết đâu có bẫy đấy.”</p><p id="44">“Nhưng mấy cái bẫy ở đây toàn là loại phải có Đạo Tặc mới nhận ra được thôi.”</p><p id="45">Quả thật, theo những gì tôi nghe được thì chưa ai có thiên chức khác ngoài Đạo Tặc mà phát hiện được bẫy hay rương kho báu cả. Quả nhiên không có kỹ năng thì không thể cảm nhận được.</p><p id="46">Mà nói đúng hơn, cái bẫy cấp thấp đến mức bị học sinh cấp ba bình thường không có năng lực đặc biệt nhìn thấu thì chỉ có thằng ngốc mới đặt. Khoan, Dungeon này có lũ Goma hình người, và tôi cũng từng dính bẫy của chúng... Nếu là bẫy do bọn chúng đặt thì có lẽ tôi có thể phần nào cảm nhận hay cảnh giác trước được. Lần tới, tôi tuyệt đối sẽ không dính vào mấy cái bẫy lộ liễu như thế nữa đâu!</p><p id="47">“Dù sao thì cẩn thận vẫn hơn.”</p><p id="48">“Ah, Momokawa-kun, dừng lại.”</p><p id="49">Ngay khi sắp thoát khỏi hành lang hẹp để bước vào một căn phòng có vẻ rộng rãi, Futaba-san đột ngột dừng lại. Tôi suýt chút nữa thì lao đầu vào cái mông to đùng ngay trước mặt. Vừa muốn khen ngợi bản thân vì đã phanh kịp, vừa cảm thấy tiêng tiếc.</p><p id="50">Chẳng hề hay biết sự đấu tranh nội tâm cỏn con của tôi, Futaba-san với vẻ mặt nghiêm túc ra hiệu cho tôi nhìn về phía trước. Rõ ràng là có kẻ địch. Tôi cũng xốc lại tinh thần, thận trọng ngó ra hành lang.</p><p id="51">“Wa, cái đó chẳng lẽ là... Zombie sao?”</p><p id="52">“Quả nhiên là vậy nhỉ.”</p><p id="53">Đó là một hành lang lớn giống như đường hầm cao rộng mà tôi từng thấy, và tôi thấy rõ hai bóng người đang lảng vảng ở đó. Chúng khác hẳn nhau về chiều cao và vóc dáng, như người lớn và trẻ con vậy.</p><p id="54">Và cả hai đều có làn da biến đổi sang màu đen kịt, phần lớn da thịt bong tróc lộ ra những thớ cơ bên dưới. Một phần cánh tay hay mạng sườn còn bị khuyết mất thịt, lòi cả xương trắng.</p><p id="55">Trang phục trên người chỉ vỏn vẹn một mảnh giẻ rách quấn quanh hông. Với bộ dạng đó, chúng cứ lảo đảo đi lại trong hành lang, miệng rên rỉ “Uu…” trầm thấp, nhìn kiểu gì cũng chỉ có thể là Zombie.</p><p id="56">“...Con nhỏ kia là Zombie Goma.”</p><p id="57">“Nhưng con to kia... là gì nhỉ, trông không giống người bình thường.”</p><p id="58">Con Zombie nhỏ, dựa vào kích thước và vóc dáng, chắc chắn là loài Goma ăn thịt người, thứ giờ đây đã trở thành đám tép riu bị Futaba-san đá bay cái một. Nhưng con to kia rõ ràng cao hơn lũ Goma chúng tôi từng gặp, dáng người dong dỏng và hình bóng cũng hơi khác. Gọi là to, nhưng là so với Goma thôi. Chiều cao thực tế chắc tầm 1m70. Cao hơn tôi, nhưng có vẻ thấp hơn Futaba-san.</p><p id="59">Thoạt nhìn thì giống một người đàn ông trưởng thành gầy gò... nhưng nhìn màu da và những đặc điểm Goma vẫn còn giữ lại, có cảm giác nó giống người hơn. Có khi nào là dạng tiến hóa không chừng.</p><p id="60">“Nếu là bọn đó thì chắc cũng dễ hạ như Skeleton thôi.”</p><p id="61">Futaba-san phát ngôn với tâm thế chắc chắn sẽ hạ gục được chúng. Cô ấy thực sự đã trưởng thành một cách mạnh mẽ và dũng cảm đến mức không nhận ra so với lúc mới gặp trong Dungeon. Nếu có chỉ số nam tính, chắc cô ấy đã bỏ xa tôi gấp mười lần rồi.</p><p id="62">“Nếu con Zombie đó thực sự yếu như Skeleton thì tớ muốn thử lời nguyền mới.”</p><p id="63">“Vậy tớ sẽ xử lý con to trước nhé.”</p><p id="64">Như thế chắc ăn hơn. Goma dù có thành Zombie thì cũng khó mà mạnh hơn lúc còn sống được. Cũng có loại Zombie được thiết lập là tháo bỏ giới hạn não bộ nên phát huy 100% sức mạnh cơ bắp, tốc độ kinh hoàng các kiểu, nhưng nếu điều đó áp dụng cho toàn bộ quái vật xác sống thì lũ Skeleton lẽ ra phải mạnh hơn nhiều mới đúng.</p><p id="65">Không sao. Chắc chắn sẽ hạ được.</p><p id="66">Tôi và Futaba-san cùng lúc lao ra khỏi hành lang.</p><p id="67">“Haa!”</p><p id="68">Đòn phủ đầu của Futaba-san. Cú ném đá mang sức mạnh kinh hoàng từng nghiền nát sọ Skeleton trong một đòn.</p><p id="69">Viên đá rít gió lao thẳng tắp, đập Bộp! một tiếng trầm đục vào ngực con Zombie to. Nó rên lên một tiếng ngắn ngủi như tiếng kêu đau đớn rồi ngã ngửa ra sau.</p><p id="70">“Uboaa!”</p><p id="71">Trong khi đó, phản ứng của con Zombie Goma lại sắc bén hơn tôi tưởng. Có vẻ nó đã nhận ra sự hiện diện của chúng tôi ngay từ lúc chúng tôi lao ra. Ngay khi đồng bọn bị hạ, nó lập tức lao thẳng về phía này.</p><p id="72">“Uwa, con này là Zombie chạy nhanh à!”</p><p id="73">Tôi buột miệng than vãn. Chết tiệt, Zombie thì cứ ra dáng Zombie đi, đi lảo đảo chậm chạp tiếp cận là được rồi. Sao mày lại vung tay chạy nước rút với cái dáng chuẩn thế kia hả tên khốn!</p><p id="74">Tuy nhiên, vì mắt tôi vẫn bắt kịp tốc độ của nó nên chắc không có vụ siêu nhân hóa do tháo bỏ giới hạn não bộ đâu, tạm yên tâm. Trước mắt cứ coi như nó có khả năng vận động ngang ngửa lúc còn sống.</p><p id="75">“Ugh!”</p><p id="76">Và với năng lực cỡ đó, làm sao chịu nổi đòn tấn công của Futaba-san. Chỉ với một cú vung rìu, con Zombie Goma bị chém đôi người ngọt xớt, vung vãi thịt thối và máu đen ngòm, biến thành đống rác rưởi lăn lóc trên hành lang.</p><p id="77">“Ah, xin lỗi nhé Momokawa-kun! Tại nó lao tới nhanh quá, tớ lỡ tay...”</p><p id="78">Lỡ tay mà chém đôi được người ta thì Futaba-san đúng là một Cuồng Chiến Binh xuất sắc.</p><p id="79">“Không, không sao đâu. Tạm thời biết được là dính sát thương chí mạng sẽ chết là được rồi.”</p><p id="80">Cái xác Zombie Goma nằm im bất động. Tôi cứ tưởng phải nghiền nát đầu mới chết, hoặc dù mất đầu vẫn sống nhăn như mấy loại hay nghe kể, nhưng có vẻ không phải vậy.</p><p id="81">“Với lại, con kia hình như chưa chết đâu.”</p><p id="82">Phía xa tầm mắt, con Zombie to đang lồm cồm bò dậy. Ngực nó lõm hẳn xuống một mảng rõ rệt, nhưng vẫn cảm nhận được sự linh hoạt như thể nó sắp bật dậy lao vào tấn công ngay lập tức.</p><p id="83">“Futaba-san, lùi lại sau tớ một chút.”</p><p id="84">Gật đầu cái rụp, Futaba-san nhanh chóng lùi lại. Nhưng cô ấy vẫn giữ thế thủ rìu đầy cảnh giác, sẵn sàng hỗ trợ bất cứ lúc nào. Thật đáng tin cậy.</p><p id="85">“Vậy thì, xin phép thử nghiệm lời nguyền tấn công được mong chờ bấy lâu nay, thưa ngài Ruinhilde――”</p><p id="86">Tôi nhẹ nhàng đưa tay phải ra, bắt đầu ngâm xướng một cách trang trọng.</p><p id="87">“Thứ kế thừa không phải là ý chí mà là thử thách. Thứ chồng chất không phải là cao quý mà là túc mệnh. Nếu là vận mệnh không được chọn lựa, ta sẽ tự mình khắc ghi dấu chân—— 『Huyết Mạch Đen』.”</p><p id="88">Trên mu bàn tay phải đang giơ lên, một hoa văn như được vẽ bằng máu tươi đột ngột hiện ra. Không phải ma pháp trận hình tròn, mà là thiết kế giống như một con mắt lớn. Có lẽ đây chính là ấn ký của Thần, thứ mà Ruinhilde-sama đã dùng ngón tay sắc nhọn khắc sâu vào da thịt tôi. À không, gọi là Chú Ấn nhỉ.</p><p id="89">Chú Ấn này không chỉ ở mu bàn tay mà còn lan sang cả lòng bàn tay. Phía bên này có hình dạng đơn giản như một dấu X. Tôi lật bàn tay hướng xuống đất, từ dấu X của Chú Ấn, một giọt máu rơi xuống.</p><p id="90">Cuối cùng, công đoạn chuẩn bị cho lời nguyền tấn công đã hoàn tất.</p><p id="91">“Mục rữa đi, chìm xuống đáy nước đỏ ô uế —— 『Đầm Lầy Thối Rữa』.”</p><p id="92">Giọt 『Huyết Mạch Đen』 rơi từ lòng bàn tay xuống. Khoảnh khắc nó tạo thành vết máu nhỏ làm bẩn sàn nhà, nó sôi lên sùng sục và tràn ra. Cứ như thể máu tươi đang phun trào từ chính sàn nhà vậy.</p><p id="93">Nhưng đây chính là hiệu quả của lời nguyền tấn công đầu tiên 『Đầm Lầy Thối Rữa』. Lấy máu tôi làm điểm khởi phát, nó tạo ra một vũng nước kịch độc như địa ngục hồ máu với phạm vi, hình dạng và độ rộng tùy ý ở một mức độ nhất định. Kích thước và độc tính tỷ lệ thuận với độ đậm đặc và lượng máu của tôi. Và máu của tôi hiện tại không còn là máu người thường nữa, mà nhờ 『Huyết Mạch Đen』 đã ẩn chứa một đặc tính nào đó.</p><p id="94">『Huyết Mạch Đen』: Dòng máu đó là lời nguyền hay phước lành. Dù không có gì kế thừa từ tổ tiên, máu vẫn là một trong những nguồn gốc của sự sống. Thể xác, lời nguyền, ma pháp, tín ngưỡng——nó gây ảnh hưởng đến nhiều yếu tố khác nhau.</p><p id="95">Giải thích về 『Huyết Mạch Đen』 trong đầu tôi đại loại là thế. Kiểu như, Huyết mạch à, nhưng bản thân tôi đâu có xuất thân đặc biệt gì, nhưng nhờ lời nguyền này mà có ảnh hưởng này nọ... đại loại vậy.</p><p id="96">Tất nhiên, tôi có bố mẹ là những người Nhật Bản bình thường đến không thể bình thường hơn, nên chẳng có dòng máu đặc biệt nào cả. Tuyệt đối không có chuyện gia tộc Momokawa đời đời truyền lại năng lực bí ẩn gì đâu.</p><p id="97">Tuy nhiên, tôi hiểu rằng ngay thời điểm 『Huyết Mạch Đen』 ngự trị, máu tôi đã phát huy hiệu quả cường hóa 『Đầm Lầy Thối Rữa』. Chỉ là cảm giác thôi, nhưng tôi biết nếu chỉ dùng máu thường để kích hoạt 『Đầm Lầy Thối Rữa』, tôi sẽ không thể tạo ra đầm lầy độc lớn và mạnh như bây giờ.</p><p id="98">Vì vậy, đây là một combo khá may mắn có được nhờ sự trưởng thành của tôi với tư cách là Chú Thuật Sư.</p><p id="99">“Được rồi, Futaba-san, lùi thêm chút nữa!”</p><p id="100">Vũng máu đỏ đen sủi bọt ùng ục lan rộng trên hành lang. Ngay trước mắt tôi, nó đã lớn đến bán kính khoảng hai mét. Đủ để bẫy con Zombie chỉ biết lao thẳng tới.</p><p id="101">Đề phòng trường hợp nó nhảy qua hoặc đi vòng, tôi và Futaba-san lùi lại một chút khỏi đầm lầy để không vướng víu khi di chuyển, chờ đợi con Zombie đang điên cuồng lao tới.</p><p id="102">“Buoaaaaahh!”</p><p id="103">Gào lên một tiếng như điên loạn, cuối cùng con Zombie cũng đặt chân vào vùng đầm lầy kịch độc ——</p><p id="104">『Đầm Lầy Thối Rữa』: Một bước sa chân, thịt tan rữa ngay tức khắc, vùng nước kịch độc khiến mọi thứ mục nát.</p><p id="105">Quả nhiên, đúng như mô tả, con Zombie vừa bước vào, chân nó phát ra tiếng "xèo xèo" như thịt nướng và đổ sụp xuống ngay tại chỗ.</p><p id="106">“Bua! Gyooaa!”</p><p id="107">Ngã ngay bước đầu tiên. Có lẽ do lòng bàn chân bị tan chảy khiến đế giày trơn trượt, cộng thêm đà chạy nước rút nên nó ngã sấp mặt. Không kịp chống đỡ, con Zombie ngã chúi đầu xuống ngay giữa đầm lầy độc.</p><p id="108">Cú ngã ngoạn mục đến mức có thể được chiếu trên mấy chương trình video hài hước, nhưng tôi và Futaba-san không thể chỉ trỏ cười cợt được.</p><p id="109">“W-uwa...”</p><p id="110">Dù là do lời nguyền của chính mình gây ra, nhưng nhìn cảnh tượng sát thương tan chảy thê thảm kia, tôi không kìm được tiếng thốt lên kinh hãi.</p><p id="111">Con Zombie ngã cắm đầu xuống giờ đây toàn thân bị bao phủ bởi chất lỏng kịch độc, hay đúng hơn là axit cực mạnh đang ăn mòn cơ thể, cùng với tiếng "Xèo xèo o o o o!" dữ dội, khói đỏ bốc lên nghi ngút.</p><p id="112">Vừa kêu gào đau đớn, con Zombie vừa cố đứng dậy... cổ tay chống xuống đất biến mất. Vừa nghe tiếng “bộp” do cổ tay đứt lìa khỏi gốc, thì tiếp đó khuỷu tay rụng xuống, rồi đầu gối cũng tan nát.</p><p id="113">“Oh… Aah...”</p><p id="114">Mất đi tứ chi ngọ nguậy, giờ chỉ còn lại cái thân và cái đầu nổi lềnh bềnh trong vô vọng trên mặt nước màu máu đang sủi bọt. Rồi trong nháy mắt, cái đầu tan rữa, cuối cùng cái lưng từ từ chìm xuống đầm lầy độc như một con tàu đắm, và thế là cơ thể con Zombie hoàn toàn biến mất.</p><p id="115">“Ồ... được rồi.”</p><p id="116">“Làm được rồi! Tuyệt quá Momokawa-kun, cậu một mình hạ được Zombie rồi kìa!”</p><p id="117">Vừa mới tự hỏi “Hạ gục kiểu này có ổn không nhỉ”, thì Futaba-san đã reo lên vui sướng chân thành.</p><p id="118">Từ hiệu quả của lời nguyền, tôi đã biết trước kết cục này. Biết thì biết vậy, nhưng khi tận mắt chứng kiến cái chết thê thảm của kẻ thù... tôi không thể vui mừng trọn vẹn được. Mong muốn có một cách hạ gục ngầu hơn chút đỉnh có lẽ là quá xa xỉ chăng.</p><p id="119">Dù sao đi nữa, đây là chiến thắng đàng hoàng đầu tiên kể từ khi tôi trở thành Chú Thuật Sư. Không phải chuỗi may mắn như trận Gấu Giáp, cũng không phải chỉ được Futaba-san cứu như cái bẫy của Goma. Đây thuần túy là chiến quả tôi giành được bằng chính sức mạnh Chú Thuật Sư của mình. Dù chỉ là một con Zombie. Nhưng vẫn là một con Zombie.</p><p id="120">Thế nên hãy vui lên nào. Dù nhìn không đẹp mắt, dù cái chết có gớm ghiếc đến đâu, thắng là thắng!</p><p id="121">“E-ehehe... Cảm ơn cậu.”</p><p id="122">Tôi nở một nụ cười ngượng ngùng hơi méo mó, cùng chia sẻ niềm vui chiến thắng đầu tiên với Futaba-san đang cười tươi rói chói lòa.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/13694" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/13694/2dc2458a-7500-4983-b608-fedff1f93fba.jpg?t=1727447414" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/13694" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/13694/63e71121-cb31-4692-bc99-5980c02144fc.jpg?t=1727447414" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai/c291303-chap-40-di-vat-va-chien-loi-pham" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/15008-jujutsushi-wa-yuusha-ni-narenai" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '472sBdrf7rW19tkxA1Tq3lKOMmzJd8mEZqMWog7k';
        var comment_type = 'chapter';
        var comment_typeid = '291318';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '472sBdrf7rW19tkxA1Tq3lKOMmzJd8mEZqMWog7k';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('15008');
    chapter_id = parseInt('291318');

    readingObject = {
        series_id: series_id,
        series_title: 'Jujutsushi Wa Yuusha Ni Narenai',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="472sBdrf7rW19tkxA1Tq3lKOMmzJd8mEZqMWog7k" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
