<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Uống cà phê sau giờ học, trong quán cà phê ở thế giới khác - Giao đoạn: Ngày tuyết rơi - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="&quot;Chúng ta phải chấp nhận sự thay đổi. Nhưng sẽ thật tuyệt biết bao nếu có một nơi chống lại nó. Một nơi sẽ xoa dịu nỗi đau của người khác trước cái thực tại khắc nghiệt kia, đồng thời là tổ ấm để nghỉ ngơi sau chuyến bay dài....">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="IdmobWZ1Mz2FCyiZHva65Zb0c0OgZqG56Jmtoo31">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s22006-d8b23bcd-9899-4eca-aaa3-bcf1d2ec1add.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c258839-chuong-3-thu-dang-so-hon-ca-cai-chet-2"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c278073-chuong-4-nhung-xuc-cam-con-vuong-mau-thoi-gian"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi" style="background: url('https://i.hako.vn/ln/series/covers/s22006-d8b23bcd-9899-4eca-aaa3-bcf1d2ec1add.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac">Uống cà phê sau giờ học,...</a></h5>
                    <small><i class="fas fa-pen"></i>kazamidori</small>
                    <small><i class="fas fa-paint-brush"></i>u-suke</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c175588-chuong-2-co-mua-he-xanh-chang-biet-ngay-tan-phai">Quyển 3</a></li>
                                        
                                                            <li class=""><a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c175788-chuong-1-thieu-nu-duoi-con-mua">Quyển 4</a></li>
                                        
                                                            <li class=""><a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c206502-chuong-mo-dau">Quyển 5</a></li>
                                        
                                                            <li class="current"><a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/t33184-quyen-6">Quyển 6</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c234804-chuong-mo-dau">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương mở đầu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c234844-chuong-1-mua-dong-keo-den-cuon-di-vet-tich-tri-tre-1">
                                                                        Chương 1: Mùa đông kéo đến cuốn đi vết tích trì trệ (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c248280-chuong-1-mua-dong-keo-den-cuon-di-vet-tich-tri-tre-2">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1: Mùa đông kéo đến cuốn đi vết tích trì trệ (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c251831-chuong-2-nhung-buoc-chan-khap-khieng">
                                                                        Chương 2: Những bước chân khập khiễng (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c251911-chuong-2-nhung-buoc-chan-khap-khieng-2">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 2: Những bước chân khập khiễng (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c256354-chuong-3-thu-dang-so-hon-ca-cai-chet">
                                                                        Chương 3: Thứ đáng sợ hơn cả cái chết (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c258839-chuong-3-thu-dang-so-hon-ca-cai-chet-2">
                                                                        Chương 3: Thứ đáng sợ hơn cả cái chết (2)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Giao đoạn: Ngày tuyết rơi
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c278073-chuong-4-nhung-xuc-cam-con-vuong-mau-thoi-gian">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 4: Những xúc cảm còn vương màu thời gian
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c278273-chuong-5-gieo-nhan-nao-gat-qua-nay">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 5: Gieo nhân nào, gặt quả nấy
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Quyển 6</h2>
                    <h4 class="title-item text-base font-bold" align="center">Giao đoạn: Ngày tuyết rơi</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi#chapter-comments" style="text-decoration: underline">4 Bình luận</a> -
                        Độ dài: 2,239 từ - Cập nhật: 
                        <time class="topic-time timeago" title="16-11-2025 12:26:09" datetime="2025-11-16T12:26:09+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Giao đoạn: Ngày tuyết rơi</p>
                    <p id="1"><strong>[note83867]</strong></p><p id="2"><strong>1</strong></p><p id="3"><strong> </strong></p><p id="4">Tuyết trong kí ức thời thơ ấu của tôi rất mỏng, không đủ để chơi ném bóng, do đó ngày xưa tôi cũng không hay nghịch tuyết.</p><p id="5">Khi tôi đang lăn cầu tuyết, ông Falluaba bước ra và ngơ ngác nhìn tôi.</p><p id="6">“Sáng nay trông cậu vui nhỉ, Yuu.”</p><p id="7">“Vâng ạ. Nhắc mới nhớ, cháu chưa từng làm người tuyết bao giờ, coi bộ đây là dịp tốt để thử.”</p><p id="8">Bầu trời dần bừng sáng, kéo theo tiếng huyên náo của người dân. Cả con đường bên ngoài lẫn con hẻm bên trong ngập trong tuyết trắng, và tôi cùng quả cầu bên cạnh chính là những người để lại dấu vết đầu tiên sau trận bão đêm qua.</p><p id="9">“...Cậu không ngủ được à?”</p><p id="10">“Dạ đâu có. Cháu chỉ dậy hơi sớm hơn mọi khi thôi. Thấy khung cảnh trắng xóa ngoài cửa sổ làm cháu muốn đi nghịch ấy mà.”</p><p id="11">Rõ là nói dối, và hẳn ông Falluaba cũng nhận ra, nhưng ông không vạch trần, chỉ gật đầu.</p><p id="12">“Trong cái lạnh này đừng để đổ mồ hôi nhé. Ta đi làm súp ấm cho bữa sáng đây. Chơi cho đã đi rồi vào ăn.”</p><p id="13">Xong, ông trở vào quán. Tôi rất biết ơn vì ông đã quan tâm tới tôi đồng thời tiếp tục lăn quả cầu tuyết cho to hơn nữa.</p><p id="14">Chính xác, đêm qua tôi không ngủ được. Tôi nằm trên giường trằn trọc mãi, cố để suy nghĩ  loanh quanh mỗi mấy việc cần làm sắp tới. Vì một khắc lơ là thôi, tôi sẽ lại nghĩ về nó, và cảm thấy chán nản, ngăn tôi tìm được niềm vui của cuộc sống. Dẫu cơ thể đã mệt lả, đầu óc tôi vẫn tỉnh như sáo. Có thử nhắm tịt mắt thì kết quả trả về chỉ là tiếng thở dài não nề. </p><p id="15">Cứ thế nó tạo thành vòng tuần hoàn luẩn quẩn, đến khi để ý thì mặt trời bắt đầu lên. Cố thêm cũng vô ích, tôi bèn dậy ra ngoài chơi tuyết.</p><p id="16">Lăn được một quả bóng có kích cỡ một vòng tay, tôi ôm nó đặt lên phần dùng làm thân đã được hoàn thành từ trước. Thành quả của cả buổi sáng chính là cậu tuyết cao ngang ngực tôi trước mặt đây. Nhìn cũng ổn áp phết chứ không đùa.</p><p id="17">Trong lúc tôi còn đang tận hưởng dư vị thỏa mãn thì có gì đó đập vào lưng tôi.</p><p id="18">“Mới sáng banh con mắt ra mà cậu đã làm cái gì trông trẻ con thế kia?”</p><p id="19">Tôi quay người lại và thấy Linaria trong bộ đồng phục trường kèm độc một chiếc áo khoác phủ bên ngoài đang đứng đấy. Bộ cô nàng không thấy lạnh à?</p><p id="20">“Tớ vừa bị dính một quả cầu tuyết nhỉ.”</p><p id="21">“Ôi chao, cậu nói gì vậy ta?”</p><p id="22">“Nào, giả ngu cũng vô ích thôi.”</p><p id="23">“Cứ cho là cậu đúng đi, thì chẳng phải lỗi nằm ở cậu vì quá sơ hở sao?”</p><p id="24">“Bộ đây là chiến trường hả?”</p><p id="25">“Ara, không biết à? Những lúc tuyết dày như này chính là thời khắc ta phải cảnh giác tột độ đấy.”</p><p id="26">Nụ cười của cô là nụ cười của kẻ đã chinh chiến và sống sót qua hàng ngàn trận mạc…Và nó còn rất thật nữa.</p><p id="27">“...Cậu đã chiến thắng bao nhiêu người rồi?”</p><p id="28">“Ai biết đâu. Tớ chẳng bao giờ nhớ kẻ bại trận dưới tay mình.”</p><p id="29">“Bằng cách đánh lén như vừa nãy á? Hẳn là cậu không có gan đối đầu trực diện nhỉ?”</p><p id="30">Nghe xong, cậu ta chống hông, lắc đầu ngạo nghễ.</p><p id="31">“Bởi mới nói cậu chỉ là mấy con gà. Muốn ra trận còn hẵng sớm mười năm lận đấy.”</p><p id="32">“...Muốn thử xem sớm hay chưa không?”</p><p id="33">“...Oya oya?”</p><p id="34">Ngay lập tức, tôi cúi xuống bóc một núm tuyết, bàn tay thăn thoát tạo thành hình cầu rồi ngẩng đầu lên…</p><p id="35">“Cái-?!”</p><p id="36">Trong chớp mắt, cô nàng đã biến đâu mất. Chưa kịp định hình thì có thứ gì đập vào tay trái tôi.</p><p id="37">“Rời mắt khỏi kẻ thù, đúng là ngốc hết thuốc chữa.”</p><p id="38">Linaria đã ở cạnh bên tôi từ lúc nào!</p><p id="39">“Nhân tiện, tớ cố tình ném hụt đấy. Chơi với ma mới mà phát đầu tiên đã “headshot” thì có hơi đáng thương quá.”</p><p id="40">“Gừừừ…Cậu dám hạ cảnh giác với tớ thì đó là dấu chấm hết cho cậu rồi!”</p><p id="41">Tôi ném quả bóng tuyết trong tay về phía Linaria. </p><p id="42">“Hạ cảnh giác ư? Không hề, tớ chỉ nói sự thật thôi.”</p><p id="43">“Hở…?”</p><p id="44">Tôi không thể tin vào mắt mình. Cô nàng đã lấy tay chặn, à không, chụp lấy đòn tấn công của tôi.</p><p id="45">“Hầy, quả nhiên ma mới vẫn là ma mới…Có trời mới cứu được sự ngây thơ này…Nặn bóng mạnh tay quá nên bị chặn là đúng rồi.”</p><p id="46">“C-chết tiệt!”</p><p id="47">Không ổn, tôi phải rút-</p><p id="48"><img src="https://i.hako.vn/ln/chapters/illusts/260148/8d934bab-5b12-4f95-a29f-1def93bba592.jpg" alt="5df4c005-4acd-484c-8a33-aaaf90f8e233.jpg"></p><p id="49"><strong> </strong></p><p id="50"><strong>2</strong></p><p id="51"><strong> </strong></p><p id="52">“Thứ quái vật.”</p><p id="53">“Nói gì đó? Thèm tuyết nữa hả?”</p><p id="54">“Dạ không ạ, em xin lỗi chị.”</p><p id="55">Linaria thực sự là một con quái vật. Tôi chẳng ném trúng cô trái nào, còn tôi thì thành bia tập bắn cho cổ.</p><p id="56">“Cậu thành thục mấy cái khả năng ấy ở đâu vậy? Chẳng lẽ học viện có dạy ư?”</p><p id="57">“Làm gì có. Tớ học hồi còn ở cô nhi viện kìa. Mấy ngày tuyết như này, ai nấy đều ùa ra chơi ném bóng cả. Đám trẻ lúc nào cũng nhắm tớ nên tớ học được là lẽ dĩ nhiên thôi.”</p><p id="58">“Một chiến binh bóng tuyết lớn lên trong bản địa…!”</p><p id="59">“Ai là chiến binh bóng tuyết cơ?”</p><p id="60">Tôi vừa tám chuyện với Linaria vừa phủi tuyết dính trên áo. Vận động nãy giờ làm người tôi ấm lên trông thấy, song tôi không thể cứ để yên bước vào quán được, tuyết rơi vãi ra mất.</p><p id="61">Có lẽ không nhịn được nữa, cô tiến lại phụ tôi.</p><p id="62">“Uwah, lạnh!”</p><p id="63">“Đừng có càm ràm, tớ đang giúp cậu đây.”</p><p id="64">“Chạm vào gáy tớ với cái tay lạnh băng kia là giúp dữ rồi đó!”</p><p id="65">“Nào nào, vô ý thôi mà.”</p><p id="66">“Cố tình thì có!”</p><p id="67"><img src="https://i.hako.vn/ln/chapters/illusts/260148/d8ec0a4b-67ad-4907-87b2-2a366f7d2749.jpg" alt="26ea598c-f561-4ccc-aa00-d2ca799d8b5e.jpg"></p><p id="68">“Này, đợi đã!”</p><p id="69">Tôi không chịu được nữa liền chạy đi, tuy nhiên Linaria lập tức tóm tôi lại.</p><p id="70">“Lạnh! Tớ nói là lạnh!”</p><p id="71">“Hình phạt cho trẻ hư không tới đúng giờ để tiễn tớ.”</p><p id="72">“Cậu còn giữ trong lòng hả?!”</p><p id="73">“Không, đâu có đâu.”</p><p id="74">“Ưưư, chờ chút, á! Tuyết! Tuyết chui vào người tớ rồi!”</p><p id="75">Tuyết trượt từ cổ xuống lưng. Tôi cố giũ áo để nó đi ra, tiếc là bất thành. Cái rét thấu xương khiến tôi nhảy cẫng mấy vòng.</p><p id="76">Thấy cảnh ấy, Linaria ôm bụng cười. Tiếng cười vui tươi và ấm áp tựa ánh ban mai ngày xuân. Tôi muốn được nghe thêm nữa nên vừa cường điệu hành động của mình vừa liên tục kêu cứu.</p><p id="77">Sau một hồi, cô lau khóe mắt vì cười quá nhiều rồi dịu dàng nhìn tôi. </p><p id="78">Ôi, tôi ước khoảnh khắc này có thể dừng lại mãi mãi…Hoặc không. Làm ơn đừng dừng. Lưng tôi buốt lắm rồi đấy.</p><p id="79">Tuy nhiên, tôi sẽ không thể quên được khoảng thời gian ấy. Cái lạnh của tuyết, nụ cười của Linaria và âm giọng trong trẻo ngân vang trong ánh bình minh. Tôi sẽ không bao giờ quên, chắc chắn là vậy.</p><p id="80"><strong> </strong></p><p id="81"><strong>3</strong></p><p id="82"><strong> </strong></p><p id="83">“Ta nhớ mình có dặn phải trở vào trước khi đổ mồ hôi mà.”</p><p id="84">“Xin lỗi ông, cháu ham chơi quên mất giờ giấc.”</p><p id="85">Tôi chỉ có thể cúi đầu xin lỗi trước một ông Falluaba đang bực bội. Cơ thể tôi rét đến tận xương, và hiện tại đang ngồi trước lò sưởi cạnh Linaria.</p><p id="86">“Mình già rồi, mình nên nghỉ hưu thôi…”</p><p id="87">“Mặt nghiêm túc mà phát ngôn gì vậy trời?”</p><p id="88">Cô nàng đang hơ tay trước ngọn lửa bập bùng. Bốc tuyết bằng tay trần mà không bị cóng mới lạ.</p><p id="89">Sau một lúc, ông Falluaba bước tới với hai cái ly trong tay.</p><p id="90">“Làm ấm người mấy đứa bằng cái này đi.”</p><p id="91">“Dạ, cháu cảm ơn ạ.”</p><p id="92">Xong, ông bước về quầy. Linaria ghé sát người tôi, thì thầm:</p><p id="93">“Hình như ông ấy là khách đúng không?”</p><p id="94">“Ừ. Là khách quen.”</p><p id="95">“Sao ổng đưa súp cho chúng ta tự nhiên thế? Bộ cậu thuê người trong lúc đi vắng hả?”</p><p id="96">“Nhiều chuyện xảy ra, và hiện tại ông ấy bị vợ đuổi khỏi nhà.”</p><p id="97">“Khổ.”</p><p id="98">Tôi nhìn vào ly. Bên trong là món súp màu hổ phách trong vắt đi kèm phô mai và vụn bánh mì. Một dạng biến thể của súp kem rau củ. Tôi hít một hơi đầy, hương thơm ngọt ngào kích thích dạ dày của tôi.</p><p id="99">“Nhìn ngon ghê…Mời cả nhà dùng bữa.”</p><p id="100">Một giọng nói cất bên tai, theo sau là tiếng rên “Nóng!”. Tôi dùng muỗng khuấy đều. Vụ bánh mì chìm xuống, nhường bề mặt cho nấm và hành thái lựu nổi lên.</p><p id="101">“Mời cả nhà dùng bữa.”</p><p id="102">Tôi múc một muỗng đầy cho vào miệng. Đập vào vị giác mà mùi của hành với nấm điểm thêm chút gừng. Chỉ một miếng duy nhất, hơi ấm đã lan tỏa khắp từng tế bào của tôi.</p><p id="103">“Ngon tuyệt.”</p><p id="104">Nhìn sang bên, tôi thấy Linaria đang vui vẻ ăn những miếng bánh mì nhúng bên trong. Phát hiện tôi đang nhìn, cô cau mày ra hiệu đừng có chằm chằm vào cổ.</p><p id="105">“Rồi rồi.”</p><p id="106">Hai gò má đã nóng hổi cũng không cản tôi tiếp tục thưởng thức. Ăn súp nấm kèm phô mai với bánh mì vụn, ngồi trước lò sưởi bập bùng giữa tiết trời giá rét, có cô gái xinh đẹp ngồi cạnh bên. Hoàn hảo. Vua chúa cũng chỉ đến thế là cùng.</p><p id="107">Lúc này, cái lạnh đã bị đánh bay khỏi người tôi hoàn toàn. Uống cạn toàn bộ, tôi thở một hơi thỏa mãn. </p><p id="108">Cùng lúc ấy, Linaria cũng vừa xong phần mình. Cô đặt cái ly đã rỗng sang một bên, tay ôm đầu gối, mắt hướng về ngọn lửa trong lò.</p><p id="109">“Trường mới trông ra sao?”</p><p id="110">“Nó đẹp lắm. Thành phố xung quanh lộng lẫy không kém, và con người nơi ấy cũng hòa đồng nữa.”</p><p id="111">“Thế thì tuyệt quá. Hình như tớ vẫn chưa nói nhỉ. Chúc mừng cậu thi đỗ.”</p><p id="112">Linaria quay sang với nụ cười dịu dàng.</p><p id="113">“Ừ, cảm ơn cậu. Được nghe lời chúc mừng của cậu làm lòng tớ nhẹ nhõm hẳn ra.”</p><p id="114">“Vậy à? Cậu vốn đã cố gắng hết sức cho kì thi rồi, giờ cứ nghỉ ngơi thoải mái đi.”</p><p id="115">“Nhưng khi qua bển thì mỗi ngày lại phải cắm đầu học. Nghe thôi đã thấy mệt."</p><p id="116">“Cậu chọn con đường này mà, ráng hết sức đi nhé.”</p><p id="117">“Vâng~”</p><p id="118">Cô gục đầu lên đùi, khuôn mặt trông có vẻ rệu rã. Mỗi khi ngọn lửa nhảy múa, đôi mắt cô như thể được tiếp thêm nguồn sống và động lực.</p><p id="119">“Quả nhiên, chẳng đâu thư giãn bằng chỗ này hết.”</p><p id="120">Linaria cất tiếng, âm tiết như đang thủ thỉ. </p><p id="121">“Sáng ra vận động mạnh nên mệt hả?”</p><p id="122">“Ừm…Chắc do đi đường dài thì đúng hơn. Nó xa tít tắp luôn, mà tớ lại chẳng ngủ được nhiều.”</p><p id="123">Hẳn rồi. Cô đã phải một mình lặn lội tới nơi xa xôi để làm một bài thi có tính quyết định cả cuộc đời mình, không nghỉ ngơi được mấy là phải. Tuy nhiên, nhờ đấy, Linaria đã đạt được mục tiêu đề ra, từ đó tiến gần hơi với ước mơ của cô. Một điều tuyệt vời làm sao, một điều tôi sẽ chẳng bao giờ làm được.</p><p id="124">“Linaria ơi, tớ với Aina định tổ chức tiệc mừng cho cậu. Khi nào cậu rảnh?”</p><p id="125">Quay sang thì phát hiện hàng mi của cô đã cụp xuống cùng tiếng thở đều đều. Ừm, cổ ngủ rồi. Mặt cô thể hiện một sự bình yên và sảng khoái y hệt một đứa trẻ đã mệt lả sau khi nô đùa thỏa thích.</p><p id="126">“...Cậu vất vả rồi.”</p><p id="127">Giá như tôi có thể ngắm khuôn mặt ngủ say của Linaria mãi.</p><p id="128">Chúng tôi nghịch tuyết, sau đấy dùng món súp ngon tuyệt, cuối cùng là vai kề vai ngồi trước lò sưởi. Sẽ thật tốt biết mấy nếu hai đứa có thể cùng nhau đón ngày mới như hôm nay, và cùng nhau tận hưởng từng mùa trong năm.</p><p id="129">Tuy nhiên, cô phải rời khỏi nơi này. Để đạt được ước mơ của mình, cô đã đơn thương độc mã bước đi trên con đường lắm chông gai, và sẽ không ngừng phấn đấu tiến lên phía trước. Còn tôi, tôi sẽ ở lại dõi theo bóng lưng của cô. Tôi không thể đi bên cạnh cô được.</p><p id="130">Thật sự đấy, Linaria quá đỗi phi thường đi.</p><p id="131">Ôi, mong sao thời gian ấm áp này hãy dừng lại, để tôi được tiếp tục ngắm Linaria đang say giấc nồng.</p><p id="132">Đây là ước muốn thật lòng của tôi, và tôi sẽ không bao giờ chối bỏ nó.</p><p id="133">Trong tương lai, khi hồi tưởng về quá khứ, khoảnh khắc này nhất định sẽ tỏa sáng rực rỡ như ánh ban mai. Nó tươi đẹp tới mức tôi buộc phải ngoảnh mặt đi không dám nhìn trực tiếp. Song, hơi ấm nó đem đến, tim tôi sẽ ôm lấy nó thật chặt.</p><p id="134">Thời gian chầm chậm trôi, nhưng vẫn tịnh tiến về phía trước.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note83867"><a href="#anchor-note83867" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note83867" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Đường tới! Đường tới!</span></div><span class="note-content_real long-text">Đường tới! Đường tới!</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c258839-chuong-3-thu-dang-so-hon-ca-cai-chet-2" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c278073-chuong-4-nhung-xuc-cam-con-vuong-mau-thoi-gian" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(4)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">4 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3101823"
    class="ln-comment-item mt-3 clear"
    data-comment="3101823" 
    data-parent="3101823" 
    data-type="chapter" 
    data-typeid="260148">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u176416-4680621f-6087-43df-b695-a313fdc538fa.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/176416">ZawnFM</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Đường thì có cơ mà thấy cứ thấy ảo não thế nào ấy<br>
Tks trans
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi?comment_id=3101823#ln-comment-3101823"
                            class="text-slate-500">
                            <time class="timeago" title="25-11-2025 00:50:32"
                                datetime="2025-11-25T00:50:32+07:00">
                                25-11-2025 00:50:32
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3101704"
    class="ln-comment-item mt-3 clear"
    data-comment="3101704" 
    data-parent="3101704" 
    data-type="chapter" 
    data-typeid="260148">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u172687-4f8d3988-e6af-4535-8c84-edb5f4db4cb9.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/172687">Yuuta7528</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        sầu quá, tfnc
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi?comment_id=3101704#ln-comment-3101704"
                            class="text-slate-500">
                            <time class="timeago" title="24-11-2025 22:54:34"
                                datetime="2025-11-24T22:54:34+07:00">
                                24-11-2025 22:54:34
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3092047"
    class="ln-comment-item mt-3 clear"
    data-comment="3092047" 
    data-parent="3092047" 
    data-type="chapter" 
    data-typeid="260148">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.docln.net/lightnovel/users/ua17896-cf1c4b5c-f62a-4768-b5e6-4622b926bac5.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/17896">Fuyuno</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Cưới đê
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi?comment_id=3092047#ln-comment-3092047"
                            class="text-slate-500">
                            <time class="timeago" title="16-11-2025 08:21:00"
                                datetime="2025-11-16T08:21:00+07:00">
                                16-11-2025 08:21:00
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3091981"
    class="ln-comment-item mt-3 clear"
    data-comment="3091981" 
    data-parent="3091981" 
    data-type="chapter" 
    data-typeid="260148">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://3.bp.blogspot.com/-mgrNltEL8eE/WE2HJQJybdI/AAAAAAAACCY/OSipBAD2-P4/w100/user-avatar.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/557">tqk2811</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Mlem<br>
Tfnc
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/22006-uong-ca-phe-sau-gio-hoc-trong-quan-ca-phe-o-the-gioi-khac/c260148-giao-doan-ngay-tuyet-roi?comment_id=3091981#ln-comment-3091981"
                            class="text-slate-500">
                            <time class="timeago" title="16-11-2025 04:13:24"
                                datetime="2025-11-16T04:13:24+07:00">
                                16-11-2025 04:13:24
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold">1</span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'IdmobWZ1Mz2FCyiZHva65Zb0c0OgZqG56Jmtoo31';
        var comment_type = 'chapter';
        var comment_typeid = '260148';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'IdmobWZ1Mz2FCyiZHva65Zb0c0OgZqG56Jmtoo31';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('22006');
    chapter_id = parseInt('260148');

    readingObject = {
        series_id: series_id,
        series_title: 'Uống cà phê sau giờ học, trong quán cà phê ở thế giới khác',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="IdmobWZ1Mz2FCyiZHva65Zb0c0OgZqG56Jmtoo31" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
