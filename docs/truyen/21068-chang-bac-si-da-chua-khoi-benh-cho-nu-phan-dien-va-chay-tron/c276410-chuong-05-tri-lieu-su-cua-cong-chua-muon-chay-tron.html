<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Chàng bác sĩ đã chữa khỏi bệnh cho ác nữ và chạy đi mất - Chương 05: &quot;Trị liệu sư&quot; của Công chúa muốn chạy trốn - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Trở thành bác sĩ cho nữ phản diện, người đã hủy diệt thế giới. Tôi sau đó đã cố gắng để trốn thoát nhưng phản ứng của cổ lạ lắm. Sarnius: Mình cần một cái tên truyện hay hơn, for real.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="klpj7uWZ4OyXDJJ3cwyVy680vaSuXe5D6Irgys4V">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276410-chuong-05-tri-lieu-su-cua-cong-chua-muon-chay-tron">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s21068-8f3c9129-61d6-407a-a722-c02eeb99ad90.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276410-chuong-05-tri-lieu-su-cua-cong-chua-muon-chay-tron" style="background: url('https://i.hako.vn/ln/series/covers/s21068-8f3c9129-61d6-407a-a722-c02eeb99ad90.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron">Chàng bác sĩ đã chữa khỏi...</a></h5>
                    <small><i class="fas fa-pen"></i>긘가</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/t28455-web-novel">Web Novel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c161508-chuong-01-nu-phan-dien-ke-huy-diet-the-gioi">
                                                                        Chương 01: Nữ phản diện, kẻ hủy diệt thế giới
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c164014-chuong-02-tro-ve-10-nam-truoc">
                                                                        Chương 02: Trở về 10 năm trước
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c180462-chuong-03">
                                                                        Chương 03: Kẻ gây rối của gia tộc Hầu tước(1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04">
                                                                        Chương 04: Kẻ gây rối của gia tộc Hầu tước(2)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276410-chuong-05-tri-lieu-su-cua-cong-chua-muon-chay-tron">
                                                                        Chương 05: &quot;Trị liệu sư&quot; của Công chúa muốn chạy trốn
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 05: &quot;Trị liệu sư&quot; của Công chúa muốn chạy trốn</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276410-chuong-05-tri-lieu-su-cua-cong-chua-muon-chay-tron#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,093 từ - Cập nhật: 
                        <time class="topic-time timeago" title="21-12-2025 14:23:36" datetime="2025-12-21T14:23:36+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 05: &quot;Trị liệu sư&quot; của Công chúa muốn chạy trốn</p>
                    <p id="1">Một làn gió thu dễ chịu khẽ khàng lùa vào phòng của Asella.</p><p id="2">Dù nhiệt độ và độ ẩm trong phòng đều ở mức lý tưởng, đầu óc tôi vẫn thấy hơi choáng váng như thể đang say.</p><p id="3">Có lẽ là bởi trái tim tôi đang thắt lại dưới ánh nhìn chằm chằm không rời của Asella suốt nãy giờ.</p><p id="4">Hoặc cũng có thể do hương thơm thoang thoảng đang lan tỏa từ phía chiếc bàn.</p><p id="5">‘Mùi hoa chăng?’</p><p id="6">Trong khi tôi vẫn còn đang thẫn thờ, một thứ gì đó ẩm ướt khẽ chạm vào tay tôi.</p><p id="7">“Hộc, hộc.”</p><p id="8">Đó là lưỡi của Max.</p><p id="9">Nhờ nó mà sự căng thẳng trong tôi vơi đi đôi chút.</p><p id="10">Tôi thực sự thích loài chó, vì chúng luôn bày tỏ tình cảm một cách thuần khiết nhất nếu được đối xử tử tế.</p><p id="11">Sau khi vuốt ve nó một chút, Max nhấc nửa thân trên lên và làm nũng với tôi.</p><p id="12">Đúng là một thằng nhóc đáng yêu.</p><p id="13">“Max, lại đây.”</p><p id="14">Dù Asella đã cất tiếng gọi, nhưng Max vẫn cứ quấn quýt lấy tôi không rời.</p><p id="15">“Max?”</p><p id="16">Chuyện này hơi khó xử đây.</p><p id="17">Này cu cậu, chủ nhân mày đang gọi kìa.</p><p id="18">Nhìn xem, vẻ mặt cô ấy bắt đầu khó coi rồi đó.</p><p id="19">Cứ cái đà này thì tao chết mất thôi, Max ạ.</p><p id="20"><strong>[Số 056: Sự Căm Hận của Ác Nữ 12% → 11%] </strong></p><p id="21"><strong>[Đang dao động] </strong></p><p id="22">Hả?</p><p id="23">Hóa ra cô ấy cũng không hẳn là đang tức giận.</p><p id="24">Ngược lại, xác suất xảy ra Ending về sự giận dữ của Asella còn đang giảm nhẹ.</p><p id="25">“Max!”</p><p id="26">Khi Asella lớn tiếng gọi một lần nữa, cuối cùng Max cũng chịu quay về bên cạnh cô ấy.</p><p id="27">Asella ngồi trên ghế, và ra hiệu cho tôi.</p><p id="28">“Ngươi, lại đây.”</p><p id="29">Sau khi bước lại gần hơn vài bước, tôi thấy đó là những đóa hồng vàng mà cô ấy đã hái trong vườn lúc nãy.</p><p id="30">Chỉ trong khoảng thời gian ngắn ngủi đó mà cô ấy đã hái được khá nhiều.</p><p id="31">Có vẻ như phải ít nhất một trăm đóa hồng.</p><p id="32"><strong>[Số 003: Cuộc Hành Quyết Hàng Trăm Người 64% → 63%] </strong></p><p id="33"><strong>[Đang dao động] </strong></p><p id="34">Những con số trên bảng trạng thái khẽ biến động.</p><p id="35">‘Những bông hoa này hẳn là chìa khóa.’</p><p id="36">Bất thình lình, chẳng có dấu hiệu báo trước, Asella quay ngoắt lại và nhìn xoáy vào tôi bằng đôi mắt dữ dội.</p><p id="37">‘Trời ạ, giật cả mình. Tim suýt thì ngừng đập.’</p><p id="38">Thực ra khi cứ ngồi yên như vậy, cô ấy trông khá xinh đẹp. Giống như một con búp bê vậy.</p><p id="39">“Ngươi có mang theo dao không?”</p><p id="40">“Thần có mang theo ạ.”</p><p id="41">“Hãy cắt bỏ gai đi, giống như lúc nãy ngươi đã làm ấy.”</p><p id="42">“Tuân lệnh.”</p><p id="43">Tôi đứng bên cạnh bàn, rút con dao găm ra và bắt đầu cẩn thận gọt bỏ những chiếc gai trên thân hoa hồng.</p><p id="44">“Ngươi đang làm gì vậy?”</p><p id="45">Asella hỏi tôi.</p><p id="46">Tôi bối rối mà không hiểu dụng ý câu hỏi của cô ấy là gì.</p><p id="47">Chẳng phải chính cô bảo tôi làm việc này sao.</p><p id="48">”...Thần đang tỉa bỏ gai?”</p><p id="49">“Ghế ở ngay đó mà.”</p><p id="50">“Người muốn thần ngồi xuống sao?”</p><p id="51">“Ta còn phải dạy ngươi mọi thứ à?”</p><p id="52">“Dĩ nhiên là không ạ.”</p><p id="53">Tôi lập tức kéo ghế ra và ngồi xuống.</p><p id="54">Tôi ngồi ở một góc vuông với Asella.</p><p id="55">Phải chăng cô ấy đang tỏ ra quan tâm khi bảo tôi ngồi xuống?</p><p id="56">Không, chắc là cô ấy chỉ muốn tôi ngồi yên một chỗ vì tôi làm cô ấy mất tập trung thôi.</p><p id="57">Tôi tiếp tục công việc.</p><p id="58">Chỉ còn tiếng tỉa cành vang lên đều đặn. Asella vừa vuốt đầu Max vừa quan sát tôi một cách cảnh giác.</p><p id="59">...Thời gian cứ thế trôi qua.</p><p id="60">Khi lặp đi lặp lại một hành động, sự căng thẳng trong tôi dần tan biến.</p><p id="61">Ngay khi tâm trí tôi bắt đầu lơ đãng...</p><p id="62">”...Á.”</p><p id="63">Tiếng kêu đau khẽ của Asella đột nhiên kéo sự chú ý của tôi quay trở lại. Asella đang cầm một bông hồng.</p><p id="64">Đó là đóa mà tôi chưa kịp loại bỏ gai.</p><p id="65">“Nó không chịu rời ra dễ dàng gì cả. Tại sao thứ này lại phiền phức đến thế chứ?”</p><p id="66">Một giọt máu đỏ thẫm rỉ ra từ ngón trỏ của Asella, ngay chỗ cô ấy cầm vào cuống hoa.</p><p id="67">‘Hỏng bét rồi, chuyện này không ổn chút nào.’</p><p id="68">Đáng lẽ tôi nên cẩn thận hơn để cô ấy không chạm vào chúng.</p><p id="69">Nàng công chúa này lúc nào cũng quá tò mò so với mức cần thiết.</p><p id="70">Tiếng xấu của tôi vốn đã là một kẻ gây rắc rối rồi.</p><p id="71">Nếu ai đó nhìn thấy cảnh này và hiểu lầm rằng chính tôi làm Asella bị thương thì thật là nhức đầu.</p><p id="72">“Nghĩ lại thì, nếu chỉ có cái bông là đẹp, liệu chúng ta có thực sự cần phần còn lại không?”</p><p id="73">Vừa nói, Asella vừa ngắt phăng nụ hoa hồng ra khỏi thân với một tiếng <em>rắc</em> rõ mồn một.</p><p id="74">Đóa hồng vàng bị nhuốm đỏ bởi máu của Asella.</p><p id="75">Ngay lập tức, xác suất trong danh sách Ending thay đổi.</p><p id="76"><strong>[Số 003: Cuộc Hành Quyết Hàng Trăm Người 63% → 65%] </strong></p><p id="77"><strong>[Đang dao động] </strong></p><p id="78">Dựa trên kinh nghiệm trước đó, tôi có thể đưa ra một giả thuyết.</p><p id="79">‘Dường như xác suất sẽ tăng lên khi Asella có thêm nhiều trải nghiệm tiêu cực.’</p><p id="80">Thứ gì đó để lại ấn tượng càng cực đoan trong ký ức của cô ấy, thì cô ấy càng dễ dàng dùng nó làm tiền đề để thực hiện những hành vi tàn độc.</p><p id="81">Tôi nhận định rằng việc xử lý vết thương cho cô ấy ngay lúc này có thể giúp xoay chuyển tình hình.</p><p id="82">“Điện hạ.”</p><p id="83">“Gì?”</p><p id="84">Tôi lấy một chiếc khăn tay từ trong túi ra, rồi chủ động nắm lấy cổ tay Asella.</p><p id="85">Đó là một cổ tay trắng trẻo, gầy gò với nhịp mạch yếu ớt đến mức khó lòng cảm nhận được sức sống bên trong.</p><p id="86">”...Ngươi đang làm gì vậy?”</p><p id="87">“Nếu bị thương thì người nên điều trị. Chuyện này rất đơn giản, và cũng không cần phải vứt bỏ cả cành hoa đâu.”</p><p id="88">Tôi thấm chút nước từ ấm trà gần đó vào khăn tay và lau sạch máu trên tay Asella.</p><p id="89">Tôi cẩn thận làm sạch xung quanh vết thương để tránh nhiễm trùng.</p><p id="90">“Để thần xem nào...”</p><p id="91">Trong phòng có một chiếc khăn choàng bằng lanh.</p><p id="92">Tôi dùng dao cắt nó thành một thứ dải và mỏng. Một chiếc băng gạc dùng một lần đã hoàn thành.</p><p id="93">Tôi quấn nó quanh ngón trỏ bị thương của cô ấy và băng lại với lực vừa đủ, không quá chặt.</p><p id="94">Asella nghiêng đầu.</p><p id="95">“Đây là cái gì? Ma thuật trị liệu à?”</p><p id="96">“Không phải ma thuật đâu, mà là điều trị y học. Máu sẽ tự nhiên đông lại, nên vết thương sẽ lành theo cách này. Việc sử dụng ma thuật trị liệu một cách không cần thiết thực chất còn tệ hơn.”</p><p id="97">Tôi nói với một nụ cười nhẹ.</p><p id="98">“Người sở hữu một cơ địa không mấy tương thích với ma thuật trị liệu đâu, thưa Điện hạ.”</p><p id="99">"...Hừm, đúng là như vậy.”</p><p id="100">Acella chăm chú quan sát ngón tay đã được băng bó của mình suốt một lúc lâu.</p><p id="101">Sau đó, đôi mắt tò mò của cô ấy chậm rãi chuyển dời về phía tôi.</p><p id="102">“Lúc nãy ngươi cũng đã điều trị cho Max bằng cách này sao?”</p><p id="103">“Đó là một thủ thuật sơ cứu đơn giản tương tự thế này. Một phần của quá trình điều trị y học.”</p><p id="104">“Ngươi gọi nó là y học, đúng chứ?”</p><p id="105">“Chính xác ạ.”</p><p id="106">“Ta thích nó. Còn gì nữa không?”</p><p id="107">“Vâng?”</p><p id="108">“Ngươi còn gì khác nữa?”</p><p id="109">Vẻ mặt cười quỷ quyệt của cô ấy cho thấy rõ ràng rằng cô ấy muốn thứ gì đó mang tính giải trí hơn.</p><p id="110">‘Mình nên đáp lại thế nào đây?’</p><p id="111"><strong>[Số 003: Cuộc Hành Quyết Hàng Trăm Người 68% → 42%] </strong></p><p id="112"><strong>[Đã thay đổi] </strong></p><p id="113">Xác suất đang giảm xuống một cách rõ rệt.</p><p id="114">Tín hiệu tốt đây.</p><p id="115">Tôi thực sự không muốn bị chém đầu đâu. Tôi cần phải hạ nó xuống thấp hơn nữa.</p><p id="116">Và có vẻ như Asella đang thực sự cân nhắc lời gợi ý của tôi về việc không nhất thiết phải ngắt bỏ nụ hoa.</p><p id="117">Tôi sẽ lấn tới thêm một chút nữa.</p><p id="118">“Hơn nữa, hoa hồng sẽ đẹp hơn khi có cả thân cành.”</p><p id="119">“Tại sao?”</p><p id="120">“Xin người hãy nhìn kỹ.”</p><p id="121">Asella, lúc này đã bị khơi gợi sự hứng thú, chỉnh lại tư thế trên ghế để đối diện với tôi. Tôi cầm lên một đóa hồng vẫn chưa được loại bỏ gai.</p><p id="122">“Như người có thể thấy, hoa hồng có gai.”</p><p id="123">“Đúng vậy. Nhờ nó mà ta đã bị thương. Vậy mà ngươi vẫn bảo thân cây là đẹp sao, Ngài Gothberg.”</p><p id="124">Tôi cất bông hồng đầy gai vào túi trong của mình.</p><p id="125">Sẽ rất rắc rối nếu Asella bất cẩn chạm vào nó và bị thương lần nữa.</p><p id="126">“Bông hoa càng lộng lẫy thì gai của nó càng sắc nhọn. Một thứ càng xinh đẹp thì càng có nhiều kẻ thù muốn chiếm đoạt, nên lẽ tự nhiên là nó cần trang bị vũ khí để tự bảo vệ mình.”</p><p id="127">“Hừm, rồi sao nữa?”</p><p id="128">Asella hất cằm như thể đang đợi xem tôi còn điều gì để nói.</p><p id="129">Tôi khẽ uốn cong thân hoa hồng trong tay. Nó tương đối dẻo.</p><p id="130">Hoa hồng vàng là một loài đặc hữu chỉ tồn tại ở thế giới này.</p><p id="131">Tôi đã xác nhận điều này khi nghiên cứu các loại thực vật để làm dược liệu trước đây.</p><p id="132">Thứ này chắc chắn sẽ hiệu quả.</p><p id="133">“Thứ thần sắp cho người thấy chỉ có thể làm được với những bông hoa vẫn còn giữ nguyên thân.”</p><p id="134">Tôi sắp xếp những đóa hồng đã được tỉa gai gọn gàng. Sau đó, tôi gập một thân cây nằm ngang và bắt đầu đan chúng lại, cứ thế lặp đi lặp lại quá trình này.</p><p id="135">“...Hả.”</p><p id="136">Acella lộ vẻ ngạc nhiên khi nhìn đôi tay tôi đưa qua đưa lại thoăn thoắt.</p><p id="137">Sau một lúc, một vòng hoa hồng rực rỡ đã thành hình trên bàn.</p><p id="138">“Người sẽ không thể làm được thứ này nếu ngắt bỏ nụ hoa đâu.”</p><p id="139">Asella cẩn thận nhấc vòng hoa tôi vừa làm lên và quan sát nó từ nhiều góc độ khác nhau.</p><p id="140">Liệu cô ấy có thích nó không?</p><p id="141">Tôi không thể đoán được chỉ qua biểu cảm đó.</p><p id="142">“Tại sao nó lại có hình vòng tròn?”</p><p id="143">À, cô ấy không biết đây là một chiếc vương miện hoa.</p><p id="144">Tôi nhẹ nhàng cầm lấy vòng hoa và đặt nó lên mái đầu nhỏ nhắn của Acella.</p><p id="145">“Đây là một vật trang trí được đeo trên đầu như thế này ạ.”</p><p id="146">Asella chớp đôi mắt to tròn vài lần, rõ ràng là chưa từng nghĩ đến công dụng này của vòng hoa.</p><p id="147">“Nó có hợp với ta không?”</p><p id="148">Cô ấy hỏi, nên tôi trả lời:</p><p id="149">“Người là người xinh đẹp nhất trên thế gian này ạ.”</p><p id="150">Hy vọng đó không phải là một câu trả lời sai lầm.</p><p id="151">“Ta hiểu rồi.”</p><p id="152">Asella đáp lại.</p><p id="153">Đó có vẻ là một câu khẳng định khá đột ngột, nên tôi hỏi lại.</p><p id="154">“Người hiểu điều gì ạ?”</p><p id="155">“Tốt hơn là không nên ngắt bỏ chúng.”</p><p id="156">Hả?</p><p id="157">Có phải cô ấy vừa chấp nhận ý kiến của tôi không?</p><p id="158">Tôi cẩn thận quan sát biểu cảm của Asella.</p><p id="159">Tôi dè dặt nhìn vào đôi mắt vàng kim đang hoàn toàn bị cuốn hút bởi vòng hoa, chú ý để không nhìn thẳng vào mắt cô ấy.</p><p id="160">Chuyện này thật ngoài dự kiến, vì trước đây cô ấy chưa bao giờ chịu lắng nghe bất cứ điều gì tôi nói.</p><p id="161">Có lẽ mười năm trước mọi chuyện thực sự đã khác, hoặc đơn giản là hôm nay tâm trạng cô ấy đang tốt.</p><p id="162">Tôi kiểm tra cửa sổ trạng thái.</p><p id="163"><strong>[Số 003: Cuộc Hành Quyết Hàng Trăm Người 42% → 31%] </strong></p><p id="164"><strong>[Đã thay đổi] </strong></p><p id="165">Cảm giác như tôi đang bước đi trên băng mỏng vậy.</p><p id="166">Asella dường như đã chấp nhận lý lẽ của tôi, nhưng Ending thì vẫn chưa bị xóa bỏ.</p><p id="167">Xét theo việc biên độ dao động đang giảm dần, đây có lẽ không phải là sự kiện chính.</p><p id="168">Dù sao thì tôi cũng đã giảm được nó đáng kể so với lúc ban đầu.</p><p id="169">Tôi tò mò không biết sự kiện chính nào có thể truyền cảm hứng cho Asella.</p><p id="170">Tôi hỏi Asella:</p><p id="171">“Nhân tiện, thưa Điện hạ, người định làm gì với đống hoa hồng này vậy?”</p><p id="172">“Hừm...”</p><p id="173">Môi dưới của Asella hơi bĩu lên một chút.</p><p id="174">“Hãy giữ bí mật với người khác.”</p><p id="175">“Đương nhiên ạ.”</p><p id="176">“Lát nữa ta sẽ mang tặng chúng cho Mẫu hậu.”</p><p id="177">“...Như một món quà sao?”</p><p id="178">“Đúng vậy.”</p><p id="179">Asella khẳng định đầy tự tin.</p><p id="180">Chờ đã, tại sao cô ấy lại hái hoa từ vườn của nhà người khác để mang đi tặng cho mẹ mình chứ?</p><p id="181">Chuyện này chẳng khác gì việc hỏi tại sao phải mua đồ trong khi bạn có thể lấy trộm từ vị hôn phu của mình.</p><p id="182">Cách suy nghĩ của cô ấy hoàn toàn khác biệt với tôi.</p><p id="183">Nhưng thôi, dù sao cô ấy cũng là công chúa và Hoàng đế tương lai, cả Đế quốc này sớm muộn gì cũng là của cô ấy.</p><p id="184">Suy nghĩ của người hoàn toàn chính xác, thưa Điện hạ.</p><p id="185">‘Vậy thì vấn đề về những bông hoa hẳn liên quan đến Hoàng hậu nhiều hơn là mình.’</p><p id="186">Trong khi tôi đang sắp xếp lại dòng suy nghĩ, Asella lên tiếng.</p><p id="187">“Ngài Gothberg.”</p><p id="188">“Vâng, thưa Điện hạ.”</p><p id="189">“Chúc may mắn với kỳ thi trị liệu sư hoàng gia.”</p><p id="190">Vị quân chủ bướng bỉnh này dường như rất quyết tâm biến tôi thành trị liệu sư của cô ấy.</p><p id="191">“Tại sao lại cụ thể là thần ạ?”</p><p id="192">“Ta thích ngươi.”</p><p id="193">Chắc hẳn cô ấy đã để mắt đến kiến thức y học của tôi.</p><p id="194">Việc cô ấy thấy hứng thú sau khi tôi cứu mạng Max cũng là điều dễ hiểu.</p><p id="195">Cô ấy là một bạo chúa luôn thực hiện ý tưởng của mình bằng mọi giá.</p><p id="196">Bây giờ tôi đã lọt vào mắt xanh của cô ấy, nên việc từ chối lời đề nghị có thể dẫn đến những màn trả đũa mà chẳng ai lường trước được.</p><p id="197">Đến lúc này, tôi nhận ra rằng việc chỉ duy trì một mối quan hệ xã giao là điều bất khả thi.</p><p id="198">Dù sao thì tôi cũng cần phải loại bỏ tất cả các Bad Ending mà Asella có thể gây ra.</p><p id="199">Vì mục tiêu đó, việc ở bên cạnh cô ấy trong thời gian tới sẽ thuận tiện hơn.</p><p id="200">Tôi cũng cần nâng cao địa vị xã hội của mình để tích lũy thành tựu nữa.</p><p id="201">Ngay cả khi tôi thay đổi hướng đi sau này, lời đề nghị của cô ấy chắc chắn sẽ là một bước đệm tốt.</p><p id="202">...Tôi đã quyết định rồi.</p><p id="203">Tôi sẽ trở thành trị liệu sư hoàng gia.</p><p id="204">Nhưng tốt hơn hết thì vẫn nên đi kèm theo các điều kiện có lợi.</p><p id="205">“Nếu thần được chọn làm trị liệu sư của người, thưa Điện hạ.”</p><p id="206">Asella khẽ nhướn mày.</p><p id="207">“Thần sẽ chủ yếu sử dụng y học. Nên người sẽ cần cung cấp một môi trường phù hợp cho việc điều trị dựa trên y học.”</p><p id="208">“Được.”</p><p id="209">“Với tư cách là con trưởng, thần cũng phải trông nom gia đình mình. Thần sẽ thỉnh thoảng cần vắng mặt, và mong người hiểu cho. Trong những lúc đó, thần sẽ huấn luyện các y tá để chăm sóc người.”</p><p id="210">“Điều đó cũng chấp nhận được.”</p><p id="211">“Cuối cùng.”</p><p id="212">Tôi lấy một chiếc phong bì đã chuẩn bị sẵn trong phòng và viết điều gì đó lên đó.</p><p id="213">Tôi niêm phong nó bằng sáp và đóng dấu triện của mình lên.</p><p id="214">“Nếu thần lập được công trạng lớn với tư cách là trị liệu sư của người, người phải thực hiện yêu cầu được viết trong phong bì này ạ.”</p><p id="215">“Ngươi đã viết cái gì?”</p><p id="216">“Đó không phải là một yêu cầu phi thực tế kiểu như đòi cả Đế quốc đâu. Nó chỉ là một vấn đề đơn giản mà người có thể chấp thuận ngay cả vào lúc này.”</p><p id="217">“Rất tốt, nếu chỉ có thế.”</p><p id="218">Khi Asella đưa tay ra định lấy chiếc phong bì, tôi hơi rụt tay lại một chút.</p><p id="219">“Thần muốn một lời thề ràng buộc.” </p><p id="220">“Thật táo bạo. Ngươi muốn ta dùng một Geass sao?”</p><p id="221">“Vâng. Người có thể kiểm chứng bằng ma thuật hoặc cổ vật rằng thần không hề nói dối về việc nội dung bên trong chỉ là chuyện vặt vãnh.”</p><p id="222">Asella nhếch mép trước thái độ của tôi.</p><p id="223">Đó là một cái nhìn bề trên, như thể đang thách thức tôi cứ thử bất kỳ mưu hèn kế mọn nào xem.</p><p id="224">Asella dùng ngón tay vẽ một vòng tròn ma thuật vào không trung.</p><p id="225">Mana vàng kim của cô ấy rỉ ra và lan tỏa như một làn khói.</p><p id="226">Một Geass.</p><p id="227">Một ma thuật của giao ước.</p><p id="228">Một loại ma thuật có lực ràng buộc đảm bảo các lời hứa sẽ được thực hiện bằng mọi giá.</p><p id="229">“Ta, Asella von Württemfelt.”</p><p id="230">Giọng nói trong trẻo của cô ấy vang vọng, làm rung động vòng tròn ma thuật.</p><p id="231">“Khi Lars Gotberg lập được công trạng lớn với tư cách là trị liệu sư của ta, ta sẽ mở phong bì và thực hiện những gì được viết trong đó.”</p><p id="232">Ba vòng tròn ma thuật xoay theo chiều kim đồng hồ, lóe sáng dữ dội.</p><p id="233">“Nhân danh đại hiền triết Deliphakereus.”</p><p id="234"><em>Xoẹt!</em></p><p id="235">Ánh sáng tập trung trong tay Asella bùng nổ ra bên ngoài.</p><p id="236">Vậy là khế ước đã được thiết lập.</p><p id="237">“Giờ thì ta thực sự tò mò về nội dung bên trong rồi đấy.”</p><p id="238">“Đó sẽ là thứ khiến người hài lòng, thưa Điện hạ.”</p><p id="239">Đương nhiên là vậy rồi.</p><p id="240">Vì cô ghét tôi lắm mà.</p><p id="241">[Asella von Württemfelt sẽ hủy bỏ hôn ước với Lars Gotberg, bãi nhiệm vị trí trị liệu sư của anh, và đưa anh ta rời khỏi Hoàng cung một cách an toàn.]</p><p id="242">Chẳng lẽ tôi lại không cần bấy nhiêu bảo hiểm để có thể trở về nhà an toàn sao?</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'klpj7uWZ4OyXDJJ3cwyVy680vaSuXe5D6Irgys4V';
        var comment_type = 'chapter';
        var comment_typeid = '276410';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'klpj7uWZ4OyXDJJ3cwyVy680vaSuXe5D6Irgys4V';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('21068');
    chapter_id = parseInt('276410');

    readingObject = {
        series_id: series_id,
        series_title: 'Chàng bác sĩ đã chữa khỏi bệnh cho ác nữ và chạy đi mất',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="klpj7uWZ4OyXDJJ3cwyVy680vaSuXe5D6Irgys4V" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
