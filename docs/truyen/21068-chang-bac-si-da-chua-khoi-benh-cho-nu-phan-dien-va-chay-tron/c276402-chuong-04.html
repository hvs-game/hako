<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Chàng bác sĩ đã chữa khỏi bệnh cho ác nữ và chạy đi mất - Chương 04: Kẻ gây rối của gia tộc Hầu tước(2) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Trở thành bác sĩ cho nữ phản diện, người đã hủy diệt thế giới. Tôi sau đó đã cố gắng để trốn thoát nhưng phản ứng của cổ lạ lắm. Sarnius: Mình cần một cái tên truyện hay hơn, for real.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="lXiSmsNjuXn8GUmR2GZQoPrRybYRpljCs7vQ9Y79">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s21068-8f3c9129-61d6-407a-a722-c02eeb99ad90.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c180462-chuong-03"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276410-chuong-05-tri-lieu-su-cua-cong-chua-muon-chay-tron"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04" style="background: url('https://i.hako.vn/ln/series/covers/s21068-8f3c9129-61d6-407a-a722-c02eeb99ad90.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron">Chàng bác sĩ đã chữa khỏi...</a></h5>
                    <small><i class="fas fa-pen"></i>긘가</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/t28455-web-novel">Web Novel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c161508-chuong-01-nu-phan-dien-ke-huy-diet-the-gioi">
                                                                        Chương 01: Nữ phản diện, kẻ hủy diệt thế giới
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c164014-chuong-02-tro-ve-10-nam-truoc">
                                                                        Chương 02: Trở về 10 năm trước
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c180462-chuong-03">
                                                                        Chương 03: Kẻ gây rối của gia tộc Hầu tước(1)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04">
                                                                        Chương 04: Kẻ gây rối của gia tộc Hầu tước(2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276410-chuong-05-tri-lieu-su-cua-cong-chua-muon-chay-tron">
                                                                        Chương 05: &quot;Trị liệu sư&quot; của Công chúa muốn chạy trốn
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Web Novel</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 04: Kẻ gây rối của gia tộc Hầu tước(2)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04#chapter-comments" style="text-decoration: underline">1 Bình luận</a> -
                        Độ dài: 2,872 từ - Cập nhật: 
                        <time class="topic-time timeago" title="21-12-2025 13:47:29" datetime="2025-12-21T13:47:29+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 04: Kẻ gây rối của gia tộc Hầu tước(2)</p>
                    <p id="1">Sả: Mình chỉ muốn nói sơ về bối cảnh thôi. Thế giới này không tồn tại khái niệm "Bác sĩ", mà chủ yếu là những người sử dụng ma thuật trị liệu, nên mình sẽ dịch chung là Trị Liệu Sư. Main là bác sĩ duy nhất</p><p id="2">...</p><p id="3">...</p><p id="4">...</p><p id="5">Khi tôi lao về phía con chó khổng lồ, một bầu không khí hỗn loạn bùng nổ ngay xung quanh.</p><p id="6">“Thằng ranh con đó đang bóp cổ con chó của công chúa kìa!”</p><p id="7">“Hắn đang hành hạ con vật tội nghiệp đó!”</p><p id="8">“Giữa thanh thiên bạch nhật mà hắn lại say rượu đến mức hóa điên rồi sao? Ai đó ngăn hắn lại mau!”</p><p id="9">Chà, đúng là những con người đầy định kiến.</p><p id="10">Đây là điều trị y tế, không phải ngược đãi.</p><p id="11">Dù tôi chẳng có lấy một tấm bằng hành nghề - và việc này cũng chẳng khác gì trò “lang băm” - nhưng tôi còn lựa chọn nào khác đâu?</p><p id="12">Trong y học, thời gian là quan trọng nhất.</p><p id="13">Khi chạm vào cổ Max, tôi có thể cảm nhận rõ ràng.</p><p id="14">Có một vật cứng, kích cỡ bằng nắm tay đang mắc kẹt ngay đó.</p><p id="15">Có vẻ nó đã nuốt chửng một hạt trái cây lớn hoặc một viên đá, khiến đường thở bị bít kín hoàn toàn.</p><p id="16">Đó chính là vấn đề của thế giới này.</p><p id="17">Người ta đã quá quen với việc dùng ma thuật trị liệu để giải quyết mọi thứ, từ vết thương hở cho đến bệnh tật mà chẳng thèm phân loại.</p><p id="18">Hệ quả là, việc truy tìm căn nguyên của tổn thương chỉ còn là chuyện thừa thãi.</p><p id="19">Người ta nói rằng sự thống trị của ma thuật trị liệu không phải lúc nào cũng phổ biến như vậy.</p><p id="20">Nó là một hiện tượng nảy sinh vì những người dân thường không có điều kiện học hành buộc phải dựa dẫm vào ma thuật trị liệu, và từ đó củng cố quyền lực của giáo hội.</p><p id="21">Tập tục này được cho là bắt nguồn từ Thánh quốc, nhưng sau hàng trăm năm, nó đã bám rễ sâu vào tâm trí mọi người.</p><p id="22">Khốn nỗi, ma thuật trị liệu không phải là vạn năng.</p><p id="23">Nó đúng là có thể chữa lành vết thương, nhưng hiệu suất lại cực kỳ thất thường.</p><p id="24">Đặc biệt là trong những ca như thế này:</p><p id="25">Khi đường thở bị tắc, việc dùng phép chữa lành cho phổi hay não bộ đang thiếu oxy chỉ làm kéo dài sự đau đớn cho đến khi chết mà thôi.</p><p id="26">“Chà, nếu xét theo thời đại này thì cũng dễ hiểu thôi.”</p><p id="27">Đây là thời kỳ mà khái niệm về vệ sinh dịch tễ hay nhiễm trùng còn chưa thành hình.</p><p id="28">Giải phẫu học thì dậm chân tại chỗ, nên chẳng ai thực sự hiểu nổi cấu trúc bên trong cơ thể sống.</p><p id="29">“Thứ này không cần chữa lành — nó cần được điều trị.”</p><p id="30">Cấp cứu khẩn cấp.</p><p id="31">Phương pháp rất đơn giản.</p><p id="32">Tôi vòng tay qua eo Max, nhấc bổng nó lên để hai chân sau của nó lơ lửng trên không.</p><p id="33">“Thiếu gia! Dừng tay lại ngay!”</p><p id="34">Đám trị liệu sư nháo nhào cả lên vì tưởng tôi đang làm trò điên rồ.</p><p id="35">Cha tôi cũng bàng hoàng, mồ hôi vã ra như tắm.</p><p id="36">Nhưng duy chỉ có một người.</p><p id="37">Ánh mắt của Asella bằng cách nào đó lại có chút khác biệt.</p><p id="38">Nửa phần bối rối. Nửa phần mong đợi.</p><p id="39">Một biểu cảm tò mò về những gì tôi sắp thể hiện.</p><p id="40">Tôi khom lưng ôm lấy Max. Hai bàn tay chồng lên nhau, tay trái nắm đấm và tay phải nắm chặt lấy nó.</p><p id="41">Tôi hơi khuỵu gối để đảm bảo lực được truyền đi tốt nhất.</p><p id="42">Tôi đặt nắm đấm của mình vào vùng thượng vị của Max và kéo mạnh bằng mọi sức bình sinh.</p><p id="43">“Hự!”</p><p id="44">Tiếng nghẹn của Max càng lúc càng lớn hơn.</p><p id="45">Tôi lặp lại động tác ép bụng năm lần, nhưng vẫn chưa có gì thay đổi.</p><p id="46">Lần thử đầu tiên thất bại.</p><p id="47">“Trời đất ơi!”</p><p id="48">“Thiếu gia đang giết con chó đó!”</p><p id="49">Tôi lập tức nới lỏng vòng tay.</p><p id="50">Sau đó lại dồn một lực mạnh mẽ lần nữa và <em>pặc</em>!</p><p id="51"><em>Khẹc!</em></p><p id="52">Lần này, Max phát ra một tiếng ho khác biệt và nhổ ra một dị vật lớn.</p><p id="53">Max hổn hển hớp lấy không khí, nó đã tống ra ngoài thứ trông giống như một quả hạch cứng.</p><p id="54">Chà, chắc hẳn nó đã tham ăn mà tống cả quả vào mồm vì mùi thơm ngọt, để rồi suýt thì chầu trời vì nghẹn.</p><p id="55">Max cuối cùng cũng đứng vững trên bốn chân, ho khùng khục thêm vài cái xuống thảm cỏ.</p><p id="56">Sau đó, như thể chưa từng có chuyện gì xảy ra, nó vẫy đuôi với vẻ mặt thản nhiên.</p><p id="57">Vâng, che giấu nỗi đau cũng là một đặc tính của loài chó.</p><p id="58">Tôi gục xuống thảm cỏ, hoàn toàn kiệt sức.</p><p id="59">Max quá nặng khiến tôi ướt đẫm mồ hôi.</p><p id="60">Cơ thể này đúng là phế vật, tôi cần phải bắt đầu tập luyện nghiêm túc thôi.</p><p id="61">Max tiến lại gần, dụi mõm vào mặt tôi thay cho lời cảm ơn, nên tôi cũng thuận tay xoa đầu nó.</p><p id="62">“Cái quái gì vừa xảy ra vậy...”</p><p id="63">“Thiếu gia vừa làm cái gì thế...?”</p><p id="64">Tôi trả lời những trị liệu sư đang ngơ ngác.</p><p id="65">“Nó được gọi là thủ thuật Heimlich. Đây là một quy trình cấp cứu khi đường thở bị tắc nghẽn bởi dị vật. Nó rất hữu ích trong thực tế, nên hãy nhớ lấy.”</p><p id="66">Vì không hiểu tôi đang nói cái mô tê gì, họ chỉ biết nghiêng đầu xăm xoi.</p><p id="67">Có lẽ sau này tôi nên tập hợp họ lại và giảng một bài về hồi sức tim phổi (CPR) luôn nhỉ?</p><p id="68">Biết đâu đấy, lỡ sau này có ai đó học được mà cứu mạng tôi trong tình huống khẩn cấp thì sao.</p><p id="69">“Trời ạ, thật đáng kinh ngạc. Không ngờ con lại dùng một phương pháp bất ngờ như vậy.”</p><p id="70">Cha tôi gấp cuốn kinh thánh lại với vẻ đầy ấn tượng.</p><p id="71">Với một người đã sử dụng ma thuật trị liệu cả đời, điều này hẳn là rất mới mẻ.</p><p id="72">“Nếu không cứu được con chó này, đó sẽ là một sự sỉ nhục lớn đối với Công chúa và Hoàng hậu. Danh tiếng gia tộc ta cũng theo đó mà hoen ố. Nhờ có con mà chúng ta đã vượt qua được đại nạn này, con trai ạ”.</p><p id="73">Cha vỗ vai tôi và đỡ tôi dậy.</p><p id="74">Tôi đứng lên và đáp lời:</p><p id="75">“Là con trưởng của gia tộc Gotberg, đó là nghĩa vụ của con.”</p><p id="76">“Haha, con trai ta từ bao giờ đã trở nên vững vàng như thế này? Con đã âm thầm nghiên cứu ma thuật trị liệu sao?”</p><p id="77">“À, đó không phải là ma thuật trị liệu.”</p><p id="78">Câu trả lời của tôi làm cha giật mình.</p><p id="79">“Vậy đó là kỹ thuật gì?”</p><p id="80">“Y học.”</p><p id="81">“Y học... vậy ra đó là một nền tảng học thuật, chứ không đơn thuần là một kỹ thuật.</p><p id="82">Cha mỉm cười đầy trân trọng.</p><p id="83">Một thông báo xuất hiện trong cửa sổ trạng thái của tôi.</p><p id="84"><strong>[Số 004: Mật Độc Ngọt Ngào 71% → 0%] </strong></p><p id="85"><strong>[Đã sửa đổi] </strong></p><p id="86"><strong>[Bad Ending đã bị xóa bỏ.] </strong></p><p id="87">“Oa.”</p><p id="88">Một Bad Ending đã bị xóa bỏ.</p><p id="89">Tôi không kìm được một nụ cười nhẹ.</p><p id="90">‘Giờ mình mới nhớ ra. Đó là một Bad Ending mà Asella đã dùng ma thuật để rút hết không khí và gây ra sự ngạt thở.’</p><p id="91">Ugh, đúng là một ký ức tồi tệ.</p><p id="92">Nhưng vì Max đã bình an vô sự, Asella sẽ không còn lý do để nảy sinh những ấn tượng lệch lạc về sự ngạt thở nữa.</p><p id="93">Cảm giác như một trong những chấn thương của tôi cũng biến mất theo.</p><p id="94">Đầu óc tôi trở nên sảng khoái, như thể oxy vừa tràn vào đột ngột.</p><p id="95">“Chuyện này có vẻ khả thi hơn mình tưởng?”</p><p id="96">Xóa bỏ các Bad Ending... thực ra cũng có chút thú vị.</p><p id="97">Max, nãy giờ vẫn đang cọ vào chân tôi, bỗng nhiên nhảy sang phía đối diện.</p><p id="98">Đến bên không ai khác ngoài chủ nhân của nó, Asella.</p><p id="99">Asella đã hoàn toàn trở lại với dáng vẻ máu lạnh thường ngày, không còn dấu vết nào của sự bối rối lúc nãy.</p><p id="100">Mọi người xung quanh đều bất giác rùng mình trước khí thế bức người tỏa ra từ cô gái mười bốn tuổi này.</p><p id="101">Cô ấy giơ một ngón tay chỉ về phía tôi.</p><p id="102">“Ta muốn hắn làm trị liệu sư riêng của ta.”</p><p id="103">Cái gì?</p><p id="104">“Dạ?!”</p><p id="105">“Công chúa?!”</p><p id="106">Mọi người đều khá sốc trước tuyên bố của Asella.</p><p id="107">Những người hầu cận, đồng thời cũng là cố vấn của cô, là những người đầu tiên cố gắng can ngăn chủ nhân mình.</p><p id="108">“Công chúa, xin hãy khoan đã...”</p><p id="109">“Thần tin rằng vị Thiếu gia đây hầu như chả có kiến thức căn bản gì về ma thuật trị liệu cả.”</p><p id="110">“Có lẽ người nên xem xét lại...”</p><p id="111">Asella phóng một cái nhìn sắc lẹm về phía họ, và tất cả im bặt.</p><p id="112">Sự phản đối cũng lan sang cả các trị liệu sư của gia tộc tôi.</p><p id="113">“G-Gia chủ! Kỳ thi tuyển chọn trị liệu sư vẫn đang diễn ra mà!”</p><p id="114">“Làm sao chúng thần có thể vứt bỏ cơ hội ngàn vàng để bước chân vào Hoàng cung như thế này...!”</p><p id="115">“Nếu Thiếu gia đi với tư cách là trị liệu sư riêng của Công chúa mà lại vô tình phạm sai lầm, thì hậu quả sẽ vô cùng thảm khốc!”</p><p id="116">Cha tôi cũng bị bất ngờ trước lời tuyên bố đột ngột của Asella, xét qua dáng vẻ thận trọng của ông.</p><p id="117">Thực tế, vào thời điểm này, tôi tuy đã có tên trong học viện nhưng lại nổi danh là một gã phá gia chi tử, suốt ngày chỉ biết đắm mình trong men rượu.</p><p id="118">Hôn ước này vốn dĩ chỉ là một ván bài chính trị khô khốc giữa Hoàng gia và gia tộc Gothberg.</p><p id="119">“Đó là vấn đề của các người.”</p><p id="120">Nó chẳng liên quan gì đến tôi cả.</p><p id="121">“Nhưng con cũng không muốn đi.”</p><p id="122">Nếu tôi vào Hoàng cung với tư cách trị liệu sư riêng, tôi sẽ liên tục bị vướng vào rắc rối với Asella.</p><p id="123">Đúng là điều đó sẽ cho tôi nhiều cơ hội hơn để xóa bỏ các Bad Ending.</p><p id="124">Và địa vị xã hội của tôi cũng sẽ tăng lên.</p><p id="125">Nhưng tôi lại phải chạm mặt người phụ nữ này mỗi ngày ư?</p><p id="126">Mỗi sáng đều phải kiểm tra mạch mana cho ác nữ này?</p><p id="127">Tôi không muốn chết vì kiệt sức hay đau tim đâu. Nếu vậy thì tôi hồi quy về 10 năm trước làm quái gì cho mệt.</p><p id="128">“Ngăn chặn sự sụp đổ của gia tộc rồi thong thả hưởng lạc ở đây mới là thượng sách”.</p><p id="129">Trị liệu sư riêng?</p><p id="130">Đó là cái nghề phải túc trực bên cạnh chủ nhân 24/7 vì chẳng biết khi nào tai họa ập đến. Một cái ghế mà hễ ngồi xuống là coi như “án chung thân” vì việc bàn giao là không thể.</p><p id="131">Đã thế, vì là người thân tín nhất, nếu phe phái Hoàng gia sụp đổ, trị liệu sư riêng cũng sẽ bị lôi ra máy chém đầu tiên bất kể có tội hay không.</p><p id="132">‘Chỉ có kẻ điên mới đồng ý.’</p><p id="133">Cục Y tế Hoàng gia, nơi các ngự y làm việc, có thể so sánh với một bệnh viện đại học.</p><p id="134">Chỉ riêng Hoàng đế đã có tới ba trị liệu sư riêng.</p><p id="135">Mỗi thành viên xa gần của Hoàng tộc đều có trị liệu sư riêng, đi kèm là một đoàn trợ lý.</p><p id="136">Nơi đó lúc nhúc những trị liệu sư.</p><p id="137">Cục Y tế Hoàng gia là nơi những trị liệu sư tự cao tự đại tham gia vào các trò chơi chính trị.</p><p id="138">Cũng giống như các giám đốc phòng khám tư nhân kiếm được nhiều tiền và sở hữu tòa nhà riêng hơn so với các giáo sư bệnh viện đại học vậy.</p><p id="139">Ít chính trị hơn, ít áp lực hơn.</p><p id="140">Các Bad Ending sẽ xảy ra vào 10 năm sau, nên tôi có thể xóa bỏ chúng dần dần khi cơ hội đến.</p><p id="141">Gặp Asella mỗi tháng một lần là quá đủ rồi.</p><p id="142">Tốt hơn hết là hủy bỏ hôn ước sau một năm và không bao giờ gặp lại cô ta nữa.</p><p id="143">Tôi cần phải dàn xếp tình huống này.</p><p id="144">Tôi bình tĩnh lên tiếng.</p><p id="145">“Thần rất vinh dự trước lời đề nghị của Công chúa. Tuy nhiên, các trị liệu sư nói có lý. Gia tộc thần đang tiến hành một kỳ thi được tuyển chọn kỹ lưỡng để tìm ra ứng cử viên phù hợp nhất cho người, vì vậy nếu người có thể chờ đợi...”</p><p id="146">Tôi vô thức khựng lại khi mồ hôi lạnh chảy ròng ròng sau lưng.</p><p id="147">Một con số trên cửa sổ trạng thái của tôi nhấp nháy đỏ một cách đáng ngại.</p><p id="148"><strong>[Số 056: Sự Căm Hận của Ác Nữ 21% → 64%] </strong></p><p id="149">‘Thôi xong.’</p><p id="150">Nếu cô ta đã thực sự không thích điều gì đó, cô ta sẽ không ngại rút kiếm ra nói chuyện đâu.</p><p id="151">Liếc nhìn Asella, tôi thấy sắc mặt cô ấy đã trở nên cực kỳ đáng sợ.</p><p id="152">Không khí đặc quánh lại khiến ai nấy cũng phải ngậm chặt miệng.</p><p id="153">Cô ấy trừng mắt nhìn tôi và hỏi.</p><p id="154">“Ngươi đang từ chối sao?”</p><p id="155">“...Như người đã nghe, thần hầu như chưa học về trị liệu.”</p><p id="156">“Vậy thì sao?”</p><p id="157">“Thần không biết cách sử dụng ma thuật trị liệu.”</p><p id="158">“Ngươi sẽ không làm?”</p><p id="159">Tỷ lệ phần trăm tiếp tục tăng, từ 64% lên 72%.</p><p id="160">Cô ấy trông như sẵn sàng chặt đầu tôi ngay tại chỗ nếu tôi không tuân theo.</p><p id="161">Tôi cần phải câu giờ.</p><p id="162">“Vậy thần đề xuất thế này.”</p><p id="163">Tôi lùi lại một bước khi Asella hơi hất cằm lên.</p><p id="164">“Điều thần lo sợ nhất chính là sự thiếu sót của bản thân. Thần không thể mạo hiểm đánh cược với sức khỏe ngọc ngà của Công chúa”.</p><p id="165">Asella tỏ ra hứng thú với lời nói của tôi.</p><p id="166">Tôi dõng dạc tuyên bố với lồng ngực ưỡn cao:</p><p id="167">“Thần sẽ tham gia vào kỳ thi tuyển chọn trị liệu sư đang diễn ra. Nếu thần có thể chứng minh năng lực của mình thông qua sự cạnh tranh công bằng, thần sẽ vui lòng chấp nhận vị trí trị liệu sư của người.”</p><p id="168">“Ngươi thề sẽ thực hiện nó một cách nghiêm túc chứ?”</p><p id="169">“Thần thề.”</p><p id="170">Nghe câu trả lời của tôi, Asella nở một nụ cười quỷ quyệt.</p><p id="171">“Nếu ngươi nghiêm túc, thì đương nhiên ngươi phải là người được chọn, có đúng không?”</p><p id="172">“...Vâng?”</p><p id="173">“Nếu ngươi thất bại, ta sẽ trừng phạt ngươi vì tội dám lừa dối ta.”</p><p id="174">Asella ra hiệu cho nữ quan chức thân cận, người cũng là cố vấn của cô ấy.</p><p id="175">“Từ giờ trở đi, hãy giám sát kỳ thi trị liệu sư mà không được bỏ sót bất cứ điều gì. Đảm bảo không có sự gian lận hay thiên vị nào.”</p><p id="176">“Tuân lệnh, Công chúa.”</p><p id="177">Tuyệt vời.</p><p id="178">Chuyện này càng lúc càng rắc rối.</p><p id="179">Vì đây là kỳ thi do gia tộc tôi tổ chức, tôi đã định sẽ cố tình trượt.</p><p id="180">Giờ thì tôi bị mắc bẫy rồi.</p><p id="181">Asella von Württemfelt.</p><p id="182">Tôi đã đánh giá thấp ác nữ lớn nhất Đế quốc này rồi.</p><p id="183">Ngay cả khi mới chỉ là một cô bé, cô ấy đã nắm thóp được tôi.</p><p id="184">“Con ai muốn ý kiến nữa không?”</p><p id="185">Không ai trả lời câu hỏi của Asella.</p><p id="186">Dĩ nhiên là không.</p><p id="187">Ai lại đi giơ tay đồng ý với việc “Có ai muốn bay đầu không?” cơ chứ.</p><p id="188">“Tất cả lui ra đi. Còn ngươi, vào phòng ta.”</p><p id="189">“À, tại sao ạ?”</p><p id="190">Tôi phản đối theo bản năng khi Asella chỉ thẳng vào mình.</p><p id="191">Cô ấy cau mày, như thể không hiểu.</p><p id="192">“Ta chẳng đã bảo ngươi phải đến phòng ta từ trước rồi sao? Không phải ngươi cũng đang định tới đó đó à?”</p><p id="193">À, đúng rồi.</p><p id="194">“Tuân lệnh, thưa Công chúa.”</p><p id="195">Tôi yếu ớt đi theo cô ấy.</p><p id="196">Và bằng cách nào đó, tôi lại được hộ tống bởi những người hầu cận của cô ta.</p><p id="197">Max đã hoàn toàn bình phục và đang vui vẻ vẫy đuôi bên cạnh Asella.</p><p id="198">Chẳng biết cái mô tê gì mà vẫn vui vẻ thế kia, làm chó đúng là sướng thật.</p><p id="199">Asella bước vào phòng qua lối sân thượng trước và ra hiệu cho tôi.</p><p id="200">“Vào đi.”</p><p id="201">Tôi hơi sững sờ trước thái độ thản nhiên của cô ấy.</p><p id="202">Dù đây là phòng mượn và tôi là vị hôn phu của cô ấy, cô ấy có thường hay mời đàn ông vào phòng thế này không?</p><p id="203">Nhưng tôi còn lựa chọn nào khác à?</p><p id="204">Khi được bảo phải vào, tôi buộc phải vào.</p><p id="205">Tôi bước lên sân thượng và tiến vào phòng cô ấy.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c180462-chuong-03" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276410-chuong-05-tri-lieu-su-cua-cong-chua-muon-chay-tron" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(1)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">1 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3132795"
    class="ln-comment-item mt-3 clear"
    data-comment="3132795" 
    data-parent="3132795" 
    data-type="chapter" 
    data-typeid="276402">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u126724-cb951142-cfba-4f1c-8ae4-84ffacf04cc0.gif" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/126724">Simp lỏd Hutao</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        hồi sinh pls
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/21068-chang-bac-si-da-chua-khoi-benh-cho-nu-phan-dien-va-chay-tron/c276402-chuong-04?comment_id=3132795#ln-comment-3132795"
                            class="text-slate-500">
                            <time class="timeago" title="21-12-2025 13:46:16"
                                datetime="2025-12-21T13:46:16+07:00">
                                21-12-2025 13:46:16
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'MQDEmecJTxLUvJsOG7bjMfpJY2eIB1sAQACq83rC';
        var comment_type = 'chapter';
        var comment_typeid = '276402';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'lXiSmsNjuXn8GUmR2GZQoPrRybYRpljCs7vQ9Y79';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('21068');
    chapter_id = parseInt('276402');

    readingObject = {
        series_id: series_id,
        series_title: 'Chàng bác sĩ đã chữa khỏi bệnh cho ác nữ và chạy đi mất',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="lXiSmsNjuXn8GUmR2GZQoPrRybYRpljCs7vQ9Y79" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="https://disinheritguilewallow.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
