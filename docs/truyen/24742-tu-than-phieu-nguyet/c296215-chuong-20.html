<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Tử Thần Phiêu Nguyệt - Chương 20 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Hắn tồn tại ở nơi sâu thẳm nhất của Giang Hồ. Hãy mở to đôi mắt. Nếu không muốn bị kéo xuống vực thẳm.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="yyBdHIFHATvZ0ktpYtY0KQKv2kE2nlBZm7foItxG">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24742-tu-than-phieu-nguyet/c296215-chuong-20">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24742-bcde8564-3a2e-4029-8469-2a4e8aec5d8b.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24742-tu-than-phieu-nguyet/c296185-chuong-19"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24742-tu-than-phieu-nguyet"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24742-tu-than-phieu-nguyet/c296224-chuong-21"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24742-tu-than-phieu-nguyet/c296215-chuong-20" style="background: url('https://i.hako.vn/ln/series/covers/s24742-bcde8564-3a2e-4029-8469-2a4e8aec5d8b.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24742-tu-than-phieu-nguyet">Tử Thần Phiêu Nguyệt</a></h5>
                    <small><i class="fas fa-pen"></i>우각</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/24742-tu-than-phieu-nguyet/c295566-nhan-vat">Minh Họa</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24742-tu-than-phieu-nguyet/t35923-tap-01">Cổ Độc Luyện</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295200-chuong-1">
                                                                        Chương 1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295223-chuong-2">
                                                                        Chương 2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295311-chuong-3">
                                                                        Chương 3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295352-chuong-4">
                                                                        Chương 4
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295356-chuong-5">
                                                                        Chương 5
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295415-chuong-6">
                                                                        Chương 6
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295430-chuong-7">
                                                                        Chương 7
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295528-chuong-8">
                                                                        Chương 8
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295706-chuong-9">
                                                                        Chương 9
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295750-chuong-10">
                                                                        Chương 10
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295890-chuong-11">
                                                                        Chương 11
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295895-chuong-12">
                                                                        Chương 12
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295931-chuong-13">
                                                                        Chương 13
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295936-chuong-14">
                                                                        Chương 14
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295942-chuong-15">
                                                                        Chương 15
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c295988-chuong-16">
                                                                        Chương 16
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296000-chuong-17">
                                                                        Chương 17
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296161-chuong-18">
                                                                        Chương 18
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296185-chuong-19">
                                                                        Chương 19
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296215-chuong-20">
                                                                        Chương 20
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296224-chuong-21">
                                                                        Chương 21
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296247-chuong-22">
                                                                        Chương 22
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296271-chuong-23">
                                                                        Chương 23
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c296280-chuong-24">
                                                                        Chương 24
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Cổ Độc Luyện</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 20</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24742-tu-than-phieu-nguyet/c296215-chuong-20#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,839 từ - Cập nhật: 
                        <time class="topic-time timeago" title="23-01-2026 20:43:51" datetime="2026-01-23T20:43:51+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 20</p>
                    <p id="1">Lần đầu tiên Phiêu Nguyệt nhận ra thứ ánh nắng mà hắn từng yêu thích thời thơ ấu lại có thể trở thành vũ khí giết người.</p><p id="2">Toàn thân hắn như bị ném vào lò lửa.</p><p id="3">Cảm giác như chỉ cần phơi mình thêm một khắc, cả cơ thể sẽ hóa thành tro bụi.</p><p id="4">Trong khi những đứa khác đang quằn quại điên cuồng vì đau đớn, Phiêu Nguyệt vẫn giữ được sự tỉnh táo.</p><p id="5">Hắn nhắm nghiền mắt, nghiến răng nuốt ngược nỗi đau vào trong, dỏng tai nghe ngóng mọi động tĩnh xung quanh.</p><p id="6">Đúng lúc đó, một giọng nói lọt vào tai hắn.</p><p id="7">“Tạo ra được mấy con chó săn khá đấy. Chắc chắn sẽ làm hài lòng khách hàng.”</p><p id="8">Trong giọng nói ấy chứa đựng sự tự tin tuyệt đối của kẻ bề trên.</p><p id="9">Những kẻ chỉ biết cúi đầu nghe lệnh không bao giờ có được cái uy áp ấy. Hơn nữa, khi hắn cất lời, đám xung quanh đều im bặt như tờ. Điều này chứng tỏ tại đây, chỉ mình hắn có tư cách mở miệng.</p><p id="10">Phiêu Nguyệt khắc cốt ghi tâm giọng nói này.</p><p id="11">Giọng Cừu Châu Dương lại vang lên:</p><p id="12">“Tống hết bọn chúng lên xe ngựa. Đưa về Thanh Phong Trang để chúng tập làm quen với thế giới bên ngoài.”</p><p id="13">“Tuân lệnh!”</p><p id="14">Đám thích khách Huyết Ảnh Đoàn lập tức hành động.</p><p id="15">Hai người một nhóm, chúng túm lấy cánh tay lũ trẻ và lôi đi.</p><p id="16">Những cỗ xe ngựa đã được chuẩn bị sẵn, che kín bằng vải đen để ngăn ánh sáng. Đám thích khách thô bạo ném lũ trẻ vào trong xe.</p><p id="17">“Hự!”</p><p id="18">“Á!”</p><p id="19">Cửa xe đóng lại, ánh sáng bị chặn đứng hoàn toàn. Lũ trẻ thở phào nhẹ nhõm, vội vã tháo khăn bịt mắt.</p><p id="20">Phiêu Nguyệt cũng tháo khăn, tựa lưng vào thành xe.</p><p id="21">Thùng xe chật hẹp như cái lồng nhốt thú. Chỉ chứa ba bốn người đã chật, vậy mà chúng nhét cả mười người vào.</p><p id="22">Lũ trẻ bị ép chặt vào nhau, không thể cựa quậy, chỉ biết thở hồng hộc.</p><p id="23">‘Đến cuối cùng, vẫn chỉ coi chúng ta là súc vật.’</p><p id="24">Trong bóng tối, đôi mắt lũ trẻ rực lên lửa giận.</p><p id="25">Chúng đã quen bị đối xử tệ hơn cả cầm thú, nhưng không ngờ khi đã thoát khỏi hầm ngầm, thân phận vẫn rẻ rúng như vậy.</p><p id="26">Cứ tưởng thoát khỏi hang động là đời sẽ khá hơn, ai ngờ vẫn chỉ là con sâu cái kiến. Sự thật phũ phàng khiến chúng tuyệt vọng.</p><p id="27">Phiêu Nguyệt nhắm mắt, thả lỏng cơ thể dựa vào vách gỗ.</p><p id="28">Ở đây hắn chẳng làm được gì. Chi bằng tranh thủ nghỉ ngơi, tích lũy chút thể lực còn hơn.</p><p id="29">Dù chật chội đến mức khó thở, Phiêu Nguyệt vẫn cố thả lỏng cơ bắp, điều hòa nhịp thở.</p><p id="30">Cỗ xe ngựa lăn bánh không ngừng nghỉ.</p><p id="31">Dựa vào trực giác, Phiêu Nguyệt đoán đã hơn một ngày rưỡi trôi qua.</p><p id="32">Suốt chặng đường dài đằng đẵng ấy, đám thích khách Huyết Ảnh Đoàn không hề mở cửa hay ném cho chúng dù chỉ một mẩu bánh vụn. Lũ trẻ bị bỏ đói khát, chịu đựng sự hành hạ của cơn đói suốt một ngày tròn.</p><p id="33">Két...!</p><p id="34">Khi cơn đói cồn cào lên đến đỉnh điểm, xe ngựa dừng lại.</p><p id="35">Phiêu Nguyệt biết đã đến nơi.</p><p id="36">Cánh cửa xe mở ra.</p><p id="37">“Ra ngoài hết đi.”</p><p id="38">Đám thích khách lôi cổ lũ trẻ ra khỏi xe.</p><p id="39">Lũ trẻ sợ hãi ánh mặt trời, nhưng may thay trời đã tối. Chúng có thể bước ra ngoài mà không sợ bị thiêu đốt.</p><p id="40">Nơi chúng đến là một trang viên nhỏ được bao quanh bởi những bức tường cao vút.</p><p id="41">Khi tất cả đã tập hợp đông đủ, Cừu Châu Dương lên tiếng:</p><p id="42">“Đây là nơi các ngươi sẽ tá túc. Tại đây, các ngươi phải học cách thích nghi với cuộc sống bên ngoài. Nhưng đừng thấy được ra ngoài mà buông lỏng cảnh giác. Kẻ nào lười biếng, ta sẽ đích thân kết liễu kẻ đó.”</p><p id="43">“…….”</p><p id="44">Sát khí toát ra từ Cừu Châu Dương khiến lũ trẻ nín thở. Sát khí của hắn quá mạnh, áp đảo hoàn toàn những thích khách non nớt như chúng.</p><p id="45">Ngay cả những đứa lì lợm nhất cũng phải run sợ.</p><p id="46">Hắn phất tay, đám thích khách lùa lũ trẻ vào các phòng. Ít ra ở đây cũng đỡ hơn trên xe ngựa. Mỗi phòng bốn người.</p><p id="47">Phiêu Nguyệt được xếp chung phòng với Tiêu Cách Sơn, Cố Thần Ngọc và một đứa nữa.</p><p id="48">Sống cùng nhau dưới lòng đất bảy năm, nhưng đây là lần đầu tiên họ ở chung một phòng.</p><p id="49">Tiêu Cách Sơn và Cố Thần Ngọc vốn hay qua lại nên không thấy lạ lẫm, nhưng Phiêu Nguyệt đối với chúng hoàn toàn là một kẻ xa lạ.</p><p id="50">Sự hiện diện của hắn khiến bầu không khí trở nên gượng gạo.</p><p id="51">Phiêu Nguyệt nhận ra điều đó, hắn nói:</p><p id="52">“Đừng bận tâm đến ta. Cứ coi như ta không tồn tại là được.”</p><p id="53">“Khà khà! Ai thèm bận tâm đến ngươi chứ?”</p><p id="54">Tiêu Cách Sơn cười khẩy đáp lại, dù sao hắn cũng đã nói chuyện với Phiêu Nguyệt vài lần.</p><p id="55">Trong phòng chẳng có gì ngoài bốn cái giường gỗ cũ kỹ và một cái bàn. Trên giường có đặt sẵn quần áo sạch để thay.</p><p id="56">Dù nhìn qua cũng biết là loại vải thô rẻ tiền, nhưng so với mớ giẻ rách chúng đang khoác trên người thì đã là gấm vóc lụa là rồi.</p><p id="57">Bộ đồ trên người chúng bẩn thỉu đến mức không thể gọi là quần áo, bốc mùi hôi thối nồng nặc do lâu ngày không được giặt giũ.</p><p id="58">“Phải tắm rửa chút đã.”</p><p id="59">“Đi đâu đấy?”</p><p id="60">Phiêu Nguyệt không trả lời, chỉ tay ra cửa sổ.</p><p id="61">Bên ngoài cửa sổ có một cái giếng.</p><p id="62">“A!”</p><p id="63">“Giếng nước!”</p><p id="64">Tiêu Cách Sơn và Cố Thần Ngọc reo lên.</p><p id="65">Bảy năm rồi chúng không được tắm rửa đàng hoàng. Dưới kia nước uống còn thiếu, lấy đâu ra nước tắm.</p><p id="66">Trong khi hai đứa kia còn đang ngỡ ngàng, Phiêu Nguyệt đã ra đến bên giếng.</p><p id="67">Dưới ánh trăng mờ ảo, Phiêu Nguyệt cởi bỏ quần áo, múc từng gầu nước lạnh buốt dội lên người.</p><p id="68">Cảm giác mát lạnh ngấm vào da thịt khiến hắn thực sự cảm nhận được mình đã trở lại thế giới loài người.</p><p id="69">‘Cuối cùng cũng thoát ra rồi.’</p><p id="70">Phiêu Nguyệt lại dội thêm một gầu nước nữa.</p><p id="71">“Tắm chung với nào!”</p><p id="72">Tiêu Cách Sơn vừa chạy vừa cởi đồ, lao đến bên giếng. Cố Thần Ngọc và đứa còn lại cũng hùa theo.</p><p id="73">Lần đầu tiên sau bảy năm, chúng được tắm táp thỏa thuê, ăn uống no say. Và được ngủ một giấc yên bình.</p><p id="74">************************************</p><p id="75">Suốt bảy ngày sau đó, Phiêu Nguyệt tập làm quen với ánh nắng mặt trời.</p><p id="76">Ban đầu, chỉ đứng dưới nắng chừng nửa canh giờ đã khiến hắn đau đớn như chết đi sống lại. Nhưng sau bảy ngày, hắn đã có thể chịu đựng được vài canh giờ.</p><p id="77">Đôi mắt cũng vậy.</p><p id="78">Lúc đầu hắn phải nhắm mắt, dùng thính giác để di chuyển, nhưng dần dần hắn đã có thể mở mắt giữa ban ngày.</p><p id="79">Tuy nhiên, không gian hoạt động của chúng rất hạn chế.</p><p id="80">Chỉ được loanh quanh trong khu vực sân sau. Nhưng thế là đủ để lũ trẻ cảm thấy hạnh phúc.</p><p id="81">Bầu trời xanh ngắt sau bức tường cao, hương cỏ cây thanh khiết, tiếng côn trùng rả rích, những đóa hoa dại ven tường… tất cả đều khiến chúng ngây ngất.</p><p id="82">Đó là những cảnh tượng mà chúng ngỡ rằng sẽ vĩnh viễn không bao giờ được nhìn thấy lần nữa.</p><p id="83">Thay cho những đồng bạn đã bỏ mạng nơi hầm tối, chúng ngắm nhìn thế giới này bằng cả tâm hồn khao khát.</p><p id="84">‘Chết ngay bây giờ cũng cam lòng.’</p><p id="85">Nhiều đứa xúc động đến trào nước mắt.</p><p id="86">Phiêu Nguyệt không đến mức đó, nhưng lòng cũng dậy sóng.</p><p id="87">Hắn thấm thía sự quý giá của những điều bình dị mà ngày xưa hắn từng coi là lẽ đương nhiên. Nhưng Phiêu Nguyệt đủ tỉnh táo để hiểu một điều.</p><p id="88">Cái hạnh phúc này sẽ chẳng kéo dài được bao lâu.</p><p id="89">Huyết Ảnh Đoàn nuôi chúng không phải để làm cảnh.</p><p id="90">Việc kéo chúng ra khỏi bóng tối đồng nghĩa với việc thời điểm sử dụng chúng đã đến.</p><p id="91">Giờ đây, khi chúng đã thích nghi hoàn toàn với ánh sáng, chẳng còn lý do gì để trì hoãn nữa.</p><p id="92">Suy đoán của Phiêu Nguyệt nhanh chóng thành sự thật.</p><p id="93">“Từ giờ ta sẽ phát vũ khí cho các ngươi. Giữ gìn cho cẩn thận, sắp phải dùng đến rồi.”</p><p id="94">Huyết Ảnh Đoàn phát cho lũ trẻ kiếm, ám khí, ngân ti [note87516] , và nhân bì diện cụ.</p><p id="95">Nụ cười tắt ngấm trên môi lũ trẻ.</p><p id="96">Chúng hiểu rằng thời khắc sinh tử đã điểm.</p><p id="97">**********************************************</p><p id="98">Nơi ở của Cừu Châu Dương là Đại Nguyệt Điện, tòa nhà lớn nhất trong Thanh Phong Trang.</p><p id="99">Thanh Phong Trang vốn là nơi dưỡng già của một chủ thương đoàn giàu có. Lão định sống những ngày cuối đời an nhàn bên ái thiếp, nhưng trời không chiều lòng người.</p><p id="100">Ông ta bị ám sát ngay trên giường khi đang ôm ấp mỹ nhân. Gia nhân bỏ đi hết, Thanh Phong Trang trở nên hoang phế và biến thành căn cứ bí mật của Huyết Ảnh Đoàn.</p><p id="101">Gã thích khách trẻ tuổi năm xưa ám sát lão chủ trang viên giờ đã trở thành trung niên, ung dung chiếm giữ nơi này.</p><p id="102">Ngồi đối diện với Cừu Châu Dương là Lâm Tử Liệt, lúc này đã tháo bỏ khăn che mặt.</p><p id="103">Cũng như lũ trẻ, Lâm Tử Liệt và các Giáo Đầu cũng phải vật lộn để thích nghi với ánh sáng sau bảy năm sống trong bóng tối.</p><p id="104">Người trẻ thích nghi nhanh hơn, còn người già như Lâm Tử Liệt thì vất vả vô cùng.</p><p id="105">Qua đợt này, ông ta càng thấm thía tuổi già của mình. Trông ông ta già đi trông thấy so với bảy năm trước.</p><p id="106">Cừu Châu Dương nhìn chằm chằm vào khuôn mặt già nua của Lâm Tử Liệt, rồi nói:</p><p id="107">“Thời gian qua thúc phụ vất vả rồi.”</p><p id="108">“Ta chỉ làm bổn phận của mình thôi.”</p><p id="109">“Nhờ sự hy sinh của thúc phụ và mọi người mà ngân khố của Bổn đoàn mới sung túc được như thế này, thật không biết lấy gì báo đáp.”</p><p id="110">“Ơn nghĩa gì chứ. Nếu không nhờ Tiền nhiệm Đoàn chủ, cái mạng già này đã phơi thây ngoài đường từ lâu rồi.”</p><p id="111">Lâm Tử Liệt đáp lời bình thản.</p><p id="112">Người đưa ông ta vào con đường thích khách, cứu vớt cuộc đời ông ta chính là Cừu Trường Bình, cha của Cừu Châu Dương.</p><p id="113">Để trả món nợ ân tình đó, Lâm Tử Liệt đã nguyện trung thành, phò tá hai đời họ Cừu.</p><p id="114">Rót!</p><p id="115">Cừu Châu Dương tự tay rót rượu cho Lâm Tử Liệt.</p><p id="116">“Thúc phụ đã hoàn thành sứ mệnh. Giờ hãy nghỉ ngơi đi.”</p><p id="117">“Ngươi cho phép ta rửa tay gác kiếm sao?”</p><p id="118">“Tất nhiên. Không chỉ thúc phụ, ta đã sắp xếp để Nhị Kiếm, Tam Kiếm cũng được lui về an hưởng tuổi già.”</p><p id="119">“Đa tạ.”</p><p id="120">“Có gì đâu! Thúc phụ cả đời cống hiến cho Huyết Ảnh Đoàn, chút ân huệ này là lẽ đương nhiên.”</p><p id="121">Cừu Châu Dương rót đầy chén của mình.</p><p id="122">Lâm Tử Liệt nhìn chén rượu với ánh mắt phức tạp.</p><p id="123">Cả đời bán mạng cho Huyết Ảnh Đoàn chỉ để đợi câu nói này.</p><p id="124">Dù không biết còn sống được bao lâu, nhưng được sống những ngày cuối đời không phải chém giết, với ông ta thế là đủ.</p><p id="125">Lâm Tử Liệt nâng chén rượu lên uống cạn.</p><p id="126">Chén rượu rẻ tiền cay xè, nhưng lúc này uống vào lại thấy ngon hơn bất cứ loại mỹ tửu nào trên đời.</p><p id="127">Cừu Châu Dương mỉm cười nâng chén, nhưng chỉ nhấp môi một chút.</p><p id="128">Lâm Tử Liệt đã nghỉ hưu, còn hắn thì chưa.</p><p id="129">Rượu làm tê liệt thần kinh, mụ mẫm phán đoán. Với một thích khách mà sinh tử chỉ cách nhau một sát na, rượu chính là độc dược. Bởi thế, gã chưa bao giờ uống quá một chén, dù trong bất cứ hoàn cảnh nào.</p><p id="130">Chợt Lâm Tử Liệt lên tiếng:</p><p id="131">“Đám trẻ đó… thật đáng tiếc.”</p><p id="132">“…….”</p><p id="133">“Dùng một lần rồi vứt bỏ, thực sự quá uổng phí cho tư chất và năng lực của chúng.”</p><p id="134">“Ta biết.”</p><p id="135">Cừu Châu Dương gật đầu.</p><p id="136">Qua những báo cáo gửi về, hắn biết rõ tiềm năng của lũ trẻ khủng khiếp đến mức nào.</p><p id="137">Nếu thu phục được chúng, Huyết Ảnh Đoàn hoàn toàn có thể trở thành tổ chức thích khách hàng đầu trên giang hồ. Nhưng không thể làm vậy.</p><p id="138">Đó là điều khoản bắt buộc trong hợp đồng với kẻ ủy thác.</p><p id="139">Khách hàng yêu cầu những gương mặt hoàn toàn mới, không dính dáng đến giới thích khách hiện tại.</p><p id="140">Cừu Châu Dương đoán rằng khách hàng muốn che giấu danh tính tuyệt đối.</p><p id="141">Thực tế, dù nhận khoản thù lao khổng lồ lên đến năm mươi vạn lượng hoàng kim, Cừu Châu Dương vẫn không biết khách hàng là ai.</p><p id="142">Nếu không tình cờ phát hiện ra hang động ngầm kia, hắn đã không dám nhận vụ này.</p><p id="143">Việc đào tạo một đội quân thích khách mới mà không để lộ tung tích ra bên ngoài gần như là không thể.</p><p id="144">Người phát hiện ra hang động là cha hắn, Cừu Trường Bình.</p><p id="145">Đó là một công trình nhân tạo bị bỏ hoang từ lâu.</p><p id="146">Sau nhiều năm điều tra, Cừu Trường Bình kết luận đó là cơ sở bí mật của một trong Thập Tam Chi Phái thuộc Ma Giáo ngày xưa.</p><p id="147">Chủ nhân thực sự là ai không quan trọng.</p><p id="148">Quan trọng là nó đã bị bỏ hoang, và là nơi lý tưởng nhất để đào tạo thích khách trong bí mật.</p><p id="149">Thay vì dạy võ công ngay từ đầu, Cừu Châu Dương ném những đứa trẻ không biết gì vào đó, để chúng tự sinh tồn trong môi trường khắc nghiệt. Chỉ những kẻ sống sót mới được dạy võ công và Sát Pháp.</p><p id="150">Cách làm này tàn nhẫn nhưng hiệu quả vô cùng.</p><p id="151">Chi phí thực tế bỏ ra chỉ khoảng mười vạn lượng vàng.</p><p id="152">Bỏ ra mười, thu về năm mươi. Lãi ròng bốn mươi vạn lượng.</p><p id="153">Hàng trăm đứa trẻ đã chết, nhưng với Cừu Châu Dương, mạng sống của chúng chẳng đáng một xu.</p><p id="154">Toàn là trẻ mồ côi, lang thang cơ nhỡ bắt về từ khắp nơi. Chẳng ai quan tâm chúng sống chết ra sao.</p><p id="155">Hoàn toàn phù hợp với yêu cầu của khách hàng: Không để lại dấu vết.</p><p id="156">“Tiếc thì có tiếc, nhưng biết sao được. Duyên phận giữa chúng ta và bọn nó chỉ đến đây thôi.”</p><p id="157">“Hừm!”</p><p id="158">“Thúc phụ cũng đừng bận tâm đến chúng nữa, cứ lo hưởng thụ tuổi già đi. Kiếm một ả đàn bà xinh tươi mà nạp làm thiếp cũng là ý hay đấy.”</p><p id="159">“Ngươi có manh mối gì về kẻ ủy thác không?”</p><p id="160">“Ta cũng chịu. Muốn làm nghề này lâu dài thì phải biết giữ nguyên tắc.”</p><p id="161">Cừu Châu Dương nhếch mép cười lạnh.</p><p id="162">Muốn điều tra thì không khó. Nhưng đối phương dám chi năm mươi vạn lượng vàng và chờ đợi suốt bảy năm trời thì chắc chắn không phải dạng vừa. Đắc tội với những kẻ như thế chẳng có lợi lộc gì.</p><p id="163">Huyết Ảnh Đoàn tuy mạnh, là một trong Thiên Hạ Thập Đại Sát Môn, nhưng vẫn chỉ là một tổ chức trong bóng tối.</p><p id="164">So với các Danh Môn Chính Phái, Huyết Ảnh Đoàn chẳng là cái đinh gì.</p><p id="165">Chỉ cần một đại môn phái ra tay, Huyết Ảnh Đoàn sẽ bị xóa sổ trong nháy mắt.</p><p id="166">Ngoại lệ duy nhất là Bách Quỷ Liên (百鬼聯) – Thiên Hạ Đệ Nhất Sát Môn.</p><p id="167">Nhóm thích khách Thập Huyết Sát (十血殺) của Bách Quỷ Liên là huyền thoại nỗi khiếp sợ của cả giang hồ.</p><p id="168">Ngay cả những thế lực đang thống trị giang hồ như Nhị Cường (二強), Tam Môn (三門), Tam Bá (三覇), Tam Trang (三莊) cũng phải kiêng dè tổ chức này.</p><p id="169">Mục tiêu của Cừu Châu Dương là đưa Huyết Ảnh Đoàn sánh ngang với Bách Quỷ Liên.</p><p id="170">Cho đến lúc đó, cẩn thận không bao giờ thừa.</p><p id="171">“Chỉ cần hoàn thành phi vụ này, Huyết Ảnh Đoàn sẽ lột xác. Khi đó, việc lật đổ Bách Quỷ Liên cũng không phải là chuyện viển vông.”</p><p id="172">“Ừm!”</p><p id="173">Mắt Cừu Châu Dương rực lên tham vọng. Nhưng đối diện hắn, ánh mắt Lâm Tử Liệt lại dao động đầy bất an.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note87516"><a href="#anchor-note87516" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87516" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Dây Cước</span></div><span class="note-content_real long-text">Dây Cước</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24742-tu-than-phieu-nguyet/c296185-chuong-19" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24742-tu-than-phieu-nguyet" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24742-tu-than-phieu-nguyet/c296224-chuong-21" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'yyBdHIFHATvZ0ktpYtY0KQKv2kE2nlBZm7foItxG';
        var comment_type = 'chapter';
        var comment_typeid = '296215';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'yyBdHIFHATvZ0ktpYtY0KQKv2kE2nlBZm7foItxG';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24742');
    chapter_id = parseInt('296215');

    readingObject = {
        series_id: series_id,
        series_title: 'Tử Thần Phiêu Nguyệt',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="yyBdHIFHATvZ0ktpYtY0KQKv2kE2nlBZm7foItxG" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
