<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Tử Thần Phiêu Nguyệt - Chương 26 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Hắn tồn tại ở nơi sâu thẳm nhất của Giang Hồ. Hãy mở to đôi mắt. Nếu không muốn bị kéo xuống vực thẳm.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="PdflSoerDZKnFLInG5hcj8AFcqlrKDUi9ft3W7Yh">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24742-tu-than-phieu-nguyet/c297282-chuong-01">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24742-bcde8564-3a2e-4029-8469-2a4e8aec5d8b.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24742-tu-than-phieu-nguyet/c296345-chuong-25"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24742-tu-than-phieu-nguyet"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24742-tu-than-phieu-nguyet/c297416-chuong-27"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24742-tu-than-phieu-nguyet/c297282-chuong-01" style="background: url('https://i.hako.vn/ln/series/covers/s24742-bcde8564-3a2e-4029-8469-2a4e8aec5d8b.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24742-tu-than-phieu-nguyet">Tử Thần Phiêu Nguyệt</a></h5>
                    <small><i class="fas fa-pen"></i>우각</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/24742-tu-than-phieu-nguyet/c295566-nhan-vat">Minh Họa</a></li>
                                        
                                                            <li class=""><a href="/truyen/24742-tu-than-phieu-nguyet/c295200-chuong-1">Cổ Độc Luyện</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24742-tu-than-phieu-nguyet/t35996-tap-2">Tập 2</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li  class="current" >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297282-chuong-01">
                                                                        Chương 26
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297416-chuong-27">
                                                                        Chương 27
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 2</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 26</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24742-tu-than-phieu-nguyet/c297282-chuong-01#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,403 từ - Cập nhật: 
                        <time class="topic-time timeago" title="25-01-2026 21:51:36" datetime="2026-01-25T21:51:36+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed', 'true', { expires: 1 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 26</p>
                    <p id="1">Như một thích khách lão luyện, việc đầu tiên Phiêu Nguyệt làm là khảo sát địa hình quanh núi Thanh Thành.</p><p id="2">Mỗi phi vụ ám sát đều phải bắt đầu từ việc nắm rõ địa hình như lòng bàn tay. Nhờ đó giúp xác định được con đường xâm nhập và rút lui tối ưu nhất.</p><p id="3">Nhiều thích khách thường coi nhẹ bước này vì nó tốn thời gian và đòi hỏi sự kiên nhẫn. Nhưng với những thích khách lão luyện, đây là bước quan trọng nhất.</p><p id="4">Về mặt này, Phiêu Nguyệt có tố chất của một thích khách bẩm sinh.</p><p id="5">Hắn chưa bao giờ lơ là cảnh giác, luôn quan sát mọi biến động xung quanh dù là nhỏ nhất. Thói quen này giúp hắn trưởng thành nhanh chóng.</p><p id="6">Dù đây là lần đầu thực chiến, nhưng hắn phân tích môi trường xung quanh thành thạo như một kẻ đã có kinh nghiệm đầy mình.</p><p id="7">Bản thân núi Thanh Thành đã là một pháo đài tự nhiên.</p><p id="8">Cái tên <strong>Thanh Thành (靑城)</strong> bắt nguồn từ việc những ngọn núi xếp liền nhau như một bức tường thành màu xanh vĩ đại.</p><p id="9">Thanh Thành phái được bảo vệ bởi chính bức tường thành này.</p><p id="10">Địa thế hiểm trở khiến việc xâm nhập và thoát thân trở nên vô cùng khó khăn.</p><p id="11">Khắp nơi trên núi là vô số đạo quán [note87583].</p><p id="12">Tất cả đều thuộc về Thanh Thành phái.</p><p id="13">Bình thường họ sống tách biệt, nhưng khi có biến, tất cả sẽ đồng lòng như một khối thống nhất.</p><p id="14">Sức mạnh thực sự của Thanh Thành phái nằm ở mạng lưới đạo quán này.</p><p id="15">Ám sát thành công đã khó, toàn mạng rút lui còn khó hơn gấp bội.</p><p id="16">Hơn nữa, Thanh Thành phái đang ở thời kỳ hoàng kim rực rỡ nhất trong nhiều thập kỷ qua. Sau khi Đường Môn sụp đổ, không còn thế lực nào ở Tứ Xuyên đủ sức ngăn cản họ.</p><p id="17">Hệ thống phòng thủ của họ cũng vì thế mà kiên cố như tường đồng vách sắt. [note87584]</p><p id="18">Chỉ trong một ngày, việc nắm bắt toàn bộ mạng lưới phòng thủ khủng khiếp ấy là điều bất khả thi.</p><p id="19">Lý trí mách bảo Phiêu Nguyệt nên từ bỏ, ẩn nấp chờ cơ hội trốn khỏi Tứ Xuyên.</p><p id="20"><strong>Hắn biết rõ điều đó.</strong></p><p id="21">Nhưng bản năng và lòng tự trọng không cho phép hắn cụp đuôi bỏ chạy như một con chó.</p><p id="22">Kẻ ủy thác đã bắt cóc hắn, biến hắn thành thích khách rồi vứt bỏ như một món đồ phế thải.</p><p id="23">Hắn không muốn số phận mình bị kẻ khác thao túng thêm nữa.</p><p id="24">Nếu lùi bước lúc này, hắn sẽ mãi mãi không thể làm chủ vận mệnh của mình.</p><p id="25">Quan trọng hơn, Phiêu Nguyệt muốn phá nát kế hoạch của kẻ đã đùa giỡn cuộc đời hắn.</p><p id="26">Dù không biết lý do, nhưng kẻ đó đã hủy bỏ vụ ám sát và ra lệnh diệt khẩu.</p><p id="27">Hắn muốn chôn vùi sự thật về việc nuôi dưỡng một đội quân sát thủ .</p><p id="28">Lý do chỉ có một.</p><p id="29">Tình thế đã thay đổi.</p><p id="30">Mối quan hệ với mục tiêu thay đổi khiến việc giết hắn ta trở nên bất lợi.</p><p id="31">Dù không biết chi tiết, nhưng chắc chắn mục tiêu hiện tại là người không được phép chết.</p><p id="32">Đó là lý do Phiêu Nguyệt quyết định thực hiện vụ ám sát bất khả thi " khó như lên trời" này</p><p id="33">Sau khi quan sát kỹ lưỡng, Phiêu Nguyệt đi đến kết luận duy nhất.</p><p id="34"><strong><em>‘Nếu không phải người của Thanh Thành phái, tuyệt đối không thể lọt vào bên trong.’</em></strong></p><p id="35">Hắn ẩn nấp ở một vị trí quan sát được cổng chính, theo dõi người ra vào.</p><p id="36">Đúng với cái danh Tứ Xuyên Đệ Nhất Phái , Thanh Thành phái đón tiếp vô số khách khứa mỗi ngày. Từ các nhân sĩ giang hồ đến các thương đoàn cung cấp nhu yếu phẩm.</p><p id="37">Trong khi cả Tứ Xuyên đang náo loạn truy lùng thích khách, thì Thanh Thành phái vẫn bình chân như vại.</p><p id="38">Họ thể hiện nên phong thái của một ông lớn, không hề nao núng trước những sự việc cỏn con.</p><p id="39">Phiêu Nguyệt loại bỏ thương nhân và võ lâm nhân sĩ khỏi danh sách mục tiêu.</p><p id="40">Để tự do đi lại bên trong, hắn phải là người của Thanh Thành phái.</p><p id="41">Mắt Phiêu Nguyệt sáng lên.</p><p id="42">Một <strong>đạo đồng</strong> [note87585] vừa bước ra khỏi cổng lọt vào tầm ngắm của hắn.</p><p id="43">Cậu ta chừng mười lăm, mười sáu tuổi.</p><p id="44">Nhỏ hơn Phiêu Nguyệt khoảng bốn, năm tuổi.</p><p id="45">Cậu ta cười tươi chào hỏi các môn vệ rồi một mình đi ra ngoài. Dù không biết thân phận cụ thể, nhưng thái độ tự nhiên đó chứng tỏ cậu ta chắc chắn là đệ tử Thanh Thành.</p><p id="46">Phiêu Nguyệt lặng lẽ bám theo.</p><p id="47">Đạo đồng nọ vừa đi vừa ngân nga hát, hoàn toàn không hay biết mình đang bị theo dõi.</p><p id="48">Cậu ta tên là <strong>Đạo Chân [note87586] </strong>, Tam Thế Đệ Tử của Thanh Thành phái.</p><p id="49">Đạo Chân là người nhỏ tuổi nhất trong lứa Tam Thế Đệ Tử, nhưng khá có tài năng và tính tình hòa đồng nên được mọi người yêu mến.</p><p id="50">Cậu ta đang đi đến đạo quán gần đó để lấy thuốc theo lệnh sư phụ.</p><p id="51">Sư phụ của cậu ta làm việc ở <strong>Dược Thiện Đường (藥善黨)</strong> của Thanh Thành phái.</p><p id="52">Đạo Chân cũng theo sư phụ học việc tại Dược Thiện Đường, bắt đầu từ những việc vặt vãnh như đi thu gom dược liệu.</p><p id="53"><em>“Đến đạo quán gần nhất trước đã…… Hự!”</em></p><p id="54">Đạo Chân đang lầm bầm thì đột nhiên ôm lấy cổ.</p><p id="55">Có thứ gì đó siết chặt cổ cậu ta.</p><p id="56">Nơi này cách Thanh Thành phái không xa. Chỉ cần hét lên, các huynh đệ sẽ lập tức ứng cứu. Nhưng Đạo Chân không thể thốt nên lời.</p><p id="57"><strong>Phập!</strong></p><p id="58">Sợi dây thòng lọng siết chặt, kéo bổng cậu ta lên không trung.</p><p id="59">Cả người Đạo Chân bị quăng mạnh lên cành cây.</p><p id="60">“Ai……”</p><p id="61"><strong>Phập!</strong></p><p id="62">Ngay khi Đạo Chân định hét lên, một cành cây vót nhọn cắm phập vào đùi cậu ta.</p><p id="63">‘Áááá!’</p><p id="64">Đạo Chân gào lên trong tâm trí, nhưng miệng đã bị một bàn tay thô ráp bịt chặt.</p><p id="65">Kẻ đó chính là Phiêu Nguyệt.</p><p id="66">Nhìn vào đôi mắt của Phiêu Nguyệt, Đạo Chân chết lặng.</p><p id="67">Cậu ta chưa từng thấy đôi mắt nào như thế ở Thanh Thành phái.</p><p id="68"><strong>Lạnh lùng, vô cảm? Không, những từ ngữ đó không đủ để miêu tả.</strong></p><p id="69">Ánh đỏ ma quái ẩn hiện trong đôi mắt ấy khiến cậu ta liên tưởng đến loài rắn độc.</p><p id="70">Đạo Chân bị ánh mắt đó áp chế hoàn toàn, không dám cử động.</p><p id="71">Cảm giác như con chuột đứng trước con rắn hổ mang chúa.</p><p id="72">Đạo Chân là chuột.</p><p id="73">Còn Phiêu Nguyệt là con độc xà sẵn sàng phun nọc độc kết liễu cậu ta bất cứ lúc nào.</p><p id="74">Dù không bị điểm huyệt, Đạo Chân vẫn tê liệt vì sợ hãi. Uy áp từ Phiêu Nguyệt quá lớn.</p><p id="75">Phiêu Nguyệt vẫn bịt miệng Đạo Chân, nói khẽ:</p><p id="76"><em>“Ngươi là đệ tử Thanh Thành phái? Phải thì gật đầu.”</em></p><p id="77">Đạo Chân vội vàng gật đầu lia lịa.</p><p id="78"><em>“Ta sẽ bỏ tay ra, ngươi trả lời câu hỏi của ta. Đừng dại dột mà la hét cầu cứu. Ta cam đoan sẽ cắt cổ ngươi trước khi có ai đến kịp.”</em></p><p id="79">Đạo Chân lại gật đầu.</p><p id="80">Ngay khi tay Phiêu Nguyệt vừa nới lỏng, Đạo Chân quên sạch lời hứa, há miệng định hét lớn.</p><p id="81"><strong>Phập!</strong></p><p id="82">Cơn đau thấu trời truyền đến từ vai.</p><p id="83">Phiêu Nguyệt bịt miệng cậu ta lại, tay kia cắm một cành cây nhọn xuyên qua vai cậu ta.</p><p id="84">Nhìn cành cây to bằng ngón tay xuyên qua da thịt mình, nỗi kinh hoàng ập đến.</p><p id="85">‘Ư ư!’</p><p id="86">Đồng tử Đạo Chân giãn ra vì sợ hãi.</p><p id="87">Đôi mắt của Phiêu Nguyệt dường như còn đáng sợ hơn lúc nãy gấp bội.</p><p id="88">Nếu còn dám la hét, chắc chắn hắn sẽ giết cậu ta thật. Đạo Chân cố nuốt tiếng hét vào trong.</p><p id="89">Giờ cậu ta mới nhận ra.</p><p id="90">Gã đàn ông trước mặt có thể giết cậu ta bất cứ lúc nào, bằng những cách tàn độc nhất.</p><p id="91">Nếu cành cây kia cắm vào cổ họng thay vì vai, cậu ta đã chết chắc.</p><p id="92">Đũng quần của Đạo Chân ướt sũng.</p><p id="93">Cậu ta đã sợ đến mức tiểu ra quần.</p><p id="94">Phiêu Nguyệt bỏ tay ra, lạnh lùng nói:</p><p id="95"><em>“Hét thêm lần nữa, ngươi sẽ vĩnh viễn không nhìn thấy ánh mặt trời đâu.”</em></p><p id="96">“Vâng!”</p><p id="97">Đạo Chân run rẩy đáp.</p><p id="98"><em>“Tên?”</em></p><p id="99">“Đạo Chân.”</p><p id="100"><em>“Thân phận?”</em></p><p id="101">“Tam Thế Đại Đệ Tử [note87588]</p><p id="102">Thanh Thành phái.”</p><p id="103"><em>“Chỉ thế thôi à?”</em></p><p id="104">“Đ-Đệ tử thuộc Dược Thiện Đường.”</p><p id="105"><em>“Dược Thiện Đường làm gì?”</em></p><p id="106">“Nơi đó là……”</p><p id="107">Đạo Chân khai hết tất cả những gì mình biết.</p><p id="108">Nỗi sợ hãi đã chiếm lấy tâm trí cậu ta.</p><p id="109">Cậu ta chỉ là một Tam Đại Đệ Tử non nớt, mới nhập môn chưa lâu.</p><p id="110"><strong>Làm sao có đủ dũng khí để đối mặt với cái chết?</strong></p><p id="111">Để sống sót, cậu ta bán đứng tất cả.</p><p id="112">Phiêu Nguyệt khai thác triệt để mọi thông tin.</p><p id="113"><em>“Câu hỏi cuối cùng. Vũ Quân Tường là kẻ như thế nào?”</em></p><p id="114">“Chẳng lẽ… ngài đang nói đến <strong>Thanh Thành Cô Tinh (靑城孤星) </strong>[note87589]</p><p id="115"> Vũ Quân Tường sư thúc tổ?” [note87590]</p><p id="116"><em>“Thanh Thành Cô Tinh?”</em></p><p id="117">Phiêu Nguyệt nhíu mày.</p><p id="118">Cái biệt danh nghe đã thấy không tầm thường.</p><p id="119">“Vũ Quân Tường sư thúc tổ là kỳ tài hiếm có nhất lịch sử Thanh Thành. Dù còn trẻ nhưng ngài ấy đã học gần hết tuyệt kỹ bổn môn và đạt đến cảnh giới Thượng Thừa. Nghe nói các vị tiền bối ẩn cư cũng đích thân chỉ dạy cho ngài ấy.”</p><p id="120">Đạo Chân tuôn ra một tràng.</p><p id="121">Theo lời cậu ta, Vũ Quân Tường là con trai của Vũ Chấn Bình [note87591] – nhân vật số hai của Thanh Thành. Hắn sở hữu thiên tư trác tuyệt.</p><p id="122">Tài năng của hắn xuất chúng đến mức được các bô lão cưng chiều hết mực.</p><p id="123">Dù chỉ hơn Đạo Chân chục tuổi, hắn đã là Nhất Thế Đệ Tử (ngang hàng sư thúc tổ của Đạo Chân), gánh vác kỳ vọng chấn hưng môn phái.</p><p id="124"><strong><em>‘Rắc rối to rồi.’</em></strong></p><p id="125">Biết là kẻ được đầu tư bảy năm ám sát phải không tầm thường, nhưng Phiêu Nguyệt không ngờ hắn lại khủng khiếp đến thế.</p><p id="126"><strong><em>‘Cũng phải thôi. Có thế mới đáng giá bảy năm công sức chứ.’</em></strong></p><p id="127">Dù chưa rõ võ công hắn cao đến đâu, nhưng cái danh hiệu Thanh Thành Cô Tinh đủ nói lên tất cả.</p><p id="128">Phiêu Nguyệt thoáng chút do dự. Nhưng đã leo lên lưng cọp thì không thể xuống.</p><p id="129">Đạo Chân mất tích sẽ sớm bị phát hiện. Truy binh sẽ lại kéo đến.</p><p id="130">Rút lui tay trắng lúc này chẳng khác nào tự sát.</p><p id="131">Phiêu Nguyệt không có đường lui.</p><p id="132">Đạo Chân van xin:</p><p id="133"><em>“Ta… ta đã nói hết rồi. Làm ơn tha mạng cho ta.”</em></p><p id="134">Nước mắt cậu ta rơi lã chã.</p><p id="135">Phiêu Nguyệt đưa tay sờ lên mặt Đạo Chân. Cảm giác lạnh lẽo khiến cậu ta rùng mình.</p><p id="136">Bất ngờ, Phiêu Nguyệt điểm huyệt cậu ta.</p><p id="137">Cơ thể Đạo Chân cứng đờ như tượng.</p><p id="138">Nếu không có ai giải huyệt, cậu ta sẽ bất động ít nhất một ngày.</p><p id="139">Phiêu Nguyệt bắt đầu hóa trang. Trong hành trang Huyết Ảnh Đoàn cấp cho có đủ dụng cụ cần thiết.</p><p id="140">Hắn trộn vôi, bột gạo nếp và mật ong, đắp lên mặt để tạo hình, rồi dùng phấn trang điểm cho giống màu da Đạo Chân. Chẳng mấy chốc, khuôn mặt hắn đã hao hao Đạo Chân.</p><p id="141">‘Hả!’</p><p id="142">Đạo Chân kinh hãi nhìn khuôn mặt mới của Phiêu Nguyệt.</p><p id="143">Nhìn kỹ thì vẫn có điểm khác, nhưng nhìn lướt qua thì khó mà phân biệt được.</p><p id="144">Cách tốt nhất là lột da mặt Đạo Chân làm Nhân Bì Diện cụ [note87592]. Nhưng làm thế quá mất thời gian và phức tạp.</p><p id="145">Hóa trang tuy có rủi ro bị phát hiện cao hơn, nhưng là cách duy nhất lúc này.</p><p id="146">Phiêu Nguyệt sờ nắn mặt Đạo Chân nãy giờ là để ghi nhớ cấu trúc cơ mặt.</p><p id="147">Hắn lột quần áo của Đạo Chân mặc vào.</p><p id="148">Không có gương soi, nhưng hắn cảm thấy khá ổn.</p><p id="149">Phiêu Nguyệt bỏ lại Đạo Chân, đi thẳng về phía cổng chính Thanh Thành phái.</p><p id="150">Dáng đi của hắn y hệt Đạo Chân.</p><p id="151">Không chỉ khuôn mặt, từ dáng người, bước đi đến thần thái đều được sao chép hoàn hảo.</p><p id="152">Môn vệ canh cổng thấy hắn liền hỏi:</p><p id="153">“Ơ, Đạo Chân đấy à. Sao về sớm thế?”</p><p id="154">“Đệ để quên đồ ạ.”</p><p id="155">“Cái thằng này! Hậu đậu thế không biết.”</p><p id="156">“Hì hì!”</p><p id="157">Phiêu Nguyệt gãi đầu cười trừ. Tên môn vệ cười xòa rồi cho hắn qua.</p><p id="158">Gã không mảy may nghi ngờ người trước mặt không phải là Đạo Chân. Dịch Dung Thuật [note87593] của Phiêu Nguyệt quá hoàn hảo.</p><p id="159">Phiêu Nguyệt bình thản bước qua cổng chính.</p><p id="160">Bên trong cánh cổng, bộ mặt thật của Thanh Thành phái hiện ra.</p><p id="161">Những tòa kiến trúc uy nghi, trùng điệp khiến người ta choáng ngợp. Nhưng Phiêu Nguyệt không hề bị áp đảo, bởi hắn đã quá quen thuộc với khung cảnh này.</p><p id="162">Khu nhà trong hầm ngầm chính là bản sao của nơi đây.</p><p id="163">Tuy quy mô thực tế lớn hơn và có thêm nhiều công trình mới, nhưng cấu trúc cốt lõi vẫn y nguyên.</p><p id="164">Nơi hắn đã sống suốt bảy năm trời.</p><p id="165">Nhắm mắt hắn cũng tìm được đường đi.</p><p id="166">Phiêu Nguyệt di chuyển tự nhiên như đang đi dạo trong nhà mình.</p><p id="167">Hắn biết rõ chỗ nào canh gác nghiêm ngặt, chỗ nào lỏng lẻo. Hắn khéo léo chọn những con đường ít người chú ý.</p><p id="168">Nhiều người đi lướt qua hắn nhưng không ai nghi ngờ.</p><p id="169">Nếu nhìn kỹ mặt hắn thì sẽ lộ tẩy, nhưng thái độ tự nhiên của hắn đã đánh lừa tất cả.</p><p id="170">Thỉnh thoảng có người chào hỏi, hắn cũng đáp lại một cách tự nhiên rồi đi tiếp.</p><p id="171"><strong><em>‘Chắc là kia rồi.’</em></strong></p><p id="172">Phiêu Nguyệt đã đến gần đích.</p><p id="173"><strong>Minh Nguyệt Điện.</strong></p><p id="174">Nơi ở của Vũ Quân Tường.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note87583"><a href="#anchor-note87583" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87583" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">là nơi tu luyện, thờ cúng thần tiên và cử hành các nghi lễ tôn giáo của đạo sĩ Đạo giáo. Đây là các công trình kiến trúc truyền thống đặc trưng (cung, điện, am, miếu) dùng để thờ Tam Thanh, Trấn Vũ, hoặc các vị thần thánh, thường nổi bật với kiến trúc mang đậm dấu ấn Đạo giáo như tùng bách, rùa, hạ</span></div><span class="note-content_real long-text">là nơi tu luyện, thờ cúng thần tiên và cử hành các nghi lễ tôn giáo của đạo sĩ Đạo giáo. Đây là các công trình kiến trúc truyền thống đặc trưng (cung, điện, am, miếu) dùng để thờ Tam Thanh, Trấn Vũ, hoặc các vị thần thánh, thường nổi bật với kiến trúc mang đậm dấu ấn Đạo giáo như tùng bách, rùa, hạ</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87584"><a href="#anchor-note87584" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87584" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">sự phòng thủ vững chắc, không thể đánh bại</span></div><span class="note-content_real long-text">sự phòng thủ vững chắc, không thể đánh bại</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87585"><a href="#anchor-note87585" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87585" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">đạo sĩ thiếu niên tuổi khoảng 15</span></div><span class="note-content_real long-text">đạo sĩ thiếu niên tuổi khoảng 15</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87586"><a href="#anchor-note87586" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87586" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Do Jin</span></div><span class="note-content_real long-text">Do Jin</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87588"><a href="#anchor-note87588" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87588" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Đệ Tử Đời Thứ Ba. Thứ tự thì chắc là Đại Đệ Tử &gt; Nhất Thế &gt; Nhị Thế &gt; Tam Thế</span></div><span class="note-content_real long-text">Đệ Tử Đời Thứ Ba. Thứ tự thì chắc là Đại Đệ Tử &gt; Nhất Thế &gt; Nhị Thế &gt; Tam Thế</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87589"><a href="#anchor-note87589" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87589" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Cô Tinh = Ngôi Sao Đơn Độc</span></div><span class="note-content_real long-text">Cô Tinh = Ngôi Sao Đơn Độc</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87590"><a href="#anchor-note87590" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87590" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Sư thúc tổ thường đóng vai trò là trưởng lão trong môn phái, đứng ngang hàng với sư bá tổ (anh trai của sư tổ)</span></div><span class="note-content_real long-text">Sư thúc tổ thường đóng vai trò là trưởng lão trong môn phái, đứng ngang hàng với sư bá tổ (anh trai của sư tổ)</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87591"><a href="#anchor-note87591" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87591" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Woo Jin-pyeong</span></div><span class="note-content_real long-text">Woo Jin-pyeong</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87592"><a href="#anchor-note87592" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87592" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">mặt nạ da người</span></div><span class="note-content_real long-text">mặt nạ da người</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87593"><a href="#anchor-note87593" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87593" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">kỹ năng giả trang</span></div><span class="note-content_real long-text">kỹ năng giả trang</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24742-tu-than-phieu-nguyet/c296345-chuong-25" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24742-tu-than-phieu-nguyet" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24742-tu-than-phieu-nguyet/c297416-chuong-27" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'PdflSoerDZKnFLInG5hcj8AFcqlrKDUi9ft3W7Yh';
        var comment_type = 'chapter';
        var comment_typeid = '297282';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'PdflSoerDZKnFLInG5hcj8AFcqlrKDUi9ft3W7Yh';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24742');
    chapter_id = parseInt('297282');

    readingObject = {
        series_id: series_id,
        series_title: 'Tử Thần Phiêu Nguyệt',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="PdflSoerDZKnFLInG5hcj8AFcqlrKDUi9ft3W7Yh" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c3915d6edb31d04',t:'MTc2OTM1Nzg5NA=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
