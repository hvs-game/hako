<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Tử Thần Phiêu Nguyệt - Chương 46 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Hắn tồn tại ở nơi sâu thẳm nhất của Giang Hồ. Hãy mở to đôi mắt. Nếu không muốn bị kéo xuống vực thẳm.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="uqezWuLqLFd5fTDfdbulFvymqPXOD2y4fpeYMLfC">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24742-tu-than-phieu-nguyet/c299004-chuong-46">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24742-bcde8564-3a2e-4029-8469-2a4e8aec5d8b.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24742-tu-than-phieu-nguyet/c298990-chuong-45"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24742-tu-than-phieu-nguyet"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24742-tu-than-phieu-nguyet/c299078-chuong-47"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24742-tu-than-phieu-nguyet/c299004-chuong-46" style="background: url('https://i.hako.vn/ln/series/covers/s24742-bcde8564-3a2e-4029-8469-2a4e8aec5d8b.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24742-tu-than-phieu-nguyet">Tử Thần Phiêu Nguyệt</a></h5>
                    <small><i class="fas fa-pen"></i>우각</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/24742-tu-than-phieu-nguyet/c295566-nhan-vat">Minh Họa</a></li>
                                        
                                                            <li class=""><a href="/truyen/24742-tu-than-phieu-nguyet/c295200-chuong-1">Cổ Độc Luyện</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24742-tu-than-phieu-nguyet/t35996-tap-2">Tập 2</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297282-chuong-01">
                                                                        Chương 26
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297416-chuong-27">
                                                                        Chương 27
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297434-chuong-28">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 28
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297444-chuong-29">
                                                                        Chương 29
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297453-chuong-30">
                                                                        Chương 30
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297486-chuong-31">
                                                                        Chương 31
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297649-chuong-32">
                                                                        Chương 32
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297667-chuong-33">
                                                                        Chương 33
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297680-chuong-34">
                                                                        Chương 34
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297721-chuong-35">
                                                                        Chương 35
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297752-chuong-36">
                                                                        Chương 36
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297771-chuong-37">
                                                                        Chương 37
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c297810-chuong-38">
                                                                        Chương 38
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c298197-chuong-39">
                                                                        Chương 39
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c298205-chuong-40">
                                                                        Chương 40
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c298236-chuong-41">
                                                                        Chương 41
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c298252-chuong-42">
                                                                        Chương 42
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c298987-chuong-43">
                                                                        Chương 43
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c298988-chuong-44">
                                                                        Chương 44
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c298990-chuong-45">
                                                                        Chương 45
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c299004-chuong-46">
                                                                        Chương 46
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c299078-chuong-47">
                                                                        Chương 47
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24742-tu-than-phieu-nguyet/c299137-chuong-48">
                                                                        Chương 48
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 2</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 46</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24742-tu-than-phieu-nguyet/c299004-chuong-46#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,223 từ - Cập nhật: 
                        <time class="topic-time timeago" title="29-01-2026 16:29:20" datetime="2026-01-29T16:29:20+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 46</p>
                    <p id="1">Hành trình đến Thành Đô diễn ra suôn sẻ.</p><p id="2">Có lẽ tin tức về việc đồng bọn bị tàn sát đã lan truyền, khiến lũ thủy tặc không dám bén mảng tới gần nữa.</p><p id="3">Thuyền cập bến tại một bến tàu gần Thành Đô. Từ đây phải đi đường bộ. Trên bến, hàng dài xe ngựa đã chờ sẵn để bốc dỡ gạo.</p><p id="4">“Nhanh tay lên! Phải vào thành trong ngày mai.”</p><p id="5">“Cẩn thận rách bao gạo đấy!”</p><p id="6">Đám phu khuân vác hối hả làm việc. Phiêu Nguyệt và nhóm Hứa Lan Châu cũng rời thuyền lên bờ.</p><p id="7">Cao Đạo Sĩ vươn vai, hít một hơi dài:</p><p id="8">“Được dẫm chân lên đất thật là sướng. Đi tàu say sóng muốn chết.”</p><p id="9">“Mới đi có mấy ngày đã than vãn. Lão già rồi nên xương cốt rệu rã hả?”</p><p id="10">“Con ranh này, lại kiếm chuyện à? Hay là thiếu hơi trai nên sinh sự?”</p><p id="11">“Ông nói cái gì?”</p><p id="12">“E hèm! Không có gì.”</p><p id="13">Thấy Hứa Lan Châu trừng mắt sờ tay vào roi da, Cao Đạo Sĩ vội lùi lại một bước, quay sang lảng chuyện với Phiêu Nguyệt.</p><p id="14">“Vị huynh đài này giờ tính sao?”</p><p id="15"><em>“Sao là sao?”</em></p><p id="16">“Có vào thành ngay không?”</p><p id="17"><em>“Ta nghỉ lại đây một đêm đã.”</em></p><p id="18">Trời đã ngả về chiều. Phiêu Nguyệt không có lý do gì phải vội vã hành xác.</p><p id="19">Cao Đạo Sĩ tặc lưỡi tiếc nuối:</p><p id="20">“Vậy đành chia tay tại đây thôi. Bọn ta có việc gấp, sáng mai phải có mặt trong thành rồi.”</p><p id="21">“Đi cùng bọn ta luôn đi mà ~”</p><p id="22">Hứa Lan Châu đứng bên cạnh giở giọng nũng nịu, đôi mắt long lanh đầy vẻ van lơn.</p><p id="23"><em>“Ta còn chút việc phải chuẩn bị...”</em></p><p id="24">“Việc gì? Muội giúp cho. Đi cùng đi mà.”</p><p id="25"><em>“Việc riêng, phải làm một mình.”</em></p><p id="26">“Xì!”</p><p id="27">Bị từ chối thẳng thừng, Hứa Lan Châu bĩu môi hờn dỗi. Vẻ mặt phụng phịu của nàng trông thật đáng thương, nhưng chẳng mảy may lay động được Phiêu Nguyệt.</p><p id="28"><em>“Khi nào vào thành ta sẽ liên lạc.”</em></p><p id="29">“Hứa đấy nhé?”</p><p id="30">“Ừ.”</p><p id="31">Nhận được lời hứa, Hứa Lan Châu mới chịu buông tha. Ba người họ mua ngựa tại chợ ngựa gần đó rồi tức tốc lên đường.</p><p id="32">Chỉ còn lại một mình, Phiêu Nguyệt tìm đến một khách điếm gần bến tàu.</p><p id="33">Nơi đây là điểm trung chuyển hàng hóa lớn, nên khách điếm mọc lên san sát để phục vụ các thương đoàn và tiêu cục [note87782] . Khách điếm Phiêu Nguyệt chọn khá lớn, bên trong chật ních người.</p><p id="34">Đa phần là người của các thương đoàn và tiêu đầu [note87781] , tụ tập ăn uống ồn ào.</p><p id="35">Thấy Phiêu Nguyệt bước vào, tên tiểu nhị  [note87783] nhanh nhảu chạy ra đón:</p><p id="36">“Khách quan muốn dùng bữa hay trọ lại ạ?”</p><p id="37"><em>“Cả hai.”</em></p><p id="38">“Vừa ăn vừa ở ạ? Chà...”</p><p id="39"><em>“Sao?”</em></p><p id="40">“Phòng thì còn, nhưng hơi đắt...”</p><p id="41"><em>“Bao nhiêu?”</em></p><p id="42">“Mười lượng bạc. Cả tiền ăn là mười hai lượng. Ngài thấy đấy, khách đông thế này, không nhanh chân là hết phòng ngay.”</p><p id="43">Phiêu Nguyệt chẳng nói chẳng rằng, móc bạc ra trả luôn.</p><p id="44">“Hì hì! Mời ngài lên tầng hai, đi dọc hành lang bên trái, phòng cuối cùng ạ. Ngài cứ lên nghỉ ngơi.”</p><p id="45"><em>“Mang đồ ăn lên trước đi.”</em></p><p id="46">“Vâng! Có ngay ạ!”</p><p id="47">Tiểu nhị hớn hở cầm tiền chạy xuống bếp. Phiêu Nguyệt tìm một bàn trống ngồi xuống.</p><p id="48">“Chà! Thằng nhãi kia nhìn còn xinh hơn cả đàn bà.”</p><p id="49">“Là đàn ông thật hả? Hay nữ cải nam trang?”</p><p id="50">Đám võ nhân xung quanh bắt đầu xì xào bàn tán, chỉ trỏ về phía Phiêu Nguyệt.</p><p id="51">Không chỉ bọn họ, hầu hết khách khứa trong quán đều ngẩn người nhìn hắn. Vẻ đẹp của Phiêu Nguyệt quá dị biệt, quá nổi bật giữa đám đông thô kệch này.</p><p id="52">Phiêu Nguyệt phớt lờ tất cả.</p><p id="53">Hắn biết rõ ngoại hình của mình.</p><p id="54">Vốn dĩ đã tuấn tú, nhưng sau bảy năm sống cùng loài rắn trong bóng tối, vẻ đẹp ấy đã biến đổi, trở nên tà mị và ma quái. Có lẽ nhân khí đã phai nhạt, thay vào đó là tà khí của loài bò sát.</p><p id="55">Nhưng hắn không bận tâm. Đẹp cũng là một loại vũ khí.</p><p id="56">Suốt chặng đường từ hầm ngầm đến đây, hắn đã kiểm chứng điều đó. Đàn bà dễ dàng mất cảnh giác trước hắn, và vô tình tiết lộ cho hắn vô số thông tin quý giá.</p><p id="57">Phiêu Nguyệt gõ nhẹ ngón tay lên mặt bàn, kiên nhẫn đợi. Đồ ăn được mang lên rất nhanh.</p><p id="58">Tiểu nhị đặt khay thức ăn xuống, niềm nở mời:</p><p id="59">“Khách quan có dùng rượu không? <strong>Hoàng Hoa Nhu Mễ Tửu (黃花糯米酒) </strong>[note87780] quán tự ủ, ngon nức tiếng vùng này đấy ạ.”</p><p id="60"><em>“Ta không uống rượu.”</em></p><p id="61">“Vâng, nếu cần gì ngài cứ gọi.”</p><p id="62">Tiểu nhị cúi chào rồi lui ra.</p><p id="63">Phiêu Nguyệt cầm đũa lên.</p><p id="64">Cảm giác cầm đũa hơi gượng gạo. Mười bốn năm rồi hắn không dùng đến đôi đũa. Mấy miếng đầu tiên gắp trượt, nhưng rất nhanh sau đó, hắn đã quen tay trở lại.</p><p id="65">Hắn ăn chậm rãi, thưởng thức từng chút một.</p><p id="66">Thức ăn bình dân, chẳng có gì đặc sắc. Nhưng với Phiêu Nguyệt, đây là mỹ vị trần gian.</p><p id="67">Được ngồi ăn đàng hoàng, trả tiền sòng phẳng, cảm nhận vị ngọt của hạt cơm... đó là hạnh phúc giản đơn mà những kẻ phàm phu tục tử ở đây không bao giờ hiểu được.</p><p id="68">Một nụ cười nhạt thoáng hiện trên môi hắn.</p><p id="69">Đúng lúc đó.</p><p id="70">“Này nhóc! Mày là đực hay cái thế?”</p><p id="71">Một gã đàn ông to con lừng lững bước tới.</p><p id="72">Gã mặc áo cộc tay khoe cơ bắp cuồn cuộn, bắp tay to như phích nước. Khuôn mặt hung dữ, sẹo ngang sẹo dọc, trông sặc mùi côn đồ.</p><p id="73">Phiêu Nguyệt vẫn cầm đũa, ngước mắt nhìn lên. Gã to con nhe hàm răng vàng khè cười cợt:</p><p id="74">“Ta là Trương Vũ Lạc, tiêu đầu của Cửu Chấn Tiêu Cục.”</p><p id="75"><em>“Thì sao?”</em></p><p id="76">“Ta vừa cá cược với anh em. Nếu lột đồ mày ra mà thấy có 'cái đó', tao được hai lượng bạc.”</p><p id="77">Trương Vũ Lạc cười hô hố, hất hàm về phía bàn tiệc ở góc trái. Đám tiêu đầu Cửu Chấn Tiêu Cục đang ngồi đó, nhìn sang với ánh mắt cợt nhả, đầy vẻ mong chờ.</p><p id="78">Phiêu Nguyệt bình thản hỏi:</p><p id="79"><em>“Thế ngươi cược cửa nào?”</em></p><p id="80">“Ta cược mày là con ả giả trai.”</p><p id="81"><em>“Tiếc nhỉ. Ngươi sắp mất hai lượng rồi.”</em></p><p id="82">“Thế tức là nhà ngươi có 'cái đó' à?”</p><p id="83"><em>“Cặp mắt ngươi để trang trí sao? Nhìn mà không biết à?”</em></p><p id="84">“Ta chịu, không nhìn ra được. Khẹc khẹc!”</p><p id="85">Trương Vũ Lạc cười dâm đãng. Đám bạn gã cũng hùa theo la ó:</p><p id="86">“Lột ra xem đi lão Trương!”</p><p id="87">“Lột được tao đãi rượu!”</p><p id="88">Cả khách điếm đổ dồn mắt về phía này.</p><p id="89">Ai cũng biết đám tiêu đầu Cửu Chấn Tiêu Cục nổi tiếng hống hách, hay bắt nạt người lạ. Nhưng chẳng ai dám can ngăn. Họ coi đây là màn kịch vui để giải trí.</p><p id="90">Họ tò mò muốn xem gã thanh niên đẹp như hoa này sẽ phản ứng ra sao. Liệu có khóc lóc van xin như đàn bà không?</p><p id="91">Trương Vũ Lạc vươn bàn tay hộ pháp ra, định chộp lấy vai Phiêu Nguyệt.</p><p id="92">“Nào, để vị đại gia này kiểm tra xem...”</p><p id="93"><em>Phập!</em></p><p id="94">“Ááááá!”</p><p id="95">Tiếng hét thảm thiết xé toạc không gian ồn ào.</p><p id="96">Mọi người kinh hoàng nhìn thấy một chiếc đũa cắm ngập vào hốc mắt trái của Trương Vũ Lạc.</p><p id="97">Chiếc đũa tre bình thường giờ đây đã biến thành hung khí chết người.</p><p id="98"><em><strong>“Mày... thằng chó... mắt tao...”</strong></em></p><p id="99">Trương Vũ Lạc ôm mặt lảo đảo lùi lại, máu tươi tuôn xối xả qua kẽ tay.</p><p id="100">Phiêu Nguyệt từ tốn đứng dậy.</p><p id="101"><em>“Đã có mắt như mù thì giữ lại làm gì cho chật hốc mắt. Để ta giúp ngươi bỏ nốt con còn lại nhé.”</em></p><p id="102">“Cái... Không! Đừng!”</p><p id="103">Trương Vũ Lạc hoảng sợ lùi lại. Nhưng hắn lùi một bước, Phiêu Nguyệt tiến ba bước.</p><p id="104">Thân pháp quỷ mị, không một tiếng động. Phiêu Nguyệt đã đứng sát sạt trước mặt gã khổng lồ.</p><p id="105">Lúc này, Trương Vũ Lạc mới nhìn rõ đôi mắt của đối phương.</p><p id="106">Đôi mắt rắn! Lạnh lẽo, vô cảm, không chứa đựng chút nhân tính nào.</p><p id="107">Gã rùng mình, nhận ra mình đã chọc phải thứ không nên chọc. Một con quái vật đội lốt người.</p><p id="108">Khuôn mặt đẹp như tượng tạc của Phiêu Nguyệt là hình ảnh cuối cùng gã nhìn thấy trên cõi đời này.</p><p id="109"><em>Phập!</em></p><p id="110">“Áááá!”</p><p id="111">Lại một tiếng hét kinh hoàng nữa. Thế giới của Trương Vũ Lạc vĩnh viễn chìm vào bóng tối.</p><p id="112">“Thằng điên này...”</p><p id="113">“Nó dám...”</p><p id="114">Đám tiêu đầu Cửu Chấn Tiêu Cục chết lặng. Nụ cười cợt nhả tắt ngấm, thay vào đó là sự kinh hoàng tột độ.</p><p id="115">Trương Vũ Lạc bị chọc mù cả hai mắt bằng đũa. Tàn phế vĩnh viễn.</p><p id="116">Chỉ vì một câu đùa cợt mà ra tay tàn độc đến thế sao?</p><p id="117">“Giết nó! Cứu lão Trương!”</p><p id="118">Bừng tỉnh sau cơn sốc, bọn chúng rút vũ khí lao vào Phiêu Nguyệt.</p><p id="119"><em>Vút! Vút! Vút!</em></p><p id="120">“Hự!”</p><p id="121">“Á!”</p><p id="122">Chưa kịp chạm vào vạt áo đối thủ, đám tiêu đầu đã ngã rạp xuống đất, rên la thảm thiết.</p><p id="123">Trên vai, đùi, sườn của bọn chúng đều cắm chi chít đũa.</p><p id="124">“Cái... cái gì thế?”</p><p id="125">“Hắn ra tay lúc nào vậy?”</p><p id="126">Khách khứa trong quán há hốc mồm kinh ngạc. Không ai nhìn thấy Phiêu Nguyệt ném đũa khi nào.</p><p id="127">Cửu Chấn Tiêu Cục tuy không phải đại môn phái nhưng cũng có tiếng tăm ở Tứ Xuyên. Các tiêu đầu đều là kẻ có thực lực. Chính vì thế chúng mới ngạo mạn.</p><p id="128">Chúng định trêu đùa, làm nhục Phiêu Nguyệt cho vui. Ai ngờ lại đá phải tấm sắt nung đỏ.</p><p id="129">Phiêu Nguyệt lạnh lùng nhìn đám bại tướng.</p><p id="130">Trên tay hắn là một bó đũa, được hút lấy từ ống đũa trên bàn bằng Thu Hồn Ti.</p><p id="131"><em>Phập!</em></p><p id="132">“Aaa!”</p><p id="133">Lại một chiếc đũa bay ra, xuyên thủng vai một tên tiêu đầu , ghim chặt hắn vào tường gỗ. Tên đó giãy giụa như con bướm bị ghim tiêu bản, đau đớn tột cùng nhưng không thể thoát ra.</p><p id="134">“Thằng chó! Mày biết bọn tao là ai không mà dám...”</p><p id="135">Công Chấn Xác, kẻ lớn tuổi nhất đám, gào lên.</p><p id="136">Trong nháy mắt, bốn tên tiêu đầu thiện chiến nhất đã bị phế bỏ.</p><p id="137">Tổn thất này quá lớn đối với Cửu Chấn Tiêu Cục. Không có tiêu đầu , tiêu cục coi như sập tiệm.</p><p id="138">Đang gào thét, Công Chấn Xác bỗng im bặt.</p><p id="139"><em>Vụt!</em></p><p id="140">Phiêu Nguyệt đã xuất hiện ngay trước mặt hắn như một bóng ma.</p><p id="141">Nhìn vào đôi mắt sâu thẳm, tĩnh lặng như vực chết của Phiêu Nguyệt, Công Chấn Xác cảm thấy tim mình như ngừng đập. Toàn thân tê liệt, da gà nổi lên từng đợt.</p><p id="142">Sợ hãi.</p><p id="143">Không phải cái sợ trước kẻ mạnh, mà là nỗi sợ nguyên thủy của con mồi trước dã thú ăn thịt.</p><p id="144">“Ư...”</p><p id="145">Công Chấn Xác rên rỉ trong cổ họng.</p><p id="146">Phiêu Nguyệt ghé sát mặt vào mặt hắn, thì thầm:</p><p id="147"><em>“Ngươi là ai?”</em></p><p id="148">“Ta... ta...”</p><p id="149"><em>“Nói đi! Các ngươi là ai?”</em></p><p id="150">“Bọn... bọn ta là tiêu đầu của Cửu Chấn Tiêu Cục...”</p><p id="151"><em>“Thì sao? Liên quan gì đến ta?”</em></p><p id="152">“Ta...”</p><p id="153">Công Chấn Xác cứng họng.</p><p id="154">Một áp lực vô hình đè nặng lên ngực hắn, khiến hắn khó thở. Mồ hôi lạnh tuôn ra như tắm.</p><p id="155"><em>“Thấy ta đẹp mã nên tưởng dễ bắt nạt à? Tò mò xem ta là nam hay nữ à? Muốn lột đồ ta kiểm tra à? Giờ còn muốn nữa không?”</em></p><p id="156">“Không... không dám... tuyệt đối không dám...”</p><p id="157"><em>“Ta sống chưa lâu, nhưng ngộ ra một điều: Làm gì cũng phải có trách nhiệm. </em></p><p id="158"><em>Lợi dụng người khác thì phải trả giá, trêu chọc nhầm người thì phải đền tội. Ngươi thấy đúng không?”</em></p><p id="159">“Đúng... đúng...”</p><p id="160">Công Chấn Xác lắp bắp. Hắn biết tính mạng mình đang nằm trong tay kẻ này.</p><p id="161">Chỉ là trò đùa thôi mà.</p><p id="162">Thấy thằng nhóc đẹp như con gái, lại đi một mình, bọn hắn chỉ định trêu chọc chút cho vui, ra oai với thiên hạ. Ai ngờ lại chọc phải Sát Tinh.</p><p id="163">Nhìn đồng bọn kẻ mù mắt, kẻ bị ghim vào tường, Công Chấn Xác hối hận xanh ruột.</p><p id="164">Đúng lúc đó.</p><p id="165"><em>Rầm!</em></p><p id="166">“Này huynh đệ! Dừng tay được rồi đấy. Chỗ đông người, làm quá coi sao được.”</p><p id="167">Một giọng nói uy lực vang lên.</p><p id="168">Một nam tử trung niên ngồi ở bàn đối diện đập bàn đứng dậy.</p><p id="169">Hắn là Ngô Nguyên Hầu, một cao thủ có tiếng tăm, vốn có giao tình với Cửu Chấn Tiêu Cục.</p><p id="170">Thấy cứu tinh xuất hiện, Công Chấn Xác mừng rỡ như chết đuối vớ được cọc:</p><p id="171">“Ngô... Ngô đại hiệp! Cứu...”</p><p id="172"><em>Phập!</em></p><p id="173">“Hự!”</p><p id="174">Lời cầu cứu chưa kịp thoát ra khỏi họng, một chiếc đũa đã cắm phập vào vai Công Chấn Xác.</p><p id="175">Và Phiêu Nguyệt đã biến mất khỏi vị trí cũ.</p><p id="176">Hắn hiện ra ngay trước mặt Ngô Nguyên Hầu, lạnh lùng hỏi:</p><p id="177">“Dừng cái gì?”</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                        <div class="note-reg">
                        <h2 align="center" style="margin-bottom: 40px;">Ghi chú</h2>
                                                    <div style="margin-bottom: 20px;" id="note87780"><a href="#anchor-note87780" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87780" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">Rượu nếp cái hoa vàng</span></div><span class="note-content_real long-text">Rượu nếp cái hoa vàng</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87781"><a href="#anchor-note87781" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87781" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">là người bảo vệ  cho các chuyến vận chuyển hàng hóa khỏi Lục Lâm Thảo Khấu ( cướp cạn )</span></div><span class="note-content_real long-text">là người bảo vệ  cho các chuyến vận chuyển hàng hóa khỏi Lục Lâm Thảo Khấu ( cướp cạn )</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87782"><a href="#anchor-note87782" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87782" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">tổ chức để  vận hành mạng lưới hộ tống cho các  thương đoàn</span></div><span class="note-content_real long-text">tổ chức để  vận hành mạng lưới hộ tống cho các  thương đoàn</span></div>
                                                    <div style="margin-bottom: 20px;" id="note87783"><a href="#anchor-note87783" class="none-print inline" style="margin-right: 10px"><i class="fas fa-caret-up"></i></a><a href="#anchor-note87783" class="inline-print none">[Lên trên] </a><div style="display: none"><span class="note-content long-text">phục vụ, chạy bàn</span></div><span class="note-content_real long-text">phục vụ, chạy bàn</span></div>
                                            </div>
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24742-tu-than-phieu-nguyet/c298990-chuong-45" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24742-tu-than-phieu-nguyet" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24742-tu-than-phieu-nguyet/c299078-chuong-47" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'uqezWuLqLFd5fTDfdbulFvymqPXOD2y4fpeYMLfC';
        var comment_type = 'chapter';
        var comment_typeid = '299004';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'uqezWuLqLFd5fTDfdbulFvymqPXOD2y4fpeYMLfC';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24742');
    chapter_id = parseInt('299004');

    readingObject = {
        series_id: series_id,
        series_title: 'Tử Thần Phiêu Nguyệt',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="uqezWuLqLFd5fTDfdbulFvymqPXOD2y4fpeYMLfC" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c58c266e945461e',t:'MTc2OTY5MDAyMA=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
