<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Anh Hùng Huyền Thoại Là Học Sinh Ưu Tú Của Học Viện - Chương 5 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Có năm vị anh hùng đã chiến đấu chống lại Erebos, cái ác nguyên thủy đã đẩy thế giới đến bờ vực diệt vong. [Dũng Giả] Arron. [Thợ Rèn Bậc Thầy] Dweno. [Người Khai Sáng Tinh Vân] Luna. [Trí Tuệ Vương] Lysinas. Và cuối cùng là ta, [Anh Hùng Khởi...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="8uhDTLlwIRXMgbJ4xXM0ey1CMwRzKsSzXEEp1ngY">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306323-chuong-5">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24971-7f2d7625-a0f8-4cfd-a65c-490195a107b3.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=c044c63e744fb1723a7d067aa1473af1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306322-chuong-4"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306324-chuong-6"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306323-chuong-5" style="background: url('https://i.hako.vn/ln/series/covers/s24971-7f2d7625-a0f8-4cfd-a65c-490195a107b3.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien">Anh Hùng Huyền Thoại Là H...</a></h5>
                    <small><i class="fas fa-pen"></i>Jeorona</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/t36474-tap-1">Tập 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c305949-chuong-1">
                                                                        Chương 1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c305950-chuong-2">
                                                                        Chương 2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c305951-chuong-3">
                                                                        Chương 3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306322-chuong-4">
                                                                        Chương 4
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306323-chuong-5">
                                                                        Chương 5
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306324-chuong-6">
                                                                        Chương 6
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306342-chuong-7">
                                                                        Chương 7
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306343-chuong-8">
                                                                        Chương 8
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306344-chuong-9">
                                                                        Chương 9
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306353-chuong-10">
                                                                        Chương 10
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 5</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306323-chuong-5#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,533 từ - Cập nhật: 
                        <time class="topic-time timeago" title="08-02-2026 21:11:32" datetime="2026-02-08T21:11:32+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 5</p>
                    <p id="1">Leo bỏ mặc Celia bất tỉnh ở đó và quay trở về dinh thự.</p><p id="2">Trong phòng khách, Reina và Gis đang trò chuyện sâu sắc.</p><p id="3">Xung quanh họ, các hiệp sĩ Zerdinger đứng xếp hàng ngay ngắn.</p><p id="4">Reina mỉm cười khi thấy con trai mình.</p><p id="5">“Con tập xong hôm nay rồi sao?”</p><p id="6">“Vâng, thưa Mẹ.”</p><p id="7">Leo trả lời câu hỏi của Reina, liếc nhìn Gis.</p><p id="8">‘Zerdinger, Zerdinger… Họ thực sự rất đáng gờm.’</p><p id="9">Ngay cả trong kiếp trước của hắn, những chiến binh ở đẳng cấp này cũng rất hiếm.</p><p id="10">‘Cái danh Gia tộc Anh hùng không phải để trưng.’</p><p id="11">“Leo, đây là Gis Zerdinger. Ông ấy là khách từ gia tộc đến thăm chúng ta.”</p><p id="12">“Cháu là Leo Plov.”</p><p id="13">“Gis Zerdinger. Chắc cháu cũng biết, ta là cậu của cháu. Cứ nói chuyện thoải mái đi.”</p><p id="14">“Cháu có thể hỏi ý ngài là gì khi bảo ‘thoải mái’ không?”</p><p id="15">“Ý cháu là sao?”</p><p id="16">“Cháu mang dòng máu Zerdinger, nhưng điều đó không biến cháu thành người nhà Zerdinger.”</p><p id="17">Trước câu nói rạch ròi của Leo, mắt Gis sáng lên, trong khi Reina lắc đầu.</p><p id="18">‘Con trai mình đúng là không thuộc kiểu dễ thương.’</p><p id="19">Gis Zerdinger.</p><p id="20">Hiện là Phó tộc trưởng gia tộc Zerdinger và chính thức là người có quyền lực thứ hai.</p><p id="21">Bình thường, một người ở độ tuổi Leo sẽ rất phấn khích nếu một nhân vật có địa vị như thế gọi mình là ‘cháu’.</p><p id="22">Nhưng dù có quan hệ huyết thống, trên gia phả thì họ là người lạ.</p><p id="23">Luật lệ gia tộc Zerdinger rất nghiêm ngặt.</p><p id="24">Đó là lý do Reina không giới thiệu Gis là ‘cậu’.</p><p id="25">Leo đã đoán được phần nào, nên hắn mới hỏi.</p><p id="26">“Trong các dịp chính thức, ta không thể gọi cháu là cháu trai.”</p><p id="27">“Đã hiểu.”</p><p id="28">Thấy câu trả lời gãy gọn của Leo, Gis bật cười lớn.</p><p id="29">“Cháu chẳng giống con trai của chị ta chút nào.”</p><p id="30">“Hahaha. Ý cậu là sao hả?” Reina hỏi, vừa cười vừa giẫm lên chân Gis.</p><p id="31">“Leo, cháu có thấy một cô bé tên Celia ở sân tập không?”</p><p id="32">“Cô ta hả?”</p><p id="33">Leo liếc nhìn về phía cửa chính.</p><p id="34">Ở đó, Celia đang được khiêng vào trên cáng, miệng sùi bọt mép.</p><p id="35">“Hả! T-Tiểu thư Celia!”</p><p id="36">“Chuyện gì đã xảy ra vậy!”</p><p id="37">Các hiệp sĩ Zerdinger bàng hoàng.</p><p id="38">“Hô.”</p><p id="39">Gis thốt lên một tiếng tán thưởng.</p><p id="40">‘Nó đánh bại Celia mà không cần dùng đến Đấu khí sao?’</p><p id="41">“Ngài Whitten, chuyện gì đã xảy ra?”</p><p id="42">Trước câu hỏi của Gis, Whitten giải thích lại những gì đã diễn ra ở sân tập.</p><p id="43">Sau khi nghe câu chuyện, Gis lắc đầu.</p><p id="44">Lý do thất bại đã quá rõ ràng.</p><p id="45">‘Sự ngạo mạn.’</p><p id="46">Celia đã coi thường Leo chỉ vì hắn không thể dùng Đấu khí.</p><p id="47">Mà theo lẽ thường, giả định đó cũng chẳng sai.</p><p id="48">Khoảng cách sức mạnh giữa người dùng Đấu khí và người thường là rất lớn.</p><p id="49">Nhưng điều đó không thay đổi sự thật là Celia đã bất cẩn.</p><p id="50">‘Và đó không phải là phong cách của Zerdinger.’</p><p id="51">Gis đứng trước mặt Leo.</p><p id="52">“Đánh bại Celia quả là ấn tượng.”</p><p id="53">“Cô ta đã đánh giá thấp cháu.”</p><p id="54">“Phải. Nghe nói cháu và Celia có cá cược gì đó.”</p><p id="55">“Vâng. Cháu đã cược với Celia Zerdinger. Kẻ thua sẽ làm người hầu cho kẻ thắng.”</p><p id="56">“Cái gì!”</p><p id="57">“Cậu thực sự nghĩ điều đó chấp nhận được sao?”</p><p id="58">Các hiệp sĩ Zerdinger giận dữ dựng cả tóc gáy.</p><p id="59">Một hậu duệ trực hệ của Zerdinger, làm người hầu ư?</p><p id="60">Họ trừng mắt nhìn Leo như muốn ăn tươi nuốt sống.</p><p id="61">Nhưng Leo chẳng thèm chớp mắt.</p><p id="62">“Kể từ giờ, Celia Zerdinger là hầu nữ của cháu trong một tuần.”</p><p id="63">Reina nở một nụ cười nhạt.</p><p id="64">Con trai bà luôn làm những gì nó đã nói.</p><p id="65">Tuy nhiên, bà không ngờ nó lại tuyên bố thản nhiên như vậy trước mặt những hiệp sĩ Zerdinger đang trừng mắt giận dữ.</p><p id="66">‘Ai có thể ngăn cản được cái tính cách đó chứ?’</p><p id="67">Trong khi đó, Gis mỉm cười ôn hòa.</p><p id="68">“Celia là người nhà Zerdinger. Con bé không thể bị bắt làm hầu nữ được.”</p><p id="69">Ông ta tiếp tục với giọng điệu nhẹ nhàng, dỗ dành.</p><p id="70">“Ta muốn cháu bỏ qua vụ cá cược này. Thay vào đó, ta sẽ tặng cháu một phần thưởng khác. Ví dụ như…”</p><p id="71">Gis vuốt cằm.</p><p id="72">“Kỹ thuật Đấu khí cao cấp của gia tộc ta thì sao?”</p><p id="73">“Cháu từ chối.”</p><p id="74">“Sao cơ?”</p><p id="75">“Vụ cá cược này là giữa Celia Zerdinger và cháu.”</p><p id="76">Leo liếc nhìn Celia.</p><p id="77">“Ngài gọi cô ta là ‘Zerdinger’. Bất cứ ai mang cái tên của Gia tộc Anh hùng đều phải chịu trách nhiệm cho lời nói của chính mình.”</p><p id="78">Leo rời mắt khỏi cô và nhìn thẳng vào mắt Gis lần nữa.</p><p id="79">“Ngay cả khi có thương lượng, thì cũng phải là giữa cô ta và cháu. Và…”</p><p id="80">Leo chốt lại đanh thép.</p><p id="81">“Nếu đó chỉ là cái cớ để cứu cháu gái ngài khỏi sự nhục nhã, thì kỹ thuật Đấu khí của các ngài chẳng đáng để học.”</p><p id="82">Đôi mắt của các hiệp sĩ rực lửa căm hờn.</p><p id="83">“Không thể chấp nhận được!”</p><p id="84">“Sao ngươi dám xúc phạm Zerdinger!”</p><p id="85">Các hiệp sĩ hét lên giận dữ.</p><p id="86">Thấy vậy, Whitten đang tức giận liền quát họ.</p><p id="87">“Sao các ngươi dám to tiếng ở đây!”</p><p id="88">“N-nhưng, Đội trưởng!”</p><p id="89">“Làm sao chúng tôi có thể im lặng sau khi nghe những lời đó!”</p><p id="90">“Dù thế nào đi nữa…”</p><p id="91">Reina, quan sát tình hình, lắc đầu vô cảm.</p><p id="92">“Có vẻ như tiêu chuẩn của Zerdinger đã xuống cấp rất nhiều kể từ khi ta rời gia tộc.”</p><p id="93">“Dù bà từng là người nhà Zerdinger, nói thế là quá đáng rồi đấy!” một hiệp sĩ cảnh cáo.</p><p id="94">Sát khí lóe lên trong mắt Whitten.</p><p id="95">“To gan!”</p><p id="96">Whitten sắp sửa bùng nổ cơn thịnh nộ thì</p><p id="97">Reina giơ tay ngăn ông lại.</p><p id="98">Rồi bà bước ra đứng chắn trước mặt các hiệp sĩ.</p><p id="99">“Quá đáng ư? Vậy để ta hỏi các ngươi—điều gì khiến các ngươi nghĩ rằng mình có thể tùy tiện ngắt lời cuộc trò chuyện giữa Phó Gia chủ và người ngang hàng với ngài ấy?”</p><p id="100">Trước câu hỏi lạnh lùng của bà, gương mặt các kỵ sĩ trở nên sượng sùng.</p><p id="101">“C-cái đó…”</p><p id="102">“Dù ta đã rời khỏi gia tộc, nhưng ta vẫn luôn tự hào mình là người nhà Zerdinger. Vì vậy, ta sẽ nói những gì cần nói.”</p><p id="103">Một luồng khí thế dữ dội tỏa ra từ Reina.</p><p id="104">“Chỉ là một kỵ sĩ quèn mà dám xen vào khi Phó Gia chủ đang nói—các ngươi là kỵ sĩ, hay chỉ là lũ chó thấy ai cũng sủa bất kể tình hình?”</p><p id="105">“Hộc!”</p><p id="106">Các kỵ sĩ nín thở.</p><p id="107">Uy nghiêm của Reina.</p><p id="108">Nó gần như giống hệt với Gia chủ đương nhiệm.</p><p id="109">Gis, người nãy giờ vẫn im lặng quan sát, cất giọng nhẹ nhàng.</p><p id="110">“Hiệp sĩ Whitten.”</p><p id="111">“Vâng, thưa Phó Gia chủ.”</p><p id="112">“Có vẻ như những người này vẫn chưa đủ tư cách làm kỵ sĩ nhà Zerdinger.”</p><p id="113">“Thuộc hạ đã hiểu.”</p><p id="114">Gương mặt các kỵ sĩ tái nhợt.</p><p id="115">Whitten tập hợp các kỵ sĩ lại với vẻ mặt cứng đờ và dẫn họ ra ngoài.</p><p id="116">“Dẫu vậy, tước bỏ thân phận kỵ sĩ của họ chẳng phải là hơi quá sao?”</p><p id="117">Reina, người hiểu rõ việc trở thành một kỵ sĩ Zerdinger khó khăn đến nhường nào, nhẹ nhàng trách cứ ông.</p><p id="118">“Những gì chị nói không có gì sai cả, chị à. Trao danh hiệu kỵ sĩ cho cầm thú thì thật lãng phí.”</p><p id="119">Gis cười nhẹ.</p><p id="120">Ông là người có thể nhẹ nhàng bỏ qua lỗi lầm của cấp dưới,</p><p id="121">Nhưng nếu những sai lầm đó tiếp diễn, ông cũng có thể trở nên quyết đoán một cách lạnh lùng.</p><p id="122">Lẽ ra các kỵ sĩ phải nhận ra sai lầm của mình và lui xuống khi Reina cảnh cáo họ.</p><p id="123">Sau khi cơn bão qua đi,</p><p id="124">Gis nhìn lại Leo.</p><p id="125">“Leo Plov. Cháu tuyên bố sẽ bắt dòng dõi trực hệ nhà Zerdinger làm hầu nữ và nói rằng Đấu khí pháp của Zerdinger không có giá trị. Có đúng không?”</p><p id="126">“Đúng vậy.”</p><p id="127">“Cháu không nghĩ những phát ngôn đó là ngông cuồng sao?”</p><p id="128">Gis hỏi bằng giọng ôn tồn.</p><p id="129">Reina lặng lẽ quan sát ông.</p><p id="130">Gis là người chịu trách nhiệm giáo dục huyết mạch của gia tộc Zerdinger.</p><p id="131">Ông là thầy của mọi đứa trẻ nhà Zerdinger.</p><p id="132">Vì vậy, ông rất giỏi trong việc nhìn thấu bản chất thật của một đứa trẻ.</p><p id="133">‘Ông ấy đang đo lường tiềm năng của Leo ngay lúc này.’</p><p id="134">Leo có lẽ đã vượt qua tiêu chuẩn của Gis.</p><p id="135">Vậy mà Gis vẫn dồn ép cậu thêm nữa.</p><p id="136">Bởi vì ông vẫn chưa thể đo lường được tiềm năng của Leo sâu đến mức nào.</p><p id="137">Leo cũng nhìn thấu ý định của Gis.</p><p id="138">Nên cậu cười khẩy trong lòng.</p><p id="139">“Nếu ngài coi đó là sự xúc phạm đến Zerdinger, cháu xin lỗi. Nhưng cháu không có ý coi thường Zerdinger.”</p><p id="140">“Vậy cháu gọi việc bắt dòng dõi trực hệ làm hầu nữ và nói Đấu khí pháp không đáng một xu là gì?”</p><p id="141">“Chuyện của Celia Zerdinger, như cháu đã nói, là một giao kèo giữa cô ấy và cháu. Nếu cô ta thực sự là người nhà Zerdinger, cô ta phải biết tự chịu trách nhiệm cho lời nói của mình.”</p><p id="142">“Ồ?”</p><p id="143">Gis gật đầu.</p><p id="144">“Và việc nói Đấu khí pháp không có giá trị không có nghĩa là cháu nghĩ Đấu khí pháp của Zerdinger yếu kém.”</p><p id="145">“Vậy thì là gì?”</p><p id="146">“Nếu ngài đưa ra Đấu khí pháp như phần thưởng cho việc đánh bại Celia, cháu đã vui vẻ chấp nhận.”</p><p id="147">Một nụ cười nhẹ xuất hiện trên môi Gis.</p><p id="148">“Nhưng ngài lại dùng Đấu khí pháp để lấp liếm cho sai lầm của Celia, đúng không?”</p><p id="149">“Đúng vậy.”</p><p id="150">“Ngài nghĩ rằng Celia sẽ không thua nếu cô ta không đánh giá thấp cháu.”</p><p id="151">Cậu hất cằm lên như thể đang tuyên bố.</p><p id="152">“Nhưng ngay cả khi Celia thi đấu nghiêm túc, cháu vẫn sẽ thắng.”</p><p id="153">‘Tóm lại là… thằng bé không thích cách làm của mình nên từ chối sao? Ha, đúng là trẻ con!’</p><p id="154">Gis không nhịn được mà bật cười.</p><p id="155">Ông liếc nhìn Reina, người đang mỉm cười như muốn nói: “Thấy chưa?”</p><p id="156">‘Giờ thì em đã hiểu ý chị rồi.’</p><p id="157">Nhìn Leo, người đang nhìn thẳng vào mắt mình với sự táo bạo không chút nao núng, Gis cười khúc khích.</p><p id="158">‘Tiềm năng đáng kinh ngạc. Giá như thằng bé mang họ Zerdinger!’</p><p id="159">Zerdinger sẽ có thêm một người hùng nữa trong tay.</p><p id="160">‘Mình sẽ phải báo lại với anh cả.’</p><p id="161">Đây là đứa trẻ mà gia tộc nên nhận về.</p><p id="162">“Đưa Celia đến khu nhà ở của người hầu.”</p><p id="163">“N-nhưng, thưa Phó Gia chủ!”</p><p id="164">Những người hầu đang chăm sóc Celia, người vẫn còn nằm trên cáng, tỏ vẻ hoảng hốt.</p><p id="165">“Đó là mệnh lệnh.”</p><p id="166">Đám người hầu ngập ngừng đưa Celia về phía khu nhà người hầu.</p><p id="167">“Cháu hiểu rồi. Cháu sẽ tôn trọng ý muốn của ngài.”</p><p id="168">“Vâng, thưa ngài Gis.”</p><p id="169">“Leo, chuyện ta nói không gọi cháu là cháu trai ở nơi công cộng có nghĩa là khi riêng tư, ta sẽ đối đãi với cháu như cháu trai của mình.”</p><p id="170">Gis mỉm cười ấm áp.</p><p id="171">Bất kể tiềm năng của Leo thế nào, những lời này đều là chân thật.</p><p id="172">Biết được điều này, Leo chấp nhận không chút do dự.</p><p id="173">“Vâng, thưa cậu.”</p><p id="174">“Tốt. Trông cháu có vẻ mệt vì tập luyện rồi, về nghỉ ngơi đi.”</p><p id="175">“Chúc cậu ngủ ngon.”</p><p id="176">Leo cúi đầu chào.</p><p id="177">“Chúc mẹ ngủ ngon.”</p><p id="178">“Ừ, nghỉ ngơi đi, Leo.”</p><p id="179">Khi Leo đã đi khuất, chỉ còn lại hai người bọn họ.</p><p id="180">“Chị.”</p><p id="181">“Gì thế?”</p><p id="182">“Em sẽ cố gắng thuyết phục anh cả cho Leo học [Hơi thở Phượng hoàng].”</p><p id="183">“Hơi thở Phượng hoàng?”</p><p id="184">Biểu tượng của Zerdinger là ngọn lửa rực cháy.</p><p id="185">Đúng với biểu tượng đó, Đấu khí của Zerdinger luôn mang hình dạng của lửa.</p><p id="186">Trong số đó, [Hơi thở Phượng hoàng] là đặc biệt nhất.</p><p id="187">Gia chủ đầu tiên của Zerdinger đã hoàn thiện loại Đấu khí này sau khi uống máu của phượng hoàng.</p><p id="188">Tất cả các Đấu khí pháp của gia tộc đều bắt nguồn từ Hơi thở Phượng hoàng.</p><p id="189">Chỉ riêng sức mạnh của nó đã đủ để Zerdinger được công nhận là một Gia tộc Anh hùng.</p><p id="190">Đó là lý do tại sao chỉ những người có huyết thống được công nhận nhất mới được phép học nó.</p><p id="191">Reina ngạc nhiên—bà chưa bao giờ ngờ Gis lại nhắc đến Hơi thở Phượng hoàng.</p><p id="192">“Đúng vậy. Mặc dù em không biết liệu Gia chủ có chấp thuận hay không.”</p><p id="193">Gis nói một cách nghiêm túc.</p><p id="194">“Nhưng Leo giống một người nhà Zerdinger hơn bất kỳ ai.”</p><p id="195">Kiếm thuật đã đánh bại Celia.</p><p id="196">Tiềm năng không thể đo đếm của cậu.</p><p id="197">“Vì vậy, em cần một lý do chính đáng để thuyết phục anh cả.”</p><p id="198">“Không lẽ cậu định—”</p><p id="199">“Vâng.”</p><p id="200">Gis gật đầu.</p><p id="201">“Cho thằng bé vào Lumene.”</p><p id="202">“Việc đó quá nguy hiểm.”</p><p id="203">Bất cứ ai khao khát trở thành Anh hùng đều mơ ước được vào Lumene.</p><p id="204">Nhưng cần phải có quyết tâm mới dám làm điều đó.</p><p id="205">Người ta nói mỗi học viên tại Lumene đều là thiên tài.</p><p id="206">Nhưng số lượng người tốt nghiệp lại rất ít ỏi.</p><p id="207">Họ không bao giờ đuổi học những học viên bị tụt lại phía sau.</p><p id="208">Thay vào đó, họ hỗ trợ để những học viên đó có thể tiếp tục.</p><p id="209">Nhưng nếu một học viên vẫn không thể theo kịp—</p><p id="210">Họ sẽ được trao hai lựa chọn.</p><p id="211">Rút lui, hoặc là chết.</p><p id="212">Cuộc sống tại Lumene khắc nghiệt đến thế đấy.</p><p id="213">Và kỳ thi đầu vào cũng tàn khốc không kém.</p><p id="214">Bài kiểm tra là thực chiến.</p><p id="215">Lần nào cũng có người chết trong kỳ thi đầu vào.</p><p id="216">Đó là lý do Reina muốn Leo học Đấu khí pháp trước khi tham gia kỳ thi.</p><p id="217">“Leo có thể ổn trong một trận đấu tay đôi, nhưng trong thực chiến, thằng bé vẫn có giới hạn.”</p><p id="218">“Nó có đủ tiềm năng. Cách duy nhất để thuyết phục anh cả là thông qua con đường đó.”</p><p id="219">Gis nắm chặt tay.</p><p id="220">“Chị, chị muốn Leo trở thành người như thế nào?”</p><p id="221">“Ý cậu là sao?”</p><p id="222">“Chị không muốn thằng bé trở thành một Anh hùng sao?”</p><p id="223">“Nếu đó là điều thằng bé tự mình mong muốn.”</p><p id="224">“Trong trường hợp đó, chúng ta không thể chỉ chọn con đường an toàn nhất. Em nghĩ việc để thằng bé thử thách bản thân với những gian nan cũng là điều tốt.”</p><p id="225">“……”</p><p id="226">“Chị sẽ làm gì?”</p><p id="227">Reina nhắm mắt lại và hít một hơi thật sâu.</p><p id="228">“Chị sẽ làm theo ý nguyện của Leo.”</p><p id="229">‘Chắc chắn đứa trẻ đó sẽ nói là nó sẽ làm.’</p><p id="230">Gis tin chắc như vậy.</p><p id="231">‘Nó có đôi mắt không bao giờ ngần ngại tiến về phía trước.’</p><p id="232">Nghĩ đến ánh mắt kiên định của Leo, Gis mỉm cười.</p><p id="233">‘Haha. Em đang rất mong chờ đây.’</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306322-chuong-4" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24971-anh-hung-huyen-thoai-la-hoc-sinh-uu-tu-cua-hoc-vien/c306324-chuong-6" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '8uhDTLlwIRXMgbJ4xXM0ey1CMwRzKsSzXEEp1ngY';
        var comment_type = 'chapter';
        var comment_typeid = '306323';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '8uhDTLlwIRXMgbJ4xXM0ey1CMwRzKsSzXEEp1ngY';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24971');
    chapter_id = parseInt('306323');

    readingObject = {
        series_id: series_id,
        series_title: 'Anh Hùng Huyền Thoại Là Học Sinh Ưu Tú Của Học Viện',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="8uhDTLlwIRXMgbJ4xXM0ey1CMwRzKsSzXEEp1ngY" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cac771fef321dee',t:'MTc3MDU2Nzc0MQ=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
