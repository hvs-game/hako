<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Kết cục của Phản diện - Chương 002 Phát súng đầu tiên (2) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="&quot;Cách đây vài ngày, tôi đã chạm đến kết cục. Chẳng có gì đao to búa lớn cả — tôi chỉ đặt khẩu súng vào thái dương rồi bóp cò. Ngay trước mặt vị hôn thê, ngay trong căn phòng có chị gái mình, và đôi khi là giữa quảng...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="bwnaSSgZg7CkDdKQJi4w17ymZWaDdZOVoasOOiOZ">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24846-ket-cuc-cua-phan-dien/c299558-chuong-002-phat-sung-dau-tien-2">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24846-4b75096a-828c-43fd-9b44-8482f5491631.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24846-ket-cuc-cua-phan-dien/c299556-chuong-001-phat-sung-dau-tien-1"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24846-ket-cuc-cua-phan-dien"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24846-ket-cuc-cua-phan-dien/c299558-chuong-002-phat-sung-dau-tien-2" style="background: url('https://i.hako.vn/ln/series/covers/s24846-4b75096a-828c-43fd-9b44-8482f5491631.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24846-ket-cuc-cua-phan-dien">Kết cục của Phản diện</a></h5>
                    <small><i class="fas fa-pen"></i>Eondeok-gungdengi</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24846-ket-cuc-cua-phan-dien/t36165-toan-van">Toàn văn</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24846-ket-cuc-cua-phan-dien/c299556-chuong-001-phat-sung-dau-tien-1">
                                                                        Chương 001 Phát súng đầu tiên (1)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24846-ket-cuc-cua-phan-dien/c299558-chuong-002-phat-sung-dau-tien-2">
                                                                        Chương 002 Phát súng đầu tiên (2)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Toàn văn</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 002 Phát súng đầu tiên (2)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24846-ket-cuc-cua-phan-dien/c299558-chuong-002-phat-sung-dau-tien-2#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,825 từ - Cập nhật: 
                        <time class="topic-time timeago" title="30-01-2026 15:20:26" datetime="2026-01-30T15:20:26+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 002 Phát súng đầu tiên (2)</p>
                    <p id="1">Làn khói khét lẹt từ điếu thuốc rẻ tiền đâm vào phổi tôi đau nhói.</p><p id="2">Những sợi khói mảnh mai quyện cùng hơi thở hắt ra, lướt qua một tia sáng yếu ớt trong phòng rồi tan biến vào không trung, như thể chúng chưa từng tồn tại.</p><p id="3">Mọi thứ đều như vậy.</p><p id="4">Chợt lóe lên trước mắt, rồi biến mất.</p><p id="5">Hoặc tôi đã tin rằng chúng đã tan biến, để rồi nhận ra mọi thứ lại quay về vạch xuất phát.</p><p id="6">Chẳng có trải nghiệm nào trong số đó là dễ chịu cả.</p><p id="7">Bởi vì tất cả những gì tôi đã làm, suốt ba năm sống dưới cái tên Lavin, giờ đây chỉ còn là một nỗ lực vô vọng, một ảo ảnh huyễn tưởng.</p><p id="8">Hai bên thái dương nhức nhói liên hồi.</p><p id="9">Cảm giác lạnh lẽo ngay trước khi bóp cò súng, và tiếng nổ đinh tai nhức óc bùng lên sau đó, dường như vẫn còn vương vất bên tai tôi.</p><p id="10">Trong căn phòng này, cảm quan về thời gian dường như không còn hoạt động rõ ràng nữa.</p><p id="11">Tôi đã chết. Chắc chắn là vậy.</p><p id="12">Bởi vì ý thức của tôi đã chìm vào bóng tối cùng với cảm giác đầu mình nổ tung.</p><p id="13">Nhưng tại sao tôi vẫn cứ mãi ngồi trên chiếc ghế cọt kẹt này trong căn phòng chết tiệt này?</p><p id="14">Dù là địa ngục hay thiên đàng, hay thậm chí là luyện ngục cũng được, miễn không phải nơi này.</p><p id="15">Trước mắt, dòng tin nhắn hệ thống, thứ giờ đây chỉ khiến tôi muốn phát ói, vẫn hiển thị một cách sống động.</p><p id="16">[Thu thập Kết cục. 1/?]</p><p id="17">[Phần thưởng: Trở về thế giới ban đầu.]</p><p id="18">Chắc hẳn họ đã thấy cảnh tượng tôi chết đi, kinh tởm trước cảnh tượng máu tôi bắn tung toé, dù cho họ đối xử với tôi như thể chỉ muốn giết chết tôi ngay lập tức.</p><p id="19">Tất nhiên rồi, tiểu thư Edelgard cao quý và thanh lịch sẽ cảm thấy như vậy.</p><p id="20">Nhưng chẳng ích gì khi cứ đắm chìm trong những suy nghĩ vô dụng.</p><p id="21">Tôi lục lọi bao thuốc nát bấy trong túi, rút ra điếu cuối cùng và đưa lên môi.</p><p id="22">Điếu thuốc đang cầm trên tay đã cháy rụi đến tận đầu lọc, nóng đến mức làm ấm cả đầu ngón tay tôi.</p><p id="23">Một tiếng 'tách', mồi lửa mới lại được thắp lên.</p><p id="24">Cho dù tôi có hít vào hay thở ra làn khói bao nhiêu đi nữa, tâm trí hỗn loạn của tôi vẫn chẳng thể nào bình lặng nổi.</p><p id="25">Ngay lúc đó, mắt tôi chạm phải một phong bì quen thuộc trên bàn.</p><p id="26">Loại giấy da cao cấp mà chính tôi đã tự tay chọn lựa, tỏa ra một mùi hương tinh tế.</p><p id="27">Một họa tiết hoa tử đinh hương nhỏ được chạm khắc ở góc trên bên phải của phong bì, đó là thứ mà từng được Seraphina đặc biệt yêu thích.</p><p id="28">Đó là bức thư mà tôi đã viết ít nhất mỗi tuần một lần, đôi khi là ba ngày một lần.</p><p id="29">Hẳn đây là một trong số những bức thư mà cô ta đã đốt thành tro ngay trước mắt tôi mới vài ngày trước.</p><p id="30">Cùng với tông giọng băng lãnh, cô nói, 'Giờ đây, bất cứ thứ gì anh đưa cho tôi đều chỉ thấy kinh tởm.'</p><p id="31">Ký ức đó thật sống động.</p><p id="32">Ngọn lửa đang bùng cháy, và khuôn mặt vô hồn của tôi khi nhìn chúng.</p><p id="33">Và cả giọng nói của cô ta nữa.</p><p id="34">Mọi thứ rõ ràng như thể vừa mới xảy ra tích tắc trước, vậy mà bức thư ấy vẫn nằm đây, nguyên vẹn một cách hoàn hảo, như thể chưa từng có chuyện gì xảy ra.</p><p id="35">Tôi dụi tắt điếu thuốc đang ngậm trong miệng trực tiếp lên họa tiết hoa tử đinh hương trên phong bì.</p><p id="36">Khói bốc lên từ bức thư tôi từng nâng niu trân trọng.</p><p id="37">Muội than đen kịt làm vấy bẩn những cánh hoa màu tím.</p><p id="38">Bị trục xuất khỏi gia tộc, một thông báo hủy hôn từ hôn thê, và một vụ tự sát bốc đồng.</p><p id="39">Đó là kết thúc mà tôi đã đạt được sau mọi nỗ lực của mình.</p><p id="40">Có lẽ nỗ lực của tôi là chưa đủ.</p><p id="41">Hoặc có lẽ đó là lỗi của tôi khi đã bỏ qua một sự thật rằng, thế giới này còn tàn nhẫn hơn bất kỳ nơi nào tôi từng thấy.</p><p id="42">Mong chờ mọi thứ suôn sẻ bằng cách tận dụng cái gọi là kiến thức vượt trội về nguyên tác, suy cho cùng chỉ là một ý nghĩ ngây thơ.</p><p id="43">Thế giới này dường như không muốn tôi trở thành một người tử tế hay tốt đẹp.</p><p id="44">Tôi càng cố gắng ngoi đầu lên khỏi mặt nước, thì một bàn tay vô hình lại càng túm lấy tóc tôi và dìm tôi sâu hơn vào vũng bùn.</p><p id="45">Vai trò ban đầu của tôi là gì nhỉ?</p><p id="46">Phải rồi, tôi đáng lẽ phải phá phách hết mình, rồi gây hấn với nam chính nguyên tác mà tôi chưa từng gặp mặt, để rồi bị làm nhục công khai và nảy sinh một mối thù nhỏ mọn.</p><p id="47">Và cái giá phải trả cho những trò nghịch ngợm vụng về từ mối thù đó là vị hôn thê của tôi, người vốn là một trong các nữ chính của nguyên tác, sẽ bỏ rơi tôi để sà vào vòng tay của gã nam chính đáng kính. Còn tôi sẽ bị trục xuất khỏi gia đình và học viện cùng lúc, lang thang trên phố, và cuối cùng chết dưới nhát dao của một tên cướp vô danh.</p><p id="48">Có lẽ đó là một sát thủ do gia đình gửi đến chứ không phải cướp, nhưng giờ nhận ra điều đó cũng chẳng có ý nghĩa gì?</p><p id="49">Tôi đã cô sống một cách lương thiện vì tôi ghét một kết cục như vậy.</p><p id="50">Nhưng tất cả những gì tôi nhận ra là dù một kẻ cặn bã có cải tà quy chính chỉ sau một đêm và sống một cuộc đời tử tế, định kiến của người đời cũng chẳng bao giờ thay đổi.</p><p id="51">Tôi có nên một lần nữa nằm ngửa bụng như một liếm cẩu trước mặt Seraphina, van xin cô ta hãy yêu tôi, làm ơn đừng bỏ rơi tôi được không?</p><p id="52">Với một hy vọng ngu xuẩn kiểu như 'mình giờ khác rồi rồi, lần này sẽ không như vậy nữa'?</p><p id="53">Không thể nào. Nếu làm vậy có tác dụng thì tình cảnh của tôi đáng lẽ đã phải khá khẩm hơn từ đời rồi.</p><p id="54">Khi những suy nghĩ cứ nối tiếp nhau, kỳ lạ thay, tâm trí tôi lại lắng xuống một cách bình thản.</p><p id="55">Đó là một sự tĩnh lặng gần với sự cam chịu hơn là tức giận hay đau khổ.</p><p id="56">Tôi nhìn đờ đẫn vào dòng tin nhắn hệ thống đang lơ lửng trong không trung, thứ có lẽ cũng chỉ là một ảo giác do chính bộ não tôi tạo ra.</p><p id="57">[Thu thập Kết thúc. 1/?]</p><p id="58">[Phần thưởng: Trở về thế giới ban đầu.]</p><p id="59">Ngay cả một vụ tự sát, giống như một màn trình diễn được thực hiện trong cơn say trước mặt chị gái, chắc cũng được tính là một loại kết thúc.</p><p id="60">Hoặc có lẽ sau cái chết của tôi, mọi thứ trên thế giới đã diễn ra suôn sẻ dẫn đến một cái kết có hậu, nơi mọi người đều hạnh phúc.</p><p id="61">Dù sao đi nữa, đó là một câu chuyện chẳng liên quan gì đến tôi cả.</p><p id="62">Còn lâu mới được trở về, tôi vẫn đang mắc kẹt trong cái thế giới khốn kiếp này.</p><p id="63">Tôi nhìn chằm chằm vào bức thư loang lổ tàn thuốc, rồi đứng dậy khỏi chỗ ngồi.</p><p id="64">Tôi tiến lại gần chiếc đèn dầu cũ kỹ bị vứt xó trong góc phòng, lắc nhẹ xem còn dầu không, rồi thắp sáng.</p><p id="65">Ngọn lửa nhỏ leo lét soi sáng lờ mờ căn phòng tối tăm.</p><p id="66">Không chút do dự, tôi hơ bức thư bám đầy muội than lên ngọn lửa.</p><p id="67">Mép giấy da chuyển sang màu vàng, rồi nhanh chóng bắt lửa, bắt đầu bốc lên một ngọn lửa nhỏ.</p><p id="68">Lách tách, lách tách...</p><p id="69">Mùi đặc trưng của giấy da quyện với mùi tro cốt bốc lên một cách khó chịu.</p><p id="70">Tôi lặng lẽ nhìn xuống bức thư đang cháy.</p><p id="71">Nhưng có lẽ đó không chỉ là loại giấy da cao cấp thông thường.</p><p id="72">Ngọn lửa lười biếng thiêu rụi khoảng một nửa bức thư rồi tắt lịm, như thể chúng cũng mất đi hứng thú.</p><p id="73">Cuối cùng, chẳng có gì đi đúng hướng cả.</p><p id="74">Khuôn mặt khinh bỉ của Seraphina, vẻ ghê tởm của Levina, những ánh nhìn lạnh lẽo của những người thân trong gia đình.</p><p id="75">Dù tôi có làm gì, họ cũng chỉ coi tôi như 'nỗi nhục nhã của gia tộc Edelgard'.</p><p id="76">Thực tế, họ có lẽ đã giảm nhẹ từ 'thằng súc sinh cặn bã' xuống thành 'nỗi nhục nhã' chỉ vì sợ uy thế của gia tộc Edelgard mà thôi. Nhưng điều đó chẳng còn là mối bận tâm của tôi nữa.</p><p id="77">Có lẽ tôi thực sự không thích thể loại hồi quy cho lắm.</p><p id="78">Có lẽ đơn giản vì tôi cảm thấy bản thân thật thất bại, một kẻ chẳng thể thay đổi được bất cứ điều gì dù đã có cơ hội thứ hai.</p><p id="79">"Khi tôi gọi anh, anh chỉ đang hút những điếu thuốc mà anh từng tuyên bố là đã bỏ rồi sao?"</p><p id="80">Một giọng nói lạnh lùng vang lên từ phía sau.</p><p id="81">Là Seraphina.</p><p id="82">Tôi không biết cô ta đã vào từ lúc nào, nhưng cô ta đang tựa lưng vào cửa, khoanh tay và trừng mắt nhìn tôi.</p><p id="83">Thay vì trả lời, tôi dụi điếu thuốc trong miệng vào đống tàn thuốc trong gạt tàn.</p><p id="84">"Bức tường đơn điệu nhỉ."</p><p id="85">Nhìn quanh căn phòng, cô buông lời nhận xét.</p><p id="86">Trước đây, ở đó từng treo một bức tranh phong cảnh của một họa sĩ vô danh, thứ mà cô ta đã ném cho tôi và gọi đó là một món quà sinh nhật.</p><p id="87">Tôi khá thích bức tranh đó, nhưng cô ta sẽ chẳng bao giờ biết đâu.</p><p id="88">Giờ đây, chỉ còn lại dấu vết của chiếc đinh, trông như một vết sẹo.</p><p id="89">"Cũng chẳng có gì đáng để treo."</p><p id="90">Trước lời nói của tôi, Seraphina khẽ cắn môi.</p><p id="91">Đó là cử chỉ quen thuộc của cô ta khi kìm nén sự khó chịu.</p><p id="92">"Không phải anh... đã nói là bỏ rồi sao?"</p><p id="93">Seraphina hất cằm về phía ngọn núi tàn thuốc chất đống trên bàn.</p><p id="94">Ánh mắt cô ta dừng lại một giây trên bức thư cháy dở mà tôi vừa thất bại trong việc thiêu hủy.</p><p id="95">"À, đó à. Chỉ là tôi cảm thấy thay đổi cũng chẳng ích gì cả."</p><p id="96">Tôi trả lời bằng một cái nhún vai.</p><p id="97">Cô ta chắc chắn sẽ không hiểu ý tôi là gì.</p><p id="98">Tôi thực sự đã hồi quy.</p><p id="99">Nhìn cái cách những lời cô ta nói y hệt như ngày hôm đó, không thay đổi lấy một chữ.</p><p id="100">Seraphina thở dài một tiếng.</p><p id="101">Tiếng thở dài đó mang theo nhiều thứ: sự thất vọng, mệt mỏi và cả một chút cam chịu.</p><p id="102">"Anh là người đã hẹn hôm nay chúng ta gặp nhau. Lavin."</p><p id="103">"Tôi có nói, nhưng tôi tự hỏi liệu giờ điều đó còn quan trọng không."</p><p id="104">Tôi dùng mũi chân đẩy nhẹ mảnh thư trên sàn.</p><p id="105">"Mà thôi, không quan trọng. Hôm nay tôi cũng có chuyện muốn nói. Lavin, tôi nghe chuyện rồi. Lần này anh lại gây chuyện ở thư viện cấm, đúng không?"</p><p id="106">"Vậy chắc cô cũng nghe thấy kết quả rồi chứ. Rằng mọi chuyện đã kết thúc êm đẹp và không có cáo buộc nào cả."</p><p id="107">"Vào ngày hôm đó, những con quái vật bị phong ấn trong cấm thư đã được thả ra, và thật trùng hợp, anh, người đã lẻn vào thư viện cấm bằng cách lợi dụng uy thế gia tộc, lại không bị cáo buộc gì sao? Anh nghĩ điều đó nghe có lý không?"</p><p id="108">Nó chắc chắn là vô lý.</p><p id="109">Tôi thậm chí còn tự hỏi liệu tình cảnh của bản thân còn cái gì có lý không.</p><p id="110">Có lẽ lỗi là tại tôi vì đã không ghi nhớ tỉ mỉ mọi bối cảnh của một trò chơi mà tôi thậm chí còn chẳng hứng thú.</p><p id="111">Sự thật là việc không một ai tin lấy một lời tôi nói, sau một thời điểm nào đó, đã không còn làm tôi tổn thương nữa. </p><p id="112">Nó chỉ đơn giản là vậy thôi.</p><p id="113">Dù tôi có làm gì hay không cũng chẳng có ích gì, đôi lúc tôi nghĩ người ta chỉ đơn giản là cần một ai đó để chỉ trích và nhận hết lỗi lầm.</p><p id="114">"Anh có thể không quan tâm, nhưng đã có người chết. Một trong những bạn học của anh đã chết."</p><p id="115">"Tôi biết."</p><p id="116">"Chỉ vậy thôi sao?"</p><p id="117">"Đủ rồi. Tôi phải quan tâm đến mức nào nữa đây? Đó không phải việc tôi gây ra, cũng không phải vấn đề của tôi."</p><p id="118">Ngay cả khi nghe tôi nói vậy, đôi mắt cô ta vẫn không hề dao động.</p><p id="119">Như thể cô ta đang thầm nói: 'Quả nhiên anh là hạng người đó mà.'</p><p id="120">Bởi vì dù có chuyện gì xảy ra, trong tâm trí vị hôn thê đáng kính này, tiền đề cho mọi rắc rối đều bắt đầu từ 'Do Lavin làm'.</p><p id="121">Seraphina nghiến răng, nói bằng giọng trầm thấp.</p><p id="122">"......Đó là vấn đề liên quan đến anh đấy, Lavin."</p><p id="123">Cô ta thở dài, tiến lại gần tôi, rồi thô bạo kéo rèm và mở toang cửa sổ.</p><p id="124">Ánh nắng ban chiều tràn vào căn phòng đầy bụi mù.</p><p id="125">Như thể đây là phòng của mình, cô ta thản nhiên dùng chân đá một chai rượu đang lăn lóc sang một bên, rồi bắt đầu thu dọn đống quần áo vương vãi trên ghế một cách thô bạo.</p><p id="126">"Có lẽ tôi đã nghĩ mọi chuyện ngay từ đầu đã là như thế này rồi."</p><p id="127">"Tất nhiên là cô nghĩ thế rồi, lúc nào cô chẳng tỏ ra mình biết tuốt."</p><p id="128">"Phải. Chúng ta luôn lớn lên cùng nhau từ nhỏ mà."</p><p id="129">Seraphina trả lời, khẽ cắn môi.</p><p id="130">Tay cô ta đang gấp quần áo, nhưng ánh mắt lại dán chặt vào một khoảng không vô định nào đó.</p><p id="131">Cô ta nhặt bức thư cháy dở dưới sàn lên.</p><p id="132">Sau khi nhìn trân trân vào nó một hồi lâu, cuối cùng cô ta cũng lên tiếng.</p><p id="133">Giọng cô ta bình thản một cách kỳ lạ.</p><p id="134">Và những lời cô ta thốt ra, chính xác là những gì đã nói ngày hôm đó.</p><p id="135">"Tôi đã nói với cha rằng chúng ta thực sự nên hủy bỏ hôn ước. Ông ấy đã sẵn sàng chấp nhận, và hai gia đình có lẽ sẽ sớm ấn định một ngày phù hợp thôi."</p><p id="136">Cô ta đặt bức thư bám đầy muội than một cách ngăn nắp lên trên những bức thư còn nguyên vẹn khác trên bàn.</p><p id="137">Đó là một hành động tách biệt, đầy tính công việc, như thể cô ta đang sắp xếp một tờ cáo phó.</p><p id="138">Vài ngày trước, khi Seraphina và tôi có đúng cuộc trò chuyện này, tôi đã vô thức mất kiểm soát cảm xúc và chúng tôi đã cãi nhau nảy lửa.</p><p id="139">Kết quả nhận được là cảnh tượng bức thư bùng cháy rực rỡ trước mắt tôi, nhưng hôm nay, có lẽ vì tôi đã đốt nó trước, nên Seraphina không đốt bức thư nữa.</p><p id="140">"Được thôi, vậy thì. Tạm biệt, Seraphina. Tôi không chắc liệu mình có còn gặp lại mặt cô nữa không."</p><p id="141">Tôi trả lời bằng một cái nhún vai.</p><p id="142">Đôi mắt cô ta mở to đầy vẻ khó tin.</p><p id="143">"...Chỉ thế thôi sao?"</p><p id="144">"Hay cô muốn tôi quỳ xuống chân cô và van xin ngay bây giờ? Nói rằng tôi sẽ không làm thế nữa, làm ơn hãy cho tôi thêm một cơ hội?"</p><p id="145">"Không! Ít nhất... ít nhất cũng phải nói gì đó đi chứ! Hãy thử giải thích đi!"</p><p id="146">Dù tôi có làm vậy, cô cũng có thèm nghe đâu.</p><p id="147">"Được thôi, giải thích. Vì cô đã yêu cầu, tôi sẽ cho cô một lời giải thích."</p><p id="148">Tôi nhìn thẳng vào mắt cô ta.</p><p id="149">Trong một khoảng thời gian rất dài, có lẽ là ba phút, một sự im lặng ngột ngạt bao trùm giữa hai chúng tôi, nơi chỉ có thể nghe thấy tiếng thở của chính mình.</p><p id="150">Chúng tôi chỉ trao đổi ánh nhìn mà không nói một lời nào.</p><p id="151">Tôi là người lên tiếng trước.</p><p id="152">"Nhưng tôi không biết phải bắt đầu từ đâu nữa. Cô đã quyết định mọi thứ rồi, đúng không?"</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/74d7206e-decf-4f38-b5d6-003d26a41676.jpg?t=1768360276" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/14280" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/14280/f4744abe-bb28-4201-aa0c-be5b777efb2c.jpg?t=1768360276" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24846-ket-cuc-cua-phan-dien/c299556-chuong-001-phat-sung-dau-tien-1" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24846-ket-cuc-cua-phan-dien" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24846-ket-cuc-cua-phan-dien" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'bHtJ5MxniEaEoIw2xFQPpgQj4W7jCmO6RMnGR2QW';
        var comment_type = 'chapter';
        var comment_typeid = '299558';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'bwnaSSgZg7CkDdKQJi4w17ymZWaDdZOVoasOOiOZ';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24846');
    chapter_id = parseInt('299558');

    readingObject = {
        series_id: series_id,
        series_title: 'Kết cục của Phản diện',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="bwnaSSgZg7CkDdKQJi4w17ymZWaDdZOVoasOOiOZ" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c5f9a3f9d5914f2',t:'MTc2OTc2MTc3Ng=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
