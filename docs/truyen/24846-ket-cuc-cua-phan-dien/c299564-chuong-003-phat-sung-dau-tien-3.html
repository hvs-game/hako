<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Kết cục của Phản diện - Chương 003 Phát súng đầu tiên (3) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="&quot;Cách đây vài ngày, tôi đã chạm đến kết cục. Chẳng có gì đao to búa lớn cả — tôi chỉ đặt khẩu súng vào thái dương rồi bóp cò. Ngay trước mặt vị hôn thê, ngay trong căn phòng có chị gái mình, và đôi khi là giữa quảng...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="WXusyv1cIOjuFKT6HwyJRFufHEuSc0BAtllsIBto">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24846-ket-cuc-cua-phan-dien/c299564-chuong-003-phat-sung-dau-tien-3">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24846-4b75096a-828c-43fd-9b44-8482f5491631.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24846-ket-cuc-cua-phan-dien/c299558-chuong-002-phat-sung-dau-tien-2"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24846-ket-cuc-cua-phan-dien"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24846-ket-cuc-cua-phan-dien/c299564-chuong-003-phat-sung-dau-tien-3" style="background: url('https://i.hako.vn/ln/series/covers/s24846-4b75096a-828c-43fd-9b44-8482f5491631.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24846-ket-cuc-cua-phan-dien">Kết cục của Phản diện</a></h5>
                    <small><i class="fas fa-pen"></i>Eondeok-gungdengi</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24846-ket-cuc-cua-phan-dien/t36165-toan-van">Toàn văn</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24846-ket-cuc-cua-phan-dien/c299556-chuong-001-phat-sung-dau-tien-1">
                                                                        Chương 001 Phát súng đầu tiên (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24846-ket-cuc-cua-phan-dien/c299558-chuong-002-phat-sung-dau-tien-2">
                                                                        Chương 002 Phát súng đầu tiên (2)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24846-ket-cuc-cua-phan-dien/c299564-chuong-003-phat-sung-dau-tien-3">
                                                                        Chương 003 Phát súng đầu tiên (3)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Toàn văn</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 003 Phát súng đầu tiên (3)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24846-ket-cuc-cua-phan-dien/c299564-chuong-003-phat-sung-dau-tien-3#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,169 từ - Cập nhật: 
                        <time class="topic-time timeago" title="30-01-2026 15:32:01" datetime="2026-01-30T15:32:01+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 003 Phát súng đầu tiên (3)</p>
                    <p id="1">"Anh biết rõ lý do tại sao tôi lại đề cập đến việc hủy hôn mà."</p><p id="2">Giọng Seraphina trầm xuống và yếu ớt. Đó là một âm thanh gần với sự kiệt quệ hơn là giận dữ.</p><p id="3">Tiếng nói của cô ta thấm đẫm vào bầu không khí ẩm mốc của căn phòng. Cả hai chúng tôi đều đã biết rõ câu trả lời cho câu hỏi đó.</p><p id="4">"Tôi biết."</p><p id="5">Tôi đáp lại cộc lốc. Tôi cảm thấy vai cô ta khẽ run lên một cách kín đáo.</p><p id="6">"Nếu anh cứ định nói năng cái kiểu đó..."</p><p id="7">Seraphina nhìn tôi, như thể đang hỏi rằng liệu tôi có ý định nói chuyện tử tế hay không.</p><p id="8">Thực tế đúng là vậy. Suy cho cùng, cuộc đối thoại này chỉ là sự lặp lại vô nghĩa của những gì đã xảy ra vài ngày trước.</p><p id="9">"Tôi thực sự không biết phải nói gì."</p><p id="10">"Anh có còn nhớ lời hứa rằng ít nhất sẽ không gây rắc rối và cố mà hòa nhập với mọi người khi ở học viện không?"</p><p id="11">"Tôi nhớ. Và tôi tin là mình đã thực hiện nó một cách khá tận tâm."</p><p id="12">Seraphina bật ra một tiếng cười khô khốc trước câu trả lời của tôi. Tiếng cười ấy chẳng hề mang lại cảm giác dễ chịu.</p><p id="13">"Việc chẳng có lấy một lời tốt đẹp nào về anh thốt ra từ miệng những người xung quanh, tôi đã dần chấp nhận điều đó rồi. Danh tiếng của anh thối nát như vậy thì biết làm sao được? Nhưng Lavin à, có những người đã chết! Mọi người ai cũng nói. Những kẻ điên, những kẻ thờ phụng quỷ dữ đều đã bị bắt, nhưng chỉ có anh, chỉ có anh, tên công tử bột nhà Edelgard cao ngạo, là không phải chịu bất cứ hình phạt nào!"</p><p id="14">"Mọi người? Ai cơ? Chính xác thì mọi người nào đang nói thế?"</p><p id="15">Seraphina không thể trả lời câu hỏi của tôi. Bởi vì ngay cả với cô ta, "mọi người" cũng chỉ là những mảnh ghép của một lời đồn thổi không căn cứ.</p><p id="16">Chính xác thì đám đông vô danh mang tên 'mọi người' đó là ai? Họ sống ở đâu, mặt mũi họ ra sao?</p><p id="17">Tôi chưa từng gặp họ lấy một lần.</p><p id="18">Có lẽ tôi vẫn thấy họ mỗi ngày. Nhưng sự thật rằng họ đều là những người lạ tôi chưa từng quen biết bao giờ thì vẫn chẳng có gì thay đổi.</p><p id="19">"......."</p><p id="20">"Seraphina, cô vốn chẳng có ý định tin bất cứ điều gì tôi nói, đúng không? Ngay từ đầu đã vậy rồi."</p><p id="21">Vừa dứt lời, khóe mắt Seraphina vốn đang nhìn chằm chằm vào tôi bỗng đỏ rực lên. Giọng nói bình tĩnh mà cô ta cố gắng duy trì bắt đầu run rẩy không kiểm soát.</p><p id="22">"Bởi vì anh lúc nào cũng vậy! Lúc nào cũng thốt ra những lời nói dối trơn tru chỉ để lấp liếm cho xong chuyện! Lần này chắc cũng thế thôi! Tôi không muốn nghe nữa, anh chắc lại muốn tôi ngu ngốc tin lời anh rồi lại mắc bẫy thêm lần nữa chứ gì!"</p><p id="23">Cơ thể cô ta run rẩy kịch liệt.</p><p id="24">"Nếu lần này tôi cứ thế bỏ qua, tự nhủ rằng 'không sao đâu', 'chẳng có gì đâu', hay 'anh chỉ gặp xui xẻo thôi', thì anh sẽ lại chứng nào tật nấy, đi làm những chuyện điên rồ đó một lần nữa! Rồi anh lại tìm đến tôi, xin lỗi và hứa sẽ không bao giờ tái phạm! Rồi anh sẽ ném cho tôi một món quà nào đó mà anh vớ được ở đâu không biết, đối xử với tôi như một hạng đàn bà dễ dãi, chỉ cần dỗ ngọt là sẽ vui ngay! Anh nghĩ chúng ta đã lặp đi lặp lại cái màn kịch mệt mỏi và ghê tởm này trong bao nhiêu năm rồi hả?!"</p><p id="25">"Ít nhất thì dạo gần đây tôi đã không còn như vậy nữa."</p><p id="26">Một sự mệt mỏi dữ dội xâm chiếm lấy tôi. Tôi áp chặt lòng bàn tay vào mắt, rồi thả mình rơi xuống chiếc sofa đang kêu cọt kẹt.</p><p id="27">Và rồi, lần đầu tiên khi ở riêng với Seraphina, tôi ngậm một điếu thuốc và tìm bao diêm.</p><p id="28">Đó là một hành động mà 'Lavin' sẽ không bao giờ làm, dù bản thân tôi chẳng mấy bận tâm đến những quy tắc đó. Bởi vì hắn luôn muốn mình xuất hiện thật hoàn hảo, ít nhất là trước mặt cô ta.</p><p id="29">Chính qua những hành động nhỏ nhặt này mà tôi thường phân biệt giữa mình và Lavin.</p><p id="30">Bởi vì tất cả những gì tôi muốn là được trở về. Bởi vì tôi chỉ luôn khao khát phần thưởng là được quay lại nơi mình thuộc về.</p><p id="31">Tiếng 'quẹt' lửa cắt ngang giọng nói đang kích động của cô ta.</p><p id="32">"Phải, dạo này không còn như vậy nữa. Thật là một bước tiến vĩ đại. Vậy sao anh không giữ lấy nó? Tại sao mọi chuyện lại nát bét đâu vào đấy một lần nữa hả?!"</p><p id="33">Cô ta nhặt bức thư cháy dở tôi viết bị rơi dưới sàn và ném thẳng vào mặt tôi. Tờ giấy phất phơ yếu ớt, sượt qua má tôi rồi rơi xuống đất.</p><p id="34">Nó không đau, nhưng bằng cách nào đó, tôi cảm thấy như vừa bị một nhát dao cứa qua.</p><p id="35">"Cái bức thư rẻ tiền này! Anh nghĩ điều gì sẽ thay đổi chỉ vì anh đột nhiên bắt đầu viết và gửi chúng mỗi ngày trong suốt ba năm qua sao? Gần đây, chỉ trong một khoảnh khắc rất ngắn ngủi, tôi đã thực sự nghĩ rằng anh có lẽ đã thay đổi một chút! Nhưng anh vẫn như vậy, chẳng có gì, chẳng thay đổi một chút nào cả!"</p><p id="36">Giọng cô ta cuối cùng cũng vỡ òa thành tiếng gào khóc. Âm thanh ấy vang vọng trống rỗng, dội lại từ những bức tường của căn phòng trơ trọi.</p><p id="37">"Cô kỳ vọng điều gì sẽ thay đổi?"</p><p id="38">Tôi hỏi, nhìn xuống bức thư nhuốm màu tro.</p><p id="39">"Sống cho ra một con người! Ít nhất, hãy trở lại làm chàng trai mà tôi từng biết!"</p><p id="40">"Lavin mà cô từng biết?"</p><p id="41">Tôi bật cười cay đắng. Lavin và tôi thực chất có thể là cùng một người.</p><p id="42">Thói quen, suy nghĩ, ký ức, thậm chí cả việc khao khát cảm xúc và tình yêu đều giống nhau, nên coi chúng tôi là hai người khác nhau mới là điều kỳ lạ. Chỉ có cảm giác mong muốn trở về luôn âm ỉ sâu trong lòng là thứ phân biệt giữa 'Lavin' và tôi.</p><p id="43">Đó là lý do tại sao tôi vẫn không muốn nghĩ rằng chúng tôi là một.</p><p id="44">"Lavin đó là ai? Đứa bé bảy tuổi đã leo cây cùng cô, rồi sợ hãi không dám tự xuống nên cứ bám lấy váy cô mà khóc nhè? Hay là gã ngốc mười tuổi, khi nghe nói cô thích hoa tử đinh hương, đã lục tung cả vườn của gia tộc để rồi bị cha mẹ đánh cho thừa sống thiếu chết? Đó là Lavin mà cô biết sao?"</p><p id="45">Có ai đó đi ngang qua cửa sổ có thể đã dừng lại và nhìn về phía này. Hoặc, họ có thể chỉ phớt lờ và đi tiếp. Dù sao thì, điều đó cũng chẳng quan trọng.</p><p id="46">"Hắn đã chết từ lâu rồi."</p><p id="47">Đôi khi tôi tự giễu bản thân rằng mình đã đánh cắp cơ thể này. Thật ra, thay vì đánh cắp một cơ thể, có lẽ tôi chỉ đơn giản là nhặt được một cái xác đã chết từ lâu.</p><p id="48">Tâm trí Lavin vốn đã không bình thường. Đến mức nó khiến cho tâm trí vốn dĩ tỉnh táo của tôi cũng trở nên thật kỳ lạ.</p><p id="49">Seraphina nhìn quanh căn phòng. Ánh mắt cô ta quét qua những món đồ nội thất phủ đầy bụi, những chai rượu lăn lóc trên sàn, và ngọn núi tàn thuốc chất đống trong gạt tàn. Trong ánh mắt vốn tràn ngập sự khinh bỉ và giận dữ ấy, một sự cam chịu lạnh lẽo bắt đầu trào dâng.</p><p id="50">"Làm sao mà chúng ta lại thành ra thế này?" cô ta lẩm bẩm.</p><p id="51">Cô ta nói như thể đang tự hỏi chính mình.</p><p id="52">"À thì. Có lẽ mọi chuyện ngay từ đầu đã luôn là như thế rồi."</p><p id="53">Tôi đáp lại một cách thờ ơ.</p><p id="54">"Cô chỉ là đang cố gắng hết sức để phớt lờ nó đi thôi."</p><p id="55">"Phớt lờ?"</p><p id="56">Cô ta cười nhạt.</p><p id="57">"Anh, anh thực sự không cảm thấy gì sao? Về việc chúng ta hủy hôn? Về mối nghiệp duyên kéo dài hơn mười năm của chúng ta kết thúc như thế này?"</p><p id="58">"Bởi vì cô chưa bao giờ thật sự lắng nghe tôi. Seraphina, ở trước mặt cô, tôi cảm thấy mình thật thảm hại."</p><p id="59">Cô ta định mở miệng mắng nhiếc, nhưng thay vì cơn thịnh nộ, một tiếng rên rỉ đau đớn thoát ra.</p><p id="60">"Bởi vì ở trước mặt cô, tôi luôn phải là một kẻ nói dối, một con sâu bọ ghê tởm, một thằng cặn bã nhà Edelgard. Cô đâu có tin tôi? 'Ai cũng nói thế', 'người ta bảo là', 'mấy đứa vô danh nào đó nói này nói nọ'. Chính cô cũng đối xử với tôi như vậy. Cô đã tự kết luận rằng dù tôi có làm gì đi nữa, cuối cùng tôi vẫn chỉ là một đống chất thải."</p><p id="61">Cô ta vật lộn để kìm nén cảm xúc.</p><p id="62">"Phải, đúng thế! Tôi không tin anh! Làm sao tôi có thể tin được? Anh đã bao giờ cho tôi thấy điều gì đáng để tôi tin chưa?! Lúc nào cũng gây chuyện, nói dối, rồi bỏ chạy! Đó là tất cả những gì anh từng cho tôi thấy, vậy thì rốt cuộc anh bảo tôi phải tin vào cái gì đây?!"</p><p id="63">Nhưng cảm xúc, dù có cố kìm nén đến đâu, cũng luôn có xu hướng bùng nổ.</p><p id="64">"Cuộc đời tôi dính líu đến anh, từng giây, từng phút, từng khoảnh khắc, đều thật kinh tởm, Lavin. Anh có hiểu điều đó không? Anh thì cứ việc sống cho bản thân như một con sâu bọ, nhưng tôi thì không thể. Tôi phải mang cái mác hôn thê của anh, phải mỉm cười trước mặt mọi người và giả vờ như không có chuyện gì xảy ra!"</p><p id="65">Seraphina đi đi lại lại trong phòng một cách bất an. Tiếng gót giày nện xuống sàn gỗ cũ kỹ vang lên chát chúa, cào xé dây thần kinh của tôi.</p><p id="66">"Anh có biết người ta xì xào gì sau lưng tôi không? 'Tiểu thư Seraphina thật bất hạnh khi phải đính hôn với hạng người đó.', 'Nghe nói tên cặn bã nhà Edelgard lại gây chuyện à? Hôn thê của hắn đã làm gì nên tội mà phải chịu khổ thế này?' Sự thương hại, sự giễu cợt, những ánh mắt tò mò nhắm vào vị hôn thê của một tên khốn! Tôi đã sống đến tận bây giờ như một cái bóng cho mọi lỗi lầm anh gây ra, giải thích cho anh, bào chữa cho anh, và đứng về phía anh trước mặt người khác!"</p><p id="67">Seraphina nói một cách bi tráng , bắt chước giọng điệu của 'mọi người', rồi bật khóc. Cô ta vừa thở dốc vừa nói, không dừng lại cho đến tận câu cuối cùng.</p><p id="68">Như thể cô ta đang hóa thân vào một nữ chính bi kịch vậy.</p><p id="69">"Vậy là, đó là lỗi của tôi?"</p><p id="70">"Thế thì là lỗi của ai?! Tôi có lẻn vào thư viện cấm và thả quái vật ra không? Tôi có gây gổ với bạn học rồi làm loạn cả cuộc đấu kiếm lên không?! Tôi chỉ đơn giản là, vì là hôn thê của anh, nên phải thay mặt anh xin lỗi khi anh gây chuyện, phải đi tìm anh khi anh biến mất, và phải giả vờ như không biết gì, hoặc nói dối để bảo vệ anh khi người ta hỏi về anh!"</p><p id="71">Thì ra, mọi chuyện cũng chẳng khác biệt là bao. Bởi vì người trong miệng cô ta là một gã phản diện. Và có lẽ gã phản diện ấy chỉ là một kẻ ngốc bị đổ oan cho những việc hắn không làm, rồi im lặng chịu đựng.</p><p id="72">"Và nếu tôi cưới anh, tôi sẽ phải làm điều đó suốt đời, cho đến khi chết mới thôi."</p><p id="73">Cô ta nói trong hơi thở đứt quãng, nhưng vẫn nhất quyết nói cho hết lời.</p><p id="74">Tôi im lặng nhìn cô ta. Làn khói thuốc làm mờ đi tầm mắt tôi.</p><p id="75">"Tôi còn phải thốt ra cái thứ rác rưởi như 'Lavin vốn dĩ không phải người như thế' bao nhiêu lần nữa đây, khi mà ngay cả chính tôi cũng không còn tin vào điều đó nữa?!"</p><p id="76">Tôi đã từng yêu cô ta chưa? Hay cô ta từng yêu tôi?</p><p id="77">"Tôi chưa bao giờ yêu cầu cô phải làm thế."</p><p id="78">"...Cái gì?"</p><p id="79">Tôi nói, phả ra một làn khói dài. Khuôn mặt cô ta co rúm lại như bị tổn thương.</p><p id="80">Ít nhất thì 'Lavin' đã từng yêu Seraphina hơn bất cứ ai. Ngay cả tôi, người thừa kế trọn vẹn những ký ức đó, cũng đã từng tin rằng mình thực sự phải lòng cô ta khi chúng tôi gặp lại nhau lần đầu.</p><p id="81">Mỗi khi những lời nói như thế này lướt qua tai, lồng ngực tôi như muốn nổ tung. Đó là cảm giác trước khi tôi nhận được thông báo hủy hôn, bị đuổi khỏi gia tộc và bị tống khứ khỏi học viện.</p><p id="82">Tuy nhiên, những điều đó giờ chẳng còn quan trọng nữa. Ít nhất là vào lúc này. Bởi vì mối quan hệ của chúng tôi không phải là tình yêu, mà giống như một con nợ tồi tệ và một chủ nợ bất hạnh vậy.</p><p id="83">"Giờ đây, cái sự thật mệt mỏi rằng chúng ta là bạn thuở nhỏ! Cái ký ức về việc ngày xưa, khi tôi còn rất nhỏ, đã từng thích anh mà chẳng vì lý do gì! Toàn bộ thực tại được đính hôn với anh này, nó thật kinh tởm đến mức khiến tôi phát điên mất!"</p><p id="84">Seraphina trừng mắt nhìn tôi, thở dốc. Một giọt nước mắt vạch một đường dài trên má cô ta rồi rơi xuống.</p><p id="85">Giọt nước mắt ấy chảy xuống, đọng lại nơi cằm, rồi nhỏ xuống sàn gỗ.</p><p id="86">Giờ đây, ngay cả khi nghe những lời này, tôi không còn cảm thấy trống rỗng hay oan ức nữa. Tôi thở dài một hơi dài và dụi điếu thuốc đang cháy vào gạt tàn.</p><p id="87">"Nếu cô đã nói xong những gì mình muốn nói, thì mời đi khỏi, Seraphina."</p><p id="88">Dù tôi có nói gì, nó cũng chẳng lọt nổi vào tai cô ta. Tôi thậm chí không còn hơi sức đâu để tranh cãi, để lôi những ký ức của 'Lavin' ra như lần trước, để đào bới và giày xéo những câu chuyện cũ kỹ đã phai màu và rách nát của chúng tôi.</p><p id="89">Suy cho cùng, trên đời này chẳng mấy ai thấy thú vị khi phải đào một cái xác lên từ nấm mồ rồi lại dùng dao xẻ thịt nó một lần nữa.</p><p id="90">"Anh vừa nói gì cơ?"</p><p id="91">"Tôi bảo cô về đi. Tôi mệt rồi."</p><p id="92">Trước câu trả lời của tôi, Seraphina dường như đứng hình trong giây lát, đôi môi chỉ biết hé mở. Trong đôi mắt run rẩy của cô ta, sự bối rối, một cơn giận dữ lớn hơn, và cả một nỗi đau rất mờ nhạt thoáng qua trong tích tắc.</p><p id="93">"Nên là, đi ngay đi. Đi và làm bất cứ điều gì cô muốn. Hủy hôn đi, hoặc đi gặp người đàn ông khác. Chuyện đó chẳng còn liên quan gì đến tôi nữa."</p><p id="94">Cô ta chắc hẳn đã mong đợi tôi sẽ níu kéo, hoặc nổi giận, hoặc ít nhất là đưa ra một lời bào chữa thảm hại nào đó.</p><p id="95">Và thực tế là tôi đã từng làm thế. Chúng tôi đã từng cùng nhau nổi điên một cách dữ dội.</p><p id="96">Chúng tôi đã nói năng không kiêng dè, nói cả những điều nên và không nên nói, giày xéo vào những chỗ đau đớn nhất của nhau, thốt ra những lời lẽ đáng lẽ không bao giờ được thốt ra.</p><p id="97">"Anh... anh thực sự..."</p><p id="98">Cuối cùng cô ta không thể nói tiếp được nữa, chỉ biết nhìn tôi trân trân. Seraphina, với đôi mắt như bị mê hoặc, khẽ mở miệng.</p><p id="99">"Mỗi sáng sau khi mở mắt, tôi đều ước rằng anh chết quách đi cho rồi."</p><p id="100">"......."</p><p id="101">"Mỗi đêm trước khi chìm vào giấc ngủ, tôi đều cầu nguyện rằng anh sẽ biến mất khỏi thế gian này, để tôi có thể hoàn toàn xóa sạch anh, cái vết nhơ, cái sai lầm khủng khiếp này khỏi cuộc đời tôi."</p><p id="102">Khoảnh khắc thốt ra những lời đó, chính cô ta cũng dường như giật mình, nín thở. Seraphina nhìn tôi trân trân, rồi quay lưng bỏ chạy, mở cửa bước thẳng ra ngoài.</p><p id="103">Tiếng cửa đóng sầm lại vang lên nặng nề trong phòng. Trong một khoảnh khắc, tôi lắng nghe dư âm còn sót lại của câu nói đó, ngồi im lìm, lún sâu vào chiếc sofa.</p><p id="104">Lời nói của Seraphina chưa bao giờ sai. Bởi vì chính tôi cũng đã từng ước mình chết đi. Và dù tôi đã chết thật, tôi vẫn thất bại một cách thảm hại.</p><p id="105">Tôi đứng dậy khỏi ghế và tiến về phía cửa sổ mà cô ta vừa mở toang. Cơn gió chiều lạnh buốt lướt qua gò má tôi—thứ đang thấm đẫm mồ hôi, mùi rượu và khói thuốc.</p><p id="106">Bên ngoài cửa sổ, khung cảnh yên bình và tẻ nhạt của học viện trải ra như một bức tranh. Những học sinh đang cười đùa trò chuyện khi đi ngang qua, thảm cỏ xanh đung đưa trong gió, những tháp cao xa xa của thư viện.</p><p id="107">Mọi thứ yên bình đến mức cảm giác thật giả tạo. Ít nhất, đó không phải là thực tại dành cho tôi.</p><p id="108">Nơi Seraphina vừa đứng, mảnh thư cháy dở và bám đầy muội than mà cô ta ném cuối cùng nằm trên sàn gỗ cũ kỹ như một chiếc lá rụng.</p><p id="109">Tôi chậm rãi bước tới, cúi xuống nhặt nó lên. Từ những mép giấy bị sém đen, mùi hương thoang thoảng của hoa tử đinh hương mà cô ta thích quyện với mùi thuốc lá khó chịu của tôi.</p><p id="110">Tôi nhét mảnh giấy đó vào túi mà không suy nghĩ gì thêm.</p><p id="111">Và rồi tôi mở ngăn kéo, nhìn chằm chằm vào khẩu súng ổ quay một hồi lâu, rồi lại đóng ngăn kéo lại.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24846-ket-cuc-cua-phan-dien/c299558-chuong-002-phat-sung-dau-tien-2" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24846-ket-cuc-cua-phan-dien" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24846-ket-cuc-cua-phan-dien" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'WXusyv1cIOjuFKT6HwyJRFufHEuSc0BAtllsIBto';
        var comment_type = 'chapter';
        var comment_typeid = '299564';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'WXusyv1cIOjuFKT6HwyJRFufHEuSc0BAtllsIBto';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24846');
    chapter_id = parseInt('299564');

    readingObject = {
        series_id: series_id,
        series_title: 'Kết cục của Phản diện',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="WXusyv1cIOjuFKT6HwyJRFufHEuSc0BAtllsIBto" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c613999896a963f',t:'MTc2OTc3ODc4OQ=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
