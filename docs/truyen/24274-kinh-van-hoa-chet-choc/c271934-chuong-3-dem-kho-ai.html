<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Kính Vạn Hoa Chết Chóc - Chương 3: Đêm Khổ Ải - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Câu chuyện bắt đầu khi Lâm Thu Thạch, một chàng trai bình thường, bỗng nhiên phát hiện ra những sự thay đổi kỳ lạ trong ngôi nhà của mình. Một ngày nọ, anh đẩy cánh cửa hành lang ra và thay vì nhìn thấy khung cảnh quen thuộc, anh lại...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="drdOEnXQFYSQl1Vdu6XeHE9zNF2ml8LAMhd6iwZh">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24274-kinh-van-hoa-chet-choc/c271934-chuong-3-dem-kho-ai">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24274-828e91fc-cc86-48ad-9b5b-f192b8075832.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24274-kinh-van-hoa-chet-choc/c271892-chuong-2-cua-sat-va-chia-khoa"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24274-kinh-van-hoa-chet-choc"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24274-kinh-van-hoa-chet-choc/c271934-chuong-3-dem-kho-ai" style="background: url('https://i.hako.vn/ln/series/covers/s24274-828e91fc-cc86-48ad-9b5b-f192b8075832.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24274-kinh-van-hoa-chet-choc">Kính Vạn Hoa Chết Chóc</a></h5>
                    <small><i class="fas fa-pen"></i>Tây Tử Tự (Xi Zichu).</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24274-kinh-van-hoa-chet-choc/t34987-tap-01">Tập 01</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24274-kinh-van-hoa-chet-choc/c271891-chuong-1-lan-dau-vao-cua">
                                                                        Chương 1: Lần Đầu Vào Cửa
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24274-kinh-van-hoa-chet-choc/c271892-chuong-2-cua-sat-va-chia-khoa">
                                                                        Chương 2: Cửa Sắt Và Chìa Khóa
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24274-kinh-van-hoa-chet-choc/c271934-chuong-3-dem-kho-ai">
                                                                        Chương 3: Đêm Khổ Ải
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 01</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 3: Đêm Khổ Ải</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24274-kinh-van-hoa-chet-choc/c271934-chuong-3-dem-kho-ai#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 4,350 từ - Cập nhật: 
                        <time class="topic-time timeago" title="10-12-2025 21:44:10" datetime="2025-12-10T21:44:10+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 3: Đêm Khổ Ải</p>
                    <p id="1">Đạp gió tuyết đi qua chặng đường dài, bốn người cũng may mắn không gặp phải sự kiện kỳ quái nào trên đường, thuận lợi trở về chỗ ở.</p><p id="2">Nhưng vừa về đến nơi, họ đã cảm thấy bầu không khí trong nhà dường như không đúng lắm. Mấy người kia mặt mày trắng bệch ngồi trong phòng khách không nhúc nhích, không khí chết chóc bao trùm, bầu không khí này còn tệ hơn cả lúc mọi người mới đến đây.</p><p id="3">Ánh mắt Lâm Thu Thạch lướt qua mấy người đó, nhanh chóng kiểm lại quân số, sau khi xác định người không thiếu mới khẽ thở phào nhẹ nhõm.</p><p id="4">"Xảy ra chuyện gì rồi?" Hắc Hùng lên tiếng hỏi.</p><p id="5">Một người đàn ông đang ngồi run rẩy nói: "Trên lầu, cái xác trên lầu biến mất rồi."</p><p id="6">"Chỉ là xác chết biến mất thôi sao?" Hắc Hùng nói, "Các người là người mới à, xác chết biến mất thì có gì đáng sợ."</p><p id="7">"Bị ăn mất rồi." Cô gái bên cạnh nức nở, nước mắt chảy ròng ròng, "Khắp nơi toàn là máu..."</p><p id="8">Hắc Hùng và Tiểu Kha nhìn nhau, biết là không thể moi được thông tin hữu ích gì từ miệng những người này, thế là bốn người quyết định lên tầng ba xem tình hình.</p><p id="9">Họ men theo cầu thang đi lên, đến tầng hai, Lâm Thu Thạch nhận ra điều bất thường: trên tường tầng hai cũng có vết máu.</p><p id="10">Vì là nhà gỗ nên tường cũng có màu nâu sẫm của gỗ, Lâm Thu Thạch nhìn thấy trên tường bám những đốm đen lấm tấm, trông như có thứ gì đó bắn tung tóe lên.</p><p id="11">"Cẩn thận chút, bên trên có thể có thứ gì đó." Hắc Hùng đi đầu tiên.</p><p id="12">Cuối cùng cũng lên đến tầng ba, Lâm Thu Thạch rốt cuộc cũng hiểu cụm từ "bị ăn mất" trong miệng họ có nghĩa là gì.</p><p id="13">Nơi vốn dĩ đặt thi thể giờ trống không, nếu chỉ như vậy thì thôi đi, nhưng thi thể mất rồi lại xuất hiện thêm chút đồ vật khác. Chỉ thấy đầy đất toàn là vụn thịt và xương, giống như thi thể bị thứ gì đó hung tàn xé xác, gặm nhấm nát bấy, chỉ còn lại những mảnh vụn vỡ nát.</p><p id="14">Lâm Thu Thạch nhìn thấy cảnh tượng này mặt mày trắng bệch, cảm giác dạ dày cuộn lên khó chịu.</p><p id="15">"Ăn sạch sẽ thật đấy." Tiểu Kha ngược lại đã quen rồi, "Không biết rốt cuộc là thứ gì."</p><p id="16">"Haiz." Hắc Hùng thở dài, "Đi thôi, khóa tầng ba lại, hôm nay đều ở tầng hai hết."</p><p id="17">"Ừ." Tiểu Kha nói, "Tôi đi hỏi xem tình hình cụ thể của họ thế nào."</p><p id="18">Họ quay lại tầng một, lại hỏi kỹ càng xem rốt cuộc đã xảy ra chuyện gì.</p><p id="19">Người dưới lầu lúc này mới kể lại chuyện trong nhà cho họ nghe.</p><p id="20">Hóa ra sau khi nhóm Hắc Hùng đi, đám người còn lại đã lục soát trong tòa nhà một lượt, kết quả khi lục soát đến tầng hai, họ nghe thấy tầng ba truyền đến âm thanh vô cùng kỳ quái. Giống như có người đang nhai thứ gì đó, kèm theo tiếng nuốt ừng ực ngấu nghiến.</p><p id="21">Sau đó mọi người đếm lại quân số, xác định trên tầng ba không có người của mình, lúc này mới bắt đầu toát mồ hôi lạnh.</p><p id="22">Mọi người không dám lên xem, cứng đờ người ở tầng hai quan sát tình hình, đợi đến khi tiếng nhai biến mất, họ mới lấy hết can đảm lên tầng ba xem thử nhưng chỉ nhìn thấy đầy đất toàn thịt vụn và xương.</p><p id="23">"Đáng sợ quá." Một cô gái lớn tuổi khác trong nhóm thần sắc đã hơi đờ đẫn, cô ta nói: "Tôi mới là lần thứ ba vào cửa, sao lại gặp phải thế giới như thế này chứ, chúng ta có thể sống sót ra ngoài không? Thứ đó rốt cuộc là cái gì..."</p><p id="24">Không ai có thể trả lời câu hỏi của cô ta, trong phòng im lặng như tờ.</p><p id="25">Hắc Hùng khẽ thở dài, nói mình đói rồi, muốn đi tìm chút đồ ăn, hỏi có ai đi cùng anh ta vào bếp không.</p><p id="26">Lâm Thu Thạch nói: "Tôi đi với anh."</p><p id="27">Nguyễn Bạch Khiết ngồi cạnh Lâm Thu Thạch, giọng nhỏ nhẹ nói: "Thu Thạch, tôi cũng đói, tôi muốn ăn mì."</p><p id="28">Lâm Thu Thạch: "Để tôi xem có không, có thì nấu cho cô một bát."</p><p id="29">"Được." Nguyễn Bạch Khiết cong mắt cười, dịu dàng nhìn Lâm Thu Thạch, "Chú ý an toàn nhé."</p><p id="30">Lâm Thu Thạch gật đầu.</p><p id="31">Nhà bếp ở bên trái phòng khách, ở đây không có bếp ga, chỉ có bếp củi nguyên thủy nhất.</p><p id="32">Hắc Hùng và Lâm Thu Thạch suốt dọc đường đều không nói gì mấy, mãi đến khi vào bếp, Hắc Hùng cúi đầu nhóm lửa xong mới nói một câu: "Tôi không định kể hết mọi chuyện cho bọn họ."</p><p id="33">"Ý anh là sao?" Lâm Thu Thạch ngẩn ra một chút.</p><p id="34">Hắc Hùng im lặng nhìn ra cửa, xác định bên ngoài không có ai mới nhỏ giọng nói: "Tôi không chắc chắn trong nhóm chúng ta đều là người."</p><p id="35">Lưng Lâm Thu Thạch vì câu nói này mà nổi một tầng da gà.</p><p id="36">"Chuyện như vậy trước đây từng xảy ra rồi." Hắc Hùng nói, "Người chúng ta tưởng là đồng đội thực ra không phải đồng đội, mà là những thứ đó."</p><p id="37">Lâm Thu Thạch nói: "Vậy tại sao anh lại tin tôi? Nhỡ tôi cũng là những thứ đó thì sao?"</p><p id="38">Hắc Hùng liếc nhìn cậu: "Cậu không giống."</p><p id="39">Lâm Thu Thạch: "..."</p><p id="40">Hắc Hùng tiếp tục nói: "Hơn nữa bọn họ hoàn toàn không giống người đã trải qua chuyện này vài lần, đều quá hoảng loạn, còn hoảng hơn cả cậu."</p><p id="41">Lâm Thu Thạch được khen như vậy có chút ngại ngùng: "Thực ra tôi cũng sợ lắm."</p><p id="42">Hắc Hùng nghe vậy cười tự giễu: "Cậu thế này mà gọi là sợ gì, đêm đầu tiên tôi vào cửa đã tè ra quần ba lần đấy."</p><p id="43">Lâm Thu Thạch nhớ đến người phụ nữ kinh dị đêm qua, im lặng nhìn xuống đũng quần mình, thầm nghĩ may mà mình còn giữ được...</p><p id="44">Hắc Hùng: "Tôi khuyên cậu tốt nhất cũng nên giữ lại một số manh mối, đừng nói hết ra."</p><p id="45">Lâm Thu Thạch gật đầu: "Tôi biết rồi, cảm ơn anh đã nhắc nhở, có thể hỏi anh đã vào đây mấy lần rồi không?"</p><p id="46">Hắc Hùng: "Sáu lần rồi."</p><p id="47">"Ồ..." Lâm Thu Thạch cố gắng tiêu hóa thông tin Hắc Hùng đưa cho, về Cửa, về đội ngũ, và cả một số manh mối ẩn giấu.</p><p id="48">"Cậu nghĩ nhiều cũng vô dụng thôi, cố gắng sống sót ra ngoài." Hắc Hùng cười tự giễu, "Mặc dù tôi thấy thế giới này nguy rồi."</p><p id="49">Lửa trong bếp lò đã được nhóm lên, nước trong nồi sắt sôi sùng sục.</p><p id="50">Lâm Thu Thạch tìm thấy một cái giỏ đựng thực phẩm bên cạnh, bên trong có mì, có trứng gà, thậm chí còn có một ít rau xanh. Cậu thả mì vào, lại rán thêm quả trứng, mùi thơm của thức ăn lan tỏa trong bếp, xua tan đi nỗi sợ hãi âm u lạnh lẽo. Hắc Hùng thấy vậy khen một câu: "Tay nghề khá đấy."</p><p id="51">"Cũng tàm tạm thôi." Lâm Thu Thạch cười cười.</p><p id="52">Mì nấu bốn bát, cho Hắc Hùng, Tiểu Kha, Lâm Thu Thạch và Nguyễn Bạch Khiết, những người khác Lâm Thu Thạch không quản được nhiều như thế.</p><p id="53">Nguyễn Bạch Khiết cũng đói rồi, bưng bát lên là bắt đầu ăn mì. Người bình thường ăn mì kiểu gì cũng phát ra chút tiếng động, cô thì lại lặng lẽ ăn sạch sành sanh bát mì, đến nước cũng không còn một giọt. Ăn xong cũng chẳng lên tiếng, quay đầu giương mắt nhìn Lâm Thu Thạch chằm chằm.</p><p id="54">Lâm Thu Thạch bị ánh nhìn nóng rực của cô nhìn đến phát hoảng, bất lực nói: "Cô chưa no à?"</p><p id="55">Nguyễn Bạch Khiết: "No rồi." Lời vừa dứt, bụng cô rất phối hợp kêu lên một tiếng.</p><p id="56">Lâm Thu Thạch: "...Cô ăn đi, tôi đi làm chút món khác."</p><p id="57">Nguyễn Bạch Khiết: "Thôi thôi, không cần đâu."</p><p id="58">Lâm Thu Thạch: "Thật sự không cần?" Cậu làm bộ định tiếp tục ăn, lại thấy tròng mắt Nguyễn Bạch Khiết sắp lồi ra đến nơi rồi, bộ dạng này thực sự quá đáng yêu, khiến Lâm Thu Thạch không nhịn được cười, "Được rồi, cô ăn đi, tôi cũng hòm hòm rồi."</p><p id="59">"Được được được." Lần này Nguyễn Bạch Khiết không khách sáo nữa.</p><p id="60">Hai bát mì vào bụng, cái lạnh buốt vì ra ngoài một chuyến cuối cùng cũng tan biến. Hắc Hùng vừa ăn vừa kể lại thông tin họ lấy được từ chỗ ông già thợ mộc cho mọi người, tất nhiên, anh ta không nói hết, giữ lại manh mối cuối cùng về việc lấp giếng.</p><p id="61">"Liệu chìa khóa có ở trong quan tài không?" Trong nhóm vẫn có người tương đối bình tĩnh, một người đàn ông tên Trương Tử Song nói, "Đã manh mối then chốt là quan tài, thì tôi nghĩ khả năng lớn là như vậy..."</p><p id="62">"Haiz, hy vọng là thế." Hắc Hùng nói, "Tôi dự định sáng mai sẽ cùng lên núi chặt cây, đàn ông đều đi hết, phụ nữ cũng có thể đi theo, ai sợ lạnh quá thì trốn trong nhà, nhưng nếu trong nhà xảy ra chuyện gì thì chúng tôi không giúp được đâu."</p><p id="63">Mọi người thảo luận xong đều đồng ý với đề nghị của Hắc Hùng. Mặc dù có người cảm thấy thời tiết gió tuyết thế này lên núi quá nguy hiểm, nhưng ở thế giới này thứ nguy hiểm nhất thực ra không phải thời tiết, mà là những thứ dơ bẩn thoắt ẩn thoắt hiện kia. Có thể đóng xong quan tài sớm một chút, rời khỏi đây, hiển nhiên mới là thượng sách.</p><p id="64">Cứ lần lữa như vậy, trời lại tối sầm xuống.</p><p id="65">Sau khi màn đêm buông xuống, mọi người rửa mặt qua loa, cũng chẳng còn tâm trí làm việc khác bèn sớm về phòng. Lâm Thu Thạch hỏi tại sao mọi người không thể tụ tập lại một chỗ, Hắc Hùng nói: "Bởi vì tụ tập lại một chỗ sẽ cùng ngủ thiếp đi vào một thời điểm cố định."</p><p id="66">"Nghĩa là sao?" Lâm Thu Thạch hơi ngơ ngác, "Nghĩa là đến giờ thì tất cả mọi người đều sẽ ngủ?"</p><p id="67">"Ừ." Hắc Hùng nói, "Có lẽ là cơ chế của thế giới này, chỉ cần số người trong cùng một phòng vượt quá một con số nhất định, mọi người sẽ ngủ thiếp đi vào thời gian cố định, đến lúc đó dù xảy ra chuyện gì cũng không có cách nào xoay xở."</p><p id="68">"Vậy chẳng phải chúng ta chỉ có thể bó tay chịu trói?" Lâm Thu Thạch cau mày.</p><p id="69">"Thực ra những thứ đó cũng không thể giết người tùy tiện." Hắc Hùng nói, "Bọn chúng giết người cần một số điều kiện nhất định, độ khó của thế giới trong cửa càng cao thì điều kiện càng rộng, hơn nữa có những điều kiện vô cùng... khiến người ta khó hiểu."</p><p id="70">Lâm Thu Thạch: "Ví dụ?"</p><p id="71">Hắc Hùng nói: "Ví dụ như có thể giết người đi giày."</p><p id="72">Lâm Thu Thạch: "..." Cậu lẳng lặng nhìn đôi giày dưới chân mình.</p><p id="73">Hắc Hùng thấy bộ dạng của cậu thì bật cười: "Tôi chỉ lấy ví dụ thôi, nhỡ đâu điều kiện của thế giới này là có thể giết người không đi giày, cậu cởi giày ra lại chết đấy. Huống hồ những điều kiện này không phải đơn lẻ, có cái cần nhiều điều kiện chồng chéo lên nhau, cho nên sau khi tổng kết quy luật, buổi tối ngủ một mạch đến sáng ngược lại là cách làm an toàn hơn." Anh ta nói đến đây thì dừng lại một chút, "Tất nhiên, với điều kiện là cậu phải ngủ được."</p><p id="74">Lâm Thu Thạch vì lời nói của Hắc Hùng mà nhớ lại chuyện đêm qua, cậu liếc nhìn Nguyễn Bạch Khiết đang lơ đãng cắn hạt dưa bên cạnh, cứ cảm thấy đêm qua mình đã lướt qua tử thần.</p><p id="75">Dường như chỉ cần sơ sẩy một chút, mình sẽ biến thành một trong hai cái xác lạnh lẽo trên tầng ba kia.</p><p id="76">"Đi ngủ đi." Hắc Hùng nói, "Chúc ngủ ngon."</p><p id="77">Lâm Thu Thạch gật đầu: "Chúc ngủ ngon." Cậu lại gọi Nguyễn Bạch Khiết một tiếng, bảo cô cùng đi ngủ.</p><p id="78">Nguyễn Bạch Khiết ngáp một cái, thuận tay đặt nắm hạt dưa còn lại lên bàn, dụi mắt làu bàu: "Buồn ngủ quá, hôm nay ngủ sớm nhé."</p><p id="79">Lâm Thu Thạch nói: "Được, ngủ sớm."</p><p id="80">Tầng ba vì chuyện đêm qua nên đã hoàn toàn không thể sử dụng được nữa, thế là tất cả mọi người đều chuyển xuống tầng hai.</p><p id="81">Lâm Thu Thạch vẫn ngủ chung một giường với Nguyễn Bạch Khiết. Lần này cậu đã có chuẩn bị, quyết định khóa chặt cửa sổ trước, định kéo cả rèm cửa lại, nhưng cái rèm này hình như lâu lắm không dùng rồi, kéo mãi không được.</p><p id="82">Nguyễn Bạch Khiết mặc đồ ngủ nằm trong chăn ư ử rên rỉ: "Thu Thạch, lạnh quá à."</p><p id="83">Lâm Thu Thạch vẫn đang nghiên cứu cái rèm cửa, nghe vậy đầu cũng không ngoảnh lại: "Lạnh thì mặc nhiều vào."</p><p id="84">Nguyễn Bạch Khiết: "...Anh chưa có bạn gái đúng không?"</p><p id="85">Lâm Thu Thạch khó hiểu: "Bạn gái, tại sao phải có bạn gái?"</p><p id="86">Nguyễn Bạch Khiết chìm vào im lặng. Đợi đến khi Lâm Thu Thạch kéo rèm xong quay lại thì cô đã nằm đơ ra giường như con cá chết.</p><p id="87">Lâm Thu Thạch vẫn chưa hiểu: "Cô sao thế?"</p><p id="88">Giọng Nguyễn Bạch Khiết nhẹ bẫng, cô nói: "Anh... không có gì muốn nói với tôi à?"</p><p id="89">Lâm Thu Thạch chìm vào trầm tư, cậu nhìn khuôn mặt xinh đẹp của Nguyễn Bạch Khiết, cuối cùng cũng có một ý nghĩ, cậu nói: "Có."</p><p id="90">Nguyễn Bạch Khiết nở nụ cười hài lòng: "Anh muốn nói gì?"</p><p id="91">Lâm Thu Thạch: "Cái đó, chính là... hôm nay nếu bọn mình gặp ma, cô có thể chạy chậm một chút không?"</p><p id="92">Nguyễn Bạch Khiết mặt lạnh tanh: "Không được."</p><p id="93">Lâm Thu Thạch nổi giận: "Thế cô còn hỏi tôi muốn nói gì làm gì, đi ngủ!"</p><p id="94">Thế là ai về nhà nấy, ai chui vào chăn nấy, quay lưng vào nhau bắt đầu chuẩn bị ngủ.</p><p id="95">Vốn dĩ theo lời Hắc Hùng, có thể ngủ yên giấc là tình huống tốt nhất để vượt qua đêm nay, nhưng trong đầu Lâm Thu Thạch toàn là đủ loại suy nghĩ, nhất thời hoàn toàn không thể ngủ được. Nguyễn Bạch Khiết sau lưng cậu thì cứ như heo ấy, nhắm mắt cái là ngủ luôn, chọc cho Lâm Thu Thạch tức ngứa cả răng.</p><p id="96">Đêm càng về khuya, nhiệt độ càng xuống thấp. May mà chăn khá dày, bên cạnh lại có người sống ấm áp nằm cùng nên cũng không quá khó chịu.</p><p id="97">Lâm Thu Thạch nhắm mắt, sắp xếp lại các manh mối ban ngày, ý thức bắt đầu dần mơ hồ, mắt thấy sắp chìm vào giấc ngủ sâu. Tuy nhiên ngay lúc cậu sắp ngủ, lại loáng thoáng nghe thấy một âm thanh hơi kỳ lạ. Khác với tiếng gõ đêm qua, âm thanh này đến từ trần nhà trên đỉnh đầu họ, đó là tiếng một vật gì đó dính nhớp nặng nề đang chậm rãi kéo lê trên trần tầng ba. Thính giác của Lâm Thu Thạch nhạy bén, cơn buồn ngủ ban nãy tan biến ngay lập tức, hơi thở cậu ngưng lại, nhưng vẫn chậm rãi mở mắt ra, nhìn lên trần nhà trên đầu họ.</p><p id="98">Ở đó không có gì cả, chỉ có những thanh gỗ cũ kỹ.</p><p id="99">Thế nhưng cơ thể Lâm Thu Thạch lại bắt đầu lạnh toát, bởi vì cậu nghe thấy rõ ràng, âm thanh đó khi di chuyển đến trên đỉnh đầu cậu thì dừng lại.</p><p id="100">"Bộp, bộp." Tiếng gõ dính nhớp kích thích màng nhĩ cậu, tiếng gõ này càng lúc càng lớn, khiến Lâm Thu Thạch nổi da gà toàn thân, cậu nghiến răng, đang định ngồi dậy khỏi giường thì bên cạnh vươn ra một cánh tay ôm lấy eo cậu.</p><p id="101">"Anh làm gì thế." Là giọng nói mơ màng của Nguyễn Bạch Khiết.</p><p id="102">"Cô có nghe thấy tiếng gì lạ không." Lâm Thu Thạch hạ thấp giọng, "Trên trần nhà ấy."</p><p id="103">"Tiếng động? Tiếng gì cơ." Nguyễn Bạch Khiết nói, "Tôi chẳng nghe thấy gì cả, anh đừng động đậy nữa, tôi lạnh." Hơi thở của cô nhẹ nhàng phả vào bên tai Lâm Thu Thạch, mang theo mùi của băng tuyết.</p><p id="104">"Cô..." Lâm Thu Thạch còn muốn nói gì đó, lại cảm thấy tay Nguyễn Bạch Khiết đang ôm cậu siết chặt hơn một chút.</p><p id="105">"Ngủ đi." Nguyễn Bạch Khiết nói như vậy.</p><p id="106">Lâm Thu Thạch đành phải nhắm mắt lại.</p><p id="107">Nguyễn Bạch Khiết dùng ngón tay chậm rãi móc vào hông Lâm Thu Thạch, động tác vốn dĩ có chút mờ ám này, lúc này lại tràn đầy hương vị an ủi.</p><p id="108">Sáng hôm sau.</p><p id="109">Lâm Thu Thạch tỉnh dậy trong lòng Nguyễn Bạch Khiết.</p><p id="110">Nguyễn Bạch Khiết duỗi cánh tay, ôm trọn cả người cậu vào trong lòng, cằm đặt lên đỉnh đầu cậu. Bị cậu đánh thức, cô vẫn còn mơ màng cọ quậy: "Đừng quấy, ngủ thêm lát nữa."</p><p id="111">Lâm Thu Thạch: "..." Đệt.</p><p id="112">Cậu nằm một lúc, thấy Nguyễn Bạch Khiết vẫn chưa có ý định dậy, đành phải nói: "Tôi phải dậy rồi."</p><p id="113">Nguyễn Bạch Khiết: "Ưm..."</p><p id="114">Lâm Thu Thạch: "Nguyễn Bạch Khiết?"</p><p id="115">Nguyễn Bạch Khiết: "Tối qua gọi người ta là bé cưng, hôm nay đã gọi thẳng tên Nguyễn Bạch Khiết rồi."</p><p id="116">Lâm Thu Thạch: "..."</p><p id="117">Tuy nói vậy nhưng Nguyễn Bạch Khiết vẫn buông tay ra, sau đó dựa vào đầu giường nhìn Lâm Thu Thạch mặc quần áo. Lâm Thu Thạch mặc đồ một lúc cứ cảm thấy bầu không khí hơi kỳ quặc, ngẫm nghĩ một chút rồi quay đầu nhìn Nguyễn Bạch Khiết: "Cô có thể đừng nhìn tôi bằng ánh mắt đó được không?"</p><p id="118">Nguyễn Bạch Khiết: "Ánh mắt gì? Tiền để trên bàn rồi đấy, anh tự cầm lấy mà đi đi. Đưa thuốc lá cho tôi, tôi muốn làm một điếu."</p><p id="119">Lâm Thu Thạch: "..." Đây là điếu thuốc sau khi hành sự hay gì?</p><p id="120">Nguyễn Bạch Khiết: "Sao, còn chưa chịu đi à? Năm trăm là giá chúng ta đã thỏa thuận hôm qua, một xu cũng đừng hòng lấy thêm."</p><p id="121">Lâm Thu Thạch cạn lời, mặc xong quần áo liền đi một mạch xuống lầu.</p><p id="122">Mọi người đã ngồi trong phòng khách, ăn bữa sáng do dân làng mang tới. Lâm Thu Thạch theo lệ thường đếm số người, phát hiện ngoại trừ Nguyễn Bạch Khiết ra thì trong phòng thiếu mất ba người.</p><p id="123">Hắc Hùng nhìn thấy cậu, ra hiệu cho cậu ngồi qua đó.</p><p id="124">"Hôm qua không xảy ra chuyện gì chứ?" Lâm Thu Thạch hỏi.</p><p id="125">"Không." Hắc Hùng nói, "Không chết người."</p><p id="126">Không chết người là tốt rồi, Lâm Thu Thạch thở phào nhẹ nhõm.</p><p id="127">Thực tế thì tối qua cực kỳ yên bình, thậm chí mọi người còn chẳng nghe thấy bất kỳ âm thanh thừa thãi nào. Lâm Thu Thạch ướm hỏi xem họ có nghe thấy động tĩnh gì trên lầu không, câu trả lời của mọi người đều rất thống nhất —— một đêm yên tĩnh, ngoại trừ tiếng gió bên ngoài thì không còn tiếng động nào khác.</p><p id="128">"Ăn cơm xong chúng ta đi chặt cây để đưa gỗ cho thợ mộc, tốc độ phải nhanh lên một chút." Hắc Hùng nói, "Nhìn thời tiết thế này chỉ có ngày càng lạnh hơn thôi, hơn nữa tối hôm qua thế mà lại không xảy ra chuyện gì..." Trong lời nói của anh ta dường như có chút nghi hoặc.</p><p id="129">"Ừ, đúng vậy." Lâm Thu Thạch thuận miệng đáp một câu.</p><p id="130">Ba người còn lại cũng lục đục xuống lầu. Nguyễn Bạch Khiết là người xuống cuối cùng, cô vẫn mặc bộ váy dài xinh đẹp đó, chỉ là bên ngoài khoác thêm hai chiếc áo khoác khá dày, còn tròng thêm một cái quần bông to sụ. Vì váy rất dài nên cô bước đi rất chậm, tư thế cũng vô cùng tao nhã.</p><p id="131">Lâm Thu Thạch thấy cô đến, có chút không tự nhiên dời mắt đi chỗ khác.</p><p id="132">"Thu Thạch." Nguyễn Bạch Khiết gọi tên cậu.</p><p id="133">Lâm Thu Thạch bất lực ừ một tiếng.</p><p id="134">"Sao anh không để ý đến người ta nữa." Nguyễn Bạch Khiết nói, "Người ta muốn ăn mì anh nấu."</p><p id="135">Lâm Thu Thạch: "Trưa làm cho cô, giờ không kịp rồi."</p><p id="136">Nguyễn Bạch Khiết: "Tối qua lúc ở trên giường anh đâu có nói thế."</p><p id="137">Tiểu Kha đang húp cháo, nghe thấy câu này thì "phụt" một tiếng suýt chút nữa sặc chết. Biểu cảm của Hắc Hùng cũng trở nên vi diệu, ánh mắt đầy ẩn ý lượn lờ qua lại giữa Lâm Thu Thạch và Nguyễn Bạch Khiết.</p><p id="138">Lâm Thu Thạch dở khóc dở cười: "Thôi đi, đừng quậy nữa. Tối qua đúng là cảm ơn cô, trưa nay nấu mì cho cô, rán thêm cho cô hai quả trứng."</p><p id="139">"Được thôi." Nguyễn Bạch Khiết thỏa hiệp, "Haiz, giá mà có hành hoa thì tốt biết mấy."</p><p id="140">Trời lạnh thế này, có rau xanh ăn đã là may mắn lắm rồi, còn hành hoa thì đừng có mơ tưởng nữa.</p><p id="141">Mọi người ăn qua loa bữa sáng, lại mặc thêm quần áo chống rét, cả nhóm xách rìu chuẩn bị ra ngoài.</p><p id="142">Nơi chặt cây nằm trong khu rừng bên cạnh làng, chỉ có một con đường nhỏ dẫn đến đó. Vì tuyết rơi nên con đường càng trở nên chật hẹp, chỉ đủ cho một người đi.</p><p id="143">Lên núi thì còn đỡ, lúc xuống núi mà phải kéo theo gỗ thì chắc chắn sẽ phiền phức hơn nhiều, Lâm Thu Thạch đi trên đường thầm nghĩ trong lòng.</p><p id="144">Trong mười một người bọn họ, may mà có người biết làm mộc. Người đó là một gã đàn ông trung niên hơn ba mươi tuổi, tự xưng là thợ mộc, biết chặt cây, cũng biết làm đồ nội thất đơn giản, nhưng mấy thứ như quan tài thì không rành lắm. Gã đi đầu tiên, chọn mấy cái cây rồi bắt đầu dạy mọi người cách chặt.</p><p id="145">Phần lớn mọi người ở đây đều chưa từng làm việc này, tuy có người dạy nhưng lần đầu bắt tay vào làm đều khá lóng ngóng.</p><p id="146">Lâm Thu Thạch cầm rìu ướm thử hai cái, sau nhát chém đầu tiên, chỉ để lại một vết hằn mờ nhạt trên thân cây.</p><p id="147">"Thủ pháp của anh vẫn chưa đúng đâu." Nguyễn Bạch Khiết đứng bên cạnh, đút tay vào túi, hà hơi trắng xóa, "Phải dồn lực xuống dưới, nếu không cái rìu nặng thế này làm sao nhấc nổi."</p><p id="148">Lâm Thu Thạch: "Cô từng chặt cây à?"</p><p id="149">Nguyễn Bạch Khiết: "Tôi từng nhìn người khác chặt cây."</p><p id="150">Lâm Thu Thạch "ồ" một tiếng.</p><p id="151">Nguyễn Bạch Khiết nói: "Cẩn thận một chút nhé, đừng để bị thương."</p><p id="152">Lâm Thu Thạch gật đầu, tiếp tục vung rìu. Việc này phiền phức hơn họ tưởng tượng nhiều, cả buổi sáng mấy người đàn ông to khỏe thay phiên nhau nghỉ ngơi mới chặt đổ được một cái cây.</p><p id="153">"Làm sao đây, anh Hùng." Có người hỏi, "Làm thế nào bây giờ?"</p><p id="154">Hắc Hùng nhìn thời tiết, nghiến răng: "Về thôi, vác cái cây này về, ngày mai lại tiếp tục."</p><p id="155">Tuy mới hơn ba giờ chiều nhưng trời đã tối sầm lại, hơn nữa không trung lại bắt đầu lất phất những bông tuyết lớn, xem ra tối nay có thể sẽ có một trận tuyết lớn.</p><p id="156">Lâm Thu Thạch hỏi: "Một cỗ quan tài cần tổng cộng mấy cây gỗ?"</p><p id="157">"Trưởng thôn nói là ba cây." Hắc Hùng nói, "Cố gắng hai ngày nữa là hòm hòm rồi. Nào, ai qua đây giúp một tay."</p><p id="158">Lâm Thu Thạch đang định bước tới vác cây thì nghe thấy Nguyễn Bạch Khiết buông một câu: "Ui da, hình như tôi bị trẹo chân rồi, Thu Thạch, anh cõng tôi xuống núi đi."</p><p id="159">Lâm Thu Thạch: "Hả?"</p><p id="160">Nguyễn Bạch Khiết: "Hả cái gì mà hả, nhanh lên nào, ở đây chẳng phải có bao nhiêu người sao, anh đi góp vui làm cái gì."</p><p id="161">Lâm Thu Thạch đang định nói, Hắc Hùng đã vỗ vai cậu, bảo: "Đi đi."</p><p id="162">Lâm Thu Thạch: "..."</p><p id="163">Cậu liếc nhìn biểu cảm của Nguyễn Bạch Khiết, không nhìn ra được ẩn ý gì khác từ vẻ mặt đáng thương của cô, nhưng cậu nhạy bén ngửi thấy một chút manh mối. Dường như yêu cầu đột ngột này của Nguyễn Bạch Khiết không đơn giản như tưởng tượng.</p><p id="164"><strong>Tác giả có lời muốn nói:</strong></p><p id="165">Nguyễn Bạch Khiết chính là Công đó hahahaha, cảm giác mọi người đều đoán ra rồi.</p><p id="166">Hôm nay có 100 bao lì xì, ai đến trước được trước nha~</p><p id="167">Nguyễn Bạch Khiết phát động kỹ năng: Oanh kích trường không (Chơi chữ âm "Ying" - tiếng khóc thút thít vang tận trời xanh).</p><p id="168">Lâm Thu Thạch bị tiếng "huhu" bắn trúng, rơi xuống đất bị Nguyễn Bạch Khiết lôi về nhà ăn thịt.</p><p id="169">Tiếng gõ trên trần nhà vẫn tiếp tục, nhưng Lâm Thu Thạch dường như không còn sợ hãi như vừa rồi nữa, cơn buồn ngủ lại bắt đầu nổi lên trong đầu, cậu cuối cùng cũng ngủ thiếp đi.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24274-kinh-van-hoa-chet-choc/c271892-chuong-2-cua-sat-va-chia-khoa" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24274-kinh-van-hoa-chet-choc" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24274-kinh-van-hoa-chet-choc" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'drdOEnXQFYSQl1Vdu6XeHE9zNF2ml8LAMhd6iwZh';
        var comment_type = 'chapter';
        var comment_typeid = '271934';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'drdOEnXQFYSQl1Vdu6XeHE9zNF2ml8LAMhd6iwZh';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24274');
    chapter_id = parseInt('271934');

    readingObject = {
        series_id: series_id,
        series_title: 'Kính Vạn Hoa Chết Chóc',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="drdOEnXQFYSQl1Vdu6XeHE9zNF2ml8LAMhd6iwZh" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script
  type="text/javascript"
  src="//spicewaxworks.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js"
  async
></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
