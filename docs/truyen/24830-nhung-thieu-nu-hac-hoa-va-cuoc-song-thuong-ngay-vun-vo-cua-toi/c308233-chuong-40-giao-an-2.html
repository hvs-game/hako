<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Những Thiếu Nữ Hắc Hóa Và Cuộc Sống Thường Ngày Vụn Vỡ Của Tôi - Chương 40: Giáo án (2) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Lăng Phàm dự định kiếp này sẽ mang theo bộ não thông thái của mình để lặng lẽ làm một kẻ lười biếng vô hại, nhưng liệu mọi chuyện có thực sự dễ dàng như vậy không? Tên gốc của tác phẩm này : Cuộc Sống Vụn Vỡ Dưới Sự...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="EXo0sB6FfZlxianHIMVSSyNkp8lwZ0SadZTstgE0">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308233-chuong-40-giao-an-2">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24830-8be69037-ac10-4657-974c-92c5299ae0bd.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=c044c63e744fb1723a7d067aa1473af1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308225-chuong-39-giao-an-1"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308233-chuong-40-giao-an-2" style="background: url('https://i.hako.vn/ln/series/covers/s24830-8be69037-ac10-4657-974c-92c5299ae0bd.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Những Thiếu Nữ Hắc Hóa Và...</a></h5>
                    <small><i class="fas fa-pen"></i>那盛开的繁华</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Thông báo</a></li>
                                        
                                                            <li class=""><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c298855-bia">Thiết kế nhân vật</a></li>
                                        
                                                            <li class=""><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c298850-chuong-1-khoi-dau">Tập 1: Bình minh</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/t36123-tap-2-binh-yen">Tập 2: Bình yên</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304121-chuong-29-hat-giong-cua-su-u-am">
                                                                        Chương 29: Hạt giống của sự u ám
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304122-chuong-30-lop-nang-cao-khoi-7-1">
                                                                        Chương 30: Lớp nâng cao khối 7 (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304124-chuong-31-lop-nang-cao-khoi-7-2">
                                                                        Chương 31: Lớp nâng cao khối 7 (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304125-chuong-32-lop-nang-cao-khoi-7-3">
                                                                        Chương 32: Lớp nâng cao khối 7 (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304126-chuong-33-lop-nang-cao-khoi-7-4">
                                                                        Chương 33: Lớp nâng cao khối 7 (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304127-chuong-34-lop-nang-cao-khoi-7-5">
                                                                        Chương 34: Lớp nâng cao khối 7 (5)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304129-chuong-35-binh-yen">
                                                                        Chương 35: Bình yên
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c304130-chuong-36-nhiem-vu-moi">
                                                                        Chương 36: Nhiệm vụ mới
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308189-chuong-37-nhiem-vu-moi-2">
                                                                        Chương 37: Nhiệm vụ mới (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308215-chuong-38-nhiem-vu-moi-3">
                                                                        Chương 38: Nhiệm vụ mới (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308225-chuong-39-giao-an-1">
                                                                        Chương 39: Giáo án (1)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308233-chuong-40-giao-an-2">
                                                                        Chương 40: Giáo án (2)
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 3: Dòng chảy ngầm</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 4: Gió nổi</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 5: Mây cuộn</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 6: Trời đổi</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 7: Nanh vuốt lộ diện</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 8: Tan tác</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 9: Vụn vỡ</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Tập 10: Bão tố</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Hồi kết</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Ngoại truyện dài: Tiền kiếp</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Kết cục nhánh (không liên quan tuyến chính)</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi">Khoảnh khắc mộng mơ</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 2: Bình yên</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 40: Giáo án (2)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308233-chuong-40-giao-an-2#chapter-comments" style="text-decoration: underline">3 Bình luận</a> -
                        Độ dài: 1,659 từ - Cập nhật: 
                        <time class="topic-time timeago" title="09-02-2026 20:26:25" datetime="2026-02-09T20:26:25+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 40: Giáo án (2)</p>
                    <p id="1">Sáng sớm tinh mơ, Tiết Linh Vân đã có mặt ở lớp. Cô đặt cặp sách lên chỗ ngồi của mình, sau đó ngồi sang chỗ của Lăng Phàm, chống cằm nhìn ra ngoài cửa sổ.</p><p id="2">Thần sắc cô có chút thẫn thờ, không biết đang suy nghĩ điều gì.</p><p id="3">"Nè, Linh Vân." Liễu Tư Vũ vừa từ bên ngoài về, cầm một cây kẹo mút và một hộp sữa chua cùng loại với loại Lăng Phàm mua hôm qua đưa tới trước mặt Tiết Linh Vân.</p><p id="4">"Tư Vũ, tớ ăn rồi." Tiết Linh Vân tỉnh lại từ cơn ngẩn ngơ, lắc đầu từ chối.</p><p id="5">"Biết cậu ăn rồi, ăn thêm chút nữa đi, cậu phát triển tốt thế này là có một phần công lao của tớ đấy nhé!" Liễu Tư Vũ nói xong nhìn quanh bốn phía, thấy trong lớp không có ai liền lặng lẽ vươn móng vuốt về phía ngực Tiết Linh Vân.</p><p id="6">"Tư Vũ, đây là trong lớp học, đừng có bóp nữa mà!" Tiết Linh Vân vừa mới hoàn hồn, nhất thời chưa kịp phản ứng nên đã bị Liễu Tư Vũ đắc thủ.</p><p id="7">So với Liễu Tư Vũ, Tiết Linh Vân đã thành hình đầy đặn.</p><p id="8">"Hừ! Ai bảo cậu phát triển tốt thế làm gì!" Liễu Tư Vũ nói xong cúi đầu nhìn lại mình.</p><p id="9">..........................</p><p id="10">Bốn chữ: Trước sau như một.</p><p id="11">"Oa, Linh Vân tớ phải làm sao bây giờ!" Liễu Tư Vũ cay sống mũi, theo bản năng ôm chầm lấy cô bạn thân.</p><p id="12">Không có so sánh thì không có đau thương.</p><p id="13">"...Cái này, chắc chắn là do cậu phát triển hơi chậm thôi, đợi lên cấp ba, chắc chắn sẽ nhanh chóng to lên thôi mà." Tiết Linh Vân nhìn vóc dáng nhỏ bé của Liễu Tư Vũ, suy nghĩ kỹ một chút rồi đưa ra một kết luận nghe có vẻ rất có lý.</p><p id="14">"Cậu chắc chắn là đang an ủi tớ." Liễu Tư Vũ vẻ mặt đầy vẻ không tin.</p><p id="15">"Không có đâu, với lại tớ nghe..." Tiết Linh Vân nói đến đây, âm lượng đột nhiên nhỏ đi rất nhiều.</p><p id="16">Ngay sau đó, cô cũng bắt chước Liễu Tư Vũ, nhìn quanh vị trí của các bạn trong lớp, thấy không ai chú ý đến hai người mới nói tiếp.</p><p id="17">"Tớ nghe mẹ tớ nói chuyện với mấy dì khác, bảo là thường xuyên massage sẽ dễ to lên đấy."</p><p id="18">"Còn có chuyện này nữa sao?" Liễu Tư Vũ nghe xong liền tỉnh cả người.</p><p id="19">"Đúng thế, nghe nói kích thích càng lớn thì càng có hiệu quả..." Tiết Linh Vân nói đến đây, mặt đã đỏ lựng đến tận mang tai, không chịu nói tiếp nữa.</p><p id="20">"Cậu nói thế làm tớ muốn thử ghê, hay là hôm nào tớ sang nhà cậu, cậu giúp tớ thử xem?" Liễu Tư Vũ nói một hồi, dường như nghĩ đến hình ảnh gì đó bá đạo, cũng đỏ mặt cúi gằm xuống.</p><p id="21">"...Tư Vũ, thế không hay lắm đâu, chuyện đó... xấu hổ chết đi được." Tiết Linh Vân nghe vậy, đầu lắc như trống bỏi.</p><p id="22">"Có gì đâu mà không hay, cậu giúp tớ đi mà!" Liễu Tư Vũ vừa nói vừa kéo tay Tiết Linh Vân lắc qua lắc lại.</p><p id="23">"Được rồi được rồi Tư Vũ, tớ giúp cậu là được chứ gì." Tiết Linh Vân rõ ràng là hết cách với Liễu Tư Vũ, đành đồng ý đề nghị của cô bạn.</p><p id="24">Ý tưởng này là do cô đưa ra, đương nhiên cũng phải chịu trách nhiệm với bạn thân rồi.</p><p id="25">"Tuyệt quá đi Linh Vân-chan, không hổ là bạn thân của tớ." Liễu Tư Vũ nói xong liền ngồi lên đùi Tiết Linh Vân, ôm lấy cô, vùi đầu vào ngực Tiết Linh Vân.</p><p id="26">"Buồn ngủ quá... cảm giác sắp chết đến nơi rồi." Lúc này Lăng Phàm vừa ngáp vừa bước vào từ cửa lớp, quanh hai mắt xuất hiện quầng thâm nhàn nhạt.</p><p id="27">"Hả? Xin lỗi xin lỗi, làm phiền hai cậu rồi." Lăng Phàm kinh ngạc nhìn Liễu Tư Vũ đang dùng sữa rửa mặt trước mắt, cùng với Tiết Linh Vân mặt đỏ tới tận mang tai, không nhịn được mà dụi dụi mắt, lau sạch nước mắt sinh lý vừa chảy ra do ngáp, rồi nhìn kỹ lại lần nữa.</p><p id="28">Ừm, Lăng Phàm xác nhận bản thân không hề gặp ảo giác do thức đêm.</p><p id="29">Tiết Linh Vân và Liễu Tư Vũ chớp đôi mắt to tròn, nhìn Lăng Phàm với ánh mắt đầy vẻ không thể tin nổi.</p><p id="30">Bởi vì giờ này mới vừa hết giờ đọc bài buổi sáng chưa lâu, ai cũng có thể đến lớp, duy chỉ có Lăng Phàm là không thể.</p><p id="31">Nhưng chính cái người không thể xuất hiện ấy, lại đang lù lù trước mặt các cô.</p><p id="32">"Tiết Linh Vân, tớ để cặp sách lên bàn cậu trước nhé, không ngờ hai cậu lại có quan hệ này, xin lỗi là tại hạ đường đột rồi, hai cậu cứ tiếp tục, tớ ra ngoài hóng gió chút, hóng gió chút, chúng ta cứ coi như chưa có chuyện gì xảy ra nhé." Lăng Phàm đặt cặp lên bàn Tiết Linh Vân xong, giả vờ như không nhìn thấy gì, chuẩn bị rời khỏi lớp.</p><p id="33">Lăng Phàm đêm qua thức trắng cả đêm, cuối cùng cũng mò ra được cách đánh chi tiết từ boss thứ 4 đến boss thứ 8 của Đền Thờ Thất Lạc, vốn định ngủ một giấc thật ngon, nhưng cảnh tượng trước mắt khiến cậu cảm thấy mình nên tránh mặt thì hơn.</p><p id="34">Chuyện này của hai người họ gọi là gì nhỉ, Lăng Phàm bắt đầu nhớ lại mấy cuốn tiểu thuyết thiếu nữ mà thi thoảng mình có xem qua.</p><p id="35">Cậu là người khá tùy hứng, tiểu thuyết thể loại độc lạ nào cũng sẽ ngó qua một chút.</p><p id="36">A, nhớ ra rồi, cái này gọi là Bách hợp.</p><p id="37">Lăng Phàm đấm tay phải vào lòng bàn tay trái, lộ ra vẻ mặt "à thì ra là thế", sau đó không tự chủ được mà giơ ngón cái lên với Liễu Tư Vũ và Tiết Linh Vân.</p><p id="38">Đối với loại dũng khí vượt thoát thế tục này, Lăng Phàm xưa nay đều vô cùng khâm phục.</p><p id="39">Ngay khi Lăng Phàm vừa để cặp xuống, chân vừa nhấc lên định bước đi bước đầu tiên, Liễu Tư Vũ đã buông Tiết Linh Vân ra, kéo lấy Lăng Phàm, chỉ hơi dùng sức một chút đã đẩy ngã Lăng Phàm đang bủn rủn chân tay vì thức đêm xuống ghế của Tiết Linh Vân.</p><p id="40">"Lăng công tử vừa nói cái gì đấy?" Liễu Tư Vũ thuận thế ngồi luôn lên đùi phải của Lăng Phàm, cười hì hì nói.</p><p id="41">"Đúng đấy Lăng Phàm, vừa rồi tớ cứ cảm thấy trong đầu cậu hiện lên rất nhiều thứ linh tinh vớ vẩn đấy nhé, có thể nói ra xem nào, tớ có thể giúp cậu dọn dẹp sạch sẽ mấy thứ không bình thường đó đấy!"</p><p id="42">Vãi chưởng, Tiết Linh Vân cậu muốn phạm tội à? Nhìn cái tư thế kia của cậu, cậu định đánh tớ đến mất trí nhớ luôn hả? Chắc chắn là thế rồi đúng không?!</p><p id="43">Liễu Tư Vũ thì không nói làm gì, vốn dĩ đã là một tiểu ác ma, nhưng ngay cả Tiết Linh Vân ngày thường vô cùng dễ nói chuyện cũng đứng chắn trước mặt Lăng Phàm, hoàn toàn chặn đứng đường lui của cậu.</p><p id="44">Chỗ ngồi của Tiết Linh Vân cũng giống Lăng Phàm, là chỗ ngồi sát tường.</p><p id="45">Lăng Phàm nhìn trận thế trước mắt, cơn buồn ngủ lập tức tan biến đi không ít.</p><p id="46">"A... vừa nãy là tớ chưa tỉnh ngủ, nói mớ thôi, hai vị đại lão cứ coi như chưa nghe thấy gì là được, a ha ha ha ha..." Kẻ thức thời mới là tuấn kiệt, đại trượng phu co được dãn được.</p><p id="47">Tay của Liễu Tư Vũ lúc này đã sờ soạng lên eo Lăng Phàm, dường như đang lựa chọn xem xuống tay chỗ nào thì tốt.</p><p id="48">"Liễu Tư Vũ bình tĩnh chút, tha cho tớ một con đường sống đi, đừng có véo nữa, đau thật đấy." Cảm nhận được động tác tay của Liễu Tư Vũ, sống lưng Lăng Phàm đã toát mồ hôi lạnh, cộng thêm việc thức đêm hôm qua khiến sắc mặt Lăng Phàm trông vô cùng kém, cứ như người bị bệnh vậy.</p><p id="49">"Lăng Phàm cậu bị bệnh à? Sắc mặt trông kém thế." Tiết Linh Vân rất nhanh đã chú ý thấy sắc mặt Lăng Phàm không ổn lắm.</p><p id="50">Liễu Tư Vũ nghe Tiết Linh Vân nói vậy, liền nhìn kỹ mặt Lăng Phàm, phát hiện quanh mắt cậu có hai quầng thâm nhàn nhạt, lại nhớ tới vừa nãy mình kéo Lăng Phàm mà cậu chẳng hề kháng cự chút nào, hóa ra là không còn sức để kháng cự, nghĩ đến đây, Liễu Tư Vũ bỗng dưng cảm thấy có chút khó chịu trong lòng.</p><p id="51">"Hừ, vậy lần này tha cho cậu đấy." Liễu Tư Vũ dùng tay chọc chọc vào chỗ lần trước véo Lăng Phàm, làm Lăng Phàm đau đến nhe răng trợn mắt.</p><p id="52">"Đa tạ ơn tha mạng của hai vị." Lăng Phàm nghe vậy thở phào nhẹ nhõm.</p><p id="53">"Lăng Phàm hôm nay sắc mặt cậu kém quá, tối qua không nghỉ ngơi tốt sao?" Tiết Linh Vân không nhịn được bèn mở miệng hỏi, giờ giấc sinh hoạt của Lăng Phàm cô nắm rõ như lòng bàn tay, mà thời điểm xuất hiện hôm nay rõ ràng có vấn đề.</p><p id="54">Liễu Tư Vũ nghe xong không nói gì, cô liên tưởng đến mấy chốn đèn mờ rượu mạnh, không khỏi nhíu mày, dáng vẻ này của Lăng Phàm cực kỳ giống mấy gã khách làng chơi trác táng cả đêm được nhắc đến trong tin tức.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308225-chuong-39-giao-an-1" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(3)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">3 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-group">
    <div id="ln-comment-3198169"
    class="ln-comment-item mt-3 clear"
    data-comment="3198169" 
    data-parent="3198169" 
    data-type="chapter" 
    data-typeid="308233">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.docln.net/lightnovel/users/ua97924-2ee2d3bd-0945-4725-b5f2-9dee98fac227.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/97924">elektron</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Đọc tí 2 tiếng hết r, chán thật
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308233-chuong-40-giao-an-2?comment_id=3198169#ln-comment-3198169"
                            class="text-slate-500">
                            <time class="timeago" title="10-02-2026 00:02:46"
                                datetime="2026-02-10T00:02:46+07:00">
                                10-02-2026 00:02:46
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3198017"
    class="ln-comment-item mt-3 clear"
    data-comment="3198017" 
    data-parent="3198017" 
    data-type="chapter" 
    data-typeid="308233">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u126724-cb951142-cfba-4f1c-8ae4-84ffacf04cc0.gif" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/126724">Simp lỏd Hutao</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        anh tôi liêm nhưng mấy gái toàn liếm cả th<br>khổ thân anh tôi🥀
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308233-chuong-40-giao-an-2?comment_id=3198017#ln-comment-3198017"
                            class="text-slate-500">
                            <time class="timeago" title="09-02-2026 22:22:08"
                                datetime="2026-02-09T22:22:08+07:00">
                                09-02-2026 22:22:08
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>
<div class="ln-comment-group">
    <div id="ln-comment-3197867"
    class="ln-comment-item mt-3 clear"
    data-comment="3197867" 
    data-parent="3197867" 
    data-type="chapter" 
    data-typeid="308233">
    <div class="flex gap-1 max-w-full">
        <div class="w-[50px]">
            <div class="mx-1 my-1">
                <img src="https://i.hako.vn/ln/users/avatars/u217516-71ad82f9-2b7c-4215-84af-f56ebdcf28eb.jpg" class="w-full rounded-full" />
            </div>
        </div>
        <div
            class="w-full min-w-0 rounded-md bg-gray-100 ps-1 pe-0 pb-1 pt-0 dark:!bg-zinc-800 ">
            <div class="flex min-w-0 flex-col px-2">
                <div class="flex align-top justify-between">
                    <div class="flex flex-wrap gap-x-2 gap-y-1 align-middle pt-1">
    <div class="self-center">
        <a class="font-bold leading-6 md:leading-7 ln-username " href="/thanh-vien/217516">T Đ Anh</a>
    </div>
                                    </div>
                                        
                </div>
                                                    <div class="ln-comment-content long-text">
                        Khi nào có ảnh minh họa tiết linh vân z
                    </div>
                    <div class="comment_see_more expand none">Xem thêm</div>
                    <div class="flex gap-2 align-bottom text-[13px] visible-toolkit">
                        <a href="/truyen/24830-nhung-thieu-nu-hac-hoa-va-cuoc-song-thuong-ngay-vun-vo-cua-toi/c308233-chuong-40-giao-an-2?comment_id=3197867#ln-comment-3197867"
                            class="text-slate-500">
                            <time class="timeago" title="09-02-2026 21:02:15"
                                datetime="2026-02-09T21:02:15+07:00">
                                09-02-2026 21:02:15
                            </time>
                        </a>
                        <a
                            class="self-center visible-toolkit-item do-like cursor-pointer">
                            <i class="fas fa-thumbs-up me-1"></i>
                            <span class="likecount font-semibold"></span>
                        </a>
                                            </div>
                            </div>
        </div>
    </div>
</div>

    </div>

<div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'EXo0sB6FfZlxianHIMVSSyNkp8lwZ0SadZTstgE0';
        var comment_type = 'chapter';
        var comment_typeid = '308233';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'EXo0sB6FfZlxianHIMVSSyNkp8lwZ0SadZTstgE0';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24830');
    chapter_id = parseInt('308233');

    readingObject = {
        series_id: series_id,
        series_title: 'Những Thiếu Nữ Hắc Hóa Và Cuộc Sống Thường Ngày Vụn Vỡ Của Tôi',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="EXo0sB6FfZlxianHIMVSSyNkp8lwZ0SadZTstgE0" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cb62e874eb61588',t:'MTc3MDY2OTYyNQ=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
