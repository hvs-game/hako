<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Phù Thủy Tiểu Thư Xin Cùng Người Nối Lại Tiền Duyên - Chương 18: Phù Thủy không bị ràng buộc - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Trong một nghi lễ thần bí, Tô Tiểu Nhượng — một chàng trai bình thường nơi Lam Tinh — vô tình bị cuốn vào thế giới xa lạ và trở thành một Nữ Phù Thủy, nắm giữ quyền năng thay mặt Ma Thần để chi phối toàn bộ thế giới....">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="rURHU8u4Qlh9WvrO0IGxq20yj7ssaODoohcPejxP">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300715-chuong-18-phu-thuy-khong-bi-rang-buoc">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s23984-82b8cda9-b542-4515-80eb-56dd23a8ddab.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=79c8956531b276c6564b6dfd12d504f8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300714-chuong-17-su-hoai-nghi-bang-bo"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300715-chuong-18-phu-thuy-khong-bi-rang-buoc" style="background: url('https://i.hako.vn/ln/series/covers/s23984-82b8cda9-b542-4515-80eb-56dd23a8ddab.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen">Phù Thủy Tiểu Thư Xin Cùn...</a></h5>
                    <small><i class="fas fa-pen"></i>Tựu Cô Nhất Hạ</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/t34368-quyen-1-vi-day-la-loi-uoc-hen-giua-ta-va-nguoi">Quyển 1: Vì Đây Là Lời Ước Hẹn Giữa Ta Và Người</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255861-chuong-01-lanafette-cua-nguyen-rua-va-tai-uong">
                                                                        Chương 01: Lanafette của Nguyền Rủa và Tai Ương
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255865-chuong-02-hieu-ung-3d-nay-trong-xin-that-day">
                                                                        Chương 02: Hiệu ứng 3D này trông xịn thật đấy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255870-chuong-03-nhuong-anh-em-truoc">
                                                                        Chương 03: Nhường anh em trước
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255872-chuong-04-y-chi-cua-ma-than">
                                                                        Chương 04: Ý chí của Ma Thần
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255885-chuong-05-vat-quy-chu">
                                                                        Chương 05: Vật quy chủ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255898-chuong-06-thien-phu-bam-sinh">
                                                                        Chương 06: Thiên phú bẩm sinh
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255949-chuong-07-chuc-trach-cua-phu-thuy">
                                                                        Chương 07: Chức trách của Phù Thủy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255950-chuong-08-trang-phuc-cua-phu-thuy">
                                                                        Chương 08: Trang phục của Phù Thủy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255954-chuong-09-vua-la-an-hue-vua-la-long-giam">
                                                                        Chương 09: Vừa là ân huệ, vừa là lồng giam
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255958-chuong-10-cay-non-cua-cay-the-gioi">
                                                                        Chương 10: Cây non của Cây Thế Giới
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255963-chuong-11-nha-moi-cua-phu-thuy">
                                                                        Chương 11: Nhà mới của Phù Thủy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255964-chuong-12-ben-do-cua-noi-tam">
                                                                        Chương 12: Bến đỗ của nội tâm
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255979-chuong-13-hat-giong-cua-su-tuyet-vong">
                                                                        Chương 13: Hạt giống của sự tuyệt vọng
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c255989-chuong-14-su-tan-sinh-cua-ba-chu">
                                                                        Chương 14: Tân sinh của bá chủ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300709-chuong-15-toan-tinh-cua-phu-thuy">
                                                                        Chương 15: Toan Tính Của Phù Thủy
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300712-chuong-16-hanh-trinh-duoc-chap-thuan">
                                                                        Chương 16: Hành trình được chấp thuận
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300714-chuong-17-su-hoai-nghi-bang-bo">
                                                                        Chương 17: Sự hoài nghi báng bổ
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300715-chuong-18-phu-thuy-khong-bi-rang-buoc">
                                                                        Chương 18: Phù Thủy không bị ràng buộc
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=" disabled "><a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen">Quyển 2: Chỉ Vì Nơi Đây Có Người Tồn Tại</a></li>
                                        
                                                            <li class=" disabled "><a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen">Quyển 3: Ý Nghĩa Của Chấp Niệm, Bản Chất Của Nhân Tính Vặn Vẹo</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Quyển 1: Vì Đây Là Lời Ước Hẹn Giữa Ta Và Người</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 18: Phù Thủy không bị ràng buộc</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300715-chuong-18-phu-thuy-khong-bi-rang-buoc#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,612 từ - Cập nhật: 
                        <time class="topic-time timeago" title="31-01-2026 22:20:10" datetime="2026-01-31T22:20:10+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 18: Phù Thủy không bị ràng buộc</p>
                    <p id="1">Câu trả lời của Andel không nghi ngờ gì đã chặn đứng mọi khả năng thương lượng, Anserra chỉ đành bất lực thở dài.</p><p id="2">“Thôi được rồi, nhưng ít nhất ngay khi chị cả rảnh rỗi, em sẽ lập tức đi tìm chị ấy.”</p><p id="3">Bởi lẽ cô vẫn luôn giữ vững quan điểm rằng Lanafette không nên xuống Hạ Giới.</p><p id="4">“Em lo lắng Lanafette sẽ vì ảnh hưởng của chức trách bản thân mà sụp đổ sao? Chị nghĩ chị cả cũng đã cân nhắc đến điều này, nhưng chị ấy vẫn không ngăn cản hành động của Lanafette.”</p><p id="5">“Vì sao ?”</p><p id="6">Anserra không tài nào hiểu nổi. Giờ đây không chỉ là sự khó hiểu đối với ý chí của Ma Thần, mà ngay cả lựa chọn của Phù Thủy Khởi Nguyên, cô cũng không thể nào lý giải.</p><p id="7">“Chị đoán vẫn là vì tính chất đặc thù của đời thứ ba mươi lăm.”</p><p id="8">Tuy không biết rõ dự tính của chị cả, nhưng điều đó không ngăn cản được sự phỏng đoán của hai người. Và câu trả lời mà Andel tự suy luận ra chính là như vậy.</p><p id="9">“Phù Thủy đời thứ ba mươi lăm mang trong mình chức trách tai ương chưa từng có trong lịch sử các đời Phù Thủy, chưa kể cô bé còn sở hữu nhân cách và ký ức của tiền kiếp, xuất thân của bản thân cô bé cũng vô cùng đặc biệt.”</p><p id="10">Vừa suy ngẫm, Andel vừa nói ra suy đoán của mình. Nhưng lời giải thích này rõ ràng chưa đủ sức thuyết phục Anserra, cô lập tức phản bác:</p><p id="11">“Chính vì như thế nên em mới cảm thấy cần phải giam lỏng cô bé trên quần đảo không trung này. Bản tính của cô bé là một người lương thiện, nếu chứng kiến tai nạn do chính chức trách của mình mang lại, chắc chắn cô bé sẽ làm ra những hành động chống đối lại Ma Thần đại nhân. Đến lúc đó thì chuyện gì sẽ xảy ra?”</p><p id="12">Nhân cách của Lanafette không phải do Ma Thần tạo mới, mà mang theo nhân cách cũ của một con người trong quá khứ. Chính vì vậy, lòng trung thành của cô đối với Ma Thần cũng là thấp nhất trong số các đời Phù Thủy, thậm chí có thể nói là hoàn toàn không có chút trung thành nào.</p><p id="13">Điều Anserra lo lắng chính là điểm này.</p><p id="14">Các Phù Thủy có sự trung thành bản năng đối với Ma Thần, có lẽ đó là dấu ấn trung thành đã được Ma Thần khắc sâu vào nhân cách họ. Nhưng Lanafette, với tư cách là một nhân cách cũ đến từ nơi khác, lại không có dấu ấn đó.</p><p id="15">Điều này có thể thấy rõ qua việc cô luôn cảm thấy sợ hãi và hoang mang trước ý chí của Ma Thần.</p><p id="16">Do đó, nếu vì một lý do nào đó khiến Lanafette không muốn thực thi ý chí của Ma Thần nữa, thì điều đó đồng nghĩa với việc chống lại Ma Thần — chủ nhân của họ.</p><p id="17">So với các Phù Thủy, Ma Thần giống như quy tắc của thế giới, lạnh lùng và vô tình hơn gấp bội. Ngài không có bất kỳ sự thương xót hay từ bi nào, chỉ vận hành thế giới này một cách cân bằng tuyệt đối.</p><p id="18">Nếu Phù Thủy chống lại ý chí của Ma Thần, rốt cuộc chuyện gì sẽ xảy ra, không ai biết được. Bởi vì trong suốt hơn ba ngàn năm qua, chưa từng có một đời Phù Thủy nào làm như vậy.</p><p id="19">Nhưng nô bộc mà dám trái lệnh chủ nhân thì xưa nay chưa từng có kết cục tốt đẹp, huống hồ đây lại là một vị chủ nhân vô tình đến thế.</p><p id="20">Anserra muốn cực lực tránh để chuyện này xảy ra, nên mới không muốn Lanafette rời khỏi đây. Cô thậm chí đã lên kế hoạch dùng thời gian và sự dạy dỗ của mình để từ từ mài mòn lòng trắc ẩn của con người trong Lanafette, dần biến cô thành một Phù Thủy đạt chuẩn, vĩnh biệt thân phận con người trước kia.</p><p id="21">“Nhưng sự tồn tại của cô bé đã định trước là không thể bị chúng ta trói buộc. Bất kể là chị cả hay là em, không ai có thể làm điều đó cả.”</p><p id="22">Câu nói này của Andel khiến Anserra sững sờ trong giây lát. Cô khó hiểu nhìn Andel, chờ đợi lời giải đáp.</p><p id="23">“Hãy suy nghĩ kỹ đi, Anserra.” Andel nhìn cô, nói với vẻ đầy ẩn ý.</p><p id="24">“Tại sao lần này Ma Thần đại nhân lại cố tình bỏ qua em, đích thân thực hiện nghi thức triệu hồi chuyển sinh cho đời thứ ba mươi lăm? Chẳng lẽ là do bấy lâu nay em làm không tốt công việc triệu hồi Phù Thủy mới sao?”</p><p id="25">“Tuyệt đối không thể!” Anserra lập tức phủ nhận mà không cần suy nghĩ, giọng điệu vô cùng kiên quyết. “Em tuyệt đối tuân theo ý chí của Ma Thần đại nhân, mỗi một nghi thức chuyển sinh Phù Thủy đều không hề có chút sai sót nào.”</p><p id="26">“Đúng là như vậy, tất cả chị em chúng ta đều công nhận điều đó.” Andel gật đầu, khẳng định thái độ làm việc của Anserra.</p><p id="27">Nhưng ngay sau đó, cô đổi giọng:</p><p id="28">“Thế nhưng đối với một người tận tụy như em, tại sao đến đời thứ ba mươi lăm này, Ma Thần đại nhân lại gạt em sang một bên để đích thân triệu hồi?”</p><p id="29">“Đó là vì linh hồn của Lanafette ở thế giới khác, mà quyền hạn của em chỉ có hiệu lực ở thế giới này.”</p><p id="30">Anserra trả lời không chút do dự, vì đây là điều cô đã suy nghĩ từ lâu. Nhưng Andel nghe xong lại lắc đầu.</p><p id="31">“Không chỉ có vậy đâu. Nói cho cùng, việc Lanafette đi đến dị giới vốn dĩ cũng là sự ‘ngẫu nhiên’ do Ma Thần đại nhân sắp đặt. Chỉ cần Ma Thần đại nhân muốn, Ngài có thể đưa linh hồn Lanafette về thế giới này bất cứ lúc nào, rồi để em thực hiện nghi thức chuyển sinh.”</p><p id="32">Mọi hành vi của Ma Thần đều mang tính hợp lý và quy tắc. Nếu chỉ vì linh hồn Lanafette ở thế giới khác, thì chắc chắn Ngài sẽ triệu hồi linh hồn cô bé về thế giới này trước, rồi mới để Anserra tiến hành chuyển sinh. Dù nghe có vẻ rắc rối, nhưng xét về ý chí của Ma Thần, đó mới là quy trình chuẩn mực.</p><p id="33">“Nhưng Ma Thần đại nhân không để em thực hiện chuyển sinh theo thông lệ, lại còn giữ nguyên nhân cách và ký ức của Lanafette sau khi triệu hồi, thậm chí không hề khắc dấu ấn trung thành tuyệt đối lên cô bé. Em thử nghĩ xem điều này là vì sao?”</p><p id="34">Andel nhìn Anserra, dùng giọng điệu nghi vấn để từng bước bóc tách manh mối giúp cô.</p><p id="35">Và rồi, Anserra trợn tròn mắt, không dám tin thốt lên suy nghĩ có phần phi thực tế vừa nảy ra trong đầu:</p><p id="36">“…Ma Thần đại nhân muốn một Phù Thủy có liên hệ với thế giới này, nhưng lại không chịu sự ràng buộc của thế giới này…”</p><p id="37">“Đúng vậy, chị cũng nghĩ như thế.”</p><p id="38">Andel gật đầu, mỉm cười nhẹ.</p><p id="39">Cái gọi là "có liên hệ với thế giới này" là vì linh hồn Lanafette vốn thuộc về nơi đây. Nhưng cô lại không lớn lên ở thế giới này, không có lòng trung thành với Ma Thần, sở hữu nhân cách độc lập, nên không chịu sự ràng buộc của thế giới.</p><p id="40">“Thế nhưng, dù là vậy thì Lanafette vẫn đã trở thành tôi tớ của Ma Thần đại nhân, bị giới hạn bởi chức trách. Huống hồ bản thân việc đến thế giới này đã là một sự ràng buộc của thế giới rồi mà!”</p><p id="41">Anserra nói ra nghi vấn trong lòng. Dù Lanafette không tuyệt đối trung thành, nhưng cô bé vẫn nảy sinh cảm giác sợ hãi và không dám làm trái ý chí của Ma Thần. Hơn nữa nói cho cùng, làm gì có tồn tại nào hoàn toàn không bị ràng buộc chứ?</p><p id="42">“Cái này thì chị chịu. Khoan nói đến việc suy đoán của chúng ta đúng được mấy phần, cho dù hướng suy luận này là đúng, thì những ý đồ sâu xa hơn của Ma Thần đại nhân cũng không phải thứ chị em mình có thể nhìn thấu được.”</p><p id="43">Andel lắc đầu, tỏ ra bó tay trước câu hỏi tiếp theo của Anserra. Dù suy đoán này thực sự rất bay bổng, thậm chí có phần hoang đường, nhưng ngoài nó ra dường như chẳng còn lời giải thích nào hợp lý hơn.</p><p id="44">“Có lẽ chị cả cũng đã nghĩ đến chỗ này, thậm chí còn sâu xa hơn, nên mới quyết định không ràng buộc Lanafette. Suy cho cùng, bản thân các Phù Thủy chúng ta cũng là sản vật của thế giới này. Nếu Ma Thần đại nhân cần một Phù Thủy không bị ràng buộc, vậy thì chúng ta cũng không thể can thiệp nữa. Em hiểu chứ, Anserra?”</p><p id="45">Nhìn Anserra trước mặt, vẻ mặt Andel trở nên nghiêm túc. Còn Anserra thì sắc mặt phức tạp, không biết đang suy nghĩ điều gì, trong biểu cảm thoáng nét lo âu và sầu muộn.</p><p id="46">Nhưng đúng lúc này, một bóng người lảo đảo bước ra từ màn sương thu hút sự chú ý của cả hai.</p><p id="47">“Ơ? Chị Andel và chị Anserra chưa đi à?”</p><p id="48">Bóng người bước ra khỏi màn sương, lộ rõ diện mạo. Lại là Rosetta?</p><p id="49">Nói sao nhỉ, dáng vẻ của Rosetta lúc này quả thực có chút thê thảm quá mức. Toàn thân cô như bị đông cứng, trên vạt váy còn treo lủng lẳng mấy cột băng. Thậm chí bên má còn lại vốn đang lành lặn giờ cũng sưng vù lên, một dấu quyền in rõ mồn một trên đó.</p><p id="50">Tuy nhiên, hướng đi của Rosetta mới là điều khiến hai người kỳ lạ. Cô không đi từ hướng đảo của mình tới, mà hướng này… hình như là từ phía đảo của Shudale?</p><p id="51">Tên này chẳng phải vừa nãy còn đang định đẩy ngã Lanafette sao? Sao lại chạy từ bên nhà Shudale về thế này?</p><p id="52">“Sao cô lại đi từ hướng đó tới?”</p><p id="53">Anserra kỳ quái hỏi. Ai ngờ vừa hỏi xong, Rosetta lập tức làm ra vẻ tủi thân, đưa tay quệt nước mắt. Dù chẳng có giọt nước mắt nào cả.</p><p id="54">“Hu hu hu, hai chị ơi, hai chị phải đòi lại công đạo cho em!”</p><p id="55">Cái giọng điệu đó, nếu Lanafette mà nhìn thấy, chắc chắn sẽ cảm thán diễn xuất này trông còn đỉnh hơn cả minh tinh màn ảnh</p><p id="56">Gào xong, Rosetta híp mắt lén lút quan sát biểu cảm của hai người. Sau đó, cô phát hiện Anserra và Andel đang nhìn mình với vẻ mặt lạnh lùng.</p><p id="57">Đòi lại công đạo là chuyện không thể nào, bởi cái nết của cô gái này ở quần đảo không trung ai mà không biết.</p><p id="58">Làm ơn đi, Andel đứng bên cạnh đang phải kiềm chế lắm mới không tung cú đấm theo bản năng đấy.</p><p id="59">Nhưng Rosetta mặc kệ, cứ thế khóc lóc kể lể:</p><p id="60">“Vừa nãy em chỉ muốn thân thiết với em Lanafette một chút thôi, ai ngờ con bé học lỏm chiêu thức của chị Andel, đấm một phát bay em đi luôn. Thật là làm tổn thương trái tim người ta quá đi mất.”</p><p id="61">Thân thiết?</p><p id="62">Anserra lườm cô một cái cháy mắt.</p><p id="63">Cái đó mà gọi là thân thiết? Rõ ràng là cô thèm muốn thân thể người ta thì có! Đồ hạ lưu! Cũng may Lanafette bình thường phòng bị kỹ, nếu không đã bị Rosetta chơi đùa đủ kiểu rồi, giống như đời thứ ba mươi ba vậy…</p><p id="64">Không khéo giờ này cũng đang tự kỷ như Goelia rồi cũng nên.</p><p id="65">“Được rồi, giám định là ‘vừa ăn cướp vừa la làng’, tòa kết án.”</p><p id="66">Tuyên bố kết quả phán xét một cách vô tình, Anserra thuận thế né người tránh cái ôm ập tới của Rosetta.</p><p id="67">“Hu hu hu, chị Anserra thiên vị.” Vừa quệt những giọt nước mắt vô hình, Rosetta vừa mếu máo. “Mau cho em cái ôm an ủi đi mà!”</p><p id="68">“Cô mà còn như vậy, coi chừng tôi gọi Sahale đấy. Con bé bảo với tôi là lần trước phá chưa đã đâu!”</p><p id="69">Thấy Rosetta định giở trò với mình, Anserra đành tung ra đòn sát thủ. Nhưng lần này, Rosetta không hề sợ hãi.</p><p id="70">“Hi hi hi, Sahale hôm nay đã đi đến hòn đảo xa nhất rồi, tiếng gọi của chị Anserra e là không truyền tới được đâu~.”</p><p id="71">Khá lắm, tên biến thái này hình như còn nắm rõ hành tung của tất cả Phù Thủy trong lòng bàn tay?</p><p id="72">“Sao cô biết hay vậy!”</p><p id="73">Anserra kinh ngạc hỏi lại Rosetta. Ai ngờ cô vênh mặt đắc ý:</p><p id="74">“Mấy bé tiểu yêu tinh trên quần đảo này em quen hết đó nha. Ngày nào các bé cũng báo cáo lịch trình của mọi người cho em hết.”</p><p id="75">Chỉ cần có bé yêu tinh nào không nghe lời, Rosetta sẽ thi hành “hôn hình”. Dù sao tuy nhỏ một chút nhưng đều là hình dáng các bé gái đáng yêu, hôn một cái cho sướng mồm cũng được. Hơn nữa yêu tinh vốn là chủng tộc hầu hạ Phù Thủy, đối với yêu cầu của Rosetta, các bé chỉ có thể đồng ý.</p><p id="76">Nhưng khi nói đến đây, Rosetta bỗng cảm thấy sau lưng tỏa ra sát khí nồng nặc.</p><p id="77">Quay đầu lại, cô thấy một nắm đấm đang phóng đại cực nhanh trước mắt mình. Hay nói đúng hơn là đang tiếp cận với tốc độ ánh sáng?</p><p id="78">Rosetta lúc này mới sực nhớ ra, yêu tinh chính là quyến thuộc do Andel tạo ra. Mà những lời cô vừa phun ra trước mặt Andel chẳng khác nào tự đào hố chôn mình.</p><p id="79">Nhưng giờ thì, mọi chuyện không còn quan trọng nữa rồi.</p><p id="80">“Bốp——!”</p><p id="81">Kèm theo một tiếng nổ lớn, Rosetta tạm thời mất đi ý thức, cứ thế cất cánh tại chỗ bay xuyên qua màn sương mù.</p><p id="82">Rồi không lâu sau, tiếng va đập ầm ầm vào đồ vật và tiếng hét thất thanh của Shudale lại vọng tới.</p><p id="83">Xem ra đây là lần thứ ba trong ngày Rosetta từ trên trời rơi xuống ghé thăm nhà Shudale. Hy vọng Shudale không vì thế mà bị sang chấn tâm lý.</p><p id="84">Quay lại nhìn Andel, lúc này cô đang dùng khăn tay lau chùi lòng bàn tay liên tục, lau một hồi rồi cau mày ghét bỏ nói:</p><p id="85">“Không được, tay chạm phải khí tức ô uế của Rosetta tận hai lần rồi, chị phải về tắm rửa ngay mới được.”</p><p id="86">Lẩm bẩm xong, cô lại nhìn Anserra:</p><p id="87">“Anserra, cuộc trò chuyện của chúng ta hôm nay đến đây thôi, chị xin phép về trước.”</p><p id="88">“À vâng…”</p><p id="89">Anserra còn biết nói gì hơn, chỉ đành ậm ừ một tiếng rồi nhìn bóng lưng Andel biến mất trong màn sương.</p><p id="90">Sau một hồi cân nhắc trong lòng, cô quyết định đi tìm Lanafette để xác nhận lại lần nữa. Còn về phần Rosetta, mặc xác cô ta đi, tốt nhất là bị Shudale đóng băng cho vài ngày để yên tĩnh một chút.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen/c300714-chuong-17-su-hoai-nghi-bang-bo" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/23984-phu-thuy-tieu-thu-xin-cung-nguoi-noi-lai-tien-duyen" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'rURHU8u4Qlh9WvrO0IGxq20yj7ssaODoohcPejxP';
        var comment_type = 'chapter';
        var comment_typeid = '300715';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'rURHU8u4Qlh9WvrO0IGxq20yj7ssaODoohcPejxP';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('23984');
    chapter_id = parseInt('300715');

    readingObject = {
        series_id: series_id,
        series_title: 'Phù Thủy Tiểu Thư Xin Cùng Người Nối Lại Tiền Duyên',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="rURHU8u4Qlh9WvrO0IGxq20yj7ssaODoohcPejxP" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c6a88192a547535',t:'MTc2OTg3NjM3Ng=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
