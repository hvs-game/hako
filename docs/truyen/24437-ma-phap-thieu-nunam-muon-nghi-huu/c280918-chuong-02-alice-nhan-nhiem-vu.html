<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Ma Pháp Thiếu Nữ(Nam) Muốn Nghỉ Hưu - Chương 02: Alice nhận nhiệm vụ - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Đừng có mà bắt chước.">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="UqKXynBxS6wLgYHvN1YH8yPphGMsfcxbEB613KJa">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280918-chuong-02-alice-nhan-nhiem-vu">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24437-3791eb81-d4c5-4223-aa9d-cd3c153b67ba.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280831-chuong-01-ma-phap-thieu-nu-alice"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
         
        <a class="rd_sd-button_item rd_top-right disabled"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280918-chuong-02-alice-nhan-nhiem-vu" style="background: url('https://i.hako.vn/ln/series/covers/s24437-3791eb81-d4c5-4223-aa9d-cd3c153b67ba.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu">Ma Pháp Thiếu Nữ(Nam) Muố...</a></h5>
                    <small><i class="fas fa-pen"></i>에스필아</small>
                    <small><i class="fas fa-paint-brush"></i></small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280837-main-va-concept-art">Hình minh họa</a></li>
                                        
                                                            <li class="current"><a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/t35320-webnovel">Webnovel</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280830-chuong-00-loi-mo-dau">
                                                                        Chương 00: Lời mở đầu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280831-chuong-01-ma-phap-thieu-nu-alice">
                                                                        Chương 01: Ma Pháp Thiếu Nữ Alice
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280918-chuong-02-alice-nhan-nhiem-vu">
                                                                        Chương 02: Alice nhận nhiệm vụ
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Webnovel</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 02: Alice nhận nhiệm vụ</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280918-chuong-02-alice-nhan-nhiem-vu#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,320 từ - Cập nhật: 
                        <time class="topic-time timeago" title="28-12-2025 21:22:04" datetime="2025-12-28T21:22:04+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 02: Alice nhận nhiệm vụ</p>
                    <p id="1">Lũ quái vật bước ra từ Abyss thường mang một ngoại hình đen kịt đúng như cái tên của chúng, và con có kích thước càng lớn thì sẽ càng mạnh mẽ.</p><p id="2">Dù thi thoảng vẫn xuất hiện những cá thể dị biệt — những cá thể nhỏ thó nhưng sở hữu dị năng hoặc trí tuệ vượt bậc — thì đa số bọn chúng thông thường sẽ chỉ sở hữu năng lực thể chất vượt xa con người và khả năng miễn nhiễm với mọi đòn tấn công, ngoại trừ đòn đánh từ các Ma Pháp Thiếu Nữ.</p><p id="3">Ngay cả những Ma Pháp Thiếu Nữ mới thức tỉnh cũng có thể xử lý lũ quái vật cấp thấp mà không gặp quá nhiều khó khăn.</p><p id="4">Là những sinh vật đến từ Abyss, chúng chỉ có khả năng kháng vũ khí hiện đại chứ không thực sự sở hữu lớp phòng thủ đủ mạnh để chống lại hỏa lực tầm cỡ đó.</p><p id="5">“Grừừ!! Kireeeeek!!!”</p><p id="6">Con này cùng lắm cũng chỉ đạt đến hạng D thôi.</p><p id="7">Nó cao khoảng 2 mét với hình dáng tựa con người, nhưng luồng năng lượng màu đen bao quanh cơ thể nó cùng chiếc lưỡi dài ngoằng kinh tởm thò ra khỏi miệng cũng đủ để khiến người ta cảm thấy buồn nôn.</p><p id="8">Sau khi đo lường cấp bậc của nó qua ma lực thì tôi đã xác định được nó là Hạng D.</p><p id="9">Tuy không phải hạng rác rưởi hoàn toàn, nhưng chắc chắn không phải là một con quái vật mạnh.</p><p id="10">Nếu không có Ma Pháp Thiếu Nữ nào ứng phó và mặc kệ nó hoành hành... thì thương vong cùng lắm sẽ chỉ khoảng 10 người?</p><p id="11">Quái vật từ Abyss chỉ thu thập lượng năng lượng tiêu cực tối đa mà bản thân chúng có thể hấp thụ rồi sẽ nhanh chóng bỏ chạy, nên sẽ không có vụ chúng không ở lỳ một chỗ mãi mãi nếu để yên.</p><p id="12">Những con hạng cao hơn sẽ ở lại thực tại lâu hơn để tàn phá, nhưng... chà, chuyện đó lúc này không quan trọng.</p><p id="13">“Moonlight Chain.”</p><p id="14"><em>Xoẹt xoẹt!!</em></p><p id="15">“Kireeeeek!!!”</p><p id="16">“Mọi người ơi, giờ thì mọi người có thể yên tâm rồi đấy! Alice đã mang ánh trăng đến rồi đây!”</p><p id="17">Sau khi dùng xích trói chặt con quái vật lại khi nó đang điên cuồng đập đầu vào tường bê tông và làm hư hại tòa nhà, tôi tiếp tục màn trình diễn với tư cách là “Alice” mà mọi người trông chờ.</p><p id="18">Đã 10 năm trôi qua kể từ khi cuộc xâm lăng của Abyss bắt đầu.</p><p id="19">Dù các hầm trú ẩn đã được bố trí khắp cả nước để phòng khi quái vật xuất hiện, nhưng những con người hiện đại bận rộn không phải lúc nào cũng có thể tháo chạy ngay khi quái vật vừa xuất hiện. Mà luôn luôn có những người không kịp sơ tán.</p><p id="20">“Ah... là Alice thật kìa!! Một Ma Pháp Thiếu Nữ đã đến!”</p><p id="21">“Đ-Đó có phải là Alice không? Người đã hoạt động không ngừng nghỉ suốt 10 năm qua...”</p><p id="22">“C-Chúng ta được cứu rồi...”</p><p id="23">Những người dân đang chạy loạn xạ giờ đây lại dừng bước, với vẻ mặt nhẹ nhõm vì nghĩ mình đã an toàn.</p><p id="24">...Còn về phần mình thì tôi chỉ ước họ cứ tiếp tục cắm đầu mà chạy đến hầm trú ẩn cho khuất mắt đi.</p><p id="25">Tôi còn đang phải xử lí con quái vật này đây này.</p><p id="26">“KIEEEEEEEEEEEREEEEEEK!!!!!!!”</p><p id="27">“Im lặng nào, yah!”</p><p id="28"><em>Đoàng!</em></p><p id="29">Khi tôi vung quyền trượng, ma lực đã tụ lại thành hình một ngôi sao và phóng thẳng về phía con quái vật.</p><p id="30">Đòn đánh thương hiệu và cũng là biểu tượng của Ma Pháp Thiếu Nữ Alice trong mắt công chúng.</p><p id="31">Starlight Shower.</p><p id="32">Làm sao một con quái vật hạng D có thể chịu được một kỹ thuật mà ngay cả quái vật hạng B cũng sẽ bị trọng thương nếu trúng trực diện chứ?</p><p id="33">Sinh vật đó đã ngay lập tức tan biến thành những hạt ma lực cùng tiếng thét tần số thấp đặc trưng.</p><p id="34"><em>Chát!</em></p><p id="35">“Mọi người ơi! Tôi đã đánh bại quái vật rồi, nên từ bây giờ các bạn có thể nghỉ ngơi được rồi nhé!”</p><p id="36">“Đ-Đã đánh bại thật rồi sao?”</p><p id="37">“Nhanh thế ư?”</p><p id="38">“Ma Pháp Thiếu Nữ mà tôi thấy lần trước đã phải vật lộn tận 20 phút mới xong cơ mà...”</p><p id="39"><em>/Mỉm cười rạng rỡ./</em></p><p id="40">Đây không phải là nụ cười hạnh phúc chân thành.</p><p id="41">Tôi chỉ cười vì “Alice” mà mọi người trông chờ sẽ giải cứu bọn họ và nở một nụ cười tươi tắn trong những tình huống như thế này.</p><p id="42">Và tốt nhất là họ đừng có mang tôi ra so sánh như vậy.</p><p id="43">Tôi đã lăn lộn trong cái nghề này gần chục năm rồi, thật không công bằng khi đặt tôi lên bàn cân với đám lính mới chỉ vừa ký khế ước và còn chưa nắm rõ năng lực của bản thân.</p><p id="44">Mà thực ra thì ngay cả những Ma Pháp Thiếu Nữ mới ký khế ước cũng có thể khuất phục những con quái vật tầm này dưới 10 phút nếu họ sử dụng năng lực đúng cách.</p><p id="45">Nhưng vấn đề là hầu hết bọn họ đều không làm được.</p><p id="46">“Giờ thì Alice phải đi đây! Chúc mọi người một ngày vui vẻ!”</p><p id="47">“Đ-Đợi đã! Trước khi đi thì cô có thể cho tôi xin chữ ký được không?”</p><p id="48"><em>Vụt!</em></p><p id="49">Tôi nhanh chóng biến mất thành một vệt sáng trong khi giả vờ như không nghe thấy những người dân đang lao tới xin chữ ký.</p><p id="50">Chữ ký cái khỉ mốc gì chứ?</p><p id="51">Họ nghĩ Ma Pháp Thiếu Nữ là idol hay gì à? Đi mà hỏi mấy cô nàng khác ấy, những người thực sự nghĩ mình là idol ấy. Hoặc ít nhất thì đừng có hỏi tôi.</p><p id="52">Vả lại thì hầu hết mọi người chẳng mấy khi trân trọng chữ ký mà họ xin được đâu.</p><p id="53">Không tin thì cứ lên mạng mà xem, chữ ký của Ma Pháp Thiếu Nữ được rao bán đầy ra kia kìa.</p><p id="54">Trừ khi họ bán chúng để lấy tiền donate cho tôi, chứ không thì tôi chẳng thấy có lý do gì để phải quan tâm cả.</p><p id="55"><em>Vụt!</em></p><p id="56">“Rabbity. Tôi có thể về nhà được chưa?”</p><p id="57">Phép dịch chuyển tôi vừa dùng là ma pháp cơ bản mà mọi Ma Pháp Thiếu Nữ đều có thể sử dụng, nó sẽ đưa bạn đến một địa điểm không có người hoặc camera giám sát.</p><p id="58">Đây là ma pháp thường được dùng sau khi hoàn thành nhiệm vụ để hủy bỏ trạng thái biến thân.</p><p id="59">Ngày nay, số lượng Ma Pháp Thiếu Nữ chấp nhận đánh đổi mạng sống để che giấu danh tính ngày càng ít đi, nhưng không may là tôi lại thuộc nhóm người thiểu số đó, và giờ tôi đang phải sống với cảnh lén lút như thế này đây.</p><p id="60">Ngoài ra thì ma pháp mà tôi dùng ban nãy để dịch chuyển đến chỗ con quái vật là do tận dụng những lối đi mà Abyss đã tạo ra thông qua quyền năng của Linh vật, nên tôi không thể dùng nó để quay lại vị trí ban đầu được...</p><p id="61">Để tóm gọn lại cho dễ hiểu thì... Một khi hoàn thành nhiệm vụ, tôi sẽ phải tự tìm đường mà mò về nhà.</p><p id="62">“Trả lời nhanh lên được không? Cậu biết tôi ghét việc phải vất vưởng ở ngoài đường thế nào mà.”</p><p id="63">[Ờm... Alice...?]</p><p id="64">Rabbity kéo dài giọng với vẻ mặt thận trọng như thể có điều gì đang muốn nói.</p><p id="65">Sắc mặt của tôi ngay lập tức tối sầm trước tông giọng quen thuộc đó.</p><p id="66">Chỉ có duy nhất một thứ để nói trong tình huống này thôi.</p><p id="67">“Không.”</p><p id="68">[X-Xin lỗi! Nhưng một Abyss One hạng B vừa xuất hiện ở đằng kia! Trong số những người có thể dịch chuyển đến đó ngay lúc này, thì cậu là Ma Pháp Thiếu Nữ duy nhất đủ sức xử lý nó...]</p><p id="69">“Abyss One” là thuật ngữ mà các Linh vật dùng để gọi lũ quái vật.</p><p id="70">Khác với lũ hạng D chỉ biết phá hoại tường nhà và vồ người, quái vật hạng B có thể dễ dàng san bằng vài tòa nhà nhỏ.</p><p id="71">Và nếu không ngăn chặn nó kịp thời, thì việc cả một khu phố bị tàn phá chỉ là chuyện sớm muộn.</p><p id="72">“Cậu có muốn lợi dụng tôi thì cũng phải có giới hạn thôi chứ. Tôi chỉ vừa mới làm xong một nhiệm vụ mà cậu đã muốn tôi đi làm thêm cái khác ngay lập tức à?”</p><p id="73">[T-Thì, tớ đã đoán là sẽ một Abyss One mạnh sẽ xuất hiện ở chỗ này... nhưng nó lại đột nhiên lại chạy vọt sang bên kia...]</p><p id="74">“Triệu tập các Ma Pháp Thiếu Nữ khác đi.”</p><p id="75">[T-Thật sự là không còn Ma Pháp Thiếu Nữ nào khác ở gần đó cả! Và Alice này, bản thân cậu cũng biết mà! Những Ma Pháp Thiếu Nữ bình thường sẽ hoàn toàn bất lực khi phải đối đầu với một Abyss One hạng B!]</p><p id="76">“...Haizz.”</p><p id="77">Phiền thật đấy, nhưng tôi đoán mình không còn lựa chọn nào khác.</p><p id="78">“Bảo đảm cho tôi hai ngày nghỉ phép.”</p><p id="79">[Ư... Đ-Được rồi.]</p><p id="80">“Cậu nhớ kỹ đấy nhé? Trong hai ngày đó, tôi sẽ không phản hồi bất kỳ yêu cầu triệu tập nào, bất kể là hạng B, hạng A hay hạng S. Đừng có mà định lật lọng.”</p><p id="81">Linh vật là bên quản lý việc triệu tập Ma Pháp Thiếu Nữ.</p><p id="82">Họ sẽ xem xem là đang có Ma Pháp Thiếu Nữ nào ở gần nơi Abyss One xuất hiện, ai có đủ khả năng xử lý và tình trạng hiện tại của họ ra sao, sau đó mới quyết định triệu tập người phù hợp.</p><p id="83">Nói cách khác, nếu bạn có thể thương lượng với Linh vật của mình, thì bạn có thể điều chỉnh tần suất thực hiện nhiệm vụ của bản thân.</p><p id="84">Nói chung về cơ bản là tôi đang thương lượng để cậu ta chặn càng nhiều yêu cầu triệu tập được gửi đến tôi càng tốt trong vòng hai ngày tới.</p><p id="85">[T-Tớ nói được rồi mà...]</p><p id="86">“Chuẩn bị dịch chuyển đi. Tôi vẫn còn dư ma lực để duy trì biến thân.”</p><p id="87">Nhưng sự thật là, nếu Rabbity có thể chặn yêu cầu ở cấp độ của cậu ta, thì điều đó đồng nghĩa với việc sự khác biệt giữa Alice hay một Ma Pháp Thiếu Nữ khác xử lý nó là không quá lớn — đó là lý do tại sao cuộc thương lượng này mới khả thi.</p><p id="88">Nếu nổ ra tình huống thực sự cần đến Alice, thì tôi sẽ bị triệu tập không thương tiếc.</p><p id="89">Mặc dù các Linh vật không muốn Ma Pháp Thiếu Nữ gục ngã vì kiệt sức, họ cũng không còn cách nào khác khi những Abyss One thực sự mạnh mẽ xuất hiện.</p><p id="90">Chà, dù tôi phàn nàn về việc phải đi làm hai nhiệm vụ liên tiếp thì việc đánh bại một con hạng D vốn chẳng tốn bao nhiêu ma lực cả.</p><p id="91">‘Một con hạng B... cuối cùng cũng có thứ gì đó cần chút nỗ lực để động tay động chân.’</p><p id="92">Tạm gác lại chuyện công việc này phiền phức đến mức nào, thì việc phải hít thở không khí ngoài trời lâu hơn dự kiến chỉ vì lũ sinh vật này chết ngắc sau một cú vung gậy trong khi rít lên “kieeek” thực sự rất áp lực.</p><p id="93">Một con hạng B ít ra cũng đủ để làm một cái bao cát xả stress.</p><p id="94">‘Mình chỉ hy vọng là sẽ không có quá nhiều người xung quanh.’</p><p id="95">Diễn vai “Alice” mà thiên hạ mong muốn còn mệt mỏi hơn bất cứ ai chưa từng trải qua có thể hình dung.</p><p id="96">Nếu tôi lỡ cau mày dù chỉ một lần, thì mọi người sẽ lập tức lan truyền những tin đồn kiểu như “Alice dạo này thay đổi rồi. Cô ấy đã đánh mất tinh thần ban đầu.”</p><p id="97"><em>/Nghiến răng./</em></p><p id="98">‘Hít thở sâu nào. Kiểm soát tâm trí, kiểm soát tâm trí...’</p><p id="99">Dịch chuyển tức thời sắp bắt đầu, và nếu tôi không kiểm soát được biểu cảm của mình thì mọi chuyện sau đó sẽ rất phiền phức.</p><p id="100">[Tớ sắp sửa dịch chuyển rồi đây! Mau chuẩn bị đi!]</p><p id="101">Cùng với tiếng hô của Rabbity, tầm nhìn của tôi bắt đầu vặn xoắn với một cảm giác quen thuộc.</p><p id="102">Khi tầm nhìn chao đảo của tôi rõ nét trở lại, cảnh tượng xuất hiện trước mắt là...</p><p id="103">&lt;GRÀOOOOO!! Ngươi đang trốn ở đâu, con khốn Ma Pháp Thiếu Nữ!! Lũ sinh vật đáng ghét nhà ngươi!!!&gt;</p><p id="104">Thành phố vang vọng tiếng nguyền rủa của con quái vật.</p><p id="105">&lt;Sao ngươi dám!!! Sao ngươi dám để lại cái ma pháp bẩn thỉu của ngươi trên chân ta và nghĩ rằng mình sẽ sống sót!! Ta sẽ xé xác ngươi trước khi ta quay trở lại!!!&gt;</p><p id="106">‘...Một loại hình thú có trí tuệ, hử.’</p><p id="107">Trong khi hạng D chỉ có trí thông minh của động vật, thì từ hạng B trở lên, nhiều con đã có khả năng giao tiếp.</p><p id="108">Với mức trí tuệ đó và cơ thể to lớn bằng một tòa trung tâm thương mại đó... thì nó có thể được xếp vào hàng ngũ quái vật hạng B cấp cao.</p><p id="109">Và qua những gì nó vừa mới nói, thì có vẻ nó đang điên tiết với Ma Pháp Thiếu Nữ đã chiến đấu với nó lúc nãy.</p><p id="110">[May quá, nhờ Ma Pháp Thiếu Nữ kia câu giờ nên cư dân gần đó đã sơ tán an toàn. Cậu có thể tự do chiến đấu rồi.]</p><p id="111">‘Chà, ít ra thì cô ta cũng có ích.’</p><p id="112">Tôi đã định gõ quyền trượng vào đầu cô ta nếu dám cản đường, nhưng xem ra cô ta đã làm được một việc khá đáng khen.</p><p id="113">[Ma Pháp Thiếu Nữ đó hiện đang an toàn nhưng đang ẩn nấp quanh đây... nên miễn là cậu không chiến đấu quá dữ dội thì mọi chuyện sẽ ổn thôi.]</p><p id="114">“Được.”</p><p id="115">Do không có người dân nào xung quanh, nên tôi chẳng việc gì phải thốt ra mấy câu chào kỳ cục kia cả.</p><p id="116"><em>Vùùù...</em></p><p id="117">Cách chiến đấu hiệu quả nhất là ra tay trước và tung một đòn tấn công bất ngờ thật mạnh mẽ.</p><p id="118">Vầng trăng khuyết ở đầu quyền trượng của tôi bắt đầu tỏa ra ánh sáng trắng và lấp đầy dần cho đến khi trở thành một vầng trăng tròn.</p><p id="119">&lt;Hử?! Luồng năng lượng này! Ai đó!&gt;</p><p id="120">Con quái vật cuối cùng cũng nhận ra ma lực của tôi và quay đầu về phía tôi, nhưng mọi chuyện đã quá muộn.</p><p id="121">“Chết đi!!! Luna Blast!!!!!”</p><p id="122"><em>ĐOÀNG!!!!!!!!</em></p><p id="123">&lt;GRÀOOOOOOO!!!!!&gt;</p><p id="124">Một tia sáng đậm đặc phóng ra từ vầng trăng tròn, nổ tung khi lao tới và đánh trực diện vào mặt con quái vật.</p><p id="125">Nếu Starlight Shower là kỹ thuật để càn quét đám đông phòng thủ thấp, thì chiêu này là để xuyên phá một mục tiêu đơn lẻ có sức phòng thủ cao.</p><p id="126">&lt;GRÀOOO!!! Ngươi lại là đứa nào nữa đây!!!!! Sao ngươi dám đánh vào mặt ta!!!!!&gt;</p><p id="127">Khuôn mặt của sinh vật bị Luna Blast đánh trúng lún xuống như thể bị một cây búa tạ đập vào.</p><p id="128">“Hừm. Không xuyên thủng được sao.”</p><p id="129">Nó sẽ chết ngay lập tức nếu đòn ban nãy xuyên thủng được, thật hơi đáng tiếc.</p><p id="130">&lt;Ư... Ma Pháp Thiếu Nữ tiếp viện..! Cứ đà này...&gt;</p><p id="131">“Gì? Ngươi định chạy trốn sao?”</p><p id="132">&lt;Đừng có hiểu lầm, con khốn Ma Pháp Thiếu Nữ! Đây là rút lui chiến thuật! Ta không phải đang chạy trốn vì sợ hãi đâu...&gt;</p><p id="133"><em>Vùùù</em></p><p id="134">“Ai bảo là ta sẽ để ngươi chạy thoát vậy?”</p><p id="135">Vô số ngôi sao bắt đầu hình thành sau lưng tôi.</p><p id="136">“Đi.”</p><p id="137">Starlight Shower.</p><p id="138"><em>Pí bíp bíp bíp bíp!!</em></p><p id="139">Chúng lao về phía con quái vật trong khi vẽ nên một quỹ đạo như dải Ngân hà đang tuôn chảy.</p><p id="140">&lt;Ngươi nghĩ ta sẽ trúng cùng một chiêu hai lần sao!!!&gt;</p><p id="141"><em>Đoàng!!</em></p><p id="142">Con quái vật không chịu khuất phục dễ dàng, nó đang liên tục khạc ra những quả cầu lửa từ miệng.</p><p id="143"><em>Bùm! Oàng!! Bùm!!</em></p><p id="144">Ba quả cầu lửa va chạm với ánh sao và triệt tiêu lẫn nhau, trong khi một quả cầu lửa bay theo hướng hoàn toàn khác về phía một tòa nhà.</p><p id="145">Ngay khi tôi định nghĩ nó là thứ quái vật ngu ngốc thậm chí còn chẳng biết nhắm bắn sao cho chuẩn, thần giao cách cảm khẩn cấp của Rabbity đã lập tức truyền đến tôi.</p><p id="146">[A-Alice! Ma Pháp Thiếu Nữ kia đang ở trong tòa nhà đó!]</p><p id="147">“...Cậu bảo là cô ta đã ẩn nấp an toàn rồi cơ mà!”</p><p id="148"><em>Chát!</em></p><p id="149">Tôi nhanh chóng cử động chân và nhảy về phía quả cầu lửa đang hướng tới.</p><p id="150">“Đây là lý do tại sao lũ có não lại đặc biệt phiền phức!”</p><p id="151">Tại sao tôi lại phải vội vàng đi cứu Ma Pháp Thiếu Nữ đó à?</p><p id="152">Nó không hẳn là vì tinh thần công lý hay nghĩa vụ gì cả.</p><p id="153">Chỉ là nếu có một Ma Pháp Thiếu Nữ tử nạn trong khi tôi đang thực hiện nhiệm vụ thì danh tiếng của tôi chắc chắn sẽ bị ảnh hưởng theo mà thôi.</p><p id="154">Đó là lý do lớn nhất khiến tôi ghét đám lính mới không thể tự chăm sóc bản thân này.</p><p id="155">‘Alice’ không được phép đầu hàng trước cái ác.</p><p id="156">‘Alice’ không được phép bỏ rơi đồng đội.</p><p id="157">‘Alice’ phải yêu thương mọi người và được mọi người yêu thương.</p><p id="158">Đây là những điều khoản tiên quyết trong bản khế ước tôi đã ký tám năm trước.</p><p id="159">Chừng nào tôi chưa hoàn thành những điều này, tôi sẽ không thể rũ bỏ công việc này.</p><p id="160">Đó chính là bản chất của khế ước.</p><p id="161"><em>Vụt!</em></p><p id="162">Khi cả quả cầu lửa và tôi gần như đã đến tòa nhà nơi Ma Pháp Thiếu Nữ kia được cho là đang ẩn nấp, tôi lờ mờ nhìn thấy một kết giới đã được tạo ra.</p><p id="163">Cái kết giới thảm hại gì thế kia?</p><p id="164">Nếu cô ta hứng quả cầu lửa đó bằng thứ mỏng manh ấy, thì cô ta chắc chắn sẽ chết.</p><p id="165">‘Phiền phức thật sự...!’</p><p id="166">Khi tôi đến gần Ma Pháp Thiếu Nữ đó, tôi nuốt ngược những lời không phù hợp với “Alice” vào trong cổ họng mà thay vào đó là nói những lời mà “Alice” nên nói.</p><p id="167">“Đừng lo lắng! Đã có Alice ở đây với em rồi!”</p><p id="168">Đứng trước kết giới mờ nhạt ngay khi quả cầu lửa đang lao tới, những ngôi sao quen thuộc tụ lại và tỏa sáng.</p><p id="169">Twinkle Defense.</p><p id="170"><em>ĐOÀNG!!</em></p><p id="171">“Ư!”</p><p id="172">“A...”</p><p id="173">Alice là một Ma Pháp Thiếu Nữ mạnh mẽ, nhưng cô nổi tiếng với sức tấn công chứ không phải là phòng thủ.</p><p id="174">Ngay cả cô cũng không thể chặn một quả cầu lửa bắn ra từ một con quái vật hạng B cấp cao mà không chịu chút tổn thương nào khi triển khai kết giới trong tình thế cấp bách.</p><p id="175">“T-Tiền bối Alice?”</p><p id="176">“Đ-Đúng vậy... Alice giờ đã ở đây rồi, em không cần phải lo lắng nữa đâu!”</p><p id="177">Bộ trang phục vốn trắng tinh của tôi hơi bị cháy sém, vương lại vết nhọ đen từ những tổn thương mà tôi không thể ngăn chặn hoàn toàn.</p><p id="178">Cả Ma Pháp Thiếu Nữ phía sau tôi và tôi đều an toàn, nhưng...</p><p id="179">...Cô ta gọi ai là “tiền bối” cơ?</p><p id="180">Tôi chưa bao giờ có đứa hậu bối nào như thế này cả.</p><p id="181">Đặc biệt là không phải một đứa lính mới thậm chí còn chẳng thể tự bảo vệ chính mình.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu/c280831-chuong-01-ma-phap-thieu-nu-alice" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24437-ma-phap-thieu-nunam-muon-nghi-huu" class="dark:text-black col text-center  disabled "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'ecckGQ2gGDS4wyoFTx8xMRBOesWOP0jZARV38c4a';
        var comment_type = 'chapter';
        var comment_typeid = '280918';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'UqKXynBxS6wLgYHvN1YH8yPphGMsfcxbEB613KJa';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24437');
    chapter_id = parseInt('280918');

    readingObject = {
        series_id: series_id,
        series_title: 'Ma Pháp Thiếu Nữ(Nam) Muốn Nghỉ Hưu',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="UqKXynBxS6wLgYHvN1YH8yPphGMsfcxbEB613KJa" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2025 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
