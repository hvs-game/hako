<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Ma Vương Ở Ẩn Và Công Chúa Kiếm - Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (1) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="&quot;Ma Vương! Kết hôn với em đi!&quot; Những vị khách không mời cứ liên tục tìm đến nhằm tiêu diệt Ma Vương. Dưới quá nhiều áp lực, trong một phút cao hứng vì men rượu, Ma Vương đã bắt cóc nàng công chúa tám tuổi Kiiri. Sau nửa tháng chung...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="9wFPkS5J97F7aP4JGK1SO3bdrbTmkKepPUGhmGdl">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285554-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-1">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24523-1ee54abd-3d50-4acb-8877-cf5e5c1e815e.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285544-chuong-0-lich-su-bat-dau-tu-men-ruou"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285567-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-2"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285554-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-1" style="background: url('https://i.hako.vn/ln/series/covers/s24523-1ee54abd-3d50-4acb-8877-cf5e5c1e815e.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem">Ma Vương Ở Ẩn Và Công Chú...</a></h5>
                    <small><i class="fas fa-pen"></i>Biei</small>
                    <small><i class="fas fa-paint-brush"></i>Lpip</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/t35488-tap-1">Tập 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285535-minh-hoa">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Minh họa
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285544-chuong-0-lich-su-bat-dau-tu-men-ruou">
                                                                        Chương 0: Lịch sử bắt đầu từ men rượu
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285554-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-1">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285567-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-2">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285587-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-3">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285624-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-4">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285645-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-5">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (5)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285669-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-6">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (6)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285673-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-7">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (7)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (1)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285554-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-1#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,074 từ - Cập nhật: 
                        <time class="topic-time timeago" title="05-01-2026 09:22:50" datetime="2026-01-05T09:22:50+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (1)</p>
                    <p id="1">Ngẫm lại thì, chuyện đó cũng chẳng phải quá xa xưa.</p>

<p id="2">"Bây giờ, công chúa điện hạ nước Wenz sẽ bắt đầu kể một câu chuyện xưa thú vị nhé."</p>

<p id="3">Chẳng phải là câu chuyện tôi thiết tha muốn nghe, nhưng chưa kịp mở miệng ngăn cản thì cô đã tự tiện bắt đầu.</p>

<p id="4">"Ngày xửa ngày xưa, có một thiếu nữ nọ. Từ nhỏ nàng đã thông minh xinh đẹp, là niềm vui của cha mẹ. Nàng học một hiểu mười, chỉ một điểm là thông suốt, càng lớn nhan sắc càng rực rỡ, phẩm hạnh đoan chính, đi đến đâu cũng được ngợi ca là tấm gương mẫu mực."</p>

<p id="5">"Thiếu nữ nọ" chắc chắn là cô gái đang đứng trước mặt tôi lúc này, người đang không ngừng kể về quá khứ một cách đầy sảng khoái. Cái chuyện xông vào nhà Ma Vương rồi hồn nhiên kể lể chuyện xưa đã là quá quắt lắm rồi, nhưng cái sự tự đánh giá bản thân cao đến mức kinh ngạc kia còn quá quắt hơn gấp bội. Rốt cuộc cô nhóc này có chút tự giác nào không vậy?</p>

<p id="6">"Sở dĩ thiếu nữ ấy nỗ lực trưởng thành xuất sắc đến thế, tất cả chỉ để hiện thực hóa một giấc mơ. Giấc mơ ấy chính là... trở thành cô dâu tuyệt vời xứng đôi vừa lứa với Ma Vương!"</p>

<p id="7">Xin được tóm tắt đến đây thôi. Đầu óc cô thiếu nữ này rõ ràng là không tỉnh táo rồi.</p>

<p id="8">Là một Ma Vương, tôi thật lòng muốn đứng ra khuyên can cô gái có ước mơ làm vợ Ma Vương này. Tôi cảm thấy mệt mỏi rã rời, đưa tay day day trán.</p>

<p id="9">"Con cái tẩu hỏa nhập ma đến mức này mà cha mẹ không nói năng gì sao...!"</p>

<p id="10">"Ưm... khích lệ và cổ vũ chăng?"</p>

<p id="11">Cái gọi là "đằng sau đứa trẻ có vấn đề là bậc phụ huynh có vấn đề" đây sao?</p>

<p id="12">Mà, chuyện đó quá hiển nhiên rồi. Dù tôi cho rằng suy nghĩ của cô có vấn đề, nhưng việc cô kể về quá trình trưởng thành rực rỡ của mình, dù xuất phát từ động cơ sai trái, cũng đồng nghĩa với việc cô vẫn chưa từ bỏ ý định đó, đúng không?</p>

<p id="13">Chẳng lẽ tôi đã lường trước được việc cô bé đó khi đến tuổi này sẽ lớn lên thành một đứa trẻ luôn miệng hét "Em muốn làm cô dâu của Ma Vương!" sao? Tôi còn chẳng dám nghĩ tới... chết tiệt thật.</p>

<p id="14">"Thấm thoát thoi đưa, thiếu nữ nay đã tròn mười tám, nàng tìm đến đây để cầu hôn ngài Ma Vương mà nàng hằng trộm nhớ thầm thương trong mộng!"</p>

<p id="15">Cảnh tượng cha mẹ thiếu nữ vò đầu bứt tai, lên cơn cuồng loạn rồi ngã bệnh như hiện ra mồn một trước mắt tôi.</p>

<p id="16">"Hư hư, thấy sao nào? Có giật mình không?"</p>

<p id="17">Cô, làm tôi giật mình thật đấy.</p>

<p id="18">Giật mình đến mức nào ư? Đến mức tôi ước giá như tất cả chỉ là một giấc mơ. Ha ha.</p>

<p id="19">Nhưng tiếc thay đây là hiện thực. Tự nhéo mình vẫn thấy đau.</p>

<p id="20">Thậm chí đây còn chẳng phải chuyện của người khác. Trong danh sách nhân vật của câu chuyện hoang đường đó có cả bóng dáng tôi.</p>

<p id="21">"Đó là câu chuyện ngày xưa vui vẻ và thú vị do công chúa điện hạ nước Wenz kể! Tèn ten!"</p>

<p id="22">Một câu chuyện ngày xưa chẳng vui vẻ, cũng chẳng thú vị chút nào vừa đi đến hồi kết. Nếu bắt buộc phải phân loại, thì rõ ràng đây là... chuyện ma.</p>

<p id="23">Câu chuyện vừa dứt, tôi cũng cảm thấy cuộc đời mình như sắp chấm dứt tại đây. Thậm chí chẳng còn sức để mà cảm thán, tôi chỉ biết ôm mặt gục đầu xuống.</p>

<p id="24">Tại phòng tiếp khách phủ đầy bụi.</p>

<p id="25">Người đàn ông tóc đen ngồi trên chiếc ghế sofa đơn buông tiếng thở dài thườn thượt, âm thanh não nề như muốn rung chuyển cả mặt đất. Chưa bao giờ người đàn ông này lại phiền muộn và tuyệt vọng như hôm nay. Tuyệt vọng vì bản thân lại bị cuốn vào mớ bòng bong này. Người đàn ông chỉ một lòng tìm cách thoát khỏi tình cảnh hiện tại... phải, chính là tôi đây.</p>

<p id="26">Chết tiệt.</p>

<p id="27">Giá mà ai đó có thể đưa tôi quay về mười năm trước. Nếu được thế, dù có phải đấm ngất cái gã say xỉn nào đó đã bắt cóc công chúa, tôi cũng nhất định phải ngăn chặn sự việc này.</p>

<p id="28">Vào một buổi chiều đầu xuân, khi thế giới bắt đầu tìm lại sắc màu.</p>

<p id="29">Một thiếu nữ sở hữu mái tóc vàng óng và nụ cười rạng rỡ chẳng biết vì sao lại ghé thăm lâu đài của tôi. Lý do thì như đã ghi chép ở trên. Mười năm trước, lời khuyên bâng quơ của tôi về việc thế nào là một người xuất sắc giờ đã tạo nên hiệu ứng cánh bướm, quay ngược lại đập thẳng vào mặt tôi. Ai mà ngờ được cô bé ấy lại trở thành một đứa trẻ có thể thản nhiên nói ra câu "Tương lai con muốn làm vợ Ma Vương!" chứ. Nếu cô con gái lá ngọc cành vàng do chính tay tôi nuôi nấng mà thốt ra câu đó, tôi thề sẽ huy động toàn bộ năng lực để khiến cái gã gọi là Ma Vương kia biến mất hoàn toàn khỏi thế gian này.</p>

<p id="30">Làm ơn biến giùm đi, cái tôi của mười năm về trước.</p>

<p id="31">Tôi khẽ ngẩng đầu, liếc nhìn sang chiếc ghế sofa bên phải.</p>

<p id="32">Nơi đó, thiếu nữ tóc vàng đang ngồi. Dù cô cố làm ra vẻ người lớn, lưng thẳng đờ, ngồi ngay ngắn, nhưng khóe miệng cứ nhếch lên vì không giấu nổi nụ cười, cùng ánh mắt long lanh đến mức khiến người ta đứng ngồi không yên kia vẫn tố cáo rõ mồn một hình ảnh một đứa trẻ không che giấu được nội tâm. Làn da trắng ngần và đôi má ửng hồng vì phấn khích, nhìn thế nào thì so với một phụ nữ, cô giống một thiếu nữ hơn, và dưới góc nhìn chủ quan của tôi, cô chỉ ngang hàng với trẻ sơ sinh. Cùng đẳng cấp với mấy chú cún con không biết sợ là gì, cứ lon ton lại gần vẫy đuôi rối rít.</p>

<p id="33">Bốn mắt nhìn nhau, thiếu nữ mím môi cười, nụ cười như gom hết thảy hạnh phúc trên thế gian này. Nụ cười ngây thơ vô số tội, không chứa một tia ác ý nào khiến tôi lại một lần nữa rơi vào tuyệt vọng.</p>

<p id="34">Rốt cuộc tôi đã làm cái gì với đứa trẻ này thế hả, tôi ơi. Hối hận lần thứ ba.</p>

<p id="35">Tôi thật lòng muốn cai rượu. Quyết tâm lần thứ tư.</p>

<p id="36">Mà, tóm lại thì, chuyện đã đến nước này, dù thế nào cũng phải thuyết phục rồi đưa cô nàng về thôi. Bắt đầu từ việc xưng danh đã. Tôi húng hắng ho khan để làm thanh giọng nói khản đặc, rồi cẩn trọng bắt đầu cuộc đối thoại.</p>

<p id="37">"E hèm... thế... tên là..."</p>

<p id="38">"Kiiri! Kiiri Wenz. Sao thế, mười năm trước em đã nói rồi mà, anh quên rồi sao?"</p>

<p id="39">Như một cô học trò được giáo viên gọi tên, Kiiri bất ngờ giơ tay trả lời. Có lẽ muốn giành thêm quyền nói, vừa mở lời là cô đã liến thoắng không ngừng.</p>

<p id="40">"Cũng phải ha. Vú nuôi cũng không biết từ bao giờ cứ lo bệnh hay quên của mình nặng thêm. Tuổi tác cao rồi thì chuyện đó cũng là lẽ thường tình. Ừm, em hiểu mà. Ma Vương chắc cũng do có tuổi rồi nhỉ. Em không định trở thành một người vợ hẹp hòi đến mức không thông cảm nổi cho chứng hay quên cỏn con này đâu, nên anh đừng lo."</p>

<p id="41">"Ta không lo. Vì ta không có ý định kết hôn với cô."</p>

<p id="42">"Cái gì?! Tại sao?! Rõ ràng mười năm trước đã hứa chắc nịch như đinh đóng cột rồi mà!"</p>

<p id="43">Kiiri như một đứa trẻ dỗi hờn vì mọi chuyện không theo ý mình, nắm chặt hai nắm tay, lắc lên lắc xuống mà gào lên oán trách.</p>

<p id="44">Tôi gãi trán vì tình huống khó xử này, bắt đầu màn thuyết phục kèm theo những tiếng thở dài.</p>

<p id="45">"Kiiri này, ta nói là vì muốn tốt cho cô nên hãy nghe cho kỹ đây. Cô còn nhỏ nên có thể chưa hiểu rõ lắm. Nhưng chuyện trên đời này chia làm hai loại: chuyện khả thi và chuyện bất khả thi. Và chuyện cô muốn làm là chuyện bất khả thi. Cô thử nghĩ xem. Nếu công chúa một nước kết hôn với Ma Vương thì chuyện gì sẽ xảy ra?"</p>

<p id="46">"Hai người sẽ sống hạnh phúc mãi mãi về sau chứ gì."</p>

<p id="47">Tiêu rồi. Cái chủ nghĩa lạc quan như trong truyện cổ tích của thiếu nữ mười tám tuổi khiến tôi thấy thật nực cười. Đặc biệt là ánh mắt tự tin không chút nghi ngờ đó.</p>

<p id="48">"...So với việc đó thì khả năng xảy ra chiến tranh cao hơn đấy."</p>

<p id="49">Bất kể bản thân công chúa có ý định thế nào đi nữa, nhưng hễ nhìn thấy bài báo giật tít "Công chúa kết hôn với Ma Vương", người đời sẽ chỉ nghĩ ngay đến kịch bản Ma Vương đã chọn con đường bắt cóc, giam cầm, uy hiếp rồi cưỡng ép kết hôn mà thôi. Kết quả là, không chỉ đám dũng sĩ nuôi chí giải cứu công chúa, mà cả đồng đội của họ, các đoàn hiệp sĩ, rồi quân sư cấp quốc gia sẽ kéo đến trước cửa nhà ta mỗi ngày để biểu tình thị uy đòi người. Rồi ta sẽ lại bị chứng mất ngủ và áp lực hành hạ, cuối cùng có khi mất sạch lý trí mà gây ra chuyện tày đình lần nữa không biết chừng. Thế là một cuộc chiến tranh quy mô lớn giữa nhân loại và Ma Vương sẽ bùng nổ.</p>

<p id="50">"Cô thuộc thế hệ chưa nếm mùi chiến tranh nên không hiểu đâu. Chiến tranh là thứ tồi tệ vô cùng. Chiến tranh thực sự rất..., nói sao nhỉ..., rất phiền phức."</p>

<p id="51">"Em đúng là không biết về thế hệ chiến tranh, nhưng em biết thừa là hai từ 'chiến tranh' và 'phiền phức' đi đôi với nhau nghe chẳng hợp chút nào."</p>

<p id="52">Kiiri chớp đôi mắt màu hổ phách đáp lời.</p>

<p id="53">Nhìn biểu cảm đó của cô, xem ra nỗ lực thuyết phục chân thành của tôi đã thất bại thảm hại rồi.</p>

<p id="54">"Quan trọng là cha mẹ cô đời nào cho phép cô kết hôn với ta chứ?"</p>

<p id="55">"Không đâu? Em đã được cho phép mới đến đây mà?"</p>

<p id="56">"Cái cô nói không phải là 'cho phép' mà là 'thông báo' thì có."</p>

<p id="57">"Em đã giải thích với họ rằng suốt 10 năm qua em luôn hướng tới lời hứa kết hôn với Ma Vương, chắc họ hiểu mà. Thực tế bao năm qua họ cũng không phản đối rõ ràng. Tuy lúc em thực sự rời lâu đài họ có nổi giận thật... nhưng đó chẳng phải là sự quy luyến của cha mẹ khi tiễn con gái đi sao? Hơn nữa, em nghĩ sự đã rồi thì giờ cha mẹ có phản đối cũng chẳng sao. Hiến pháp nước Wenz quy định từ 18 tuổi thì kết hôn không cần sự đồng ý của người giám hộ."</p>

<p id="58">Nói rồi, Kiiri thản nhiên giơ ngón cái về phía tôi.</p>

<p id="59">"Hứ. Anh nghĩ sao em lại đến đây ngay khi vừa tròn 18 chứ?"</p>

<p id="60">Dù ánh mắt cô nàng ngập tràn mong muốn được khen ngợi vì ý chí kiên định.</p>

<p id="61">"Theo lẽ thường thì chuyện đại sự như kết hôn không thể để cha mẹ đứng ngoài cuộc được đâu!"</p>

<p id="62">Dù Ma Vương mà đi nói chuyện lẽ thường thì nghe hơi nực cười, nhưng hiện tại tôi không còn tâm trí đâu để bận tâm chuyện đó.</p>

<p id="63">Rốt cuộc chuyện gì đã xảy ra với đứa trẻ này vậy. Mười năm trước rõ ràng vẫn còn là một cô bé ngoan ngoãn dễ thương, sao giờ lại lớn lên thành một đứa trẻ khó bảo thế này. Tôi cảm thấy mình hoàn toàn không theo kịp lối tư duy của bọn trẻ thời nay. Nếu là ba trăm năm trước thì đây là những phát ngôn không thể tưởng tượng nổi.</p>

<p id="64">Vậy nên chuyện này là sao đây. Có phải là kết quả của sự kết hợp ngẫu nhiên giữa ba yếu tố: lời chỉ dẫn nông nổi thiếu hiểu biết của tôi, phương pháp nuôi dạy sai lầm của những bậc cha mẹ theo chủ nghĩa buông thả, và một thiếu nữ tự trang bị cho mình những niềm tin hoang đường?</p>

<p id="65">Rốt cuộc trong ba yếu tố đó, lỗi của ai lớn nhất đây. Tôi cầu xin ngàn vạn lần đừng là tôi.</p>

<p id="66">"Nhưng chẳng phải anh đã hứa với em sao? Rằng chỉ cần em trở thành người xuất sắc thì anh sẽ cưới em."</p>

<p id="67">"Đúng, vậy thì nói về điểm đó đi. Rốt cuộc cô xuất sắc ở chỗ nào?"</p>

<p id="68">"Trở thành Đệ Nhất Thiên Hạ đồng nghĩa với việc trở thành người xuất sắc, người nói câu đó chẳng phải là Ma Vương sao."</p>

<p id="69">Vậy rốt cuộc cô đứng nhất thiên hạ ở lĩnh vực nào? Nhan sắc? Thành tích? Tài lực? Hay là cái gan to tày trời và sự ngốc nghếch dám xông vào tuyên bố đòi cưới Ma Vương?</p>

<p id="70">Tuy nhiên, không một đáp án nào tôi dự đoán là chính xác. Câu trả lời mà Kiiri đưa ra cho tôi đang nghệch mặt ngạc nhiên, là một thanh kiếm được dựng nghiêng bên cạnh ghế ngồi.</p>

<p id="71">Tôi tạm thời nhận lấy thứ Kiiri đưa. Nhưng tôi chẳng thể lĩnh hội được ý nghĩa của nó là gì. Dù tôi nhìn Kiiri như muốn tìm lời giải thích, nhưng cô nàng dường như muốn tôi tự đoán, chỉ nhún vai rồi nhìn tôi.</p>

<p id="72">Đầu tiên, thanh kiếm nhẹ hơn tôi tưởng. Độ dài khoảng ba thước, không thuộc loại quá dài, bản kiếm cũng rất hẹp. Chuôi kiếm được trang trí bằng bạc. Nhìn vào trọng lượng và chiều dài thì có vẻ gần với kiếm phương Đông hơn. Chỉ là giữa chuôi kiếm và lưỡi kiếm lại không có phần chắn tay vốn dĩ phải có. Là cố tình lược bỏ, hay làm ra đã như vậy rồi, tôi cũng không rõ.</p>

<p id="73">Tôi cẩn thận rút thanh kiếm ra khỏi vỏ. Chính giữa sống kiếm khắc dòng chữ "Reginas Equila".</p>

<p id="74">"Tương Sát Vương Nữ..."</p>

<p id="75">"Ủa, anh đọc được Cổ ngữ sao?"</p>

<p id="76">Tôi buột miệng đọc lên ý nghĩa của dòng chữ, khiến Kiiri ngạc nhiên hỏi lại.</p>

<p id="77">Nói là đọc được thì cũng không hẳn, nhưng trong số những người chuyên tâm học hỏi của ba trăm năm trước, tìm người không đọc được mới khó. Dù sao ở thời đại đó, đọc được Cổ ngữ chính là thước đo của sự giáo dục.</p>

<p id="78">"Vậy, cái này là gì?"</p>

<p id="79">"Thanh kiếm được ban cho kiếm sĩ Đệ Nhất Thiên Hạ."</p>

<p id="80">"Ha ha, Kiiri. Trêu chọc người lớn là không tốt đâu."</p>

<p id="81">Tôi không nhịn được mà bật cười.</p>

<p id="82">"Dù ta không rành về kiếm, nhưng ta biết cái danh 'Đệ Nhất Thiên Hạ' là không thể tồn tại. Kiếm phương Đông và kiếm phương Tây quá khác biệt, nên việc chọn ra một người đứng nhất là chuyện không tưởng, đúng không?"</p>

<p id="83">"Đúng vậy. Kiếm phương Đông nhanh nhẹn, hoa mỹ nhưng thiếu uy lực hủy diệt. Kiếm phương Tây uy lực mạnh mẽ nhưng chậm chạp và đơn điệu. Hai trường phái bù trừ ưu khuyết cho nhau nên rất khó thống nhất. Cho đến ba năm trước thì đúng là như vậy."</p>

<p id="84">Lần này đến lượt tôi nghiêng đầu thắc mắc. Trước vẻ mặt đầy dấu hỏi của tôi, Kiiri hất cằm đắc ý nói.</p>

<p id="85">"Ba năm trước, xuất hiện một người có thể tự do điều khiển cả kiếm thuật phương Đông lẫn phương Tây, đánh bại toàn bộ các Kiếm Sư của cả hai phái. Nào, câu hỏi đặt ra là. Người đó là ai?"</p>

<p id="86">"...Kiếm Thánh... nào đó chăng?"</p>

<p id="87">"Đó là ai chứ?! Đáp án là Kiiri Wenz! Chính em đây là Kiếm Sư mạnh nhất đại lục hiện nay!"</p>

<p id="88">...Đùa à.</p>

<p id="89">Chỉ riêng việc con gái múa kiếm thôi đã khó hiểu rồi, huống chi là dùng kiếm để trở thành mạnh nhất thế giới? Đúng là chuyện hoang đường. Thời ta còn trẻ thì không thể tưởng tượng nổi chuyện này.</p>

<p id="90">Tuy nhiên, trái ngược với tôi đang ngẩn người ra, Kiiri tiếp tục hào hứng kể bằng giọng sôi nổi.</p>

<p id="91">"Và thanh kiếm được chế tác từ sự hợp tác Đông - Tây đó chính là kiếm của em, 'Tương Sát Vương Nữ'! Mạnh nhất đại lục! Cống phẩm dâng lên chủ nhân của thanh kiếm! Kiệt tác độc nhất vô nhị trên đại lục! Bằng chứng của kẻ mạnh nhất tiền vô cổ nhân hậu vô lai giả! Hội tụ tinh hoa kiếm thuật hai phái, vật liệu tốt nhất hiện có cùng mồ hôi nước mắt của những thợ rèn giỏi nhất, thậm chí cả những bí pháp ma thuật thất truyền, một thứ vũ khí mạnh nhất đúng nghĩa! Xét về giá trị, nó là vô giá chi bảo có thể mua được cả một quốc gia nhỏ!"</p>

<p id="92">"Vừa mở miệng đã nói chuyện tiền nong thì chẳng giống công chúa chút nào...!"</p>

<p id="93">Tôi buộc miệng nói vì cảm thấy có nghĩa vụ phải bắt bẻ. Nhưng ý kiến của tôi dường như chẳng lọt vào tai Kiiri. Kiiri hưng phấn bật dậy khỏi ghế, như nhận được thiên khải, cô dang rộng hai tay hướng lên trời và dõng dạc tuyên bố.</p>

<p id="94">"Trên đời này không thể tồn tại cô dâu nào xuất sắc hơn thế này đâu! Cho nên hãy chọn em! Kết hôn với em đi, Ma Vương!"</p>

<p id="95">"Cô nghĩ điều kiện làm cô dâu là cái quái gì hả!"</p>

<p id="96">Haizz. Bị Kiiri cuốn theo làm tôi cũng hơi phấn khích rồi đấy.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/29902cc6-afcf-446e-8fff-62b938eb8f8d.jpg?t=1747982730" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/16221" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/16221/88df77ba-e124-4669-9aee-bf8635c395da.jpg?t=1747982730" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285544-chuong-0-lich-su-bat-dau-tu-men-ruou" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285567-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-2" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = '9wFPkS5J97F7aP4JGK1SO3bdrbTmkKepPUGhmGdl';
        var comment_type = 'chapter';
        var comment_typeid = '285554';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = '9wFPkS5J97F7aP4JGK1SO3bdrbTmkKepPUGhmGdl';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24523');
    chapter_id = parseInt('285554');

    readingObject = {
        series_id: series_id,
        series_title: 'Ma Vương Ở Ẩn Và Công Chúa Kiếm',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        const text = $(this).text().trim();
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="9wFPkS5J97F7aP4JGK1SO3bdrbTmkKepPUGhmGdl" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
