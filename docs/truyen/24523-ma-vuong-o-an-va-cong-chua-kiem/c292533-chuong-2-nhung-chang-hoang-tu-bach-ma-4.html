<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Ma Vương Ở Ẩn Và Công Chúa Kiếm - Chương 2: Những chàng hoàng tử bạch mã (4) - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="&quot;Ma Vương! Kết hôn với em đi!&quot; Những vị khách không mời cứ liên tục tìm đến nhằm tiêu diệt Ma Vương. Dưới quá nhiều áp lực, trong một phút cao hứng vì men rượu, Ma Vương đã bắt cóc nàng công chúa tám tuổi Kiiri. Sau nửa tháng chung...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="sysc11OgnHkzBHlUtxvV8WfKnNXXd8ZSx7A3qrtb">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292533-chuong-2-nhung-chang-hoang-tu-bach-ma-4">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s24523-1ee54abd-3d50-4acb-8877-cf5e5c1e815e.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=9128bdee617e5eb876ffd418ed3597bf">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" integrity="sha256-BtbhCIbtfeVWGsqxk1vOHEYXS6qcvQvLMZqjtpWUEx8=" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292518-chuong-2-nhung-chang-hoang-tu-bach-ma-3"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292545-chuong-2-nhung-chang-hoang-tu-bach-ma-5"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292533-chuong-2-nhung-chang-hoang-tu-bach-ma-4" style="background: url('https://i.hako.vn/ln/series/covers/s24523-1ee54abd-3d50-4acb-8877-cf5e5c1e815e.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem">Ma Vương Ở Ẩn Và Công Chú...</a></h5>
                    <small><i class="fas fa-pen"></i>Biei</small>
                    <small><i class="fas fa-paint-brush"></i>Lpip</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class="current"><a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/t35488-tap-1">Tập 1</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285535-minh-hoa">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Minh họa
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285544-chuong-0-lich-su-bat-dau-tu-men-ruou">
                                                                        Chương 0: Lịch sử bắt đầu từ men rượu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285554-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-1">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285567-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-2">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285587-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-3">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (3)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285624-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-4">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285645-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-5">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (5)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285669-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-6">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (6)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c285673-chuong-1-chuyen-ta-chua-tung-nghi-toi-o-do-tuoi-cua-co-7">
                                                                        Chương 1: Chuyện ta chưa từng nghĩ tới ở độ tuổi của cô (7)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292501-chuong-2-nhung-chang-hoang-tu-bach-ma-1">
                                                                        Chương 2: Những chàng hoàng tử bạch mã (1)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292508-chuong-2-nhung-chang-hoang-tu-bach-ma-2">
                                                                        Chương 2: Những chàng hoàng tử bạch mã (2)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292518-chuong-2-nhung-chang-hoang-tu-bach-ma-3">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 2: Những chàng hoàng tử bạch mã (3)
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292533-chuong-2-nhung-chang-hoang-tu-bach-ma-4">
                                                                        Chương 2: Những chàng hoàng tử bạch mã (4)
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292545-chuong-2-nhung-chang-hoang-tu-bach-ma-5">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 2: Những chàng hoàng tử bạch mã (5)
                                </a>
                            </li>
                                                    </ul>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Tập 1</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 2: Những chàng hoàng tử bạch mã (4)</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292533-chuong-2-nhung-chang-hoang-tu-bach-ma-4#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 3,000 từ - Cập nhật: 
                        <time class="topic-time timeago" title="18-01-2026 20:18:20" datetime="2026-01-18T20:18:20+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSe3y_bpPb6ADsKAgPWE3o3Jgzzftw8NKkp93_5vUayXLaQICg/viewform" target="_blank">
                        <img src="https://i2.hako.vip/vault/2025final_1.webp" style="width: 700px; height: auto">
                    </a>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 2: Những chàng hoàng tử bạch mã (4)</p>
                    <p id="1">"Không lẽ ngươi làm 'chuyện đó' xong lại ngây thơ nghĩ rằng chẳng ai hay biết gì sao? Đúng là mặt dày vô sỉ. Mà, người thường quả thực không biết được. Dù sao sau sự kiện đó, lệnh phong tỏa tin tức đã được ban bố trên quy mô toàn quốc rồi."</p>

<p id="2">Tôi cứng họng chẳng thốt nên lời.</p>

<p id="3">Cảm giác như ngày tận thế ập đến khi bản thân còn chưa kịp chuẩn bị tâm lý vậy.</p>

<p id="4">"Thế nhưng trong Thần điện vẫn còn lưu lại hồ sơ về ngươi. Chỉ là quyền hạn truy cập thông tin đó rất khắt khe, nên không phải ai trong Thần điện cũng xem được. Chà, tuy Astrea chỉ tình cờ nhìn thấy thôi. Thực tế thì những ghi chép đó hoang đường đến mức khiến người ta nghĩ là bịa đặt. Nào là triệu hồi ác ma, nào là đại thảm sát, toàn những từ ngữ không thể nào lý giải nổi..."</p>

<p id="5">Những từ ngữ kinh hoàng ấy được thốt ra nhẹ bẫng, nghe chẳng khác nào một lời đe dọa rằng: "Ta nắm rõ quá khứ của ngươi trong lòng bàn tay". Và chắc chắn một điều, tôi không thể thốt ra nửa lời biện minh.</p>

<p id="6">"Thế nên khi Gallo nói muốn đi bắt Ma Vương, cõi lòng Astrea đã có chút dao động. Vì tò mò."</p>

<p id="7">"...Tò mò?"</p>

<p id="8">"Phải. Rằng kẻ đã gây ra những chuyện tàn độc đó rốt cuộc mang bộ mặt xấu xí đến nhường nào."</p>

<p id="9">...Tôi đang kinh ngạc cái gì chứ?</p>

<p id="10">Chẳng lẽ tôi nghĩ rằng chỉ mới 300 năm trôi qua là sự kiện ấy đã bị xóa nhòa trong tâm trí người đời rồi sao? Thật sự mặt dày hết chỗ nói. Đến chính tôi còn thấy nực cười.</p>

<p id="11">Vừa buông tiếng thở dài "Haizz" đầy châm biếm, Astrea vừa nói tiếp.</p>

<p id="12">"Tuy nhiên."</p>

<p id="13">Ánh mắt của Astrea.</p>

<p id="14">Đôi mắt đen thẫm chẳng phản chiếu bất cứ thứ gì lại một lần nữa hướng về phía tôi.</p>

<p id="15">Gương mặt đang nhìn tôi ấy lạnh lẽo vô tận, không chút cảm xúc.</p>

<p id="16">"Công chúa có biết không?"</p>

<p id="17">Không biết.</p>

<p id="18">Kiiri chưa từng dò hỏi về quá khứ của tôi. Và tôi sợ em ấy sẽ hỏi. Rằng liệu đứa trẻ thẳng thắn và rạng rỡ ấy có nhìn tôi bằng ánh mắt khinh miệt và định tội tôi hay không... Tôi sợ điều đó.</p>

<p id="19">Phải rồi, Astrea nói đúng.</p>

<p id="20">Tôi chỉ đơn thuần là sợ hãi mà thôi.</p>

<p id="21">Sợ bị Kiiri trách cứ.</p>

<p id="22">"Ngươi, chẳng lẽ đối với Kiiri..."</p>

<p id="23">"Tèn ten...!"</p>

<p id="24">Như tiếng kéo "xoẹt" cắt đứt bầu không khí căng thẳng đến nghẹt thở, cánh cửa tầng hầm đột ngột mở toang. Xuất hiện cùng hiệu ứng âm thanh cường điệu ấy không ai khác chính là Kiiri.</p>

<p id="25">Giật cả mình, cảm giác như tim sắp văng ra ngoài đến nơi. Trái tim đập loạn nhịp, tiếng mạch đập vang vọng cả trong đầu.</p>

<p id="26">Kiiri - người suýt dọa tôi ngất xỉu - vuốt mái tóc dính mồ hôi, nở nụ cười rạng rỡ với tôi.</p>

<p id="27">"Hai người đang làm gì ở đây thế?"</p>

<p id="28">"A, tìm thấy rồi! Tên Ma Vương kia! Ngươi định giở trò gì với Astrea ở cái chốn âm u này hả?!"</p>

<p id="29">Ngay sau lời Kiiri, Gallo cũng xuất hiện. Cô nàng không chỉ nhễ nhại mồ hôi mà gương mặt đỏ bừng vẫn chưa lấy lại được vẻ bình tĩnh.</p>

<p id="30">Giở trò gì ư. Chính xác thì tôi mới là người cảm thấy bị "giở trò" thì có, ban nãy ấy.</p>

<p id="31">Tôi nhìn luân phiên giữa Astrea và Kiiri. Cuộc đối thoại vừa rồi với Astrea vẫn còn xoay mòng mòng trong đầu khiến tôi bối rối.</p>

<p id="32">Thế nhưng sự việc Astrea vừa chất vấn tôi cứ như thể là giả vậy, cô ả đứng dậy rời khỏi chỗ ngồi với vẻ mặt thờ ơ như mọi khi.</p>

<p id="33">"Sao nào, hai người đã làm gì? Nói chuyện gì thế?"</p>

<p id="34">Kiiri nửa đùa nửa thật nhìn tôi và Astrea truy hỏi. Dù muốn nói là chẳng có chuyện gì đặc biệt, nhưng tôi không biết phải trưng ra bộ mặt nào để nói dối, nên đành ngậm chặt miệng.</p>

<p id="35">Astrea đã đi đến cửa từ lúc nào, bỗng quay đầu nhìn bộ dạng đó của tôi mà bật cười khúc khích.</p>

<p id="36">"Chỉ là nói mấy chuyện bí mật thôi. Đúng không, Ma Vương?"</p>

<p id="37">— Cái gì thế kia. Là định giữ bí mật giúp tôi sao? Dịu dàng đến mức khiến tôi sắp rơi nước mắt rồi đây này.</p>

<p id="38">Dù nghĩ vậy, nhưng ở lập trường của tôi thì làm gì có tư cách mỉa mai thái độ của Astrea chứ.</p>

<p id="39">Tôi chạm mắt với Kiiri. Dù Kiiri nhìn tôi bằng ánh mắt đầy nghi hoặc và lo lắng, rồi nhún vai như thể chờ đợi câu trả lời...</p>

<p id="40">Nhưng tôi đã quay mặt đi, lảng tránh ánh nhìn của em ấy.</p>

<p id="41">***</p>

<p id="42">Kiiri Wenz là một đứa trẻ đáng yêu.</p>

<p id="43">Có ai phản đối ý kiến này không? Em ấy rực rỡ, tươi sáng và tích cực tựa như ánh mặt trời. Ngoại hình xinh đẹp, năng lực cũng xuất chúng. Em lớn lên trong tình yêu thương của bao người, và sau này chắc chắn cũng sẽ như vậy.</p>

<p id="44">Trong hàng vạn lựa chọn được ban tặng cho cuộc đời Kiiri Wenz, em có thể chọn bất cứ thứ gì mình muốn, bởi em sở hữu tất cả.</p>

<p id="45">Thế nhưng trong những lựa chọn đó không có chuyện "kết hôn với Ma Vương". Nhất định là không được có.</p>

<p id="46">Không phải xuất phát từ trái tim. Mà là từ thường thức.</p>

<p id="47">Dẫu chỉ xét đến trái tim thất thường và tùy hứng của một thiếu nữ 18 tuổi, thì câu trả lời cũng rất đơn giản. Nào, lựa chọn do chính em quyết định thì không được hối hận đâu nhé. Không có thời gian suy nghĩ lại đâu. Hãy tiếp tục kết hôn với tôi đi. Việc tôi biết rõ lựa chọn ấy rồi sẽ đổ vỡ mà vẫn cố chấp hùa theo, chẳng khác nào là lừa dối cả.</p>

<p id="48">"Chẳng phải ngươi thích Công chúa sao?"</p>

<p id="49">"Chuyện đó ấy à..., còn chẳng đáng để bận tâm."</p>

<p id="50">Trong thư phòng đã tắt đèn.</p>

<p id="51">Tôi ngồi dựa lưng vào giá sách, nương theo ánh nến leo lét, lơ đãng lật giở cuốn sách ma pháp, vừa hồi tưởng lại cuộc trò chuyện ban ngày với Astrea vừa lẩm bẩm một mình. Gương mặt trách móc của Astrea cứ chập chờn trước mắt khiến tôi trằn trọc không sao ngủ được. Thêm vào đó là nỗi lo sợ Astrea có thể tố cáo sự kiện 300 năm trước với Kiiri bất cứ lúc nào...</p>

<p id="52">"Chắc chắn là em ấy sẽ khinh miệt mình thôi."</p>

<p id="53">"Ai sẽ khinh miệt Ma Vương cơ?"</p>

<p id="54">"Ối, giật cả mình...!"</p>

<p id="55">Giọng nói vang lên ngay bên tai khiến tôi rùng mình. Da gà nổi lên rần rần trong tích tắc. Tôi vội vàng ngoảnh đầu lại, chẳng biết từ lúc nào, Kiiri đang ngồi xổm ngay bên cạnh nhìn tôi. Vừa chạm mắt, em liền mỉm cười.</p>

<p id="56">"Sao, sao thế hả cô nương. Tiếng mở cửa cũng không nghe thấy là sao."</p>

<p id="57">"Ái chà, xin lỗi nhé. Em lỡ tay xóa bỏ hiện diện theo thói quen."</p>

<p id="58">Xóa bỏ hiện diện cái gì chứ, rốt cuộc bấy lâu nay em được giáo dục kiểu gì để lớn lên thế hả.</p>

<p id="59">"Muộn thế này rồi còn mò vào thư phòng làm gì?"</p>

<p id="60">"Em đi tìm Ma Vương khắp nơi đấy chứ bộ? Còn Ma Vương thì sao, làm gì ở đây thế?"</p>

<p id="61">Tôi im lặng chỉ vào cuốn sách trên tay thay cho câu trả lời. Kiiri có vẻ không hài lòng lắm, khẽ nhíu mày "Hưm" một tiếng.</p>

<p id="62">"Đọc sách ở chỗ tối thế này hại mắt lắm đấy."</p>

<p id="63">"Ta là Ma Vương nên không sao."</p>

<p id="64">"Ơ, thật á?"</p>

<p id="65">"Có chuyện đó được chắc."</p>

<p id="66">Phản ứng tin sái cổ đầy ngây thơ của Kiiri khiến tôi chậc lưỡi. Kiiri tỏ vẻ thất vọng thật sự, kéo dài giọng "Hứ, gì chứ~" rồi đứng dậy.</p>

<p id="67">Kiiri đưa ngón tay lướt trên gáy sách như đang xem xét tựa đề những cuốn sách xếp trên giá. Tôi ngước lên, thẫn thờ nhìn bóng lưng em. Khoảng cách giữa các kệ sách rất hẹp, nên chỉ cần Kiiri khẽ cử động, sắc vàng óng ả ấy lại chao động liên hồi trong tầm mắt tôi.</p>

<p id="68">Đứa trẻ ấy khinh miệt tôi. Thất vọng về quá khứ của tôi. Và trở nên căm ghét tôi.</p>

<p id="69">Vậy thì tôi... liệu có lại rơi vào tuyệt vọng lần nữa chăng?</p>

<p id="70">"Toàn là sách cũ thôi nhỉ."</p>

<p id="71">"Thì suốt 300 năm qua ta có ra khỏi thành đâu."</p>

<p id="72">"Lại còn toàn là sách ma pháp nữa chứ. Chẳng lẽ không có cuốn nào em đọc được sao?"</p>

<p id="73">"Em muốn đọc sách à?"</p>

<p id="74">"Ma Vương ở một mình không thấy buồn chán sao?"</p>

<p id="75">Kiiri cúi xuống nhìn tôi, bật cười khúc khích. Chẳng biết vừa rồi là ai còn càm ràm chuyện đọc sách trong bóng tối không tốt cho mắt nữa.</p>

<p id="76">Tôi vô thức đưa mắt nhìn quanh thư phòng. Trên những giá sách xếp san sát nhau tuy có đủ loại sách, nhưng phần lớn đều là sách ma pháp tôi mua về sưu tầm theo sở thích hoặc tài liệu về cấu trúc thức do tôi tự viết, quả thực chẳng nghĩ ra cuốn nào có thể giới thiệu cho Kiiri. Ngay lúc tôi định thu lại ánh nhìn, thì ở ngay phía trước, tại ngăn dưới cùng của kệ sách nơi Kiiri đang đứng, những gáy sách được xếp gọn gàng lọt vào tầm mắt tôi. So với những cuốn khác, gáy sách của chúng hẹp hơn một chút, màu sắc cũng sặc sỡ hơn.</p>

<p id="77">"Có đây này. Cuốn này hợp với em lắm."</p>

<p id="78">Tôi cười khẩy, đưa ngón tay chỉ về phía đó. Kiiri lúc này mới nhận ra sự hiện diện của chúng. Em chậm rãi đánh vần từng chữ trên gáy sách, rồi thốt lên một tiếng "Hả?!" đầy bất mãn.</p>

<p id="79">"Giờ này mà còn giới thiệu truyện cổ tích cho người ta hả?!"</p>

<p id="80">"Sao thế? Ta thấy hợp với em lắm mà."</p>

<p id="81">"Em là người lớn rồi đấy nhé?! Hứ!"</p>

<p id="82">Miệng thì giận dỗi đùng đùng là thế, nhưng tay Kiiri vẫn nhanh nhẹn rút đại một cuốn truyện cổ tích ra, rồi ngồi xuống tại chỗ. Cuốn sách Kiiri rút ra có tựa đề là "Bạch Tuyết". Dù tôi chưa đọc hết đống truyện cổ tích trong thư phòng này, nhưng nội dung câu chuyện đó thì tôi cũng biết.</p>

<p id="83">Chúng tôi ngồi đối diện nhau giữa lối đi chật hẹp bao quanh bởi những giá sách. Kiiri vừa ngồi xuống đã lầm bầm gì đó rồi lật mở trang đầu tiên.</p>

<p id="84">Tôi tựa đầu vào giá sách, thẫn thờ ngắm nhìn Kiiri. Ánh nến lung linh nhảy múa in những vệt bóng loang lổ lên gò má trắng ngần của em. Mái tóc vàng óng ả đổ xuống như suối, nay lại vương chút sắc đỏ của ánh lửa. Chẳng biết người vừa lầm bầm khi nãy là ai, giờ đây dáng vẻ chăm chú vùi đầu vào trang sách của Kiiri đẹp đến mức khiến người ta cảm thấy như chẳng thuộc về thực tại. E rằng bất cứ ai nhìn thấy cảnh này cũng sẽ nghĩ như vậy thôi.</p>

<p id="85">Phải rồi. Bất cứ ai, ngoại trừ tôi.</p>

<p id="86">"...Đọc xong cuốn đó mà em ngộ ra được điều gì thì tốt biết mấy."</p>

<p id="87">"Ý anh là sao?"</p>

<p id="88">Nghe tiếng tôi lẩm bẩm, Kiiri ngước mắt lên nhìn.</p>

<p id="89">"Rằng em cũng mau chóng gặp được chàng hoàng tử bạch mã rồi sống một cuộc đời hạnh phúc đi, ý ta không phải thế. Nhưng dẫu sao dạo gần đây cũng có lắm kẻ sẵn sàng đánh cược tính mạng tìm đến đây để giải cứu em, nên ta nghĩ nếu có gã nào kha khá thì em đi theo hắn cũng không tệ đâu."</p>

<p id="90">"Thứ chúng khao khát chẳng phải sự bình an hay trái tim em. Mà là quyền lực và tiền tài."</p>

<p id="91">Kiiri dứt khoát đáp lời.</p>

<p id="92">"Ma Vương này, anh biết không? Trong truyện cổ tích cũng có những quy ước ngầm giống như hội họa vậy, thế nên không có từ ngữ nào được sử dụng tùy tiện đâu. Tuy được tô vẽ hào nhoáng, nhưng nếu biết rõ sự thật và nhìn nhận kỹ càng, thì nội dung của nó cũng chẳng hề chán đời đến thế."</p>

<p id="93">Kiiri lại cúi xuống nhìn trang sách, tiếp tục nói.</p>

<p id="94">"Tại sao cứ phải là hoàng tử bạch mã? Vì bạch mã là giống ngựa ưu tú chỉ có được qua phối giống chọn lọc và nhân giống trội. Tức là, biểu tượng cho gia thế giàu có và năng lực của người đàn ông. Chẳng phải tự dưng mà các nàng công chúa lại trúng tiếng sét ái tình với hoàng tử bạch mã đâu. Mà là vì họ cần một phò mã hùng mạnh có thể tạo dựng nền tảng ủng hộ cho mình, nên mới phải lòng hoàng tử bạch mã đấy."</p>

<p id="95">"Em định nói về bản chất dung tục của các nàng công chúa sao?"</p>

<p id="96">"Không phải vậy. Chẳng phải các chàng hoàng tử cũng yêu công chúa ngay từ cái nhìn đầu tiên sao? Một hoàng tử lang thang không có lấy một tùy tùng đi theo, đồng nghĩa với những gã thứ nam trở xuống đã bị gạt ra khỏi quyền thừa kế của gia tộc. Thế nhưng họ lại mang dã tâm kết hôn với công chúa để đoạt lại quyền lực. Giống hệt như đám đàn ông gào mồm đòi cứu em mà tìm đến đây vậy."</p>

<p id="97">Kiiri nở nụ cười pha chút cay đắng, tay lật sang trang mới. Trang sách cũ kỹ vang lên tiếng sột soạt như sắp vỡ vụn.</p>

<p id="98">"Kết cục cũng chỉ là câu chuyện chính trị thôi sao. Mà, nói là câu chuyện về bản năng cũng được."</p>

<p id="99">"Bản năng?"</p>

<p id="100">"Kiểu như bản năng sinh học muốn chiếm hữu những gen ưu tú ấy."</p>

<p id="101">Một câu chuyện khá là thực dụng và bi quan. Nhưng cũng rất thực tế.</p>

<p id="102">"Vậy còn em thì sao? Chẳng phải một công chúa như em cũng cần một chàng hoàng tử bạch mã sao?"</p>

<p id="103">Tôi cười khổ hỏi lại, Kiiri liền nghiêng đầu, nở nụ cười rạng rỡ.</p>

<p id="104">"Hửm? Tại sao chứ? Em đang định rước vị ma pháp sư lợi hại nhất thế gian này về làm phò mã đấy nhé?"</p>

<p id="105">"Phải là tên đại ác nhân bị coi là kẻ thù của cả thế giới chứ?"</p>

<p id="106">Trên đời này làm gì có thần dân nào lại đi ủng hộ công chúa của mình rước Ma Vương về làm phò mã cơ chứ. Đến cả cô nàng fan cuồng luôn nghe lời em răm rắp kia cũng sẽ nhảy dựng lên phản đối cho mà xem.</p>

<p id="107">Trong số những kẻ đến giải cứu, nếu có gã nào gia thế tạm ổn, mặt mũi sáng sủa, tính cách tốt bụng, thì giả vờ thua cuộc rồi đi theo hắn chẳng phải cũng không tệ sao. Nghĩ kỹ thì đó mới là "hạnh phúc của công chúa điện hạ". So với việc kết hôn với Ma Vương, đó mới là con đường trải đầy hoa hồng, là hành động thuận theo lẽ thường, và là sự lựa chọn mang lại lợi ích chung cho tất cả.</p>

<p id="108">Thế nhưng ánh mắt Kiiri không hề dao động, em nhìn thẳng vào tôi như thể tuyên bố:</p>

<p id="109">"Đối với em, chẳng phải đã có Ma Vương Điện hạ bảo vệ em khỏi tay lũ hoàng tử bạch mã đó rồi sao?"</p>

<p id="110">Cách suy nghĩ thốt ra từ miệng thiếu nữ vừa nói không ngừng về những lý giải đầy trần tục về truyện cổ tích, lại chìm đắm trong mộng mơ và lãng mạn đến mức khó tin.</p>

<p id="111">Không có chuyện đó đâu. Đừng nằm mơ nữa. Chẳng có câu chuyện cổ tích nào mà công chúa kết hôn với Ma Vương lại được hạnh phúc cả.</p>

<p id="112">Dù những lời ấy đã chực trào nơi cổ họng.</p>

<p id="113">Nhưng rốt cuộc, tôi lại chẳng thể thốt nên lời.</p>

<p id="114">***</p>

<p id="115">Ngôi nhà ấy nằm ở rìa ngôi làng bên kia ngọn đồi.</p>

<p id="116">Đối với kẻ xứ lạ, ngôi nhà đó là chốn dung thân, còn ngôi làng đó là quê hương. Dù từ "kẻ xứ lạ" nghe thật mâu thuẫn với hai chữ "quê hương", nhưng ngoài nơi đó ra, kẻ xứ lạ chẳng còn chốn nào để quay về nữa.</p>

<p id="117">Tất nhiên, kẻ xứ lạ không phải ngay từ đầu đã là kẻ xứ lạ. Trước khi chuyển đến ngôi làng ấy, kẻ xứ lạ từng có dinh thự to lớn bề thế hơn, có địa vị đàng hoàng, có tiền tài tiêu xài không hết và danh vọng khó lòng phai mờ. Xung quanh hắn luôn tràn ngập người vây quanh. Họ luôn cầu xin kẻ xứ lạ điều gì đó, và kẻ xứ lạ coi việc đáp lại những lời thỉnh cầu ấy là niềm vui sống của đời mình.</p>

<p id="118">Thế nhưng, kẻ xứ lạ rốt cuộc vẫn trở thành "kẻ xứ lạ".</p>

<p id="119">Bởi vì chẳng có ai mong muốn hắn sống sót.</p>

<p id="120">Bởi vì ai cũng mong hắn chết đi, suy yếu, và rơi xuống đáy vực thảm hại.</p>

<p id="121">Dẫu vậy, hắn vẫn tin vào con người. Có lẽ chỉ là hắn muốn tin mà thôi, nhưng hắn nghĩ rằng chỉ cần có mười người vui mừng vì sự tồn tại của hắn là đủ. Không có mười người thì năm người, không được nữa thì ba người, rồi cùng lắm là một người, đúng vậy, chỉ cần một người thôi.</p>

<p id="122">Nhưng rốt cuộc, chẳng có lấy một ai.</p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/f162c340-e615-453e-96f2-ea60f39f3592.jpg?t=1756572253" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/12377" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/12377/7b4a9212-81a5-436f-bb19-1f0ea545eb5c.jpg?t=1756572253" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292518-chuong-2-nhung-chang-hoang-tu-bach-ma-3" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/24523-ma-vuong-o-an-va-cong-chua-kiem/c292545-chuong-2-nhung-chang-hoang-tu-bach-ma-5" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'sysc11OgnHkzBHlUtxvV8WfKnNXXd8ZSx7A3qrtb';
        var comment_type = 'chapter';
        var comment_typeid = '292533';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'sysc11OgnHkzBHlUtxvV8WfKnNXXd8ZSx7A3qrtb';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('24523');
    chapter_id = parseInt('292533');

    readingObject = {
        series_id: series_id,
        series_title: 'Ma Vương Ở Ẩn Và Công Chúa Kiếm',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();
</script>



    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="sysc11OgnHkzBHlUtxvV8WfKnNXXd8ZSx7A3qrtb" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div></body>
</html>
