<!DOCTYPE html>
<html lang="vi" class="light">
<head>
    <meta charset="utf-8">
    
    <title>Đọc Đính ước với đối thủ cũ, chúng tôi trở thành cặp đôi mạnh nhất - Chương 2.1 - Cổng Light Novel - Đọc Light Novel</title>

    <meta name="description" content="Reid, anh hùng trẻ tuổi với năng lực thể chất vô song. Elria, hiền nhân xinh đẹp với năng lực ma pháp không ai sánh bằng. Từ hai quốc gia đối địch, hai người chiến đấu với nhau như kỳ phùng địch thủ, nhưng câu chuyện kết thúc với cái...">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="WZuXhYrNpEtL1VRZWnYoi5xahtsHgUNcPsv637KW">
    <meta name="logged-in" content="0">
    <meta property="fb:app_id" content="1864643850436909">

    <link rel="canonical" href="https://docln.net/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308465-chuong-21">
    <meta property="og:image" content="https://i.hako.vn/ln/series/covers/s14866-cd7417b6-bee2-43f5-8ddd-b30caa73071b.jpg">


<style type="text/css">@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Lora;font-style:normal;font-weight:400;src:url(/cf-fonts/v/lora/5.0.11/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Merriweather;font-style:normal;font-weight:400;src:url(/cf-fonts/s/merriweather/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Noto Sans;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans/5.0.18/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Nunito;font-style:normal;font-weight:400;src:url(/cf-fonts/v/nunito/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}</style>
    <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <link rel="preconnect" href="https://www.google-analytics.com">

    <link rel="shortcut icon" href="/img/favicon.png?v=3">
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon.png?v=3">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png?v=3">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png?v=3">

    <link rel="stylesheet" href="/css/interface.css?id=300c3109a58d319c9bb94c8585835c77">
    <link rel="stylesheet" href="/css/tailwind.css?id=c044c63e744fb1723a7d067aa1473af1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css" crossorigin="anonymous" />
            
    
    <script src="/scripts/plugins.js?id=b612d946b32459430eed3066ed15adf2"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34864968-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
      gtag('config', 'UA-34864968-3');
    </script>
</head>

<body>
	
    <div x-data="{ open: Cookies.get('globalwarning2') === undefined ? true : false }">
    <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4" x-show="open" style="display: none">
        <div class="flex">
            <div class="shrink-0">
                <button x-on:click="open = false; Cookies.set('globalwarning2', false, { expires: 0.5 })" type="button" class="inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50">
                    <span class="sr-only">Dismiss</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                    <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                    </svg>
                </button>
            </div>
            <div class="ml-3 font-bold">
                <p class="text-sm text-yellow-700">
                Nếu không thể <a class="font-medium text-blue-700" href="/thao-luan/2898-ten-mien-da-bi-chan">truy cập trang web</a> xin vui lòng sử dụng DNS 
                <a class="font-medium text-blue-700" href="https://www.google.com/search?q=c%C3%A1ch+c%C3%A0i+dns+1.1.1.1" target="_blank">1.1.1.1</a> hoặc <a class="font-medium text-blue-700" href="https://docln.sbs" target="_blank">docln.sbs</a>
                
                </p>
                <p>
                    <p class="text-sm text-orange-700">Hiện đang đứt cáp Internet APG, kết nối có thể chậm hoặc rất chậm. Dùng VPN không chắc có hiệu quả.</p>
                </p>
            </div>

        </div>
    </div>
</div>



	<style>
    body {
        background: inherit;
    }

    #footer {
        display: none;
    }
    
    .current-reading {
        background-color: rgba(189, 224, 254, 0.3);
        border-left: 5px solid #007bff;
        padding-left: 10px;
        transition: background-color 0.3s ease;
    }
</style>


<main id="mainpart" class="reading-page style-4">
    <section id="rd-side_icon" class="none force-block-l" aria-hidden="true">
                <a class="rd_sd-button_item rd_top-left" href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308464-chuong-14"><i class="fas fa-backward"></i></a>
        
        <a class="rd_sd-button_item" href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon"><i class="fas fa-home"></i></a>     
        <a id="rd-setting_icon" data-affect="#" class="rd_sd-button_item"><i class="fas fa-font"></i></a>
        <a id="rd-tts_icon" class="rd_sd-button_item"><i class="fas fa-volume-up"></i></a>
        <a id="rd-info_icon" data-affect="#rd_sidebar.chapters" class="rd_sd-button_item"><i class="fas fa-info"></i></a>
        <a id="rd-bookmark_icon" data-affect="#rd_sidebar.bookmarks" class="rd_sd-button_item"><i class="fas fa-bookmark"></i></a>

        
                <a class="rd_sd-button_item rd_top-right" href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308466-chuong-22"><i class="fas fa-forward"></i></a>
            </section>    
    
    <section id="chapters" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <header class="rd_sidebar-header clear">
                <a class="img" href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308465-chuong-21" style="background: url('https://i.hako.vn/ln/series/covers/s14866-cd7417b6-bee2-43f5-8ddd-b30caa73071b.jpg') no-repeat"></a> 
                <div class="rd_sidebar-name">                    
                    <h5><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon">Đính ước với đối thủ cũ,...</a></h5>
                    <small><i class="fas fa-pen"></i>Fujiki Washiro</small>
                    <small><i class="fas fa-paint-brush"></i>Heirō</small>                
                </div>
            </header>

            <ul id="chap_list" class="unstyled">
                                                            <li class=""><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c111931-minh-hoa">Volume 1 [ĐÃ HOÀN THÀNH]</a></li>
                                        
                                                            <li class=""><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c112055-minh-hoa">Volume 2 [ĐÃ HOÀN THÀNH]</a></li>
                                        
                                                            <li class=""><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c112530-minh-hoa">Volume 3 [ĐÃ HOÀN THÀNH]</a></li>
                                        
                                                            <li class=""><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c118434-chuong-01">Volume 4 [ĐÃ HOÀN THÀNH]</a></li>
                                        
                                                            <li class=""><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c132728-minh-hoa">Volume 5 [ĐÃ HOÀN THÀNH]</a></li>
                                        
                                                            <li class="current"><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/t28716-volume-6">Volume 6 [ĐÃ HOÀN THÀNH]</a></li>
                        <ul class="sub-chap_list unstyled">
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c163791-minh-hoa">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Minh hoạ
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308459-mo-dau">
                                                                        Mở đầu
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308460-chuong-11">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1.1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308462-chuong-12">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 1.2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308463-chuong-13">
                                                                        Chương 1.3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308464-chuong-14">
                                                                        Chương 1.4
                                </a>
                            </li>
                                                        <li  class="current" >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308465-chuong-21">
                                                                        Chương 2.1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308466-chuong-22">
                                                                        Chương 2.2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308467-chuong-23">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 2.3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308468-chuong-24">
                                                                        Chương 2.4
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308469-chuong-25">
                                                                        Chương 2.5
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308470-chuong-31">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 3.1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308471-chuong-32">
                                                                        Chương 3.2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308472-chuong-33">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 3.3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308473-chuong-34">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 3.4
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308474-chuong-35">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 3.5
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308475-chuong-41">
                                                                        Chương 4.1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308476-chuong-42">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 4.2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308477-chuong-43">
                                                                        Chương 4.3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308478-chuong-44">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 4.4
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308479-chuong-51">
                                                                        Chương 5.1
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308480-chuong-52">
                                                                        Chương 5.2
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308481-chuong-53">
                                                                            <i class="fas fa-picture-o" aria-hidden="true" title="Có chứa ảnh"></i>
                                                                        Chương 5.3
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308482-chuong-54">
                                                                        Chương 5.4
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308483-phan-ket">
                                                                        Phần kết
                                </a>
                            </li>
                                                        <li >
                                <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308484-loi-bat">
                                                                        Lời bạt
                                </a>
                            </li>
                                                    </ul>
                                        
                                                            <li class=""><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c261742-minh-hoa">Volume 7</a></li>
                                        
                                                            <li class=""><a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c114020-bonus-vol-01">Bonus Story</a></li>
                                        
                                        
            </ul>
        </main>
        <div class="black-click"></div>
    </section>
    
    <section id="bookmarks" class="rd_sidebar rdtoggle" aria-hidden="true">
        <main class="rdtoggle_body">
            <div class="rd_sidebar-header">
                <h2 class="rd_s-name"><i class="fas fa-bookmark"></i><a href="/bookmark" style="color: white;"> Bookmarks</a></h2>
            </div>
            <ul id="bookmarks_list" class="unstyled">
                                            <li>Bạn phải đăng nhập để sử dụng bookmark</li>
                                        </ul>
        </main>
        <div class="black-click"></div>
    </section>

    <section id="setting" class="rdtoggle" aria-hidden="true">
        <section class="re_set-in basic-section clear rdtoggle_body">
        <header class="sect-header"><span class="sect-title">Tùy chỉnh</span></header>
            <main class="sect-body">
                <div class="set-list set-color clear">
                    <label class="font-bold">Màu nền</label>
                    <div class="set-input clear justify-center">
                        <span data-color="#ffffff" data-id="0" style="background-color: #ffffff"></span>
                        <span data-color="#e6f0e6" data-id="1" style="background-color: #e6f0e6"></span>
                        <span data-color="#e3f5fa" data-id="2" style="background-color: #e3f5fa"></span>
                        <span data-color="#f6f4ec" data-id="3" style="background-color: #f6f4ec"></span>
                        <span data-color="#eae4d3" data-id="4" style="background-color: #eae4d3"></span>
                        <span data-color="#f5e9ef" data-id="5" style="background-color: #f5e9ef"></span>
                        <span data-color="#222222" data-id="6" style="background-color: #222222"></span>
                        <span data-color="#000000" data-id="7" style="background-color: #000000"></span>
                    </div>
                </div>
                <div class="set-list set-font-family clear">
                    <label class="font-bold">Font chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <select>
                            <option>Times New Roman</option>
                            <option>Merriweather</option>
                            <option>Lora</option>
                            <option>Roboto</option>
                            <option>Noto Sans</option>
                            <option>Nunito</option>
                        </select>
                    </div>
                </div>
                <div class="set-list set-font clear">
                    <label class="font-bold">Kích cỡ chữ</label>
                    <div class="set-slide set-input justify-center">    
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="16px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-margin clear">
                    <label class="font-bold">Bản lề</label>
                    <div class="set-slide set-input justify-center">
                        <span class="set-slide_button set-smaller"><i class="fas fa-chevron-left"></i></span>
                        <input class="set-slide_input" disabled="" value="20px" type="text">
                        <span class="set-bigger set-slide_button"><i class="fas fa-chevron-right"></i></span>
                    </div>
                </div>
                <div class="set-list set-text-align clear">
                    <label class="font-bold">Kiểu căn chỉnh</label>
                    <div class="set-input clear justify-center font-medium text-2xl flex flex-row gap-10">
                        <span data-align="text-left" class="p-1"><i class="fas fa-align-left"></i></span>
                        <span data-align="text-center" class="p-1"><i class="fas fa-align-center"></i></span>
                        <span data-align="text-right" class="p-1"><i class="fas fa-align-right"></i></span>
                        <span data-align="text-justify" class="p-1"><i class="fas fa-align-justify"></i></span>
                    </div>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>

    <section id="tts-panel" class="rdtoggle" aria-hidden="true">
        <section class="tts-settings basic-section clear rdtoggle_body">
            <header class="sect-header"><span class="sect-title">Text-to-Speech</span></header>
            <main class="sect-body">
                <div class="set-list clear" style="color: red; font-size: 14px; margin-bottom: 20px">
                    Đây là chức năng đang thử nghiệm, chi tiết xem tại <a href="/thao-luan/3305-chuc-nang-doc" style="color: blue">Link</a>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Giọng đọc</label>
                    <select id="tts-voice-select" class="w-full p-2 border rounded bg-white dark:bg-gray-800 text-sm dark:border-gray-600"></select>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Tốc độ</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-rate" min="0.1" max="3" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-rate-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="set-list clear">
                    <label class="font-bold block mb-2">Độ cao (Pitch)</label>
                    <div class="flex items-center space-x-2">
                        <input type="range" id="tts-pitch" min="0" max="2" step="0.1" value="1" class="flex-1 w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 dark:bg-gray-700 dark:accent-blue-400">
                        <span id="tts-pitch-value" class="text-sm font-medium min-w-[3rem]">1.0</span>
                    </div>
                </div>
                <div class="flex gap-2 pt-4">
                    <button id="tts-play-btn" class="flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Phát</button>
                    <button id="tts-pause-btn" class="flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Tạm dừng</button>
                    <button id="tts-stop-btn" class="flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md">Dừng</button>
                </div>
            </main>
        </section>
        <div class="black-click"></div>
    </section>
    
    <div class="container">
        <div class="row">
            <div class="reading-content col-12 col-lg-10 offset-lg-1" style="word-wrap: break-word;">
                <div id="bookmark_top" class="block d-lg-none"><i class="fas fa-bookmark"></i></div>
                <span class="save_bookmark" style="position: absolute; top: 9999px; display: none"><i class="fas fa-bookmark"></i></span>
                
                
                
                <div class="title-top" style="padding-top: 20px">
                    <h2 class="title-item text-xl font-bold" align="center">Volume 6 [ĐÃ HOÀN THÀNH]</h2>
                    <h4 class="title-item text-base font-bold" align="center">Chương 2.1</h4>
                    <h6 class="title-item font-bold" align="center" aria-hidden="true">
                        <a href="https://docln.net/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308465-chuong-21#chapter-comments" style="text-decoration: underline">0 Bình luận</a> -
                        Độ dài: 2,167 từ - Cập nhật: 
                        <time class="topic-time timeago" title="10-02-2026 00:59:59" datetime="2026-02-10T00:59:59+07:00"></time>                    </h6>
                </div>

                <div style="text-align: center; margin: 20px auto -20px auto;">
                                                        </div>

                <div class="pt-6 mb-6 mx-auto max-w-4xl" x-data="{ open: Cookies.get('affiliation_popup_closed2') === undefined }" x-cloak>
                    <div id="affiliation-popup" x-show="open" style="display: none" class="bg-slate-900 rounded-xl overflow-hidden shadow-lg border !border-slate-800">
                        <div class="p-4 flex flex-col md:flex-row items-center gap-4">
                            <button x-on:click="open = false; Cookies.set('affiliation_popup_closed2', 'true', { expires: 0.5 })" class="text-gray-400 hover:text-white transition-colors p-2" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                            
                            <div class="flex-shrink-0">
                                <img src="https://i2.hako.vip/vault/992471336465223711.webp" alt="Pepe" class="w-16 h-16 rounded-md object-cover">
                            </div>

                            <div class="flex-grow text-center md:text-left">
                                <p class="text-white text-sm md:text-base font-medium">
                                    Click vào link khi MUA <span class="text-orange-500 font-bold uppercase">BẤT KỲ THỨ GÌ</span> trên <span class="text-orange-500 font-bold">Shopee</span> để hỗ trợ HAKO. Có thể được tặng mã Free ship khi mua.
                                </p>
                            </div>

                            <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto flex-shrink-0">
                                <a href="https://s.shopee.vn/4q9eci0DM3" target="_blank" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-2 px-6 rounded shadow-md transition-all text-center whitespace-nowrap" rel="noopener noreferrer">
                                    Shopee
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="chapter-content" class="long-text no-select text-justify">
                    <p style="display: none">Chương 2.1</p>
                    <p id="1">Một tuần sau, cả nhóm đã sẵn sàng trở về Nhị giới.</p><p id="2">“Được rồi. Vậy chúng ta đến Palmare thôi.” Reid đảo mắt nhìn qua các đồng đội một lượt, gật đầu rồi quay sang Elria. “Để cho chắc chắn, Elria, khi quay về, bọn anh có thể dịch chuyển thẳng về đây chứ?”</p><p id="3">Elria gật đầu. “Tất nhiên rồi. Em đã nắm được dòng ma lực của Cây Thế Giới ở phía bên kia, nên chỉ cần kéo một dòng ma lực tương tự từ Đế đô rồi nối hai bên lại. Sau đó, em điều chỉnh tọa độ điểm ra của khe nứt không gian trên biển sang thảo nguyên ngay ngoài kinh đô.”</p><p id="4">“Nói ngắn gọn là ổn hết?”</p><p id="5">“Vâng. Nếu chấm điểm thì hoàn hảo mười trên mười.”</p><p id="6">“Tốt quá. Vậy là được rồi.” Reid cười. “Anh sẽ cố xử lý mọi thứ nhanh nhất có thể. Trong lúc đó, nơi này giao lại cho em.”</p><p id="7">Trong khi hai người trò chuyện, những người còn lại cũng lần lượt nói lời tạm biệt.</p><p id="8">“Hẹn gặp lại nhé, cô Alma với Wiesel,” Millis nói. “Hãy chờ quà của em đi! Đảm bảo ngon lành đến mức hai người sẽ ước gì đã về cùng bọn em!”</p><p id="9">Wiesel bật cười. “Tôi không nghi ngờ điều đó đâu, tiêu thư Millis.”</p><p id="10">“Tôi chỉ cần đồ ăn ngon thôi,” Alma nói. “Mang về cho tôi chút là được.”</p><p id="11">“Rõ! Xin hết!” Millis quay ngoắt lại, nhe răng cười với Valtos. “Chúc may mắn nhé, Valtos! Nghe nói ngài sẽ phải vác khá nhiều hành lý cho tôi với Norn đấy.”</p><p id="12">“Tch… Không ngờ một hoàng thái tử như ta đây lại bị đày đọa xuống mức lao động tay chân hèn mọn thế này… Trái tim ta khao khát phản kháng, nhưng thân xác lại khiếp sợ cú chích điện tất yếu đang chờ phía trước…!”</p><p id="13">Ariel liếc cậu ta bằng ánh mắt lạnh tanh. “Ai là người đã tự miệng tuyên bố, không ai ép buộc, rằng sẽ không giúp chúng tôi chiến đấu nhỉ? Nói thật, anh chỉ có thể tự trách mình thôi.” Cô thở dài, rồi quay sang hai cô gái nhà Lambut với nụ cười. “Xin hãy yên tâm, tôi sẽ đích thân đảm bảo an toàn cho mọi người.”</p><p id="14">“Cảm ơn chị!” Norn reo lên. “Mấy chuyện khó khăn nhờ chị nha, còn em thì chỉ việc tận hưởng chuyến đi thôi!”</p><p id="15">Sau màn chia tay rôm rả, cả nhóm lên một con thuyền nhỏ tại cảng và cuối cùng cũng nhổ neo. Họ đứng ở đuôi thuyền, vừa vẫy tay vừa gọi lớn, cho đến khi con thuyền khuất hẳn ngoài khơi xa.</p><p id="16">Chỉ đến lúc đó, Elria mới buồn bã hạ tay xuống. “Họ đi rồi…”</p><p id="17">“Ừm,” Alma lẩm bẩm. “Từ khi chiếm được Đế đô, chỗ này lúc nào cũng nhộn nhịp vì có thêm bao nhiêu người mới, nhưng xem ra sắp tới sẽ yên ắng hơn nhiều.”</p><p id="18">Wiesel gật đầu. “Đúng thế. Nhưng chúng ta cũng có việc của mình. Chỉ cần tập trung làm việc, chắc sẽ chẳng có thời gian mà nhớ họ đâu.”</p><p id="19">“Có em với Elria thôi,” Alma nhún vai. “Còn tôi thì sao? Ngoài việc dồn một đống bài huấn luyện cho binh sĩ rồi nhìn họ sống dở chết dở ra, tôi còn làm gì nữa đâu.”</p><p id="20">“Em đã có thể tưởng tượng cảnh cô chán quá rồi bảo họ đánh nhau đến chết cho vui…” Wiesel lẩm bẩm.</p><p id="21">“Em nghĩ tôi là quý tộc biến thái à?” Alma tặc lưỡi. “Huấn luyện là để họ mạnh lên, không phải để chết.” Cô lắc đầu. “Tất nhiên là cùng lắm cũng chỉ bị đánh thừa sống thiếu chết thôi.”</p><p id="22">Wiesel cười, mặt hơi tái đi. “Và đó, cô Alma ạ, chính là lý do em thấy thương cho những binh sĩ… Cô với tiểu thư Elria đúng là tàn nhẫn nhất trong huấn luyện.” Cậu ngẫm nghĩ một lúc rồi quay sang Elria. “Nhân tiện, tiểu thư Elria này, trong cuộc họp lúc nãy, cậu có nói là có một nhiệm vụ rất quan trọng cần đến cô Alma. Có cần tôi giúp không?”</p><p id="23">“Ừm… Cậu nói đúng. Chắc là có đấy,” Elria đáp. “Càng nhiều thông tin càng tốt. Và càng có nhiều ý kiến trong giai đoạn đánh giá thì kết quả càng chính xác.”</p><p id="24">“Được rồi. Cứ gọi tôi bất cứ lúc nào cậu cần.”</p><p id="25">“Thực ra, mình muốn bắt đầu ngay.” Elria nói. “Họ có thể quay lại sớm nhất là trong vòng một tháng… Nếu muốn hoàn thành trước lúc đó, thì không được lãng phí dù chỉ một giây.” Cô gật đầu kiên quyết, đặt tay phải lên vai Alma. “Cô Alma, em cần cô triệu tập Lyatt và Tiana, cùng với các chỉ huy cấp cao của Liên minh, nói chung là những người từng làm việc với Reid nhiều nhất. Ai đang bận thì có thể bỏ qua.”</p><p id="26">Alma chớp mắt. “Hả? Em muốn tôi triệu tập hết bây giờ sao?”</p><p id="27">“Vâng, ngay bây giờ,” Elria khẳng định. “Nếu ma lực không đủ thì đã đến lúc phải n――”</p><p id="28">“Tôi đủ ma lực!” Alma gắt lên, đã bắt đầu niệm chú giữa chừng. Mối đe dọa từ mấy bình thuốc hồi ma lực quả thực là động lực cực lớn. Chỉ trong chốc lát, những hạt ánh sáng xuất hiện trong không trung, kết thành vài bóng người.</p><p id="29">“Ahahahaha! Lại triệu hồi ta nữa à! Lần này chắc chắn là có đánh nhau rồi, đúng không?!” Blofeld gầm lên, phô trương cơ bắp. “Nói trước nhé, mấy bắp thịt này không phải để làm mấy việc tẻ nhạt kiểu vác thùng với xây dựng đâu!”</p><p id="30">“Blo… Chẳng phải ông già đã dặn chúng ta rằng sẽ không có chiến đấu trong một thời gian sao?” Felius lẩm bẩm, trông mệt mỏi. “Sống hơn trăm năm không có nghĩa là được phép lú lẫn đâu…”</p><p id="31">“Này! Ý ngươi là ta già rồi lẩm cẩm chứ gì?! Ta nói cho mà biết, ta còn nhớ rõ tuần trước mỗi ngày ta ăn gì, sáng, trưa, tối đầy đủ! Dám bảo ta lẫn à?!”</p><p id="32">Vance nhìn ông ta bằng ánh mắt lạnh lẽo. “Blo… Ngươi quên mất là ngươi ăn năm bữa một ngày rồi sao? Đừng nói nội dung bữa ăn, ngươi còn chẳng đếm nổi số bữa. Có khi là lú thật rồi.”</p><p id="33">“Blo to. To nên không để ý chuyện nhỏ,” Echalot nói, vừa nhai thịt khô. “Nhìn tôi đi. Tôi nhỏ, nhưng kiên nhẫn lớn. Nên tôi mặc kệ hắn ta.”</p><p id="34">“Echalot, thứ cô cần lo là thói quen ăn vặt của mình,” Vance quở trách. “Mà khoan, cô lấy miếng thịt khô đó ở đâu ra? Chúng ta đâu cần ăn…”</p><p id="35">“Người trong lâu đài cho. Tôi nhỏ. Cần ăn nhiều để lớn.”</p><p id="36">“Tôi không nghĩ người chết còn lớn lên được đâu…”</p><p id="37">Giữa đám binh sĩ ồn ào, Tiana và Lyatt bước lên phía trước, nghiêm chỉnh chào Elria.</p><p id="38">“Báo cáo, thưa sư phụ,” Tiana nói.</p><p id="39">“Thay mặt Bệ hạ, tôi đã tập hợp các đội trưởng của từng phân đội thuộc Lực lượng Liên minh Đặc biệt Altein trước đây,” Lyatt báo cáo. “Chúng tôi sẽ thực hiện mệnh lệnh của Hiền nhân Vegalta với toàn bộ khả năng.”</p><p id="40">“Cảm ơn hai người.” Elria gật đầu. Cô chỉnh lại sắc mặt, đứng thẳng lưng rồi tiếp tục. “Với các thành viên hiện diện, chúng ta sẽ tiến hành một cuộc họp cực kỳ quan trọng. Mọi nội dung thảo luận hôm nay đều được xếp vào tuyệt mật.”</p><p id="41">Tiếng ồn ào lập tức biến mất. Tất cả đều đứng nghiêm, hướng ánh mắt về Elria.</p><p id="42">“Giờ thì…” Cô đảo mắt nhìn quanh một vòng, rồi chậm rãi cất lời. “Hãy nói cho tôi biết… tất cả những gì các người biết về Reid.”</p><p id="43">Không gian chìm trong im lặng. Không một ai lên tiếng hay cử động. Cuối cùng, sau một khoảng thời gian dài như vô tận, Lyatt chậm rãi giơ tay. “Hiền nhân của Vegalta, xin cho phép tôi hỏi một câu?”</p><p id="44">“Được. Và anh có thể gọi tôi bằng tên.”</p><p id="45">“Vậy thì, thưa ngài Elria, xin ngài cho biết phạm vi cụ thể của ‘tất cả những gì chúng tôi biết về Bệ hạ’ là gì?”</p><p id="46">“Tất cả,” Elria lặp lại, ánh mắt nghiêm túc đến mức đáng sợ. “Anh ấy thích gì, ghét gì, giỏi gì, không giỏi gì, thích kiểu người nào, không thích kiểu người nào, một nghìn năm trước thường sinh hoạt ra sao, thói quen, sinh nhật, nơi sinh, nhóm máu… Bất cứ thứ gì các anh có thể nói cho tôi.”</p><p id="47">“Rõ. Tôi xin hỏi thêm một câu nữa?”</p><p id="48">“Ừm. Cho phép.”</p><p id="49">“Có khả năng thông tin chúng tôi có trùng với những gì ngài đã biết. Ngài có thể cho chúng tôi biết trước những điều cô đã nắm được không?”</p><p id="50">“Anh ấy thích chiến đấu, đồ ăn đậm vị, và động vật.”</p><p id="51">“Xin cảm ơn thông tin của ngài. Tôi chưa biết đến mục cuối cùng. Tôi sẽ phỏng vấn các thành viên khác trong lữ đoàn để xác thực thông tin mới này.”</p><p id="52">“Ừm. Tôi nghe nói anh từng làm trợ lý cho Reid. Trông cậy vào anh đấy.”</p><p id="53">Cuộc trao đổi giữa Elria và Lyatt diễn ra trôi chảy, nhưng những người còn lại vẫn im thin thít. Một lúc sau, Wiesel nhăn mặt, nghiêng người thì thầm với Alma.</p><p id="54">“Cô Alma, vì sao cuộc nói chuyện này lại bắt đầu một cách… bình thường đến thế?”</p><p id="55">“Chắc tại Lyatt nghiêm túc quá,” cô đáp, vẻ mặt cũng bất lực không kém.</p><p id="56">May mắn cho họ, và cho toàn bộ lữ đoàn, Tiana đã đứng ra hỏi câu mà ai cũng đang nghĩ trong đầu: “Ờm, thưa sư phụ… ‘cuộc họp cực kỳ quan trọng’ này… là để hỏi về Reid Frieden sao?”</p><p id="57">“Ừm.”</p><p id="58">“Vậy sao sư phụ không hỏi thẳng chính chủ ấy?”</p><p id="59">Elria bĩu môi. “Tôi… ngại…”</p><p id="60">“Đúng là sư phụ Elria của em!” Tiana reo lên. “Ngại không dám hỏi… ôi, thật đáng yêu! Vậy thì chúng ta hãy thu thập càng nhiều thông tin càng tốt! Thông tin từ bên thứ ba, khi được tổng hợp đủ nhiều, cũng có độ chính xác rất cao!”</p><p id="61">“Và lại thêm một người nữa chấp nhận mệnh lệnh như thể đó là chuyện hiển nhiên,” Wiesel nói.</p><p id="62">“Em mong đợi gì khác từ fan cuồng chính hiệu cơ chứ,” Alma đáp, ánh mắt trống rỗng như thể đã hoàn toàn buông xuôi.</p><p id="63">Elria liếc Alma một cái sắc lẹm. Với cô, đây thực sự là một cuộc họp quan trọng, và cô hy vọng Alma sẽ nghiêm túc hơn.</p><p id="64">“Nhưng, sư phụ ơi,” Tiana tiếp lời, “tại sao sư phụ lại thu thập thông tin vào lúc này?”</p><p id="65">“Ừm… Vì tôi nhận ra rằng mình đang chịu một thất bại áp đảo.” Elria nói, đưa cho Tiana một cuốn sổ nhỏ. “Nhìn cái này đi.”</p><p id="66">“Đây là… ghi chú của Ngài Frieden?”</p><p id="67">“Ừm. Reid nhờ tôi đưa cho em, để em chăm sóc tôi trong lúc anh ấy vắng mặt. Trong này có ghi cách pha trà sữa đúng kiểu tôi thích, điều mà anh ấy phải thử đi thử lại rất nhiều lần mới tìm ra đấy, kể cả nhiệt độ chuẩn xác; cách điều chỉnh nước tắm để kéo tôi ra khỏi trạng thái lơ lửng nhanh nhất; cách sắp xếp quần áo có tính đến thói quen tôi tìm đồ từ kệ bên trái… cùng vô số điều khác mà Reid đã quan sát về tôi.”</p><p id="68">“Ông già đấy đã chăm sóc sư phụ kỹ lưỡng đến mức đó suốt thời gian qua sao?!” Tiana nghiến răng, nắm chặt tay. “Anh hùng của Altein… Quả là đáng gờm!”</p><p id="69">Elria mỉm cười đắc ý. “Ừm. Tuyệt vời, phải không?”</p><p id="70">Với nội dung cuộc trò chuyện càng lúc càng kỳ quặc, Alma cười khan. “Này Wiesel, nghĩ kỹ thì buồn cười thật đấy, khi mà tất cả mấy người này xếp hàng ở đây chỉ để nghe cấp trên của mình… bán cơm chó.”</p><p id="71">“Giá mà có Millis ở đây thì hay rồi,” Wiesel thở dài. “Cậu ấy chắc chắn sẽ nói ra được câu chuẩn nhất. Tiếc là chúng ta không có tài năng cho mấy việc này.”</p><p id="72">Elria phớt lờ hoàn toàn mấy lời bình luận phía sau, siết chặt nắm tay. “Trong chiến tranh, thông tin là then chốt, và tôi không thể chấp nhận việc mình đang thua thảm hại trước đối thủ cũ. Vì vậy, tôi sẽ tận dụng thời gian anh ấy vắng mặt để giành lấy chiến thắng lớn hơn.” Cô cau mày, giơ cao nắm tay, tuyên bố đầy khí thế: “Với chiến dịch này, tôi sẽ hiểu Reid nhiều hơn… và trở thành người vợ tuyệt vời nhất trên đời!”</p><p id="73">◇</p><p id="74"><em>Bon voyage ♬</em></p>

                    <p style="display: none">Hãy bình luận để ủng hộ người đăng nhé!</p>
                    
                    <!-- <div class="flex justify-center mt-10 mb-7 space-x-3">
                        <a
                            href="https://hako.vn/discord"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #7289da; text-decoration: initial; color: white !important;">
                            <svg
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                xmlns="http://www.w3.org/2000/svg"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                viewbox="0 0 24 24">
                                <path
                                d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" />
                            </svg>
                            Discord
                        </a>
                        <a
                            href="https://fb.com/hako.page"
                            target="_blank"
                            type="button"
                            data-te-ripple-init
                            data-te-ripple-color="light"
                            class="flex font-sans rounded px-6 py-2.5 text-xs font-medium uppercase leading-normal text-white shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg"
                            style="background-color: #1877f2; text-decoration: initial; color: white !important;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="mr-2 h-4 w-4"
                                fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                            </svg>
                            Facebook
                        </a>
                    </div> -->

                                        <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/3269685b-c0ef-4013-a7d6-74104f39a24c.jpg?t=1739894654" class="d-none d-md-block" style="width: 970px; height: auto">
                    </a>
                    <a href="/truyen/8476" target="__blank">
                        <img src="https://i.hako.vn/ln/series/chapter-banners/8476/bf1184be-cf52-429e-8acb-0d29fb4eea33.jpg?t=1739894654" class="d-md-none" style="width: 100%; height: auto">
                    </a>
                    
                                    </div>

                <div style="text-align: center; margin: 20px auto 10px auto;">
                                                        </div>
                
                <section class="rd-basic_icon row">
                    <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308464-chuong-14" class="dark:text-black col text-center "><i class="fas fa-backward"></i></a>
                    <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon" class="dark:text-black col text-center"><i class="fas fa-home"></i></a>
                    <a href="/truyen/14866-eiyuu-to-kenja-no-tensei-kon/c308466-chuong-22" class="dark:text-black col text-center "><i class="fas fa-forward"></i></a>
                </section>
                
                <!--the code style is important to keep this comment section be out of the effect of user reading's setting-->
            </div>
            <div class="col-12 col-lg-10 offset-lg-1" aria-hidden="true">
                <section id="chapter-comments" class="basic-section dark:bg-[#1f1f1f] dark:text-white dark:border dark:border-[#1f1f1f]">
                    <header class="sect-header tab-list dark:bg-[#2a2a2a] dark:border-[#2a2a2a]"> 
                        <span class="sect-title tab-title" data-tab-index="1">Bình luận <span class="comments-count">(0)</span></span>
                    </header>
                    <main id="fbcmt_root" class="sect-body">
                        <span style="padding: 10px; display: inline-block;">Báo cáo bình luận không phù hợp ở <a href="/thao-luan/619-bao-cao-binh-luan" style="color: blue">đây</a></span>
                        <div id="tab-content-1" class="tab-content clear">
                            <section class="ln-comment">
    <header>
        <h3 class="text-lg font-bold dark:text-white">0 Bình luận </h3>
        <!-- <i id="refresh_comment" class="fas fa-refresh" aria-hidden="true" style="margin-left: 10px; font-size: 18px"></i></h3> -->
            </header>

    <main class="ln-comment-body">
                    <div class="ln-comment_sign-in long-text">
                Bạn phải <a href="/login">đăng nhập</a> hoặc <a href="/register">tạo tài khoản</a> để bình luận.
            </div>
                
        
        
        <div class="ln-comment-page">
</div>    </main>

    <script>
        var token = 'WZuXhYrNpEtL1VRZWnYoi5xahtsHgUNcPsv637KW';
        var comment_type = 'chapter';
        var comment_typeid = '308465';
    </script>

    </section>


                        </div>
                    </main>
                </section>
            </div> 
        </div>
    </div>
</main>

<script>
    token = 'WZuXhYrNpEtL1VRZWnYoi5xahtsHgUNcPsv637KW';
        
    function turnoffall() {
        $(".rdtoggle").removeClass("on");
        $(".rdtoggle_body").removeClass("animation fade-in-left-big fade-in-down");
        $("html").removeClass("overflow-hiden");
    }
    
    function rdtoggle(classicon, effect) {
        if ($(classicon).hasClass("on")) {
            turnoffall();
        } else {
            turnoffall();
            $(classicon).addClass("on");
            $("html").addClass("overflow-hiden");
            $(classicon + " .rdtoggle_body").addClass("animation " + effect);
        } 
    };
    
    $("#rd-setting_icon").on('click', function() {
        rdtoggle("#setting", "fade-in-down");                   
    });

    $("#rd-tts_icon").on('click', function() {
        rdtoggle("#tts-panel", "fade-in-down");
    });
        
    $("#rd-info_icon").on('click', function() {
        rdtoggle("#chapters", "fade-in-left-big");              
    });
        
    $("#rd-bookmark_icon").on('click', function() {
        rdtoggle("#bookmarks", "fade-in-left-big");                     
    });
        
    $(".black-click").on('click', function() {
        turnoffall();
        $("#rd-side_icon").hide();
        $("#bookmark_top").removeClass("on");
    });
        
    var bgcolor    = Cookies.get('color') || (Cookies.get('night_mode') ? 6 : 4);
    var fontfamily = Cookies.get('fontfamily') || '';
    var fontsize   = Cookies.get('font') || 18; 
    var margin     = Cookies.get('margin') || 0;
    var textAlign  = Cookies.get('textAlign') || 'text-justify';
        
    function setcolor(alter = true) {
        var switcher = $(".set-color .set-input span").eq(bgcolor);
        switcher.addClass("current");

        if (alter) {
            for (var i = 0; i < $(".set-color .set-input span").length; i++) {
                $("#mainpart").removeClass('style-' + i);
                $("#mainpart").removeClass('dark');
            }
            $("#mainpart").addClass('style-' + bgcolor);

            // Manually hardcoded to dark
            if (bgcolor >= 6) {
                $("#mainpart").addClass('dark');
            }
        }
    }

    // This creates unsmooth experience so we only use it for select box
    function setfontfamily() {
        $('.set-font-family select option').filter(function () {
            return fontfamily.split(',')[0].indexOf($(this).text()) != -1 ;
        }).attr('selected', true);
    }
        
    function setfontstyle(alter = true) {
        $(".set-font input.set-slide_input").val(fontsize + "px"); 

        if (alter) {
            $("div#chapter-content").css("font-size", fontsize + "px");

            var lineheight = +fontsize + 10;
            $("#chapter-content").css("line-height", lineheight + "px");
        }
    }
        
    function setmargin() {
        $(".set-margin input.set-slide_input").val(margin + "px"); 
        $("#chapter-content").css({
            'padding-left': margin + "px",
            'padding-right': margin + "px"
        });
    }

    function setTextAlign(alter = true) {
        var switcher = $(".set-text-align .set-input span[data-align='" + textAlign + "']");
        switcher.addClass("current");

        if (alter) {
            $(".set-text-align .set-input span").each(function () {
                $("#chapter-content").removeClass($(this).attr('data-align'));
            });

            $("#chapter-content").addClass(textAlign);
        }
    }
    
    setcolor(false);
    setfontfamily();
    setfontstyle(false);
    setmargin();
    setTextAlign(true);
    
    //1px = 0.0625rem;
    //16px = 1rem (default);
    
    $(".set-color .set-input span").click(function(){
        bgcolor = $(this).data("id");
        $(".set-color .set-input span").removeClass("current");
        setcolor();            
        Cookies.set('color', bgcolor, { expires: 365 });
    });

    $('.set-font-family select').on('change', function () {
        fontfamily = "'" + $('option:selected', this).text() + "', " + '\'Times New Roman\', Georgia, serif';
        
        $('div#chapter-content').css('font-family', fontfamily);

        Cookies.set('fontfamily', fontfamily, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-smaller").click(function () {
        fontsize = fontsize - 2;
        if (fontsize < 0) fontsize = 0;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-font .set-slide_button.set-bigger").click(function () {
        fontsize = +fontsize + 2;
        setfontstyle();
        Cookies.set('font', fontsize, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-smaller").click(function () {
        margin = margin - 20;
        if (margin < 0) margin = 0;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    });
    
    $(".set-margin .set-slide_button.set-bigger").click(function () {
        margin = +margin + 20;
        setmargin();
        Cookies.set('margin', margin, { expires: 365 });
    }); 

    $(".set-text-align .set-input span").click(function(){
        textAlign = $(this).data("align");
        $(".set-text-align .set-input span").removeClass("current");
        setTextAlign();        
        Cookies.set('textAlign', textAlign, { expires: 365 });
    });
        
    $("#bookmarks_list li").each(function(){
        var linepr = $(this).data("line");
        var preview = $(".reading-content p#" + linepr).text();

        var shortText = preview.trim().substring(0, 30) + "...";
        $(this).find(".pos_bookmark small").text(shortText);
    });

    $('div#chapter-content').html(
        $('div#chapter-content').html().replace(
            /\[note(\d+)\]/gi, 
            '<span id="anchor-note$1" class="note-icon none-print inline note-tooltip" data-tooltip-content="#note$1 .note-content" data-note-id="note$1"><i class="fas fa-sticky-note"></i></span><a id="anchor-note$1" class="inline-print none" href="#note$1">[note]</a>'
        )
    )
    
    tippy('.note-tooltip', {
        delay: 50,
        maxWidth: 240,
        interactive: true,
        content(ref) {
            const selector = ref.getAttribute('data-tooltip-content');
            const template = document.querySelector(selector);
            return template ? template.innerHTML : 'Đặt sai ID của note';
        }
    });
        
    isLoggedIn = 0;
    series_id = parseInt('14866');
    chapter_id = parseInt('308465');

    readingObject = {
        series_id: series_id,
        series_title: 'Đính ước với đối thủ cũ, chúng tôi trở thành cặp đôi mạnh nhất',
        series_url: $('i.fa-home').first().parent().attr('href'),
        series_cover: $('.rd_sidebar-header a.img').css('background-image'),
        chapter_title: $('ul.sub-chap_list li.current a').text().trim(),
        chapter_url: $('ul.sub-chap_list li.current a').attr('href'),
        book_title: $('ul#chap_list > li.current a').text(),
        book_url: $('ul#chap_list > li.current a').attr('href'),
        read_time: +new Date() / 1000 | 0,
    };

// TTS Manager - Enhanced Web Speech API (Vietnamese). Chunked queue for long texts, no delays/interrupts.
const synth = window.speechSynthesis;
let voices = [];
let voicesLoaded = false;
let ttsRate = parseFloat(localStorage.getItem('tts-rate')) || 1;
let ttsPitch = parseFloat(localStorage.getItem('tts-pitch')) || 1;
let ttsState = 'idle'; // idle, speaking, paused, loading
let currentChunk = 0;
let totalChunks = 0;
let processingIndex = 0;
let paragraphs = [];
const BUFFER_SIZE = 5;

// --- Background Persistence (Wake Lock + Silent Audio) ---
let wakeLock = null;
const silentAudio = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTSVNFAAAAPAAADEVuY29kZWQgd2l0aCBMYW1lMy4xMDBhVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUA==');
silentAudio.loop = true;

async function enableConnection() {
    // 1. Start Silent Audio Loop (tricks browser into thinking we are a music player)
    try {
        await silentAudio.play();
    } catch (err) {
        console.warn('Silent Audio Play Failed (likely no interaction):', err);
    }

    // 2. Request Screen Wake Lock (prevents screen from sleeping automatically)
    if ('wakeLock' in navigator) {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (err) {
            console.warn('Wake Lock Request Failed:', err);
        }
    }
}

function disableConnection() {
    // 1. Stop Silent Audio
    try {
        silentAudio.pause();
        silentAudio.currentTime = 0;
    } catch (e) {}

    // 2. Release Wake Lock
    if (wakeLock) {
        try {
            wakeLock.release();
            wakeLock = null;
        } catch (e) {}
    }
}

// Re-acquire Wake Lock if visibility changes and we are speaking
document.addEventListener('visibilitychange', async () => {
    if (wakeLock !== null && document.visibilityState === 'visible' && ttsState === 'speaking') {
        try {
            wakeLock = await navigator.wakeLock.request('screen');
        } catch (e) {}
    }
});
// ---------------------------------------------------------

let ttsVoiceIdx = localStorage.getItem('tts-voice') || '0';

function populateVoices() {
    voices = synth.getVoices().filter(v => v.lang.startsWith('vi'));
    voicesLoaded = true;
    let $select = $('#tts-voice-select');
    $select.empty();

    if (voices.length === 0) {
        $select.append('<option value="-1">Không có giọng Việt (cài Chrome/Edge)</option>');
        return;
    }

    voices.forEach((voice, idx) => {
        $select.append(`<option value="${idx}">${voice.name} (${voice.lang}) ${voice.default ? '(mặc định)' : ''}</option>`);
    });

    let idx = Math.max(0, Math.min(parseInt(ttsVoiceIdx), voices.length - 1));
    $select.val(idx);
}

function updateTTSUI(progress = '') {
    let $icon = $('#rd-tts_icon i');
    $icon.removeClass('fa-volume-up fa-volume-mute fa-spinner fa-spin');
    let $playBtn = $('#tts-play-btn'), $pauseBtn = $('#tts-pause-btn'), $stopBtn = $('#tts-stop-btn');
    $playBtn.prop('disabled', ttsState === 'speaking' || ttsState === 'loading'); // Enable on idle/paused
    $pauseBtn.prop('disabled', ttsState === 'idle');
    $stopBtn.prop('disabled', ttsState === 'idle');
    // Always remove old progress
    $('#tts-progress').remove();

    if (progress && totalChunks > 0) {
        $playBtn.after(`<span id="tts-progress" class="text-xs block text-center mt-1">${progress}</span>`);
    }

    if (ttsState === 'idle') {
        // Check resume preview
        const resumeData = loadResumeState();
        let currentParagraphs = $('#chapter-content p').map(function() {
            return $(this).text().trim();
        }).get().filter(p => p.trim().length > 0);

        if (resumeData && resumeData.total === currentParagraphs.length) {
            $playBtn.text(`Tiếp tục (${resumeData.index + 1}/${resumeData.total})`);
        } else {
            $playBtn.text('Phát');
        }

        $icon.addClass('fa-volume-up');
    } else if (ttsState === 'speaking' || ttsState === 'loading') {
        $icon.addClass('fa-volume-up fa-spinner fa-spin');
    } else if (ttsState === 'paused') {
        $icon.addClass('fa-volume-mute');
    }
}

$('#tts-play-btn').off('click').on('click', function() {
    // Always restart/resume from storage
    enableConnection(); // Start keep-alive
    synth.cancel();
    ttsState = 'idle';
    // queuedUtterances = []; // Removed global queue
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();

    if (!voicesLoaded || voices.length === 0) {
        ttsState = 'loading';
        updateTTSUI();
        setTimeout(() => {
            if (!voicesLoaded) {
                alert('Giọng nói chưa tải. Thử lại.');
                ttsState = 'idle';
                updateTTSUI();
                return;
            }
            playTTS();
        }, 500);
        return;
    }

    playTTS();
});

function createUtterance(item) {
    let u = new SpeechSynthesisUtterance(item.text);
    u.lang = 'vi-VN';
    u.rate = parseFloat($('#tts-rate').val()) || 1;
    u.pitch = parseFloat($('#tts-pitch').val()) || 1;
    let voiceIdx = parseInt($('#tts-voice-select').val());

    if (voiceIdx >= 0 && voices[voiceIdx]) {
        u.voice = voices[voiceIdx];
    }

    u.onstart = () => {
        currentChunk++;
        saveResumeState();
        updateTTSUI(`${currentChunk}/${totalChunks}`);
        
        // Highlight logic
        $('.current-reading').removeClass('current-reading');
        if (item.el) {
            $(item.el).addClass('current-reading');
            item.el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        feedQueue(); // Ensure buffer is maintained
    };
    u.onerror = (event) => {
        console.error('TTS Error:', event.error, event);

        if (event.error !== 'interrupted') {
             // alert(`Lỗi TTS: ${event.error}. Bỏ qua đoạn.`);
             console.warn('TTS Error skipping chunk', event.error);
        }

        saveResumeState(); // Save on error
        feedQueue();
    };
    u.onend = () => {
        saveResumeState();

        if (currentChunk >= totalChunks) {
            clearResumeState();
            $('.current-reading').removeClass('current-reading'); // Cleanup
            
            // Auto-Next Logic
            let $nextBtn = $('.rd-basic_icon a').last();
            if ($nextBtn.length && !$nextBtn.hasClass('disabled')) {
                localStorage.setItem('tts-autoplay', 'true');
                window.location.href = $nextBtn.attr('href');
                return;
            }

            ttsState = 'idle';
            disableConnection(); // Cleanup
            currentChunk = 0;
            totalChunks = 0;
            processingIndex = 0;
            updateTTSUI();
        } else {
            feedQueue();
        }
    };
    u.onpause = () => { saveResumeState(); };
    return u;
}

function getStorageData() {
    try {
        return JSON.parse(localStorage.getItem('tts-resume-data')) || {};
    } catch {
        return {};
    }
}

function setStorageData(data) {
    localStorage.setItem('tts-resume-data', JSON.stringify(data));
}

function saveResumeState() {
    if (totalChunks > 0) {
        const data = getStorageData();
        data[chapter_id] = {
            index: currentChunk,
            total: totalChunks,
            timestamp: Date.now()
        };
        // Optional: Clean up old entries (older than 7 days?) to prevent infinite growth, 
        // but for now we just save.
        setStorageData(data);
    }
}

function clearResumeState() {
    const data = getStorageData();

    if (data[chapter_id]) {
        delete data[chapter_id];
        setStorageData(data);
    }
}

function loadResumeState() {
    const data = getStorageData();
    const saved = data[chapter_id];
    
    if (!saved) return null;
    
    if (Date.now() - saved.timestamp > 3600000 * 24 * 7) { // 7 days
        clearResumeState();
        return null;
    }

    return saved;
}

function initTTS() {
    populateVoices();
    $('#tts-rate').val(ttsRate);
    $('#tts-rate-value').text(ttsRate);
    $('#tts-pitch').val(ttsPitch);
    $('#tts-pitch-value').text(ttsPitch);
    updateTTSUI();
    
    if (localStorage.getItem('tts-autoplay') === 'true') {
        localStorage.removeItem('tts-autoplay');
        $(window).on('load', function() {
             setTimeout(() => {
                 $('#tts-play-btn').click(); 
             }, 500); 
        });
    }
}

function getParagraphs() {
    return $('#chapter-content p').map(function() {
        let text = $(this).text().trim();
        
        // If paragraph contains an image, replace with "Hình ảnh"
        if ($(this).find('img').length > 0) {
            text = 'Hình ảnh';
        }
        
        if (text.length > 0) {
            return { text: text, el: this };
        }
    }).get();
}

function feedQueue() {
    if (ttsState !== 'speaking') return;
    
    // Maintain buffer
    while (processingIndex < totalChunks && processingIndex < currentChunk + BUFFER_SIZE) {
        let u = createUtterance(paragraphs[processingIndex]);
        synth.speak(u);
        processingIndex++;
    }
}

function playTTS() {
    paragraphs = getParagraphs();
    if (paragraphs.length === 0) {
        alert('Không có nội dung để đọc.');
        ttsState = 'idle';
        disableConnection(); // Cleanup
        updateTTSUI();
        return;
    }
    
    const resumeData = loadResumeState();
    if (resumeData && resumeData.total === paragraphs.length) {
        currentChunk = resumeData.index;
        totalChunks = resumeData.total;
        // processingIndex needs to match what we are about to play
        // Current chunk is what finished, so we start processing from currentChunk?
        // Wait, currentChunk is "index of just finished" in some contexts?
        // No, in loadResume, index is currentChunk.
        // If saved index is 5. means 0..4 played.
        // We start playing from 5 (index).
        // So processingIndex = currentChunk.
        processingIndex = currentChunk;
    } else {
        clearResumeState();
        currentChunk = 0;
        totalChunks = paragraphs.length;
        processingIndex = 0;
    }
    
    synth.cancel();
    ttsState = 'speaking';
    
    feedQueue();
    updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
}

$('#tts-rate').on('input', function() {
    $('#tts-rate-value').text(this.value);
    localStorage.setItem('tts-rate', this.value);
});

$('#tts-pitch').on('input', function() {
    $('#tts-pitch-value').text(this.value);
    localStorage.setItem('tts-pitch', this.value);
});

$('#tts-voice-select').on('change', function() {
    localStorage.setItem('tts-voice', this.value);
});

$('#tts-pause-btn').off('click').on('click', function() {
    if (ttsState === 'speaking') {
        synth.pause();
        ttsState = 'paused';
        disableConnection(); // Pause keep-alive
        updateTTSUI();
        saveResumeState();
    } else if (ttsState === 'paused') {
        enableConnection(); // Resume keep-alive
        synth.resume();
        ttsState = 'speaking';
        updateTTSUI();
    }
});

$('#tts-stop-btn').off('click').on('click', function() {
    synth.cancel();
    // clearResumeState(); // Stop doesn't necessarily clear resume, usually just pause? 
    // But UI says "Stop". Let's clear resume state to consistent with old behavior 
    // or maybe optional? Old behavior cleared it.
    clearResumeState();
    
    disableConnection(); // Stop keep-alive
    $('.current-reading').removeClass('current-reading'); // Cleanup
    ttsState = 'idle';
    currentChunk = 0;
    totalChunks = 0;
    processingIndex = 0;
    updateTTSUI();
});

// Visibility handler removed - TTS continues on tab switch

// Long-press to start TTS from selected paragraph (500ms hold)
let longPressTimer = null;
let longPressTarget = null;

// $('#chapter-content p').on('touchstart mousedown', function(e) {
//     longPressTarget = this;
//     longPressTimer = setTimeout(() => {
//         const allParagraphs = getParagraphs();
//         const startIndex = allParagraphs.findIndex(p => p.el === longPressTarget);

//         if (startIndex === -1) return;

//         clearResumeState();
//         synth.cancel();
        
//         paragraphs = allParagraphs;
//         currentChunk = startIndex;
//         totalChunks = paragraphs.length;
//         processingIndex = startIndex;
//         ttsState = 'speaking';
        
//         enableConnection();
//         feedQueue();
//         updateTTSUI(`${currentChunk + 1}/${totalChunks}`);
//     }, 500);
// }).on('touchend touchmove mouseup mouseleave', function() {
//     clearTimeout(longPressTimer);
//     longPressTimer = null;
// });

synth.onvoiceschanged = populateVoices;
initTTS();


</script>





    
    <script src="/scripts/service-manager.js?r=4"></script>

    <script src="/scripts/app.js?id=a5a24eca66adcfc75cc0b2f62e2611db"></script>
    <script src="https://docln.net/vendor/livewire/livewire.min.js?id=df3a17f2"   data-csrf="WZuXhYrNpEtL1VRZWnYoi5xahtsHgUNcPsv637KW" data-update-uri="/livewire/update" data-navigate-once="true"></script>

    
    <script src="https://confidecross.com/d5/6b/4b/d56b4bd6c3d2c1e161c4ab3c78c27670.js" async></script>

        
            <footer id="footer">
    <div class="container">
        <!--<span><a href="">Hako.re</a></span>-->
        <span class="right">Liên hệ: <a href="mailto:contact@hako.vn" target="_blank" style="color: #5fff46">contact@hako.vn</a></span>

        <span>© 2016 - 2026 Cổng Light Novel - Đọc Light Novel</span>
    </div>
</footer>    
    <div x-data x-show="$store.toast.on" @click="$store.toast.hide()" class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fixed w-3/4 md:w-1/2 z-20 inset-x-0 bottom-10 mx-auto" role="alert" style="display: none">
    <div class="flex">
        <div class="py-1"><svg class="fill-current h-6 w-6 text-teal-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
        <div>
            <p class="font-bold capitalize">Chú ý</p>
            <p class="text-sm" x-text="$store.toast.message"></p>
        </div>
    </div>
</div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cb6263378cb7b82',t:'MTc3MDY2OTI4NA=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
